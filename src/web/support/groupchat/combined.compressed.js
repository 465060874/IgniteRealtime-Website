function Sarissa(){}Sarissa.PARSED_OK="Document contains no parsing errors";Sarissa.PARSED_EMPTY="Document is empty";Sarissa.PARSED_UNKNOWN_ERROR="Not well-formed or other error";var _sarissa_iNsCounter=0;var _SARISSA_IEPREFIX4XSLPARAM="";var _SARISSA_HAS_DOM_IMPLEMENTATION=document.implementation&&true;var _SARISSA_HAS_DOM_CREATE_DOCUMENT=_SARISSA_HAS_DOM_IMPLEMENTATION&&document.implementation.createDocument;var _SARISSA_HAS_DOM_FEATURE=_SARISSA_HAS_DOM_IMPLEMENTATION&&document.implementation.hasFeature;var _SARISSA_IS_MOZ=_SARISSA_HAS_DOM_CREATE_DOCUMENT&&_SARISSA_HAS_DOM_FEATURE;var _SARISSA_IS_SAFARI=(navigator.userAgent&&navigator.vendor&&(navigator.userAgent.toLowerCase().indexOf("applewebkit")!=-1||navigator.vendor.indexOf("Apple")!=-1));var _SARISSA_IS_IE=document.all&&window.ActiveXObject&&navigator.userAgent.toLowerCase().indexOf("msie")>-1&&navigator.userAgent.toLowerCase().indexOf("opera")==-1;if(!window.Node||!Node.ELEMENT_NODE){Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};}if(typeof XMLDocument=="undefined"&&typeof Document!="undefined"){XMLDocument=Document;}if(_SARISSA_IS_IE){_SARISSA_IEPREFIX4XSLPARAM="xsl:";var _SARISSA_DOM_PROGID="";var _SARISSA_XMLHTTP_PROGID="";var _SARISSA_DOM_XMLWRITER="";Sarissa.pickRecentProgID=function(_1){var _2=false;for(var i=0;i<_1.length&&!_2;i++){try{var _4=new ActiveXObject(_1[i]);o2Store=_1[i];_2=true;}catch(objException){}}if(!_2){throw "Could not retreive a valid progID of Class: "+_1[_1.length-1]+". (original exception: "+e+")";}_1=null;return o2Store;};_SARISSA_DOM_PROGID=null;_SARISSA_THREADEDDOM_PROGID=null;_SARISSA_XSLTEMPLATE_PROGID=null;_SARISSA_XMLHTTP_PROGID=null;if(!window.XMLHttpRequest){XMLHttpRequest=function(){if(!_SARISSA_XMLHTTP_PROGID){_SARISSA_XMLHTTP_PROGID=Sarissa.pickRecentProgID(["Msxml2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"]);}return new ActiveXObject(_SARISSA_XMLHTTP_PROGID);};}Sarissa.getDomDocument=function(_5,_6){if(!_SARISSA_DOM_PROGID){_SARISSA_DOM_PROGID=Sarissa.pickRecentProgID(["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"]);}var _7=new ActiveXObject(_SARISSA_DOM_PROGID);if(_6){var _8="";if(_5){if(_6.indexOf(":")>1){_8=_6.substring(0,_6.indexOf(":"));_6=_6.substring(_6.indexOf(":")+1);}else{_8="a"+(_sarissa_iNsCounter++);}}if(_5){_7.loadXML("<"+_8+":"+_6+" xmlns:"+_8+"=\""+_5+"\""+" />");}else{_7.loadXML("<"+_6+" />");}}return _7;};Sarissa.getParseErrorText=function(_9){var _a=Sarissa.PARSED_OK;if(_9.parseError.errorCode!=0){_a="XML Parsing Error: "+_9.parseError.reason+"\nLocation: "+_9.parseError.url+"\nLine Number "+_9.parseError.line+", Column "+_9.parseError.linepos+":\n"+_9.parseError.srcText+"\n";for(var i=0;i<_9.parseError.linepos;i++){_a+="-";}_a+="^\n";}else{if(_9.documentElement==null){_a=Sarissa.PARSED_EMPTY;}}return _a;};Sarissa.setXpathNamespaces=function(_c,_d){_c.setProperty("SelectionLanguage","XPath");_c.setProperty("SelectionNamespaces",_d);};XSLTProcessor=function(){if(!_SARISSA_XSLTEMPLATE_PROGID){_SARISSA_XSLTEMPLATE_PROGID=Sarissa.pickRecentProgID(["Msxml2.XSLTemplate.6.0","MSXML2.XSLTemplate.3.0"]);}this.template=new ActiveXObject(_SARISSA_XSLTEMPLATE_PROGID);this.processor=null;};XSLTProcessor.prototype.importStylesheet=function(_e){if(!_SARISSA_THREADEDDOM_PROGID){_SARISSA_THREADEDDOM_PROGID=Sarissa.pickRecentProgID(["MSXML2.FreeThreadedDOMDocument.6.0","MSXML2.FreeThreadedDOMDocument.3.0"]);}_e.setProperty("SelectionLanguage","XPath");_e.setProperty("SelectionNamespaces","xmlns:xsl='http://www.w3.org/1999/XSL/Transform'");var _f=new ActiveXObject(_SARISSA_THREADEDDOM_PROGID);if(_e.url&&_e.selectSingleNode("//xsl:*[local-name() = 'import' or local-name() = 'include']")!=null){_f.async=false;if(_SARISSA_THREADEDDOM_PROGID=="MSXML2.FreeThreadedDOMDocument.6.0"){_f.setProperty("AllowDocumentFunction",true);_f.resolveExternals=true;}_f.load(_e.url);}else{_f.loadXML(_e.xml);}_f.setProperty("SelectionNamespaces","xmlns:xsl='http://www.w3.org/1999/XSL/Transform'");var _10=_f.selectSingleNode("//xsl:output");this.outputMethod=_10?_10.getAttribute("method"):"html";this.template.stylesheet=_f;this.processor=this.template.createProcessor();this.paramsSet=new Array();};XSLTProcessor.prototype.transformToDocument=function(_11){if(_SARISSA_THREADEDDOM_PROGID){this.processor.input=_11;var _12=new ActiveXObject(_SARISSA_DOM_PROGID);this.processor.output=_12;this.processor.transform();return _12;}else{if(!_SARISSA_DOM_XMLWRITER){_SARISSA_DOM_XMLWRITER=Sarissa.pickRecentProgID(["Msxml2.MXXMLWriter.6.0","Msxml2.MXXMLWriter.3.0","MSXML2.MXXMLWriter","MSXML.MXXMLWriter","Microsoft.XMLDOM"]);}this.processor.input=_11;var _13=new ActiveXObject(_SARISSA_DOM_XMLWRITER);this.processor.output=_13;this.processor.transform();var _14=new ActiveXObject(_SARISSA_DOM_PROGID);_14.loadXML(_13.output+"");return _14;}};XSLTProcessor.prototype.transformToFragment=function(_15,_16){this.processor.input=_15;this.processor.transform();var s=this.processor.output;var f=_16.createDocumentFragment();if(this.outputMethod=="text"){f.appendChild(_16.createTextNode(s));}else{if(_16.body&&_16.body.innerHTML){var _19=_16.createElement("div");_19.innerHTML=s;while(_19.hasChildNodes()){f.appendChild(_19.firstChild);}}else{var _1a=new ActiveXObject(_SARISSA_DOM_PROGID);if(s.substring(0,5)=="<?xml"){s=s.substring(s.indexOf("?>")+2);}var xml="".concat("<my>",s,"</my>");_1a.loadXML(xml);var _1c=_1a.documentElement;while(_1c.hasChildNodes()){f.appendChild(_1c.firstChild);}}}return f;};XSLTProcessor.prototype.setParameter=function(_1d,_1e,_1f){if(_1d){this.processor.addParameter(_1e,_1f,_1d);}else{this.processor.addParameter(_1e,_1f);}if(!this.paramsSet[""+_1d]){this.paramsSet[""+_1d]=new Array();}this.paramsSet[""+_1d][_1e]=_1f;};XSLTProcessor.prototype.getParameter=function(_20,_21){_20=_20||"";if(this.paramsSet[_20]&&this.paramsSet[_20][_21]){return this.paramsSet[_20][_21];}else{return null;}};XSLTProcessor.prototype.clearParameters=function(){for(var _22 in this.paramsSet){for(var _23 in this.paramsSet[_22]){if(_22){this.processor.addParameter(_23,null,_22);}else{this.processor.addParameter(_23,null);}}}this.paramsSet=new Array();};}else{if(_SARISSA_HAS_DOM_CREATE_DOCUMENT){Sarissa.__handleLoad__=function(_24){Sarissa.__setReadyState__(_24,4);};_sarissa_XMLDocument_onload=function(){Sarissa.__handleLoad__(this);};Sarissa.__setReadyState__=function(_25,_26){_25.readyState=_26;_25.readystate=_26;if(_25.onreadystatechange!=null&&typeof _25.onreadystatechange=="function"){_25.onreadystatechange();}};Sarissa.getDomDocument=function(_27,_28){var _29=document.implementation.createDocument(_27?_27:null,_28?_28:null,null);if(!_29.onreadystatechange){_29.onreadystatechange=null;}if(!_29.readyState){_29.readyState=0;}_29.addEventListener("load",_sarissa_XMLDocument_onload,false);return _29;};if(window.XMLDocument){}else{if(_SARISSA_HAS_DOM_FEATURE&&window.Document&&!Document.prototype.load&&document.implementation.hasFeature("LS","3.0")){Sarissa.getDomDocument=function(_2a,_2b){var _2c=document.implementation.createDocument(_2a?_2a:null,_2b?_2b:null,null);return _2c;};}else{Sarissa.getDomDocument=function(_2d,_2e){var _2f=document.implementation.createDocument(_2d?_2d:null,_2e?_2e:null,null);if(_2f&&(_2d||_2e)&&!_2f.documentElement){_2f.appendChild(_2f.createElementNS(_2d,_2e));}return _2f;};}}}}if(!window.DOMParser){if(_SARISSA_IS_SAFARI){DOMParser=function(){};DOMParser.prototype.parseFromString=function(_30,_31){var _32=new XMLHttpRequest();_32.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(_30),false);_32.send(null);return _32.responseXML;};}else{if(Sarissa.getDomDocument&&Sarissa.getDomDocument()&&Sarissa.getDomDocument(null,"bar").xml){DOMParser=function(){};DOMParser.prototype.parseFromString=function(_33,_34){var doc=Sarissa.getDomDocument();doc.loadXML(_33);return doc;};}}}if((typeof (document.importNode)=="undefined")&&_SARISSA_IS_IE){try{document.importNode=function(_36,_37){var tmp;if(_36.nodeName=="tbody"||_36.nodeName=="tr"){tmp=document.createElement("table");}else{if(_36.nodeName=="td"){tmp=document.createElement("tr");}else{if(_36.nodeName=="option"){tmp=document.createElement("select");}else{tmp=document.createElement("div");}}}if(_37){tmp.innerHTML=_36.xml?_36.xml:_36.outerHTML;}else{tmp.innerHTML=_36.xml?_36.cloneNode(false).xml:_36.cloneNode(false).outerHTML;}return tmp.getElementsByTagName("*")[0];};}catch(e){}}if(!Sarissa.getParseErrorText){Sarissa.getParseErrorText=function(_39){var _3a=Sarissa.PARSED_OK;if(!_39.documentElement){_3a=Sarissa.PARSED_EMPTY;}else{if(_39.documentElement.tagName=="parsererror"){_3a=_39.documentElement.firstChild.data;_3a+="\n"+_39.documentElement.firstChild.nextSibling.firstChild.data;}else{if(_39.getElementsByTagName("parsererror").length>0){var _3b=_39.getElementsByTagName("parsererror")[0];_3a=Sarissa.getText(_3b,true)+"\n";}else{if(_39.parseError&&_39.parseError.errorCode!=0){_3a=Sarissa.PARSED_UNKNOWN_ERROR;}}}}return _3a;};}Sarissa.getText=function(_3c,_3d){var s="";var _3f=_3c.childNodes;for(var i=0;i<_3f.length;i++){var _41=_3f[i];var _42=_41.nodeType;if(_42==Node.TEXT_NODE||_42==Node.CDATA_SECTION_NODE){s+=_41.data;}else{if(_3d==true&&(_42==Node.ELEMENT_NODE||_42==Node.DOCUMENT_NODE||_42==Node.DOCUMENT_FRAGMENT_NODE)){s+=Sarissa.getText(_41,true);}}}return s;};if(!window.XMLSerializer&&Sarissa.getDomDocument&&Sarissa.getDomDocument("","foo",null).xml){XMLSerializer=function(){};XMLSerializer.prototype.serializeToString=function(_43){return _43.xml;};}Sarissa.stripTags=function(s){return s.replace(/<[^>]+>/g,"");};Sarissa.clearChildNodes=function(_45){while(_45.firstChild){_45.removeChild(_45.firstChild);}};Sarissa.copyChildNodes=function(_46,_47,_48){if((!_46)||(!_47)){throw "Both source and destination nodes must be provided";}if(!_48){Sarissa.clearChildNodes(_47);}var _49=_47.nodeType==Node.DOCUMENT_NODE?_47:_47.ownerDocument;var _4a=_46.childNodes;if(typeof (_49.importNode)!="undefined"){for(var i=0;i<_4a.length;i++){_47.appendChild(_49.importNode(_4a[i],true));}}else{for(var i=0;i<_4a.length;i++){_47.appendChild(_4a[i].cloneNode(true));}}};Sarissa.moveChildNodes=function(_4d,_4e,_4f){if((!_4d)||(!_4e)){throw "Both source and destination nodes must be provided";}if(!_4f){Sarissa.clearChildNodes(_4e);}var _50=_4d.childNodes;if(_4d.ownerDocument==_4e.ownerDocument){while(_4d.firstChild){_4e.appendChild(_4d.firstChild);}}else{var _51=_4e.nodeType==Node.DOCUMENT_NODE?_4e:_4e.ownerDocument;if(typeof (_51.importNode)!="undefined"){for(var i=0;i<_50.length;i++){_4e.appendChild(_51.importNode(_50[i],true));}}else{for(var i=0;i<_50.length;i++){_4e.appendChild(_50[i].cloneNode(true));}}Sarissa.clearChildNodes(_4d);}};Sarissa.xmlize=function(_54,_55,_56){_56=_56?_56:"";var s=_56+"<"+_55+">";var _58=false;if(!(_54 instanceof Object)||_54 instanceof Number||_54 instanceof String||_54 instanceof Boolean||_54 instanceof Date){s+=Sarissa.escape(""+_54);_58=true;}else{s+="\n";var _59="";var _5a=_54 instanceof Array;for(var _5b in _54){s+=Sarissa.xmlize(_54[_5b],(_5a?"array-item key=\""+_5b+"\"":_5b),_56+"   ");}s+=_56;}return s+=(_55.indexOf(" ")!=-1?"</array-item>\n":"</"+_55+">\n");};Sarissa.escape=function(_5c){return _5c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");};Sarissa.unescape=function(_5d){return _5d.replace(/&apos;/g,"'").replace(/&quot;/g,"\"").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");};function getAllChildren(e){return e.all?e.all:e.getElementsByTagName("*");}document.getElementsBySelector=function(_5f){if(!document.getElementsByTagName){return new Array();}var _60=_5f.split(" ");var _61=new Array(document);for(var i=0;i<_60.length;i++){token=_60[i].replace(/^\s+/,"").replace(/\s+$/,"");if(token.indexOf("#")>-1){var _63=token.split("#");var _64=_63[0];var id=_63[1];var _66=document.getElementById(id);if(_64&&_66.nodeName.toLowerCase()!=_64){return new Array();}_61=new Array(_66);continue;}if(token.indexOf(".")>-1){var _67=token.split(".");var _68=_67[0];var _69=_67[1];if(!_68){_68="*";}var _6a=new Array;var _6b=0;for(var h=0;h<_61.length;h++){var _6d;if(_68=="*"){_6d=getAllChildren(_61[h]);}else{_6d=_61[h].getElementsByTagName(_68);}for(var j=0;j<_6d.length;j++){_6a[_6b++]=_6d[j];}}_61=new Array;var _6f=0;for(var k=0;k<_6a.length;k++){if(_6a[k].className&&_6a[k].className.match(new RegExp("\\b"+_69+"\\b"))){_61[_6f++]=_6a[k];}}continue;}if(token.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var _71=RegExp.$1;var _72=RegExp.$2;var _73=RegExp.$3;var _74=RegExp.$4;if(!_71){_71="*";}var _75=new Array;var _76=0;for(var h=0;h<_61.length;h++){var _78;if(_71=="*"){_78=getAllChildren(_61[h]);}else{_78=_61[h].getElementsByTagName(_71);}for(var j=0;j<_78.length;j++){_75[_76++]=_78[j];}}_61=new Array;var _7a=0;var _7b;switch(_73){case "=":_7b=function(e){return (e.getAttribute(_72)==_74);};break;case "~":_7b=function(e){return (e.getAttribute(_72).match(new RegExp("\\b"+_74+"\\b")));};break;case "|":_7b=function(e){return (e.getAttribute(_72).match(new RegExp("^"+_74+"-?")));};break;case "^":_7b=function(e){return (e.getAttribute(_72).indexOf(_74)==0);};break;case "$":_7b=function(e){return (e.getAttribute(_72).lastIndexOf(_74)==e.getAttribute(_72).length-_74.length);};break;case "*":_7b=function(e){return (e.getAttribute(_72).indexOf(_74)>-1);};break;default:_7b=function(e){return e.getAttribute(_72);};}_61=new Array;var _83=0;for(var k=0;k<_75.length;k++){if(_7b(_75[k])){_61[_83++]=_75[k];}}continue;}_71=token;var _85=new Array;var _86=0;for(var h=0;h<_61.length;h++){var _88=_61[h].getElementsByTagName(_71);for(var j=0;j<_88.length;j++){_85[_86++]=_88[j];}}_61=_85;}return _61;};var Prototype={Version:"1.5.0",BrowserFeatures:{XPath:!!document.evaluate},ScriptFragment:"(?:<script.*?>)((\n|\r|.)*?)(?:</script>)",emptyFunction:function(){},K:function(x){return x;}};var Class={create:function(){return function(){this.initialize.apply(this,arguments);};}};var Abstract=new Object();Object.extend=function(_8b,_8c){for(var _8d in _8c){_8b[_8d]=_8c[_8d];}return _8b;};Object.extend(Object,{inspect:function(_8e){try{if(_8e===undefined){return "undefined";}if(_8e===null){return "null";}return _8e.inspect?_8e.inspect():_8e.toString();}catch(e){if(e instanceof RangeError){return "...";}throw e;}},keys:function(_8f){var _90=[];for(var _91 in _8f){_90.push(_91);}return _90;},values:function(_92){var _93=[];for(var _94 in _92){_93.push(_92[_94]);}return _93;},clone:function(_95){return Object.extend({},_95);}});Function.prototype.bind=function(){var _96=this,args=$A(arguments),object=args.shift();return function(){return _96.apply(object,args.concat($A(arguments)));};};Function.prototype.bindAsEventListener=function(_97){var _98=this,args=$A(arguments),_97=args.shift();return function(_99){return _98.apply(_97,[(_99||window.event)].concat(args).concat($A(arguments)));};};Object.extend(Number.prototype,{toColorPart:function(){var _9a=this.toString(16);if(this<16){return "0"+_9a;}return _9a;},succ:function(){return this+1;},times:function(_9b){$R(0,this,true).each(_9b);return this;}});var Try={these:function(){var _9c;for(var i=0,length=arguments.length;i<length;i++){var _9e=arguments[i];try{_9c=_9e();break;}catch(e){}}return _9c;}};var PeriodicalExecuter=Class.create();PeriodicalExecuter.prototype={initialize:function(_9f,_a0){this.callback=_9f;this.frequency=_a0;this.currentlyExecuting=false;this.registerCallback();},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1000);},stop:function(){if(!this.timer){return;}clearInterval(this.timer);this.timer=null;},onTimerEvent:function(){if(!this.currentlyExecuting){try{this.currentlyExecuting=true;this.callback(this);}finally{this.currentlyExecuting=false;}}}};String.interpret=function(_a1){return _a1==null?"":String(_a1);};Object.extend(String.prototype,{gsub:function(_a2,_a3){var _a4="",source=this,match;_a3=arguments.callee.prepareReplacement(_a3);while(source.length>0){if(match=source.match(_a2)){_a4+=source.slice(0,match.index);_a4+=String.interpret(_a3(match));source=source.slice(match.index+match[0].length);}else{_a4+=source,source="";}}return _a4;},sub:function(_a5,_a6,_a7){_a6=this.gsub.prepareReplacement(_a6);_a7=_a7===undefined?1:_a7;return this.gsub(_a5,function(_a8){if(--_a7<0){return _a8[0];}return _a6(_a8);});},scan:function(_a9,_aa){this.gsub(_a9,_aa);return this;},truncate:function(_ab,_ac){_ab=_ab||30;_ac=_ac===undefined?"...":_ac;return this.length>_ab?this.slice(0,_ab-_ac.length)+_ac:this;},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"");},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"");},stripScripts:function(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"");},extractScripts:function(){var _ad=new RegExp(Prototype.ScriptFragment,"img");var _ae=new RegExp(Prototype.ScriptFragment,"im");return (this.match(_ad)||[]).map(function(_af){return (_af.match(_ae)||["",""])[1];});},evalScripts:function(){return this.extractScripts().map(function(_b0){return eval(_b0);});},escapeHTML:function(){var div=document.createElement("div");var _b2=document.createTextNode(this);div.appendChild(_b2);return div.innerHTML;},unescapeHTML:function(){var div=document.createElement("div");div.innerHTML=this.stripTags();return div.childNodes[0]?(div.childNodes.length>1?$A(div.childNodes).inject("",function(_b4,_b5){return _b4+_b5.nodeValue;}):div.childNodes[0].nodeValue):"";},toQueryParams:function(_b6){var _b7=this.strip().match(/([^?#]*)(#.*)?$/);if(!_b7){return {};}return _b7[1].split(_b6||"&").inject({},function(_b8,_b9){if((_b9=_b9.split("="))[0]){var _ba=decodeURIComponent(_b9[0]);var _bb=_b9[1]?decodeURIComponent(_b9[1]):undefined;if(_b8[_ba]!==undefined){if(_b8[_ba].constructor!=Array){_b8[_ba]=[_b8[_ba]];}if(_bb){_b8[_ba].push(_bb);}}else{_b8[_ba]=_bb;}}return _b8;});},toArray:function(){return this.split("");},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1);},camelize:function(){var _bc=this.split("-"),len=_bc.length;if(len==1){return _bc[0];}var _bd=this.charAt(0)=="-"?_bc[0].charAt(0).toUpperCase()+_bc[0].substring(1):_bc[0];for(var i=1;i<len;i++){_bd+=_bc[i].charAt(0).toUpperCase()+_bc[i].substring(1);}return _bd;},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase();},underscore:function(){return this.gsub(/::/,"/").gsub(/([A-Z]+)([A-Z][a-z])/,"#{1}_#{2}").gsub(/([a-z\d])([A-Z])/,"#{1}_#{2}").gsub(/-/,"_").toLowerCase();},dasherize:function(){return this.gsub(/_/,"-");},inspect:function(_bf){var _c0=this.replace(/\\/g,"\\\\");if(_bf){return "\""+_c0.replace(/"/g,"\\\"")+"\"";}else{return "'"+_c0.replace(/'/g,"\\'")+"'";}}});String.prototype.gsub.prepareReplacement=function(_c1){if(typeof _c1=="function"){return _c1;}var _c2=new Template(_c1);return function(_c3){return _c2.evaluate(_c3);};};String.prototype.parseQuery=String.prototype.toQueryParams;var Template=Class.create();Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;Template.prototype={initialize:function(_c4,_c5){this.template=_c4.toString();this.pattern=_c5||Template.Pattern;},evaluate:function(_c6){return this.template.gsub(this.pattern,function(_c7){var _c8=_c7[1];if(_c8=="\\"){return _c7[2];}return _c8+String.interpret(_c6[_c7[3]]);});}};var $break=new Object();var $continue=new Object();var Enumerable={each:function(_c9){var _ca=0;try{this._each(function(_cb){try{_c9(_cb,_ca++);}catch(e){if(e!=$continue){throw e;}}});}catch(e){if(e!=$break){throw e;}}return this;},eachSlice:function(_cc,_cd){var _ce=-_cc,slices=[],array=this.toArray();while((_ce+=_cc)<array.length){slices.push(array.slice(_ce,_ce+_cc));}return slices.map(_cd);},all:function(_cf){var _d0=true;this.each(function(_d1,_d2){_d0=_d0&&!!(_cf||Prototype.K)(_d1,_d2);if(!_d0){throw $break;}});return _d0;},any:function(_d3){var _d4=false;this.each(function(_d5,_d6){if(_d4=!!(_d3||Prototype.K)(_d5,_d6)){throw $break;}});return _d4;},collect:function(_d7){var _d8=[];this.each(function(_d9,_da){_d8.push((_d7||Prototype.K)(_d9,_da));});return _d8;},detect:function(_db){var _dc;this.each(function(_dd,_de){if(_db(_dd,_de)){_dc=_dd;throw $break;}});return _dc;},findAll:function(_df){var _e0=[];this.each(function(_e1,_e2){if(_df(_e1,_e2)){_e0.push(_e1);}});return _e0;},grep:function(_e3,_e4){var _e5=[];this.each(function(_e6,_e7){var _e8=_e6.toString();if(_e8.match(_e3)){_e5.push((_e4||Prototype.K)(_e6,_e7));}});return _e5;},include:function(_e9){var _ea=false;this.each(function(_eb){if(_eb==_e9){_ea=true;throw $break;}});return _ea;},inGroupsOf:function(_ec,_ed){_ed=_ed===undefined?null:_ed;return this.eachSlice(_ec,function(_ee){while(_ee.length<_ec){_ee.push(_ed);}return _ee;});},inject:function(_ef,_f0){this.each(function(_f1,_f2){_ef=_f0(_ef,_f1,_f2);});return _ef;},invoke:function(_f3){var _f4=$A(arguments).slice(1);return this.map(function(_f5){return _f5[_f3].apply(_f5,_f4);});},max:function(_f6){var _f7;this.each(function(_f8,_f9){_f8=(_f6||Prototype.K)(_f8,_f9);if(_f7==undefined||_f8>=_f7){_f7=_f8;}});return _f7;},min:function(_fa){var _fb;this.each(function(_fc,_fd){_fc=(_fa||Prototype.K)(_fc,_fd);if(_fb==undefined||_fc<_fb){_fb=_fc;}});return _fb;},partition:function(_fe){var _ff=[],falses=[];this.each(function(_100,_101){((_fe||Prototype.K)(_100,_101)?_ff:falses).push(_100);});return [_ff,falses];},pluck:function(_102){var _103=[];this.each(function(_104,_105){_103.push(_104[_102]);});return _103;},reject:function(_106){var _107=[];this.each(function(_108,_109){if(!_106(_108,_109)){_107.push(_108);}});return _107;},sortBy:function(_10a){return this.map(function(_10b,_10c){return {value:_10b,criteria:_10a(_10b,_10c)};}).sort(function(left,_10e){var a=left.criteria,b=_10e.criteria;return a<b?-1:a>b?1:0;}).pluck("value");},toArray:function(){return this.map();},zip:function(){var _110=Prototype.K,args=$A(arguments);if(typeof args.last()=="function"){_110=args.pop();}var _111=[this].concat(args).map($A);return this.map(function(_112,_113){return _110(_111.pluck(_113));});},size:function(){return this.toArray().length;},inspect:function(){return "#<Enumerable:"+this.toArray().inspect()+">";}};Object.extend(Enumerable,{map:Enumerable.collect,find:Enumerable.detect,select:Enumerable.findAll,member:Enumerable.include,entries:Enumerable.toArray});var $A=Array.from=function(_114){if(!_114){return [];}if(_114.toArray){return _114.toArray();}else{var _115=[];for(var i=0,length=_114.length;i<length;i++){_115.push(_114[i]);}return _115;}};Object.extend(Array.prototype,Enumerable);if(!Array.prototype._reverse){Array.prototype._reverse=Array.prototype.reverse;}Object.extend(Array.prototype,{_each:function(_117){for(var i=0,length=this.length;i<length;i++){_117(this[i]);}},clear:function(){this.length=0;return this;},first:function(){return this[0];},last:function(){return this[this.length-1];},compact:function(){return this.select(function(_119){return _119!=null;});},flatten:function(){return this.inject([],function(_11a,_11b){return _11a.concat(_11b&&_11b.constructor==Array?_11b.flatten():[_11b]);});},without:function(){var _11c=$A(arguments);return this.select(function(_11d){return !_11c.include(_11d);});},indexOf:function(_11e){for(var i=0,length=this.length;i<length;i++){if(this[i]==_11e){return i;}}return -1;},reverse:function(_120){return (_120!==false?this:this.toArray())._reverse();},reduce:function(){return this.length>1?this:this[0];},uniq:function(){return this.inject([],function(_121,_122){return _121.include(_122)?_121:_121.concat([_122]);});},clone:function(){return [].concat(this);},size:function(){return this.length;},inspect:function(){return "["+this.map(Object.inspect).join(", ")+"]";}});Array.prototype.toArray=Array.prototype.clone;function $w(_123){_123=_123.strip();return _123?_123.split(/\s+/):[];}if(window.opera){Array.prototype.concat=function(){var _124=[];for(var i=0,length=this.length;i<length;i++){_124.push(this[i]);}for(var i=0,length=arguments.length;i<length;i++){if(arguments[i].constructor==Array){for(var j=0,arrayLength=arguments[i].length;j<arrayLength;j++){_124.push(arguments[i][j]);}}else{_124.push(arguments[i]);}}return _124;};}var Hash=function(obj){Object.extend(this,obj||{});};Object.extend(Hash,{toQueryString:function(obj){var _12a=[];this.prototype._each.call(obj,function(pair){if(!pair.key){return;}if(pair.value&&pair.value.constructor==Array){var _12c=pair.value.compact();if(_12c.length<2){pair.value=_12c.reduce();}else{key=encodeURIComponent(pair.key);_12c.each(function(_12d){_12d=_12d!=undefined?encodeURIComponent(_12d):"";_12a.push(key+"="+encodeURIComponent(_12d));});return;}}if(pair.value==undefined){pair[1]="";}_12a.push(pair.map(encodeURIComponent).join("="));});return _12a.join("&");}});Object.extend(Hash.prototype,Enumerable);Object.extend(Hash.prototype,{_each:function(_12e){for(var key in this){var _130=this[key];if(_130&&_130==Hash.prototype[key]){continue;}var pair=[key,_130];pair.key=key;pair.value=_130;_12e(pair);}},keys:function(){return this.pluck("key");},values:function(){return this.pluck("value");},merge:function(hash){return $H(hash).inject(this,function(_133,pair){_133[pair.key]=pair.value;return _133;});},remove:function(){var _135;for(var i=0,length=arguments.length;i<length;i++){var _137=this[arguments[i]];if(_137!==undefined){if(_135===undefined){_135=_137;}else{if(_135.constructor!=Array){_135=[_135];}_135.push(_137);}}delete this[arguments[i]];}return _135;},toQueryString:function(){return Hash.toQueryString(this);},inspect:function(){return "#<Hash:{"+this.map(function(pair){return pair.map(Object.inspect).join(": ");}).join(", ")+"}>";}});function $H(_139){if(_139&&_139.constructor==Hash){return _139;}return new Hash(_139);}ObjectRange=Class.create();Object.extend(ObjectRange.prototype,Enumerable);Object.extend(ObjectRange.prototype,{initialize:function(_13a,end,_13c){this.start=_13a;this.end=end;this.exclusive=_13c;},_each:function(_13d){var _13e=this.start;while(this.include(_13e)){_13d(_13e);_13e=_13e.succ();}},include:function(_13f){if(_13f<this.start){return false;}if(this.exclusive){return _13f<this.end;}return _13f<=this.end;}});var $R=function(_140,end,_142){return new ObjectRange(_140,end,_142);};var Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest();},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");})||false;},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(_143){this.responders._each(_143);},register:function(_144){if(!this.include(_144)){this.responders.push(_144);}},unregister:function(_145){this.responders=this.responders.without(_145);},dispatch:function(_146,_147,_148,json){this.each(function(_14a){if(typeof _14a[_146]=="function"){try{_14a[_146].apply(_14a,[_147,_148,json]);}catch(e){}}});}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++;},onComplete:function(){Ajax.activeRequestCount--;}});Ajax.Base=function(){};Ajax.Base.prototype={setOptions:function(_14b){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:""};Object.extend(this.options,_14b||{});this.options.method=this.options.method.toLowerCase();if(typeof this.options.parameters=="string"){this.options.parameters=this.options.parameters.toQueryParams();}}};Ajax.Request=Class.create();Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];Ajax.Request.prototype=Object.extend(new Ajax.Base(),{_complete:false,initialize:function(url,_14d){this.transport=Ajax.getTransport();this.setOptions(_14d);this.request(url);},request:function(url){this.url=url;this.method=this.options.method;var _14f=this.options.parameters;if(!["get","post"].include(this.method)){_14f["_method"]=this.method;this.method="post";}_14f=Hash.toQueryString(_14f);if(_14f&&/Konqueror|Safari|KHTML/.test(navigator.userAgent)){_14f+="&_=";}if(this.method=="get"&&_14f){this.url+=(this.url.indexOf("?")>-1?"&":"?")+_14f;}try{Ajax.Responders.dispatch("onCreate",this,this.transport);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);if(this.options.asynchronous){setTimeout(function(){this.respondToReadyState(1);}.bind(this),10);}this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();var body=this.method=="post"?(this.options.postBody||_14f):null;this.transport.send(body);if(!this.options.asynchronous&&this.transport.overrideMimeType){this.onStateChange();}}catch(e){this.dispatchException(e);}},onStateChange:function(){var _151=this.transport.readyState;if(_151>1&&!((_151==4)&&this._complete)){this.respondToReadyState(this.transport.readyState);}},setRequestHeaders:function(){var _152={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,"Accept":"text/javascript, text/html, application/xml, text/xml, */*"};if(this.method=="post"){_152["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:"");if(this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005){_152["Connection"]="close";}}if(typeof this.options.requestHeaders=="object"){var _153=this.options.requestHeaders;if(typeof _153.push=="function"){for(var i=0,length=_153.length;i<length;i+=2){_152[_153[i]]=_153[i+1];}}else{$H(_153).each(function(pair){_152[pair.key]=pair.value;});}}for(var name in _152){this.transport.setRequestHeader(name,_152[name]);}},success:function(){return !this.transport.status||(this.transport.status>=200&&this.transport.status<300);},respondToReadyState:function(_157){var _158=Ajax.Request.Events[_157];var _159=this.transport,json=this.evalJSON();if(_158=="Complete"){try{this._complete=true;(this.options["on"+this.transport.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(_159,json);}catch(e){this.dispatchException(e);}if((this.getHeader("Content-type")||"text/javascript").strip().match(/^(text|application)\/(x-)?(java|ecma)script(;.*)?$/i)){this.evalResponse();}}try{(this.options["on"+_158]||Prototype.emptyFunction)(_159,json);Ajax.Responders.dispatch("on"+_158,this,_159,json);}catch(e){this.dispatchException(e);}if(_158=="Complete"){this.transport.onreadystatechange=Prototype.emptyFunction;}},getHeader:function(name){try{return this.transport.getResponseHeader(name);}catch(e){return null;}},evalJSON:function(){try{var json=this.getHeader("X-JSON");return json?eval("("+json+")"):null;}catch(e){return null;}},evalResponse:function(){try{return eval(this.transport.responseText);}catch(e){this.dispatchException(e);}},dispatchException:function(_15c){(this.options.onException||Prototype.emptyFunction)(this,_15c);Ajax.Responders.dispatch("onException",this,_15c);}});Ajax.Updater=Class.create();Object.extend(Object.extend(Ajax.Updater.prototype,Ajax.Request.prototype),{initialize:function(_15d,url,_15f){this.container={success:(_15d.success||_15d),failure:(_15d.failure||(_15d.success?null:_15d))};this.transport=Ajax.getTransport();this.setOptions(_15f);var _160=this.options.onComplete||Prototype.emptyFunction;this.options.onComplete=(function(_161,_162){this.updateContent();_160(_161,_162);}).bind(this);this.request(url);},updateContent:function(){var _163=this.container[this.success()?"success":"failure"];var _164=this.transport.responseText;if(!this.options.evalScripts){_164=_164.stripScripts();}if(_163=$(_163)){if(this.options.insertion){new this.options.insertion(_163,_164);}else{_163.update(_164);}}if(this.success()){if(this.onComplete){setTimeout(this.onComplete.bind(this),10);}}}});Ajax.PeriodicalUpdater=Class.create();Ajax.PeriodicalUpdater.prototype=Object.extend(new Ajax.Base(),{initialize:function(_165,url,_167){this.setOptions(_167);this.onComplete=this.options.onComplete;this.frequency=(this.options.frequency||2);this.decay=(this.options.decay||1);this.updater={};this.container=_165;this.url=url;this.start();},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent();},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments);},updateComplete:function(_168){if(this.options.decay){this.decay=(_168.responseText==this.lastText?this.decay*this.options.decay:1);this.lastText=_168.responseText;}this.timer=setTimeout(this.onTimerEvent.bind(this),this.decay*this.frequency*1000);},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options);}});function $(_169){if(arguments.length>1){for(var i=0,elements=[],length=arguments.length;i<length;i++){elements.push($(arguments[i]));}return elements;}if(typeof _169=="string"){_169=document.getElementById(_169);}return Element.extend(_169);}if(Prototype.BrowserFeatures.XPath){document._getElementsByXPath=function(_16b,_16c){var _16d=[];var _16e=document.evaluate(_16b,$(_16c)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(var i=0,length=_16e.snapshotLength;i<length;i++){_16d.push(_16e.snapshotItem(i));}return _16d;};}document.getElementsByClassName=function(_170,_171){if(Prototype.BrowserFeatures.XPath){var q=".//*[contains(concat(' ', @class, ' '), ' "+_170+" ')]";return document._getElementsByXPath(q,_171);}else{var _173=($(_171)||document.body).getElementsByTagName("*");var _174=[],child;for(var i=0,length=_173.length;i<length;i++){child=_173[i];if(Element.hasClassName(child,_170)){_174.push(Element.extend(child));}}return _174;}};if(!window.Element){var Element=new Object();}Element.extend=function(_176){if(!_176||_nativeExtensions||_176.nodeType==3){return _176;}if(!_176._extended&&_176.tagName&&_176!=window){var _177=Object.clone(Element.Methods),cache=Element.extend.cache;if(_176.tagName=="FORM"){Object.extend(_177,Form.Methods);}if(["INPUT","TEXTAREA","SELECT"].include(_176.tagName)){Object.extend(_177,Form.Element.Methods);}Object.extend(_177,Element.Methods.Simulated);for(var _178 in _177){var _179=_177[_178];if(typeof _179=="function"&&!(_178 in _176)){_176[_178]=cache.findOrStore(_179);}}}_176._extended=true;return _176;};Element.extend.cache={findOrStore:function(_17a){return this[_17a]=this[_17a]||function(){return _17a.apply(null,[this].concat($A(arguments)));};}};Element.Methods={visible:function(_17b){return $(_17b).style.display!="none";},toggle:function(_17c){_17c=$(_17c);Element[Element.visible(_17c)?"hide":"show"](_17c);return _17c;},hide:function(_17d){$(_17d).style.display="none";return _17d;},show:function(_17e){$(_17e).style.display="";return _17e;},remove:function(_17f){_17f=$(_17f);_17f.parentNode.removeChild(_17f);return _17f;},update:function(_180,html){html=typeof html=="undefined"?"":html.toString();$(_180).innerHTML=html.stripScripts();setTimeout(function(){html.evalScripts();},10);return _180;},replace:function(_182,html){_182=$(_182);html=typeof html=="undefined"?"":html.toString();if(_182.outerHTML){_182.outerHTML=html.stripScripts();}else{var _184=_182.ownerDocument.createRange();_184.selectNodeContents(_182);_182.parentNode.replaceChild(_184.createContextualFragment(html.stripScripts()),_182);}setTimeout(function(){html.evalScripts();},10);return _182;},inspect:function(_185){_185=$(_185);var _186="<"+_185.tagName.toLowerCase();$H({"id":"id","className":"class"}).each(function(pair){var _188=pair.first(),attribute=pair.last();var _189=(_185[_188]||"").toString();if(_189){_186+=" "+attribute+"="+_189.inspect(true);}});return _186+">";},recursivelyCollect:function(_18a,_18b){_18a=$(_18a);var _18c=[];while(_18a=_18a[_18b]){if(_18a.nodeType==1){_18c.push(Element.extend(_18a));}}return _18c;},ancestors:function(_18d){return $(_18d).recursivelyCollect("parentNode");},descendants:function(_18e){return $A($(_18e).getElementsByTagName("*"));},immediateDescendants:function(_18f){if(!(_18f=$(_18f).firstChild)){return [];}while(_18f&&_18f.nodeType!=1){_18f=_18f.nextSibling;}if(_18f){return [_18f].concat($(_18f).nextSiblings());}return [];},previousSiblings:function(_190){return $(_190).recursivelyCollect("previousSibling");},nextSiblings:function(_191){return $(_191).recursivelyCollect("nextSibling");},siblings:function(_192){_192=$(_192);return _192.previousSiblings().reverse().concat(_192.nextSiblings());},match:function(_193,_194){if(typeof _194=="string"){_194=new Selector(_194);}return _194.match($(_193));},up:function(_195,_196,_197){return Selector.findElement($(_195).ancestors(),_196,_197);},down:function(_198,_199,_19a){return Selector.findElement($(_198).descendants(),_199,_19a);},previous:function(_19b,_19c,_19d){return Selector.findElement($(_19b).previousSiblings(),_19c,_19d);},next:function(_19e,_19f,_1a0){return Selector.findElement($(_19e).nextSiblings(),_19f,_1a0);},getElementsBySelector:function(){var args=$A(arguments),element=$(args.shift());return Selector.findChildElements(element,args);},getElementsByClassName:function(_1a2,_1a3){return document.getElementsByClassName(_1a3,_1a2);},readAttribute:function(_1a4,name){_1a4=$(_1a4);if(document.all&&!window.opera){var t=Element._attributeTranslations;if(t.values[name]){return t.values[name](_1a4,name);}if(t.names[name]){name=t.names[name];}var _1a7=_1a4.attributes[name];if(_1a7){return _1a7.nodeValue;}}return _1a4.getAttribute(name);},getHeight:function(_1a8){return $(_1a8).getDimensions().height;},getWidth:function(_1a9){return $(_1a9).getDimensions().width;},classNames:function(_1aa){return new Element.ClassNames(_1aa);},hasClassName:function(_1ab,_1ac){if(!(_1ab=$(_1ab))){return;}var _1ad=_1ab.className;if(_1ad.length==0){return false;}if(_1ad==_1ac||_1ad.match(new RegExp("(^|\\s)"+_1ac+"(\\s|$)"))){return true;}return false;},addClassName:function(_1ae,_1af){if(!(_1ae=$(_1ae))){return;}Element.classNames(_1ae).add(_1af);return _1ae;},removeClassName:function(_1b0,_1b1){if(!(_1b0=$(_1b0))){return;}Element.classNames(_1b0).remove(_1b1);return _1b0;},toggleClassName:function(_1b2,_1b3){if(!(_1b2=$(_1b2))){return;}Element.classNames(_1b2)[_1b2.hasClassName(_1b3)?"remove":"add"](_1b3);return _1b2;},observe:function(){Event.observe.apply(Event,arguments);return $A(arguments).first();},stopObserving:function(){Event.stopObserving.apply(Event,arguments);return $A(arguments).first();},cleanWhitespace:function(_1b4){_1b4=$(_1b4);var node=_1b4.firstChild;while(node){var _1b6=node.nextSibling;if(node.nodeType==3&&!/\S/.test(node.nodeValue)){_1b4.removeChild(node);}node=_1b6;}return _1b4;},empty:function(_1b7){return $(_1b7).innerHTML.match(/^\s*$/);},descendantOf:function(_1b8,_1b9){_1b8=$(_1b8),_1b9=$(_1b9);while(_1b8=_1b8.parentNode){if(_1b8==_1b9){return true;}}return false;},scrollTo:function(_1ba){_1ba=$(_1ba);var pos=Position.cumulativeOffset(_1ba);window.scrollTo(pos[0],pos[1]);return _1ba;},getStyle:function(_1bc,_1bd){_1bc=$(_1bc);if(["float","cssFloat"].include(_1bd)){_1bd=(typeof _1bc.style.styleFloat!="undefined"?"styleFloat":"cssFloat");}_1bd=_1bd.camelize();var _1be=_1bc.style[_1bd];if(!_1be){if(document.defaultView&&document.defaultView.getComputedStyle){var css=document.defaultView.getComputedStyle(_1bc,null);_1be=css?css[_1bd]:null;}else{if(_1bc.currentStyle){_1be=_1bc.currentStyle[_1bd];}}}if((_1be=="auto")&&["width","height"].include(_1bd)&&(_1bc.getStyle("display")!="none")){_1be=_1bc["offset"+_1bd.capitalize()]+"px";}if(window.opera&&["left","top","right","bottom"].include(_1bd)){if(Element.getStyle(_1bc,"position")=="static"){_1be="auto";}}if(_1bd=="opacity"){if(_1be){return parseFloat(_1be);}if(_1be=(_1bc.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/)){if(_1be[1]){return parseFloat(_1be[1])/100;}}return 1;}return _1be=="auto"?null:_1be;},setStyle:function(_1c0,_1c1){_1c0=$(_1c0);for(var name in _1c1){var _1c3=_1c1[name];if(name=="opacity"){if(_1c3==1){_1c3=(/Gecko/.test(navigator.userAgent)&&!/Konqueror|Safari|KHTML/.test(navigator.userAgent))?0.999999:1;if(/MSIE/.test(navigator.userAgent)&&!window.opera){_1c0.style.filter=_1c0.getStyle("filter").replace(/alpha\([^\)]*\)/gi,"");}}else{if(_1c3==""){if(/MSIE/.test(navigator.userAgent)&&!window.opera){_1c0.style.filter=_1c0.getStyle("filter").replace(/alpha\([^\)]*\)/gi,"");}}else{if(_1c3<0.00001){_1c3=0;}if(/MSIE/.test(navigator.userAgent)&&!window.opera){_1c0.style.filter=_1c0.getStyle("filter").replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+_1c3*100+")";}}}}else{if(["float","cssFloat"].include(name)){name=(typeof _1c0.style.styleFloat!="undefined")?"styleFloat":"cssFloat";}}_1c0.style[name.camelize()]=_1c3;}return _1c0;},getDimensions:function(_1c4){_1c4=$(_1c4);var _1c5=$(_1c4).getStyle("display");if(_1c5!="none"&&_1c5!=null){return {width:_1c4.offsetWidth,height:_1c4.offsetHeight};}var els=_1c4.style;var _1c7=els.visibility;var _1c8=els.position;var _1c9=els.display;els.visibility="hidden";els.position="absolute";els.display="block";var _1ca=_1c4.clientWidth;var _1cb=_1c4.clientHeight;els.display=_1c9;els.position=_1c8;els.visibility=_1c7;return {width:_1ca,height:_1cb};},makePositioned:function(_1cc){_1cc=$(_1cc);var pos=Element.getStyle(_1cc,"position");if(pos=="static"||!pos){_1cc._madePositioned=true;_1cc.style.position="relative";if(window.opera){_1cc.style.top=0;_1cc.style.left=0;}}return _1cc;},undoPositioned:function(_1ce){_1ce=$(_1ce);if(_1ce._madePositioned){_1ce._madePositioned=undefined;_1ce.style.position=_1ce.style.top=_1ce.style.left=_1ce.style.bottom=_1ce.style.right="";}return _1ce;},makeClipping:function(_1cf){_1cf=$(_1cf);if(_1cf._overflow){return _1cf;}_1cf._overflow=_1cf.style.overflow||"auto";if((Element.getStyle(_1cf,"overflow")||"visible")!="hidden"){_1cf.style.overflow="hidden";}return _1cf;},undoClipping:function(_1d0){_1d0=$(_1d0);if(!_1d0._overflow){return _1d0;}_1d0.style.overflow=_1d0._overflow=="auto"?"":_1d0._overflow;_1d0._overflow=null;return _1d0;}};Object.extend(Element.Methods,{childOf:Element.Methods.descendantOf});Element._attributeTranslations={};Element._attributeTranslations.names={colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",datetime:"dateTime",accesskey:"accessKey",tabindex:"tabIndex",enctype:"encType",maxlength:"maxLength",readonly:"readOnly",longdesc:"longDesc"};Element._attributeTranslations.values={_getAttr:function(_1d1,_1d2){return _1d1.getAttribute(_1d2,2);},_flag:function(_1d3,_1d4){return $(_1d3).hasAttribute(_1d4)?_1d4:null;},style:function(_1d5){return _1d5.style.cssText.toLowerCase();},title:function(_1d6){var node=_1d6.getAttributeNode("title");return node.specified?node.nodeValue:null;}};Object.extend(Element._attributeTranslations.values,{href:Element._attributeTranslations.values._getAttr,src:Element._attributeTranslations.values._getAttr,disabled:Element._attributeTranslations.values._flag,checked:Element._attributeTranslations.values._flag,readonly:Element._attributeTranslations.values._flag,multiple:Element._attributeTranslations.values._flag});Element.Methods.Simulated={hasAttribute:function(_1d8,_1d9){var t=Element._attributeTranslations;_1d9=t.names[_1d9]||_1d9;return $(_1d8).getAttributeNode(_1d9).specified;}};if(document.all&&!window.opera){Element.Methods.update=function(_1db,html){_1db=$(_1db);html=typeof html=="undefined"?"":html.toString();var _1dd=_1db.tagName.toUpperCase();if(["THEAD","TBODY","TR","TD"].include(_1dd)){var div=document.createElement("div");switch(_1dd){case "THEAD":case "TBODY":div.innerHTML="<table><tbody>"+html.stripScripts()+"</tbody></table>";depth=2;break;case "TR":div.innerHTML="<table><tbody><tr>"+html.stripScripts()+"</tr></tbody></table>";depth=3;break;case "TD":div.innerHTML="<table><tbody><tr><td>"+html.stripScripts()+"</td></tr></tbody></table>";depth=4;}$A(_1db.childNodes).each(function(node){_1db.removeChild(node);});depth.times(function(){div=div.firstChild;});$A(div.childNodes).each(function(node){_1db.appendChild(node);});}else{_1db.innerHTML=html.stripScripts();}setTimeout(function(){html.evalScripts();},10);return _1db;};}Object.extend(Element,Element.Methods);var _nativeExtensions=false;if(/Konqueror|Safari|KHTML/.test(navigator.userAgent)){["","Form","Input","TextArea","Select"].each(function(tag){var _1e2="HTML"+tag+"Element";if(window[_1e2]){return;}var _1e3=window[_1e2]={};_1e3.prototype=document.createElement(tag?tag.toLowerCase():"div").__proto__;});}Element.addMethods=function(_1e4){Object.extend(Element.Methods,_1e4||{});function copy(_1e5,_1e6,_1e7){_1e7=_1e7||false;var _1e8=Element.extend.cache;for(var _1e9 in _1e5){var _1ea=_1e5[_1e9];if(!_1e7||!(_1e9 in _1e6)){_1e6[_1e9]=_1e8.findOrStore(_1ea);}}}if(typeof HTMLElement!="undefined"){copy(Element.Methods,HTMLElement.prototype);copy(Element.Methods.Simulated,HTMLElement.prototype,true);copy(Form.Methods,HTMLFormElement.prototype);[HTMLInputElement,HTMLTextAreaElement,HTMLSelectElement].each(function(_1eb){copy(Form.Element.Methods,_1eb.prototype);});_nativeExtensions=true;}};var Toggle=new Object();Toggle.display=Element.toggle;Abstract.Insertion=function(_1ec){this.adjacency=_1ec;};Abstract.Insertion.prototype={initialize:function(_1ed,_1ee){this.element=$(_1ed);this.content=_1ee.stripScripts();if(this.adjacency&&this.element.insertAdjacentHTML){try{this.element.insertAdjacentHTML(this.adjacency,this.content);}catch(e){var _1ef=this.element.tagName.toUpperCase();if(["TBODY","TR"].include(_1ef)){this.insertContent(this.contentFromAnonymousTable());}else{throw e;}}}else{this.range=this.element.ownerDocument.createRange();if(this.initializeRange){this.initializeRange();}this.insertContent([this.range.createContextualFragment(this.content)]);}setTimeout(function(){_1ee.evalScripts();},10);},contentFromAnonymousTable:function(){var div=document.createElement("div");div.innerHTML="<table><tbody>"+this.content+"</tbody></table>";return $A(div.childNodes[0].childNodes[0].childNodes);}};var Insertion=new Object();Insertion.Before=Class.create();Insertion.Before.prototype=Object.extend(new Abstract.Insertion("beforeBegin"),{initializeRange:function(){this.range.setStartBefore(this.element);},insertContent:function(_1f1){_1f1.each((function(_1f2){this.element.parentNode.insertBefore(_1f2,this.element);}).bind(this));}});Insertion.Top=Class.create();Insertion.Top.prototype=Object.extend(new Abstract.Insertion("afterBegin"),{initializeRange:function(){this.range.selectNodeContents(this.element);this.range.collapse(true);},insertContent:function(_1f3){_1f3.reverse(false).each((function(_1f4){this.element.insertBefore(_1f4,this.element.firstChild);}).bind(this));}});Insertion.Bottom=Class.create();Insertion.Bottom.prototype=Object.extend(new Abstract.Insertion("beforeEnd"),{initializeRange:function(){this.range.selectNodeContents(this.element);this.range.collapse(this.element);},insertContent:function(_1f5){_1f5.each((function(_1f6){this.element.appendChild(_1f6);}).bind(this));}});Insertion.After=Class.create();Insertion.After.prototype=Object.extend(new Abstract.Insertion("afterEnd"),{initializeRange:function(){this.range.setStartAfter(this.element);},insertContent:function(_1f7){_1f7.each((function(_1f8){this.element.parentNode.insertBefore(_1f8,this.element.nextSibling);}).bind(this));}});Element.ClassNames=Class.create();Element.ClassNames.prototype={initialize:function(_1f9){this.element=$(_1f9);},_each:function(_1fa){this.element.className.split(/\s+/).select(function(name){return name.length>0;})._each(_1fa);},set:function(_1fc){this.element.className=_1fc;},add:function(_1fd){if(this.include(_1fd)){return;}this.set($A(this).concat(_1fd).join(" "));},remove:function(_1fe){if(!this.include(_1fe)){return;}this.set($A(this).without(_1fe).join(" "));},toString:function(){return $A(this).join(" ");}};Object.extend(Element.ClassNames.prototype,Enumerable);var Selector=Class.create();Selector.prototype={initialize:function(_1ff){this.params={classNames:[]};this.expression=_1ff.toString().strip();this.parseExpression();this.compileMatcher();},parseExpression:function(){function abort(_200){throw "Parse error in selector: "+_200;}if(this.expression==""){abort("empty expression");}var _201=this.params,expr=this.expression,match,modifier,clause,rest;while(match=expr.match(/^(.*)\[([a-z0-9_:-]+?)(?:([~\|!]?=)(?:"([^"]*)"|([^\]\s]*)))?\]$/i)){_201.attributes=_201.attributes||[];_201.attributes.push({name:match[2],operator:match[3],value:match[4]||match[5]||""});expr=match[1];}if(expr=="*"){return this.params.wildcard=true;}while(match=expr.match(/^([^a-z0-9_-])?([a-z0-9_-]+)(.*)/i)){modifier=match[1],clause=match[2],rest=match[3];switch(modifier){case "#":_201.id=clause;break;case ".":_201.classNames.push(clause);break;case "":case undefined:_201.tagName=clause.toUpperCase();break;default:abort(expr.inspect());}expr=rest;}if(expr.length>0){abort(expr.inspect());}},buildMatchExpression:function(){var _202=this.params,conditions=[],clause;if(_202.wildcard){conditions.push("true");}if(clause=_202.id){conditions.push("element.readAttribute(\"id\") == "+clause.inspect());}if(clause=_202.tagName){conditions.push("element.tagName.toUpperCase() == "+clause.inspect());}if((clause=_202.classNames).length>0){for(var i=0,length=clause.length;i<length;i++){conditions.push("element.hasClassName("+clause[i].inspect()+")");}}if(clause=_202.attributes){clause.each(function(_204){var _205="element.readAttribute("+_204.name.inspect()+")";var _206=function(_207){return _205+" && "+_205+".split("+_207.inspect()+")";};switch(_204.operator){case "=":conditions.push(_205+" == "+_204.value.inspect());break;case "~=":conditions.push(_206(" ")+".include("+_204.value.inspect()+")");break;case "|=":conditions.push(_206("-")+".first().toUpperCase() == "+_204.value.toUpperCase().inspect());break;case "!=":conditions.push(_205+" != "+_204.value.inspect());break;case "":case undefined:conditions.push("element.hasAttribute("+_204.name.inspect()+")");break;default:throw "Unknown operator "+_204.operator+" in selector";}});}return conditions.join(" && ");},compileMatcher:function(){this.match=new Function("element","if (!element.tagName) return false;       element = $(element);       return "+this.buildMatchExpression());},findElements:function(_208){var _209;if(_209=$(this.params.id)){if(this.match(_209)){if(!_208||Element.childOf(_209,_208)){return [_209];}}}_208=(_208||document).getElementsByTagName(this.params.tagName||"*");var _20a=[];for(var i=0,length=_208.length;i<length;i++){if(this.match(_209=_208[i])){_20a.push(Element.extend(_209));}}return _20a;},toString:function(){return this.expression;}};Object.extend(Selector,{matchElements:function(_20c,_20d){var _20e=new Selector(_20d);return _20c.select(_20e.match.bind(_20e)).map(Element.extend);},findElement:function(_20f,_210,_211){if(typeof _210=="number"){_211=_210,_210=false;}return Selector.matchElements(_20f,_210||"*")[_211||0];},findChildElements:function(_212,_213){return _213.map(function(_214){return _214.match(/[^\s"]+(?:"[^"]*"[^\s"]+)*/g).inject([null],function(_215,expr){var _217=new Selector(expr);return _215.inject([],function(_218,_219){return _218.concat(_217.findElements(_219||_212));});});}).flatten();}});function $$(){return Selector.findChildElements(document,$A(arguments));}var Form={reset:function(form){$(form).reset();return form;},serializeElements:function(_21b,_21c){var data=_21b.inject({},function(_21e,_21f){if(!_21f.disabled&&_21f.name){var key=_21f.name,value=$(_21f).getValue();if(value!=undefined){if(_21e[key]){if(_21e[key].constructor!=Array){_21e[key]=[_21e[key]];}_21e[key].push(value);}else{_21e[key]=value;}}}return _21e;});return _21c?data:Hash.toQueryString(data);}};Form.Methods={serialize:function(form,_222){return Form.serializeElements(Form.getElements(form),_222);},getElements:function(form){return $A($(form).getElementsByTagName("*")).inject([],function(_224,_225){if(Form.Element.Serializers[_225.tagName.toLowerCase()]){_224.push(Element.extend(_225));}return _224;});},getInputs:function(form,_227,name){form=$(form);var _229=form.getElementsByTagName("input");if(!_227&&!name){return $A(_229).map(Element.extend);}for(var i=0,matchingInputs=[],length=_229.length;i<length;i++){var _22b=_229[i];if((_227&&_22b.type!=_227)||(name&&_22b.name!=name)){continue;}matchingInputs.push(Element.extend(_22b));}return matchingInputs;},disable:function(form){form=$(form);form.getElements().each(function(_22d){_22d.blur();_22d.disabled="true";});return form;},enable:function(form){form=$(form);form.getElements().each(function(_22f){_22f.disabled="";});return form;},findFirstElement:function(form){return $(form).getElements().find(function(_231){return _231.type!="hidden"&&!_231.disabled&&["input","select","textarea"].include(_231.tagName.toLowerCase());});},focusFirstElement:function(form){form=$(form);form.findFirstElement().activate();return form;}};Object.extend(Form,Form.Methods);Form.Element={focus:function(_233){$(_233).focus();return _233;},select:function(_234){$(_234).select();return _234;}};Form.Element.Methods={serialize:function(_235){_235=$(_235);if(!_235.disabled&&_235.name){var _236=_235.getValue();if(_236!=undefined){var pair={};pair[_235.name]=_236;return Hash.toQueryString(pair);}}return "";},getValue:function(_238){_238=$(_238);var _239=_238.tagName.toLowerCase();return Form.Element.Serializers[_239](_238);},clear:function(_23a){$(_23a).value="";return _23a;},present:function(_23b){return $(_23b).value!="";},activate:function(_23c){_23c=$(_23c);_23c.focus();if(_23c.select&&(_23c.tagName.toLowerCase()!="input"||!["button","reset","submit"].include(_23c.type))){_23c.select();}return _23c;},disable:function(_23d){_23d=$(_23d);_23d.disabled=true;return _23d;},enable:function(_23e){_23e=$(_23e);_23e.blur();_23e.disabled=false;return _23e;}};Object.extend(Form.Element,Form.Element.Methods);var Field=Form.Element;var $F=Form.Element.getValue;Form.Element.Serializers={input:function(_23f){switch(_23f.type.toLowerCase()){case "checkbox":case "radio":return Form.Element.Serializers.inputSelector(_23f);default:return Form.Element.Serializers.textarea(_23f);}},inputSelector:function(_240){return _240.checked?_240.value:null;},textarea:function(_241){return _241.value;},select:function(_242){return this[_242.type=="select-one"?"selectOne":"selectMany"](_242);},selectOne:function(_243){var _244=_243.selectedIndex;return _244>=0?this.optionValue(_243.options[_244]):null;},selectMany:function(_245){var _246,length=_245.length;if(!length){return null;}for(var i=0,_246=[];i<length;i++){var opt=_245.options[i];if(opt.selected){_246.push(this.optionValue(opt));}}return _246;},optionValue:function(opt){return Element.extend(opt).hasAttribute("value")?opt.value:opt.text;}};Abstract.TimedObserver=function(){};Abstract.TimedObserver.prototype={initialize:function(_24a,_24b,_24c){this.frequency=_24b;this.element=$(_24a);this.callback=_24c;this.lastValue=this.getValue();this.registerCallback();},registerCallback:function(){setInterval(this.onTimerEvent.bind(this),this.frequency*1000);},onTimerEvent:function(){var _24d=this.getValue();var _24e=("string"==typeof this.lastValue&&"string"==typeof _24d?this.lastValue!=_24d:String(this.lastValue)!=String(_24d));if(_24e){this.callback(this.element,_24d);this.lastValue=_24d;}}};Form.Element.Observer=Class.create();Form.Element.Observer.prototype=Object.extend(new Abstract.TimedObserver(),{getValue:function(){return Form.Element.getValue(this.element);}});Form.Observer=Class.create();Form.Observer.prototype=Object.extend(new Abstract.TimedObserver(),{getValue:function(){return Form.serialize(this.element);}});Abstract.EventObserver=function(){};Abstract.EventObserver.prototype={initialize:function(_24f,_250){this.element=$(_24f);this.callback=_250;this.lastValue=this.getValue();if(this.element.tagName.toLowerCase()=="form"){this.registerFormCallbacks();}else{this.registerCallback(this.element);}},onElementEvent:function(){var _251=this.getValue();if(this.lastValue!=_251){this.callback(this.element,_251);this.lastValue=_251;}},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback.bind(this));},registerCallback:function(_252){if(_252.type){switch(_252.type.toLowerCase()){case "checkbox":case "radio":Event.observe(_252,"click",this.onElementEvent.bind(this));break;default:Event.observe(_252,"change",this.onElementEvent.bind(this));break;}}}};Form.Element.EventObserver=Class.create();Form.Element.EventObserver.prototype=Object.extend(new Abstract.EventObserver(),{getValue:function(){return Form.Element.getValue(this.element);}});Form.EventObserver=Class.create();Form.EventObserver.prototype=Object.extend(new Abstract.EventObserver(),{getValue:function(){return Form.serialize(this.element);}});if(!window.Event){var Event=new Object();}Object.extend(Event,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,element:function(_253){return _253.target||_253.srcElement;},isLeftClick:function(_254){return (((_254.which)&&(_254.which==1))||((_254.button)&&(_254.button==1)));},pointerX:function(_255){return _255.pageX||(_255.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft));},pointerY:function(_256){return _256.pageY||(_256.clientY+(document.documentElement.scrollTop||document.body.scrollTop));},stop:function(_257){if(_257.preventDefault){_257.preventDefault();_257.stopPropagation();}else{_257.returnValue=false;_257.cancelBubble=true;}},findElement:function(_258,_259){var _25a=Event.element(_258);while(_25a.parentNode&&(!_25a.tagName||(_25a.tagName.toUpperCase()!=_259.toUpperCase()))){_25a=_25a.parentNode;}return _25a;},observers:false,_observeAndCache:function(_25b,name,_25d,_25e){if(!this.observers){this.observers=[];}if(_25b.addEventListener){this.observers.push([_25b,name,_25d,_25e]);_25b.addEventListener(name,_25d,_25e);}else{if(_25b.attachEvent){this.observers.push([_25b,name,_25d,_25e]);_25b.attachEvent("on"+name,_25d);}}},unloadCache:function(){if(!Event.observers){return;}for(var i=0,length=Event.observers.length;i<length;i++){Event.stopObserving.apply(this,Event.observers[i]);Event.observers[i][0]=null;}Event.observers=false;},observe:function(_260,name,_262,_263){_260=$(_260);_263=_263||false;if(name=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||_260.attachEvent)){name="keydown";}Event._observeAndCache(_260,name,_262,_263);},stopObserving:function(_264,name,_266,_267){_264=$(_264);_267=_267||false;if(name=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||_264.detachEvent)){name="keydown";}if(_264.removeEventListener){_264.removeEventListener(name,_266,_267);}else{if(_264.detachEvent){try{_264.detachEvent("on"+name,_266);}catch(e){}}}}});if(navigator.appVersion.match(/\bMSIE\b/)){Event.observe(window,"unload",Event.unloadCache,false);}var Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;},realOffset:function(_268){var _269=0,valueL=0;do{_269+=_268.scrollTop||0;valueL+=_268.scrollLeft||0;_268=_268.parentNode;}while(_268);return [valueL,_269];},cumulativeOffset:function(_26a){var _26b=0,valueL=0;do{_26b+=_26a.offsetTop||0;valueL+=_26a.offsetLeft||0;_26a=_26a.offsetParent;}while(_26a);return [valueL,_26b];},positionedOffset:function(_26c){var _26d=0,valueL=0;do{_26d+=_26c.offsetTop||0;valueL+=_26c.offsetLeft||0;_26c=_26c.offsetParent;if(_26c){if(_26c.tagName=="BODY"){break;}var p=Element.getStyle(_26c,"position");if(p=="relative"||p=="absolute"){break;}}}while(_26c);return [valueL,_26d];},offsetParent:function(_26f){if(_26f.offsetParent){return _26f.offsetParent;}if(_26f==document.body){return _26f;}while((_26f=_26f.parentNode)&&_26f!=document.body){if(Element.getStyle(_26f,"position")!="static"){return _26f;}}return document.body;},within:function(_270,x,y){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(_270,x,y);}this.xcomp=x;this.ycomp=y;this.offset=this.cumulativeOffset(_270);return (y>=this.offset[1]&&y<this.offset[1]+_270.offsetHeight&&x>=this.offset[0]&&x<this.offset[0]+_270.offsetWidth);},withinIncludingScrolloffsets:function(_273,x,y){var _276=this.realOffset(_273);this.xcomp=x+_276[0]-this.deltaX;this.ycomp=y+_276[1]-this.deltaY;this.offset=this.cumulativeOffset(_273);return (this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+_273.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+_273.offsetWidth);},overlap:function(mode,_278){if(!mode){return 0;}if(mode=="vertical"){return ((this.offset[1]+_278.offsetHeight)-this.ycomp)/_278.offsetHeight;}if(mode=="horizontal"){return ((this.offset[0]+_278.offsetWidth)-this.xcomp)/_278.offsetWidth;}},page:function(_279){var _27a=0,valueL=0;var _27b=_279;do{_27a+=_27b.offsetTop||0;valueL+=_27b.offsetLeft||0;if(_27b.offsetParent==document.body){if(Element.getStyle(_27b,"position")=="absolute"){break;}}}while(_27b=_27b.offsetParent);_27b=_279;do{if(!window.opera||_27b.tagName=="BODY"){_27a-=_27b.scrollTop||0;valueL-=_27b.scrollLeft||0;}}while(_27b=_27b.parentNode);return [valueL,_27a];},clone:function(_27c,_27d){var _27e=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},arguments[2]||{});_27c=$(_27c);var p=Position.page(_27c);_27d=$(_27d);var _280=[0,0];var _281=null;if(Element.getStyle(_27d,"position")=="absolute"){_281=Position.offsetParent(_27d);_280=Position.page(_281);}if(_281==document.body){_280[0]-=document.body.offsetLeft;_280[1]-=document.body.offsetTop;}if(_27e.setLeft){_27d.style.left=(p[0]-_280[0]+_27e.offsetLeft)+"px";}if(_27e.setTop){_27d.style.top=(p[1]-_280[1]+_27e.offsetTop)+"px";}if(_27e.setWidth){_27d.style.width=_27c.offsetWidth+"px";}if(_27e.setHeight){_27d.style.height=_27c.offsetHeight+"px";}},absolutize:function(_282){_282=$(_282);if(_282.style.position=="absolute"){return;}Position.prepare();var _283=Position.positionedOffset(_282);var top=_283[1];var left=_283[0];var _286=_282.clientWidth;var _287=_282.clientHeight;_282._originalLeft=left-parseFloat(_282.style.left||0);_282._originalTop=top-parseFloat(_282.style.top||0);_282._originalWidth=_282.style.width;_282._originalHeight=_282.style.height;_282.style.position="absolute";_282.style.top=top+"px";_282.style.left=left+"px";_282.style.width=_286+"px";_282.style.height=_287+"px";},relativize:function(_288){_288=$(_288);if(_288.style.position=="relative"){return;}Position.prepare();_288.style.position="relative";var top=parseFloat(_288.style.top||0)-(_288._originalTop||0);var left=parseFloat(_288.style.left||0)-(_288._originalLeft||0);_288.style.top=top+"px";_288.style.left=left+"px";_288.style.height=_288._originalHeight;_288.style.width=_288._originalWidth;}};if(/Konqueror|Safari|KHTML/.test(navigator.userAgent)){Position.cumulativeOffset=function(_28b){var _28c=0,valueL=0;do{_28c+=_28b.offsetTop||0;valueL+=_28b.offsetLeft||0;if(_28b.offsetParent==document.body){if(Element.getStyle(_28b,"position")=="absolute"){break;}}_28b=_28b.offsetParent;}while(_28b);return [valueL,_28c];};}Element.addMethods();if(typeof YAHOO=="undefined"){var YAHOO={};}YAHOO.namespace=function(){var a=arguments,o=null,i,j,d;for(i=0;i<a.length;++i){d=a[i].split(".");o=YAHOO;for(j=(d[0]=="YAHOO")?1:0;j<d.length;++j){o[d[j]]=o[d[j]]||{};o=o[d[j]];}}return o;};YAHOO.log=function(msg,cat,src){var l=YAHOO.widget.Logger;if(l&&l.log){return l.log(msg,cat,src);}else{return false;}};YAHOO.extend=function(subc,_293,_294){var F=function(){};F.prototype=_293.prototype;subc.prototype=new F();subc.prototype.constructor=subc;subc.superclass=_293.prototype;if(_293.prototype.constructor==Object.prototype.constructor){_293.prototype.constructor=_293;}if(_294){for(var i in _294){subc.prototype[i]=_294[i];}}};YAHOO.augment=function(r,s){var rp=r.prototype,sp=s.prototype,a=arguments,i,p;if(a[2]){for(i=2;i<a.length;++i){rp[a[i]]=sp[a[i]];}}else{for(p in sp){if(!rp[p]){rp[p]=sp[p];}}}};YAHOO.namespace("util","widget","example");function XMPPConnection(_29a,_29b,_29c){this.binding=_29a;this.domain=_29b;this.isConnected=false;this.isAuthenticated=false;this._packetFilters=new Array();this._outgoingPacketFilters=new Array();this._packetQueue=new Array();this._connectionListeners=new Array();this._packetHandler=this._createPacketHandler();this.addConnectionListener(_29c);util.HTTP.reset();}XMPPConnection.prototype={addConnectionListener:function(_29d){if(!_29d){return;}this._connectionListeners.push(_29d);},removeConnectionListener:function(_29e){if(!_29e){return;}var _29f=this._connectionListeners.indexOf(_29e);if(_29f>=0){this._connectionListeners.splice(_29f,1);}},_fireEvent:function(_2a0,_2a1){var self=this;this._connectionListeners.each(function(_2a3){if(_2a3[_2a0]){try{_2a3[_2a0](self,_2a1);}catch(_2a1){console.error("Error processing listener: %s",_2a1);}}});},connect:function(){var _2a4=this;var _2a5=function(_2a6,_2a7,_2a8,_2a9){var _2aa={xmlns:"http://jabber.org/protocol/httpbind",hold:_2a6,rid:_2a7,secure:_2a8,wait:_2a9};return util.XML.element("body","",_2aa);};this._rid=Math.floor(Math.random()*1000000);var _2ab=_2a5(1,this._rid,true,10);console.debug("Initial request: %s",_2ab);var _2ac=function(_2ad){var _2ae=_2ad.responseXML.documentElement;console.debug("Intial response: %x",_2ae);_2a4.isConnected=true;_2a4.authentication=_2a4._configureConnection(_2ae);_2a4._fireEvent("connectionSuccessful");};var _2af=function(_2b0,_2b1){console.error("Connection to the server failed: "+_2b1);this._fireEvent("connectionFailed");}.bind(this);var _2b2=util.HTTP.doRequest(this.binding,_2ab,_2ac,_2af,_2af);},logout:function(_2b3){if(this.loggedOut){return;}if(this._timer){this._timer.cancel();}var _2b4={xmlns:"http://jabber.org/protocol/httpbind",rid:this._getNextRID(),sid:this._sid,type:"terminate"};var _2b5=util.XML.element("body",(_2b3?_2b3.toXML():""),_2b4);this.loggedOut=true;util.HTTP.doRequest(this.binding,_2b5,this.destroy.bind(this),this.destroy.bind(this),this.destroy.bind(this));},destroy:function(_2b6){if(!this.isConnected){return;}this.isConnected=false;this.isAuthenticated=false;delete this.authentication;delete this.username;delete this.password;delete this._sid;delete this._pollingInterval;delete this._wait;delete this._inactivity;this._packetHandler=Prototype.emptyFunction;if(this._timer){this._timer.cancel();}this._packetFilters.clear();this._outgoingPacketFilters.clear();this._packetQueue.clear();if(!this.loggedOut&&!_2b6){_2b6=new Error("connection lost");}this._fireEvent("connectionClosed",(!this.loggedOut?_2b6:null));this._connectionListeners.clear();},login:function(_2b7,_2b8,_2b9){if(!this.authentication.auth["anonymous"]&&(!_2b7||_2b7=="")){throw new Error("Username must be provided to login.");}if(!this.authentication.auth["anonymous"]&&(!_2b8||_2b8=="")){throw new Error("Password must be provided to login.");}this.username=_2b7;this.password=_2b8;this.resource=(!_2b9?"spank":_2b9);var auth;if(!_2b7){auth=this.authentication.auth["anonymous"];}else{auth=this.authentication.auth["plain"];}this._handleAuthentication(auth,0);},_handleAuthentication:function(_2bb,step){var _2bd=this;var _2be=function(_2bf){var _2c0=_2bf.responseXML.documentElement;var _2c1=_2c0.firstChild;var _2c2;if(_2c1){_2c2=_2bb[step].handleResponse(_2c0.firstChild);}else{_2bd._handleAuthentication(_2bb,step);return;}if(_2c2.authComplete){if(_2c2.authSuccess){_2bd._bindConnection();}else{_2bd._fireEvent("authenticationFailed");}}else{_2bd._handleAuthentication(_2c2,step++);}};if(step!=this.lastStep){this.lastStep=step;util.HTTP.doRequest(this.binding,_2bb[step].createRequest(this),_2be);}else{this._handlePing(_2be);}},_configureConnection:function(_2c3){this._sid=_2c3.getAttribute("sid");this._pollingInterval=_2c3.getAttribute("polling");this._wait=_2c3.getAttribute("wait");this._inactivity=_2c3.getAttribute("inactivity");this.isConnected=true;var _2c4=_2c3.firstChild;var _2c5={};for(var i=0;i<_2c4.childNodes.length;i++){var _2c7=_2c4.childNodes[i];if(_2c7.tagName=="mechanisms"){_2c5.auth=this._configureAuthMechanisms(_2c7);}else{if(_2c7.tagName=="bind"){_2c5.bind=true;}else{if(_2c7.tagName=="session"){_2c5.session=true;}}}}return _2c5;},_configureAuthMechanisms:function(_2c8){var _2c9={};for(var i=0;i<_2c8.childNodes.length;i++){var _2cb=_2c8.childNodes[i];if(_2cb.firstChild.nodeValue=="PLAIN"){_2c9["plain"]=SASLAuth.plainAuth;}else{if(_2cb.firstChild.nodeValue=="ANONYMOUS"){_2c9["anonymous"]=SASLAuth.anonymous;}}}if(!_2c9){_2c9=function(){return false;};}return _2c9;},_getNextRID:function(){return ++this._rid;},_createRequest:function(_2cc){var _2cd={xmlns:"http://jabber.org/protocol/httpbind",rid:this._getNextRID(),sid:this._sid};return util.XML.element("body",_2cc,_2cd);},_bindConnection:function(){var _2ce=new XMPP.IQ("set");_2ce.setXMLNS("jabber:client");var bind=_2ce.addExtension("bind","urn:ietf:params:xml:ns:xmpp-bind");bind.appendChild(_2ce.doc.createElement("resource")).appendChild(_2ce.doc.createTextNode(this.resource));console.debug("Bind the connection! %x",_2ce.doc.documentElement);var _2d0=this;var _2d1=function(_2d2){var bind=_2d2.getExtension("bind");console.debug("Bind Response: %x",bind);var jid=bind.firstChild;_2d0._jid=jid.firstChild.nodeValue;_2d0._establishSession();};var id=_2ce.getID();var _2d6=new org.jive.spank.PacketFilter(_2d1,function(_2d7){return _2d7.getID()==id;});this.sendPacket(_2ce,_2d6);},_establishSession:function(){var _2d8=new XMPP.IQ("set");_2d8.setXMLNS("jabber:client");_2d8.addExtension("session","urn:ietf:params:xml:ns:xmpp-session");console.debug("Establishing session: %x",_2d8.doc.documentElement);var _2d9=this;var _2da=function(_2db){_2d9.isAuthenticated=true;_2d9._fireEvent("authenticationSuccessful");};var id=_2d8.getID();var _2dd=new org.jive.spank.PacketFilter(_2da,function(_2de){return _2de.getID()==id;});this.sendPacket(_2d8,_2dd);},sendPacket:function(_2df,_2e0){if(!_2df||!(typeof _2df=="object"&&_2df instanceof XMPP.Packet)){return;}if(this._timer){this._timer.cancel();delete this._timer;}if(_2e0){this.addPacketFilter(_2e0,true);}if(this._shouldQueuePacket()){this._queuePacket(_2df);return;}var _2e1=new Array();_2e1.push(_2df);this._sendPackets(_2e1);},_sendPackets:function(_2e2){if(!this.isConnected){return;}var _2e3=new Array();for(var i=0;i<_2e2.length;i++){this._handlePacket(this._outgoingPacketFilters.slice(),_2e2[i]);_2e3.push(_2e2[i].toXML());}util.HTTP.doRequest(this.binding,this._createRequest(_2e3.join("")),this._packetHandler,connection._createFailureHandler(),connection._createExceptionHandler());},_createFailureHandler:function(){var self=this;return function(_2e6,_2e7){console.error("Request failure: %s",_2e7);self.destroy(_2e7);};},_createExceptionHandler:function(){var self=this;return function(_2e9,_2ea){console.error("Request exception: %s",_2ea);self.destroy(_2ea);};},_createPacketHandler:function(){var _2eb=this;return function(_2ec){var _2ed=_2ec.responseXML.documentElement;var _2ee=_2ed.childNodes;var len=_2ee.length;_2eb._fireEvent("packetsReceived");for(var i=0;i<len;i++){var _2f1=_2ee.item(i).cloneNode(true);var _2f2=_2f1.tagName;var _2f3;if(_2f2=="iq"){_2f3=new XMPP.IQ(null,null,null,_2f1);}else{if(_2f2=="presence"){_2f3=new XMPP.Presence(null,null,_2f1);}else{if(_2f2=="message"){_2f3=new XMPP.Message(null,null,null,_2f1);}else{console.error("Server returned unknown packet, tossing: %x",_2f1);continue;}}}_2eb._handlePacket(_2eb._packetFilters.slice(),_2f3);}_2eb._fireEvent("packetsProcessed");if(_2eb._packetQueue.length>0){_2eb._sendPackets(_2eb._packetQueue.compact());_2eb._packetQueue.clear();}else{_2eb._handlePing();}};},addPacketFilter:function(_2f4,_2f5){if(!_2f4||!(_2f4 instanceof org.jive.spank.PacketFilter)){throw Error("PacketFilter must be an instance of PacketFilter");}_2f4.removeOnExecution=_2f5;this._packetFilters.push(_2f4);},removePacketFilter:function(_2f6){if(!_2f6){return;}var _2f7=this._packetFilters.indexOf(_2f6);if(_2f7>=0){this._packetFilters.splice(_2f7,1);}},addOutgoingPacketFilter:function(_2f8){if(!_2f8||!(_2f8 instanceof org.jive.spank.PacketFilter)){throw Error("PacketFilter must be an instance of PacketFilter");}this._outgoingPacketFilters.push(_2f8);},_handlePacket:function(_2f9,_2fa){for(var i=_2f9.length-1;i>=0;i--){try{if(_2f9[i].accept(_2fa)&&_2f9[i].removeOnExecution){this.removePacketFilter(_2f9[i]);}}catch(e){console.error("Error processing packet: %s",e.message);if(_2f9[i].removeOnExecution){this.removePacketFilter(_2f9[i]);}}}},_handlePing:function(_2fc){if(this._timer){this._timer.cancel();delete this._timer;}if(util.HTTP.requestCount<=0){this._timer=new TimeoutExecutor(this._pingServer(_2fc),2*this._pollingInterval);}},_pingServer:function(_2fd){if(!this.isConnected){return;}var _2fe=this;if(!_2fd){_2fd=this._packetHandler;}return function(){util.HTTP.doRequest(_2fe.binding,_2fe._createRequest(),_2fd,_2fe._createFailureHandler(),_2fe._createExceptionHandler());};},_shouldQueuePacket:function(){return util.HTTP.requestCount>=util.HTTP.maxConcurrentRequests||this._packetQueue.size>0;},_queuePacket:function(_2ff){this._packetQueue.push(_2ff);}};var SASLAuth={plainAuth:[{createRequest:function(_300){var _301=_300.username+"@"+_300.domain;_301+="\x00";_301+=_300.username;_301+="\x00";_301+=_300.password;_301=util.base64.encode(_301);var _302={mechanism:"PLAIN",xmlns:"urn:ietf:params:xml:ns:xmpp-sasl"};var _303=util.XML.element("auth",_301,_302);var _304=_300._createRequest(_303);console.debug("Plain auth request: %s",_304);return _304;},handleResponse:function(_305){var _306=_305.tagName=="success";return {authComplete:true,authSuccess:_306};}}],anonymous:[{createRequest:function(_307){var _308={mechanism:"ANONYMOUS",xmlns:"urn:ietf:params:xml:ns:xmpp-sasl"};var _309=util.XML.element("auth",null,_308);var _30a=_307._createRequest(_309);console.debug("Plain auth request: %s",_30a);return _30a;},handleResponse:function(_30b){var _30c=_30b.tagName=="success";return {authComplete:true,authSuccess:_30c};}}]};var TimeoutExecutor=Class.create();TimeoutExecutor.prototype={initialize:function(_30d,_30e){this.callback=_30d;this.timeout=_30e;this.currentlyExecuting=false;this.registerCallback();},registerCallback:function(){this.timeoutID=setTimeout(this.onTimerEvent.bind(this),this.timeout*1000);},onTimerEvent:function(){try{this.currentlyExecuting=true;if(this.callback&&this.callback instanceof Function){this.callback();}}finally{this.currentlyExecuting=false;delete this.timeoutID;}},cancel:function(){if(!this.currentlyExecuting&&this.timeoutID){clearTimeout(this.timeoutID);delete this.timeoutID;}},reset:function(){if(!this.currentlyExecuting&&this.timeoutID){clearTimeout(this.timeoutID);delete this.timeoutID;this.registerCallback();}}};var org={};org.jive={};org.jive.spank={};org.jive.spank.chat={};org.jive.spank.chat.Manager=function(_30f,_310,_311){if(!_30f||!(_30f instanceof XMPPConnection)){throw Error("connection required for ChatManager.");}this.getConnection=function(){return _30f;};this.servers={};if(_310){this.servers[_310]=false;}var self=this;_30f.addConnectionListener({connectionClosed:function(){self.destroy();}});this.packetFilter=new org.jive.spank.PacketFilter(this._createMessageHandler(),this._createMessageFilter());_30f.addPacketFilter(this.packetFilter);this._chatSessions=new Array();this._chatSessionListeners=new Array();this._baseID=util.StringUtil.randomString(5);this._threadID=1;this.shouldUseThreads=_311;this.presenceFilter=new org.jive.spank.PacketFilter(this._presenceHandler.bind(this),function(_313){return _313.getPacketType()=="presence"&&_313.getType()=="unavailable";});_30f.addPacketFilter(this.presenceFilter);};org.jive.spank.chat.Manager.prototype={_createMessageHandler:function(){var _314=this;return function(_315){_314._handleMessage(_315);};},_createMessageFilter:function(){return function(_316){return _316.getPacketType()=="message"&&_316.getType()=="chat"&&_316.getBody();};},_presenceHandler:function(_317){var _318=this._chatSessions.find(function(_319){return _319.sessionMatches(_317.getFrom(),null,true);});if(!_318||this.servers[_317.getFrom().getDomain()]){return;}var _31a=_318.getJID().getBareJID();_318.getJID=function(){return _31a;};},_handleMessage:function(_31b){console.debug("Handling message: %s",_31b.getID());var _31c=this._chatSessions.find(function(_31d){return _31d.sessionMatches(_31b.getFrom(),_31b.getThread());});if(!_31c){_31c=this.createSession(_31b.getFrom(),(this.shouldUseThreads?_31b.getThread():null));}_31c._handleMessage(_31b);},addChatSessionListener:function(_31e){this._chatSessionListeners.push(_31e);},removeChatSessionListener:function(_31f){if(!_31f){return;}var _320=this._chatSessionListeners.indexOf(_31f);if(_320>=0){this._chatSessionListeners.splice(_320,1);}},closeChatSession:function(_321){if(!_321){return;}var _322=this._chatSessions.indexOf(_321);if(_322<0){return;}this._chatSessions.splice(_322,1);delete _321._messageListeners;this._fireChatSessionClosed(_321);},_fireNewChatSessionCreated:function(_323){var _324=this;this._chatSessionListeners.each(function(_325){if(_325.created){_325.created(_324,_323);}});},_fireChatSessionClosed:function(_326){var _327=this;this._chatSessionListeners.each(function(_328){if(_328.closed){_328.closed(_327,_326);}});},getSession:function(jid,_32a){return this._chatSessions.find(function(_32b){return _32b.sessionMatches(jid,_32a);});},createSession:function(jid,_32d){if(!jid){throw new Error("JID must be specified.");}if(!_32d&&this.shouldUseThreads){_32d=this._createThreadID();}var _32e=new org.jive.spank.chat.Session(this,jid,_32d);this._chatSessions.push(_32e);this._fireNewChatSessionCreated(_32e);return _32e;},registerDomain:function(_32f,_330){this.servers[_32f]=_330;},_createThreadID:function(){return this._baseID+this._threadID++;},destroy:function(){for(var i=0;i<this._chatSessions.length;i++){this.closeChatSession(this._chatSessions[i]);}this._chatSessions.clear();this._chatSessionListeners.clear();delete this._chatSessionListeners;this.getConnection=Prototype.emptyFunction;}};org.jive.spank.chat.Session=function(_332,jid,_334){this.getJID=function(){return jid;};this.getThread=function(){return _334;};this.getManager=function(){return _332;};this._messageListeners=new Array();};org.jive.spank.chat.Session.prototype={getJIDString:function(){if(this.getManager().servers[this.getJID().getDomain()]){return this.getJID().toString();}else{return this.getJID().toBareJID();}},sessionMatches:function(jid,_336,_337){var _338;if(this.getManager().servers[jid.getDomain()]||_337){_338=jid.toString()==this.getJID().toString();}else{_338=jid.toBareJID()==this.getJID().toBareJID();}if(this.getManager().shouldUseThreads&&_336){return _338&&this.getThread()==_336;}else{return _338;}},addListener:function(_339){if(!_339){return;}this._messageListeners.push(_339);},_handleMessage:function(_33a){var _33b=this;var jid=_33a.getFrom();this.getJID=function(){return jid;};this._messageListeners.each(function(_33d){if(_33d.messageRecieved){_33d.messageRecieved(_33b,_33a);}});},sendMessage:function(_33e,_33f){if(!_33f){_33f=new XMPP.Message("chat",this.getManager().getConnection()._jid,this.getJID());}else{_33f.setTo(this.getJID());_33f.setType("chat");_33f.setBody(_33e);}_33f.setBody(_33e);_33f.setThread(this.getThread());this.getManager().getConnection().sendPacket(_33f);}};org.jive.spank.chat.ChatSessionListener=function(_340,_341){this.created=_340;this.closed=_341;};org.jive.spank.presence={};org.jive.spank.presence.Manager=function(_342,jid,_344){if(!_342||!(_342 instanceof XMPPConnection)){throw Error("Connection required for the presence manager.");}this.getConnection=function(){return _342;};var self=this;_342.addConnectionListener({connectionClosed:function(){self.destroy();}});if(!jid){this._presencePacketFilter=new org.jive.spank.PacketFilter(this._createPresencePacketHandler(),function(_346){return _346.getPacketType()=="presence";});}else{this._presencePacketFilter=new org.jive.spank.PacketFilter(this._createPresencePacketHandler(),function(_347){return _347.getPacketType()=="presence"&&_347.getFrom().toBareJID()==jid.toBareJID();});}_342.addPacketFilter(this._presencePacketFilter);this._presenceListeners=new Array();this._presence={};this._jid=jid;this.mode=_344;};org.jive.spank.presence.Manager.prototype={sendPresence:function(_348){if(!_348){_348=new XMPP.Presence();}if(!_348.getTo()&&this._jid){_348.setTo(this._jid.toString());}this.getCurrentPresence=function(){return _348;};this.getConnection().sendPacket(_348);},setSubscriptionMode:function(mode){this.mode=mode;},addPresenceListener:function(_34a){if(!_34a||!(_34a instanceof Function)){throw Error("Presence listener must be function");}this._presenceListeners.push(_34a);},getHighestResource:function(jid){var _34c=jid.toBareJID();if(!this._presence[_34c]){return null;}var _34d;for(var _34e in this._presence[_34c].resources){var _34f=this._presence[_34c].resources[_34e];if(!_34d||_34f.getPriority()>=_34d.getPriority){_34d=_34f;}}return _34d;},getPresence:function(jid){if(!jid.getResource()){return this.getHighestResource(jid);}var _351=jid.toBareJID();if(!this._presence[_351]){return null;}else{return this._presence[_351].resources[jid.getResource()];}},_createPresencePacketHandler:function(){var _352=this;return function(_353){_352._handlePresencePacket(_353);};},_handlePresencePacket:function(_354){var type=_354.getType();if(type=="available"||type=="unavailable"){var jid=_354.getFrom();var _357=jid.toBareJID();if(!this._presence[_357]&&type=="available"){this._presence[_357]={};this._presence[_357].resources={};}else{if(!this._presence[_357]){return;}}var _358=jid.getResource();if(type=="available"){this._presence[jid.toBareJID()].resources[_358]=_354;}else{delete this._presence[jid.toBareJID()].resources[_358];}}else{if((_354.getType()=="subscribe"||_354.getType()=="unsubscribe")&&(this.mode=="accept"||this.mode=="reject")){var _359=new XMPP.Presence(_354.getFrom());_359.setType((this.mode=="accept"&&_354.getType()!="unsubscribe"?"subscribed":"unsubscribed"));this.getConnection().sendPacket(_359);}}if(!this._presenceListeners){return;}this._presenceListeners.each(function(_35a){_35a(_354);});},destroy:function(){delete this._presence;if(this.getConnection()){this.getConnection().removePacketFilter(this._presencePacketFilter);}this.getConnection=Prototype.emptyFunction;delete this._presenceListeners;}};org.jive.spank.roster={};org.jive.spank.roster.Manager=function(_35b,_35c,_35d){if(!_35b||!(_35b instanceof XMPPConnection)){throw Error("Connection required for the roster manager.");}var self=this;_35b.addConnectionListener({connectionClosed:function(){self.destroy();}});this.getConnection=function(){return _35b;};this.rosterPacketFilter=new org.jive.spank.PacketFilter(this._rosterPacketHandler(),this._createRosterPacketFilter);_35b.addPacketFilter(this.rosterPacketFilter);if(!_35d){_35d=new org.jive.spank.presence.Manager(_35b);}this.onLoadCallback=_35c;var _35f=new org.jive.spank.roster.Packet();this._initialRequestID=_35f.getID();_35b.sendPacket(_35f);this.rosterListeners=new Array();};org.jive.spank.roster.Manager.prototype={getRoster:function(){return this._roster;},_rosterPacketHandler:function(){var _360=this;return function(_361){_360._handleRosterPacket(new org.jive.spank.roster.Packet(null,null,null,_361.rootNode.cloneNode(true)));};},_createRosterPacketFilter:function(_362){var _363=_362.getExtension("query");return _363!=null&&_363.namespaceURI=="jabber:iq:roster";},_handleRosterPacket:function(_364){console.debug("Roster packet recieved %s",_364.getID());if(_364.getID()==this._initialRequestID){this._handleInitialResponse(_364);}else{if(_364.getType()=="set"){this._handleRosterAdd(_364,true);}}},_handleInitialResponse:function(_365){this._roster={};this._users={};this._handleRosterAdd(_365,false);if(this.onLoadCallback&&this.onLoadCallback instanceof Function){this.onLoadCallback(this);this.onLoadCallback=Prototype.emptyFunction;}presenceManager.sendPresence();},_handleRosterAdd:function(_366,_367){var _368=_366.getItems();var _369=this._roster;var _36a=this._users;var _36b=new Array();var _36c=new Array();var _36d=new Array();_368.each(function(item){var jid=item.getJID().toBareJID();if(item.getSubscription()=="remove"||(item.getSubscription()=="none"&&!item.isSubscriptionPending())){item=_36a[jid];if(!item){return;}delete _36a[jid];if(_369["unfiled"]&&_369["unfiled"][item.getName()]){delete _369["unfiled"][item.getJID().toString()];}var _370=item.getGroups();for(var i=0;i<_370.length;i++){var _372=_370[i];if(!_369[_372]){continue;}delete _369[_372][item.getJID().toString()];}_36c.push(item);return;}var _373=false;var _374=false;var _375;if(_36a[jid]){_375=_36a[jid];var _376=_375.getGroups();var _377=item.getGroups();for(var i=0;i<_376.length;i++){var _379=_377[i];if(_377.indexOf(_376[i])<0&&_369[_379]){if(!_373){_373=true;_36d.push(item);}delete _369[_379][_375.getJID().toString()];}}}else{_374=true;_36b.push(item);}if(!_373&&!_374&&(_375.getName()!=item.getName()||_375.getSubscription()!=item.getSubscription())){_373=true;_36d.push(item);}_36a[jid]=item;var _37a=item.getGroups();for(var i=0;i<_37a.length;i++){var _37c=_37a[i];if(!_369[_37c]){_369[_37c]={};}if(!_369[_37c][item.getJID().toString()]&&!_373&&!_374){_373=true;_36d.push(item);}_369[_37c][item.getJID().toString()]=item;}if(_37a.length==0){if(!_369["unfiled"]){_369["unfiled"]={};}if(!_369["unfiled"][item.getJID().toString()]&&!_373&&!_374){_373=true;_36d.push(item);}_369["unfiled"][item.getJID().toString()]=item;}});if(_367){this._fireRosterUpdates(_36b,_36d,_36c);}},_fireRosterUpdates:function(_37d,_37e,_37f){this.rosterListeners.each(function(_380){if(_37d.length>0&&_380.onAdded){_380.onAdded(_37d);}if(_37e.length>0&&_380.onUpdated){_380.onUpdated(_37e);}if(_37f.length>0&&_380.onRemoved){_380.onRemoved(_37f);}});},addEntry:function(jid,name,_383){var _384=new org.jive.spank.roster.Packet("set");var item=_384.addItem(jid,name);if(_383){item.addGroups(_383);}console.debug("adding contact: %x",_384.doc.documentElement);this.getConnection().sendPacket(_384);var _386=new XMPP.Presence(jid);_386.setType("subscribe");this.getConnection().sendPacket(_386);},removeEntry:function(jid){var _388=new org.jive.spank.roster.Packet("set");var item=_388.addItem(jid);item.setSubscription("remove");console.debug("removing roster entry: %x",_388.doc.documentElement);this.getConnection().sendPacket(_388);},addRosterListener:function(_38a){this.rosterListeners.push(_38a);},removeRosterListener:function(_38b){if(!_38b){return;}var _38c=this.rosterListeners.indexOf(_38b);if(_38c>=0){this.rosterListeners.splice(_38c,1);}},destroy:function(){this.rosterListeners.clear();this.getConnection=Prototype.emptyFunction;delete this._roster;delete this._users;delete this._handleRosterAdd;this.onLoadCallback=Prototype.emptyFunction;delete this._initialRequestID;}};org.jive.spank.disco={_connections:new Array(),getManager:function(_38d){var sid=_38d._sid;if(org.jive.spank.disco._connections[sid]==null){org.jive.spank.disco._connections[sid]=new org.jive.spank.disco.Manager(_38d);_38d.addConnectionListener({connectionClosed:function(){delete org.jive.spank.disco._connections[sid];}});}return org.jive.spank.disco._connections[sid];}};org.jive.spank.disco.Manager=function(_38f){this._connection=_38f;var self=this;this.features=new Array();this.infoCache={};var _391=new org.jive.spank.PacketFilter(function(_392){self._handleDiscoResquest(_392);},function(_393){return _393.getPacketType()=="iq"&&_393.getType()=="get"&&_393.getQuery()&&_393.getQuery().getAttribute("xmlns")=="http://jabber.org/protocol/disco#info";});_38f.addPacketFilter(_391);_38f.addConnectionListener({connectionClosed:function(){self.destroy();}});};org.jive.spank.disco.Manager.prototype={getCategory:function(jid,_395){var _396=this.infoCache[jid.toString()];if(!_396||_395){this.discoverInfo(null,jid);return null;}if(_396.getType()!="result"){return null;}var _397=_396.getExtension("query");var info=_397.childNodes;for(var i=0;i<info.length;i++){if(info[i].tagName=="identity"){return info[i].getAttribute("category");}}return null;},hasFeature:function(jid,_39b,_39c){var _39d=this.infoCache[jid.toString()];if(!_39d||_39c){this.discoverInfo(null,jid);return false;}if(_39d.getType()!="result"){return false;}var _39e=_39d.getExtension("query");var info=_39e.childNodes;for(var i=0;i<info.length;i++){if(info[i].tagName=="feature"){if(info[i].getAttribute("var")==_39b){return true;}}}return false;},discoverInfo:function(_3a1,jid,node){var _3a4=new XMPP.IQ("get",this._connection._jid,jid.toString());var id=_3a4.getID();var _3a6=_3a4.setQuery("http://jabber.org/protocol/disco#info");if(node){_3a6.setAttribute("node",node);}var self=this;this._connection.sendPacket(_3a4,new org.jive.spank.PacketFilter(function(_3a8){self.infoCache[jid.toString()]=_3a8;if(_3a1){_3a1(_3a8);}},function(_3a9){return _3a9.getID()==id;}));},discoverItems:function(_3aa,jid,node){if(!_3aa){return;}var _3ad=new XMPP.IQ("get",this._connection._jid,jid.toString());var id=_3ad.getID();var _3af=_3ad.setQuery("http://jabber.org/protocol/disco#items");if(node){_3af.setAttribute("node",node);}this._connection.sendPacket(_3ad,new org.jive.spank.PacketFilter(_3aa,function(_3b0){return _3b0.getID()==id;}));},addFeature:function(_3b1){this.features.push(_3b1);},removeFeature:function(_3b2){var _3b3=this.features.indexOf(_3b2);if(_3b3>=0){this.features.splice(_3b3,1);}},_handleDiscoResquest:function(get){var _3b5=new XMPP.IQ("result",this._connection._jid,get.getFrom());_3b5.setID(get.getID());var _3b6=_3b5.setQuery("http://jabber.org/protocol/disco#info");var _3b7=_3b6.appendChild(_3b5.doc.createElement("identity"));_3b7.setAttribute("category","client");_3b7.setAttribute("name","spank");_3b7.setAttribute("type","web");for(var i=0;i<this.features.length;i++){var _3b9=this.features[i];var _3ba=_3b6.appendChild(_3b5.doc.createElement("feature"));_3ba.setAttribute("var",_3b9);}this._connection.sendPacket(_3b5);},destroy:function(){this.infoCache={};var _3bb=org.jive.spank.disco._connections.indexOf(this);if(_3bb>=0){org.jive.spank.disco._connections.splice(_3bb,1);}}};org.jive.spank.muc={};org.jive.spank.muc.Manager=function(_3bc,_3bd){this._connection=_3bc;var self=this;_3bc.addConnectionListener({connectionClosed:function(){self.destroy();}});this.invitationListeners=new Array();this.rooms=new Array();this.chatManager=_3bd;org.jive.spank.disco.getManager(_3bc).addFeature("http://jabber.org/protocol/muc");};org.jive.spank.muc.Manager.prototype={getConferenceServers:function(_3bf,_3c0){if(!_3c0){_3c0=new XMPP.JID(this._connection.domain);}var _3c1=function(_3c2){var _3c3=_3c2.getExtension("query");var _3c4=_3c3.childNodes;for(var i=0;i<_3c4.length;i++){var info=_3c4[i];if(info.tagName=="feature"){if(info.getAttribute("var")=="http://jabber.org/protocol/muc"){_3bf(_3c2.getFrom());return;}}}};var _3c7=function(_3c8){var _3c9=_3c8.getExtension("query");var _3ca=_3c9.childNodes;var _3cb={};for(var i=0;i<_3ca.length;i++){var jid=_3ca[i].getAttribute("jid");if(!jid){continue;}org.jive.spank.disco.getManager(this._connection).discoverInfo(_3c1,new XMPP.JID(jid));}}.bind(this);org.jive.spank.disco.getManager(this._connection).discoverItems(_3c7,_3c0);},retrieveRooms:function(_3ce,_3cf){if(!_3ce||!_3cf){return;}var _3d0=function(_3d1){var _3d2=_3d1.getExtension("query");var _3d3=_3d2.childNodes;var _3d4={};for(var i=0;i<_3d3.length;i++){var jid=_3d3[i].getAttribute("jid");if(!jid){continue;}var name=_3d3[i].getAttribute("name");_3d4[jid]={name:name};}_3cf(_3d4);};org.jive.spank.disco.getManager(this._connection).discoverItems(_3d0,_3ce);},retrieveRoomsInfo:function(_3d8,_3d9){if(!_3d8||!_3d9){return;}var _3da=0;var _3db=function(_3dc){var jid=_3dc.getFrom().toString();var _3de=_3dc.getExtension("query");var info=_3de.childNodes;var room=_3d8[jid];if(room){for(var i=0;i<info.length;i++){if(info[i].tagName=="feature"){}else{if(info[i].tagName=="x"){var _3e2=new XMPP.XData(null,info[i]);var _3e3=_3e2.getFields();for(var _3e4 in _3e3){_3d8[jid][_3e4]={};for(var _3e5 in _3e3[_3e4]){_3d8[jid][_3e4][_3e5]=_3e3[_3e4][_3e5];}}}}}}if(--_3da<=0){_3d9(_3d8);}};for(var room in _3d8){_3da++;org.jive.spank.disco.getManager(this._connection).discoverInfo(_3db,room);}},createRoom:function(_3e7){this.chatManager.registerDomain(_3e7.getDomain(),true);return new org.jive.spank.muc.Room(this,_3e7);},getRoom:function(_3e8){return this.rooms.detect(function(_3e9,_3ea){return _3e9.jid.toString()==_3e8.toString();});},_addRoom:function(room){this.rooms.push(room);},_removeRoom:function(room){if(!room){return;}var _3ed=this.rooms.indexOf(room);if(_3ed>=0){this.rooms.splice(_3ed,1);}},addInvitationsListener:function(_3ee){if(!(_3ee instanceof Function)){throw Error("invitation listener must be a function.");}var _3ef=this.invitationListeners;if(this.invitationListeners.length<=0){this.invitationFilter=new org.jive.spank.PacketFilter(function(_3f0){var _3f1=new org.jive.spank.muc.User(null,null,_3f0.rootNode.cloneNode(true));var _3f2=_3f1.getInvite();if(_3f2){_3ef.each(function(_3f3){_3f3(_3f2);});}},function(_3f4){if(_3f4.getPacketType()!="message"){return false;}var ex=_3f4.getExtension("x");if(!ex){return false;}return ex.getAttribute("xmlns")=="http://jabber.org/protocol/muc#user";});this._connection.addPacketFilter(this.invitationFilter);}this.invitationListeners.push(_3ee);},removeInvitationsListener:function(_3f6){if(!_3f6||!(_3f6 instanceof Function)){throw Error("listeners must be a function");}var _3f7=this.invitationListeners.indexOf(_3f6);if(_3f7>=0){this.invitationListeners.splice(_3f7,1);}if(this.invitationListeners.size()<=0&&this.invitationFilter){this._connection.removePacketFilter(this.invitationFilter);delete this.invitationFilter;}},declineInvitation:function(from,room,_3fa){if(!room||!from){throw Error("Cannot decline invitation, invitiation missing information");}var _3fb=new org.jive.spank.muc.User(room);_3fb.setDecline(from,_3fa);this._connection.sendPacket(_3fb);},destroy:function(){for(var i=0;i<this.rooms.length;i++){this.rooms[i].leave(true);}this.rooms.clear();this.invitationListeners.clear();}};org.jive.spank.muc.Room=function(_3fd,_3fe){this.manager=_3fd;this.connection=_3fd._connection;this.jid=_3fe;this.presenceListeners=new Array();this.messageListeners=new Array();this.isJoined=false;};org.jive.spank.muc.Room.prototype={join:function(_3ff,_400,_401,_402,_403){var _404=this.jid;var _405=new XMPP.Presence(_404.toString()+"/"+_3ff);var _406=_405.addExtension("x","http://jabber.org/protocol/muc");if(_400){var _407=_406.appendChild(_405.doc.createElement("password"));_407.appendChild(_405.doc.createTextNode(_400));}this._initPresenceManager(_3ff,_403);if(_402){this._initMessageListener(_402);}var _408;if(_401&&(_401.onSuccess||_401.onError)){var room=this;_408=new org.jive.spank.PacketFilter(function(_40a){if(_40a.getError()&&_401.onError){this.presenceManager.destroy();this.presenceManager=undefined;this.connection.removePacketFilter(this.messageFilter);_401.onError(_40a);}else{if(!_40a.getError()&&_401.onSuccess){this.manager._addRoom(this);this.nickname=_3ff;room.occupantJid=new XMPP.JID(_404.toString()+"/"+_3ff);room.isJoined=true;this.presenceManager._handlePresencePacket(_40a);_401.onSuccess(new org.jive.spank.muc.Occupant(_40a));}}_401=Prototype.emptyFunction;}.bind(this),function(_40b){return _40b.getFrom().toString()==_405.getTo().toString();});}this.connection.sendPacket(_405,_408);},create:function(_40c,_40d,_40e,_40f,_410){var _411={};if(_40e.onSuccess){_411.onSuccess=this._createSuccess.bind(this,_40e.onSuccess,_40d,_40f,_410);}this.join(_40c,null,_411);},_createSuccess:function(_412,_413,_414,_415,_416){var _417=function(_418,_419,_41a,_41b,_41c,room,_41e){var _41f=_41e.getAnswerForm();for(var _420 in _419){_41f.setAnswer(_420,[_419[_420]]);}this.sendConfigurationForm(_41f);this.addOccupantListener(_41c);this._initMessageListener(_41b);_41a(_418);_41a=Prototype.emptyFunction;};this.getConfigurationForm(_417.bind(this,_416,_413,_412,_414,_415));},leave:function(_421){this.isJoined=false;this.connection.removePacketFilter(this.messageFilter);delete this.connection;try{var _422=new XMPP.Presence();_422.setType("unavailable");this.presenceManager.sendPresence(_422);}catch(error){}this.presenceManager.destroy();this.presenceManager=undefined;if(!_421){this.manager._removeRoom(this);}},_initPresenceManager:function(_423,_424){this.presenceManager=new org.jive.spank.presence.Manager(this.connection,new XMPP.JID(this.jid.toString()+"/"+_423));if(_424){this.addOccupantListener(_424);}},addOccupantListener:function(_425){var _426=function(_427){if(!_427.getError()){_425(new org.jive.spank.muc.Occupant(_427));}};this.presenceManager.addPresenceListener(_426);},getOccupants:function(){var _428=new Array();var _429=this.presenceManager._presence[this.jid];if(!_429){return _428;}var _42a=_429.resources;for(var _42b in _42a){var _42c=_42a[_42b];if(_42c.getType!="unavailable"){_428.push(new org.jive.spank.muc.Occupant(_42c));}}return _428;},getOccupant:function(nick){var _42e=this.jid+"/"+nick;var _42f=this.presenceManager._presence[this.jid].resources[nick];if(_42f==null||_42f.getType()=="unavailable"){return null;}else{return new org.jive.spank.muc.Occupant(_42f);}},_initMessageListener:function(_430){var room=this;this.messageFilter=new org.jive.spank.PacketFilter(function(_432){room.messageListeners.each(function(_433){var _434=false;if(_432.getSubject()&&_433.subjectUpdated){_433.subjectUpdated(room,_432.getFrom(),_432.getSubject());_434=true;}var ex=_432.getExtension("x");if(ex){var _436=ex.getAttribute("xmlns")=="http://jabber.org/protocol/muc#user";if(_436&&_433.invitationDeclined){var user=new org.jive.spank.muc.User(null,null,_432.rootNode);var _438=user.getDecline();if(_438){_433.invitationDeclined(_438);_434=true;}}}if(_433.messageReceived&&!_434){_433.messageReceived(_432);}});},function(_439){return _439.getFrom().toBareJID()==room.jid.toBareJID()&&_439.getPacketType()=="message"&&(_439.getType()=="groupchat"||_439.getType()=="normal");});this.connection.addPacketFilter(this.messageFilter);if(_430){this.messageListeners.push(_430);}},sendMessage:function(_43a,_43b){if(!_43b){_43b=new XMPP.Message("groupchat",this.connection,this.jid);}else{_43b.setType("groupchat");_43b.setFrom(this.jid);}_43b.setBody(_43a);this.connection.sendPacket(_43b);},addMessageListener:function(_43c){if(!_43c){throw Error("listeners cannot be null");}this.messageListeners.push(_43c);},removeMessageListener:function(_43d){if(!_43d){throw Error("listeners must be a function");}var _43e=this.messageListeners.indexOf(_43d);if(_43e>=0){this.messageListeners.splice(_43e,1);}},setSubject:function(_43f){var _440=new XMPP.Message(this.jid);var ex=_440.addExtension("subject");ex.appendChild(_440.doc.createTextNode(_43f));this.connection.sendPacket(_440);},invite:function(jid,_443){var _444=new org.jive.spank.muc.User(this.jid);_444.setInvite(jid,_443);this.connection.sendPacket(_444);},changeNickname:function(_445){if(!this.isJoined){throw Error("Cannot change nickname if not in room.");}var _446=new XMPP.Presence();_446.setTo(new XMPP.JID(this.jid.toBareJID()+"/"+_445));this.connection.sendPacket(_446);},getConfigurationForm:function(_447){var iq=new XMPP.IQ("get",this.jid,this.jid.getBareJID());iq.setQuery("http://jabber.org/protocol/muc#owner");var _449=org.jive.spank.PacketFilter.filter.IDFilter(function(_44a){if(_44a.getExtension("x","jabber:x:data")){_447(this.jid.getBareJID(),new XMPP.XData(null,_44a.getExtension("x","jabber:x:data")));}}.bind(this),iq);this.connection.sendPacket(iq,_449);},sendConfigurationForm:function(form,_44c){var iq=new XMPP.IQ("set",this.jid,this.jid.getBareJID());var _44e=iq.setQuery("http://jabber.org/protocol/muc#owner");var _44f=form.rootNode.cloneNode(true);iq.doc.importNode(_44f,true);_44e.appendChild(_44f);var _450=_44f.childNodes;for(var i=_450.length-1;i>=0;i--){if(!_450[i].hasChildNodes()){_44f.removeChild(_450[i]);}}var _452;if(_44c){org.jive.spank.PacketFilter.filter.IDFilter(function(_453,jid){_44c(jid.getBareJID());}.bind(this),this.jid);}this.connection.sendPacket(iq,_452);}};org.jive.spank.muc.Occupant=function(_455){this.presence=_455;};org.jive.spank.muc.Occupant.prototype={getAffiliation:function(){var user=this.presence.getExtension("x");if(user==null){return null;}return user.firstChild.getAttribute("affiliation");},getRole:function(){var user=this.presence.getExtension("x");if(user==null){return null;}return user.firstChild.getAttribute("role");},getNick:function(){return this.presence.getFrom().getResource();},getRoom:function(){return this.presence.getFrom().toBareJID();}};org.jive.spank.PacketFilter=function(_458,_459){if(!_458){throw Error("Callback must be specified");}this.getFilterTest=function(){return _459;};this.getCallback=function(){return _458;};};org.jive.spank.PacketFilter.prototype={accept:function(_45a){if(!_45a||!(_45a instanceof XMPP.Packet)){return;}var _45b=this.getFilterTest();var _45c=true;if(_45b){_45c=_45b(_45a);}if(_45c){var _45d=this.getCallback();_45d(_45a);}return _45c;}};org.jive.spank.PacketFilter.filter={IDFilter:function(_45e,_45f){return new org.jive.spank.PacketFilter(_45e,function(_460,_461){return _461.getID()==_460.getID();}.bind(this,_45f));}};org.jive.spank.x={};org.jive.spank.x.chatstate={_connections:new Array(),getManager:function(_462){if(org.jive.spank.x.chatstate._connections[_462.getConnection()._sid]==null){org.jive.spank.x.chatstate._connections[_462.getConnection()._sid]=new org.jive.spank.x.chatstate.Manager(_462);}return org.jive.spank.x.chatstate._connections[_462.getConnection()._sid];}};org.jive.spank.x.chatstate.Manager=function(_463){this._manager=_463;this._connection=_463.getConnection();this._lastState={};this._lastStateSent={};this._stateListeners=new Array();var self=this;this._connection.addPacketFilter(new org.jive.spank.PacketFilter(this._handleIncomingState.bind(this),function(_465){return _465.getPacketType()=="message"&&(_465.getType()=="chat"||_465.getType()=="groupchat")&&_465.getExtension(null,"http://jabber.org/protocol/chatstates")&&!_465.getExtension("x","jabber:x:delay");}));_463.getConnection().addConnectionListener({connectionClosed:function(){self.destroy();}});org.jive.spank.disco.getManager(_463.getConnection()).addFeature("http://jabber.org/protocol/chatstates");};org.jive.spank.x.chatstate.Manager.prototype={setCurrentState:function(_466,jid,_468,_469){var _46a=false;if(!_468){_468=new XMPP.Message((_469?"groupchat":"chat"),null,jid);_46a=true;}if(!_469&&!this.shouldSendState(jid)){if(_46a){return null;}else{return _468;}}_466=(_466?_466:"active");_468.addExtension(_466,"http://jabber.org/protocol/chatstates");this._lastStateSent[jid.toString()]=_466;return _468;},shouldSendState:function(jid){if(this._lastState[jid.toString()]){return this._lastState[jid.toString()];}if(!jid.getResource()){return !this._lastStateSent[jid.toString()];}var _46c=org.jive.spank.disco.getManager(this._connection);var _46d=_46c.getCategory(jid);if(!_46d){return false;}else{if(_46d=="conference"){return true;}}return _46c.hasFeature(jid,"http://jabber.org/protocol/chatstates");},addStateListener:function(_46e){if(_46e&&_46e instanceof Function){this._stateListeners.push(_46e);}},removeStateListener:function(_46f){if(_46f){var i=this._stateListeners.indexOf(_46f);if(i>=0){this._stateListeners.splice(i,1);}}},_handleIncomingState:function(_471){var from=_471.getFrom().toString();var _473=_471.getExtension(null,"http://jabber.org/protocol/chatstates");this._lastState[from]=_473.tagName;for(var i=0;i<this._stateListeners.length;i++){this._stateListeners[i](_471.getFrom(),_473.tagName,_471.getType()=="groupchat");}},destroy:function(){}};var util={XML:{element:function(name,_476,_477){var _478="";if(_477){_478=this.formatAttributes(_477);}var xml;if(!_476){xml="<"+name+_478+"/>";}else{xml="<"+name+_478+">"+_476+"</"+name+">";}return xml;},formatAttributes:function(_47a){var _47b="";for(var attr in _47a){var _47d=_47a[attr];_47b+=" "+attr+"=\""+_47d+"\"";}return _47b;}},HTTP:{requestCount:0,maxConcurrentRequests:2,failureState:false,pendingRequests:new Array(),doRequest:function(url,_47f,_480,_481,_482){if(this.failureState){throw Error("HTTP connection in failure state and must be reset.");}if(this.requestCount>=this.maxConcurrentRequests){this.pendingRequests.push({requestURL:url,requestBody:_47f,requestCallback:_480,requestFailure:_481,requestException:_482});return;}var _483=this.pendingRequests;var _484=function(_485){util.HTTP.requestCount--;if(_483.length>0){var _486=_483.splice(0,1)[0];util.HTTP.doRequest(_486.requestURL,_486.requestBody,_486.requestCallback,_486.requestFailure,_486.requestException);}if(_480){_480(_485);}};var _487=function(_488,_489){util.HTTP.requestCount--;util.HTTP.failureState=true;if(!_481){return;}_483.splice(0,0,{requestURL:url,requestBody:_47f,requestCallback:_480,requestFailure:_481,requestException:_482});_481(_488,_489);};var _48a=function(_48b,_48c){util.HTTP.requestCount--;util.HTTP.failureState=true;console.error("Request exception! "+_48c);if(!_482){return;}_483.splice(0,0,{requestURL:url,requestBody:_47f,requestCallback:_480,requestFailure:_481,requestException:_482});_482(_48b,_48c);};this.requestCount++;var _48d;if(typeof Flash!="undefined"){_48d=new Flash.request();_48d.onload=_484;_48d.open("POST",url);_48d.send(_47f);}else{_48d=new Ajax.Request(url,{method:"post",postBody:_47f,onSuccess:_484,onException:_48a,onFailure:_487});}},reset:function(){this.failureState=false;this.pendingRequests=new Array();}},Integer:{randomInt:function(_48e,_48f,_490){_48e=Math.floor(_48e);_48f=Math.floor(_48f);return (Math.floor(_48e+((_48f-_48e+1)*Math.random((_490!=null)?_490:0))));}},StringUtil:{randomString:function(len){var _492="";var _493=0;var _494="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var intI=0;intI<len;intI++){_493=util.Integer.randomInt(0,(_494.length-1),intI);_492+=_494.charAt(_493);}return _492;}}};var XMPP={};XMPP.Packet=function(){};XMPP.Packet.packetID=1;XMPP.Packet.prototype={idBase:util.StringUtil.randomString(5),_init:function(_496,from,to,_499){this.doc=Sarissa.getDomDocument();var _49a=!_499;if(!_499){_499=this.doc.createElement(_496);}else{if(!_SARISSA_IS_IE){_499=this.doc.importNode(_499,true);}}this.doc.appendChild(_499);this.rootNode=this.doc.firstChild;if(_49a){this.addAttributes({id:this._nextPacketID()});this.setFrom(from);this.setTo(to);}},getPacketType:function(){return this.rootNode.tagName;},getID:function(){return this.rootNode.getAttribute("id");},setID:function(id){this.rootNode.setAttribute("id",id);},_nextPacketID:function(){return this.idBase+"-"+XMPP.Packet.packetID++;},removeAttributes:function(_49c){for(var i=0;i<_49c.length;i++){this.rootNode.removeAttribute(_49c[i]);}},addAttributes:function(_49e){for(var attr in _49e){this.rootNode.setAttribute(attr,_49e[attr]);}},setFrom:function(_4a0){if(!_4a0||_4a0==""){this.removeAttributes($A("from"));}else{this.addAttributes({from:_4a0});}},getFrom:function(){if(this.from){return this.from;}var from=this.rootNode.getAttribute("from");if(!from){this.from=null;}else{this.from=new XMPP.JID(from);}return this.from;},setTo:function(_4a2){this.to=null;if(!_4a2||_4a2==""){this.removeAttributes($A("to"));}else{this.addAttributes({to:_4a2});}},getTo:function(){if(this.to){return this.to;}var to=this.rootNode.getAttribute("to");if(!to){this.to=null;}else{this.to=new XMPP.JID(to);}return this.to;},setXMLNS:function(_4a4){if(!_4a4||_4a4==""){this.removeAttributes($A("xmlns"));}else{this.addAttributes({xmlns:_4a4});}},toXML:function(){var xml=this.doc.xml?this.doc.xml:(new XMLSerializer()).serializeToString(this.doc);if(xml.indexOf("<?xml version=\"1.0\"?>")>=0){xml=xml.substr("<?xml version=\"1.0\"?>".length);}return xml;},addExtension:function(_4a6,_4a7){if(_4a7&&this.doc.createElementNS){this.extension=this.rootNode.appendChild(this.doc.createElementNS(_4a7,_4a6));}else{this.extension=this.rootNode.appendChild(this.doc.createElement(_4a6));}if(_4a7){this.extension.setAttribute("xmlns",_4a7);}return this.extension;},addTextExtension:function(_4a8,_4a9){var _4aa=this.addExtension(_4a8);_4aa.appendChild(this.doc.createTextNode(_4a9));},getExtension:function(_4ab,_4ac){var _4ad=this.getExtensions(_4ab,_4ac);if(!_4ad||_4ad.length<=0){return null;}else{return _4ad[0];}},getExtensions:function(_4ae,_4af){if(!_4ae){_4ae="*";}var _4b0=this.rootNode.getElementsByTagName(_4ae);if(_4b0.length<=0){return new Array();}var _4b1=function(node){if(!_4af||node.getAttribute("xmlns")==_4af){return node;}else{return null;}};return $A(_4b0).collect(_4b1).toArray().compact();},removeExtension:function(_4b3){var _4b4=this.rootNode.childNodes;for(var i=0;i<_4b4.length;i++){if(_4b4[i].tagName==_4b3){return this.rootNode.removeChild(_4b4[i]);}}},getError:function(){var _4b6=this.getExtension("error");if(_4b6==null){return null;}else{return _4b6.getAttribute("code");}}};XMPP.IQ=function(_4b7,from,to,_4ba,init){if(init){return;}this._init("iq",from,to,_4ba);if(!_4ba){this.setType(_4b7);}};XMPP.IQ.prototype=Object.extend(new XMPP.Packet(),{setType:function(_4bc){if(!_4bc||_4bc==""){_4bc="get";}this.addAttributes({type:_4bc});},getType:function(){return this.rootNode.getAttribute("type");},setQuery:function(_4bd){return this.addExtension("query",_4bd);},getQuery:function(){return this.getExtension("query");}});XMPP.Registration=function(_4be,to,_4c0){this._init("iq",null,to,_4c0);if(!_4c0){this.setType(_4be);this.setQuery("jabber:iq:register");}};XMPP.Registration.prototype=Object.extend(new XMPP.IQ(null,null,null,null,true),{getInstructions:function(){var _4c1=this.getExtension("instructions");if(!_4c1){return null;}else{if(!_4c1.firstChild){return "";}}return _4c1.firstChild.nodeValue;},setAttributes:function(map){for(var attr in map){this.addTextExtension(attr,map[attr]);}}});XMPP.Presence=function(to,from,_4c6){this._init("presence",from,to,_4c6);};XMPP.Presence.prototype=Object.extend(new XMPP.Packet(),{setType:function(_4c7){if(!_4c7||_4c7==""||_4c7=="available"){this.removeAttributes($A("type"));}else{this.addAttributes({type:_4c7});}},getType:function(){var type=this.rootNode.getAttribute("type");return (type?type:"available");},setPriority:function(_4c9){if(!_4c9||!(_4c9 instanceof Number)){this.removeExtension("priority");}else{this.addTextExtension("priority",_4c9);}},getPriority:function(){var _4ca=this.getExtension("priority");if(_4ca){return _4ca.firstChild.nodeValue;}else{return 0;}},setMode:function(mode){if(!mode||mode==""||mode=="available"){this.removeExtension("show");}else{this.addTextExtension("show",mode);}},getMode:function(){var show=this.getExtension("show");if(show){return show.firstChild.nodeValue;}else{return null;}},setStatus:function(_4cd){if(!_4cd||_4cd==""){this.removeExtension("status");}else{this.addTextExtension("status",_4cd);}},getStatus:function(){var _4ce=this.getExtension("status");if(_4ce&&_4ce.firstChild){return _4ce.firstChild.nodeValue;}else{return null;}}});XMPP.Message=function(_4cf,from,to,_4d2){if(!_4cf&&!from&&!to&&!_4d2){return;}this._init("message",from,to,_4d2);if(!_4d2){this.setType(_4cf);}};XMPP.Message.prototype=Object.extend(new XMPP.Packet(),{setType:function(_4d3){if(!_4d3||_4d3==""||_4d3=="normal"){this.removeAttributes($A("type"));}else{this.addAttributes({type:_4d3});}},getType:function(){var type=this.rootNode.getAttribute("type");if(!type){type="normal";}return type;},setSubject:function(_4d5){if(!_4d5||_4d5==""){this.removeExtension("subject");}else{this.addTextExtension("subject",_4d5);}},getSubject:function(){var _4d6=this.getExtension("subject");if(!_4d6){return null;}else{if(!_4d6.firstChild){return "";}}return _4d6.firstChild.nodeValue;},setBody:function(body){if(!body||body==""){this.removeExtension("body");}else{this.addTextExtension("body",body);}},getBody:function(){var body=this.getExtension("body");if(!body){return null;}return {body:body.firstChild.nodeValue,lang:body.getAttribute("lang")};},getBodies:function(){var _4d9=this.getExtensions("body");if(!body){return null;}return _4d9.collect(function(body){return {body:body.firstChild.nodeValue,lang:body.getAttribute("lang")};});},setThread:function(_4db){if(!_4db||_4db==""){this.removeExtension("thread");}else{this.addTextExtension("thread",_4db);}},getThread:function(){var _4dc=this.getExtension("thread");if(!_4dc){return null;}return _4dc.firstChild.nodeValue;}});org.jive.spank.roster.Packet=function(_4dd,from,to,_4e0){this._init("iq",from,to,_4e0);if(!_4e0){this.setType(_4dd);this.setQuery("jabber:iq:roster");}};org.jive.spank.roster.Packet.prototype=Object.extend(new XMPP.IQ(null,null,null,null,true),{getItems:function(){var _4e1=new Array();var _4e2=this.getExtension().childNodes;for(var i=0;i<_4e2.length;i++){if(_4e2[i].tagName!="item"){continue;}var item=new org.jive.spank.roster.Item(_4e2[i].cloneNode(true));_4e1.push(item);}return _4e1;},addItem:function(jid,name){var item=this.doc.createElement("item");this.getExtension().appendChild(item);item.setAttribute("jid",jid.toBareJID());if(name){item.setAttribute("name",name);}return new org.jive.spank.roster.Item(item);}});org.jive.spank.roster.Item=function(_4e8){this._element=_4e8;};org.jive.spank.roster.Item.prototype={getJID:function(){var attr=this._element.getAttribute("jid");if(!attr){return null;}else{return new XMPP.JID(attr);}},getName:function(){return this._element.getAttribute("name");},isSubscriptionPending:function(){return this._element.getAttribute("ask");},getSubscription:function(){return this._element.getAttribute("subscription");},setSubscription:function(_4ea){this._element.setAttribute("subscription",_4ea);},getGroups:function(){var _4eb=this._element.childNodes;var _4ec=new Array();for(var i=0;i<_4eb.length;i++){if(_4eb[i].tagName=="group"&&_4eb[i].firstChild){_4ec.push(_4eb[i].firstChild.nodeValue);}}return _4ec;},addGroups:function(_4ee){for(var i=0;i<_4ee.length;i++){var _4f0=this._element.appendChild(this._element.ownerDocument.createElement("group"));_4f0.appendChild(this._element.ownerDocument.createTextNode(_4ee[i]));}}};org.jive.spank.muc.User=function(to,from,_4f3){this._init("message",from,to,_4f3);if(!_4f3){this.addExtension("x","http://jabber.org/protocol/muc#user");}};org.jive.spank.muc.User.prototype=Object.extend(new XMPP.Message(),{setInvite:function(jid,_4f5){if(!jid||!(jid instanceof XMPP.JID)){throw Error("Inivte must contain invitee, provide a JID");}var _4f6=this.doc.createElement("invite");this.getExtension().appendChild(_4f6);_4f6.setAttribute("to",jid.toString());if(_4f5){var _4f7=this.doc.createElement("reason");_4f7.appendChild(this.doc.createTextNode(_4f5));_4f6.appendChild(_4f7);}},getInvite:function(){var ex=this.getExtension("x");if(!ex){return null;}var _4f9=ex.childNodes;var _4fa;for(var i=0;i<_4f9.length;i++){var node=_4f9[i];if(node.tagName=="invite"){_4fa=node;break;}}if(!_4fa){return null;}var _4fd=_4fa.firstChild;if(_4fd){_4fd=_4fd.firstChild.nodeValue;}else{_4fd=null;}var _4fe={};_4fe["room"]=this.getFrom();_4fe["from"]=_4fa.getAttribute("from");if(_4fd){_4fe["reason"]=_4fd;}return _4fe;},setDecline:function(jid,_500){if(!jid||!(jid instanceof XMPP.JID)){throw Error("Invite must contain invitee, provide a JID");}var _501=this.doc.createElement("decline");this.getExtension().appendChild(_501);_501.setAttribute("to",jid.toString());if(_500){var _502=this.doc.createElement("reason");_502.appendChild(this.doc.createTextNode(_500));_501.appendChild(_502);}},getDecline:function(){var ex=this.getExtension("x");if(!ex){return null;}var _504=ex.childNodes;var _505;for(var i=0;i<_504.length;i++){var node=_504[i];if(node.tagName=="decline"){_505=node;break;}}if(!_505){return null;}var _508=_505.firstChild;if(_508){_508=_508.firstChild.nodeValue;}else{_508=null;}var _509={};_509.room=this.getFrom();_509.from=_505.getAttribute("from");if(_508){_509.reason=_508;}return _509;}});org.jive.spank.muc.Owner=function(_50a,to,from,_50d){this._init("iq",from,to,_50d);if(!_50d){this.setQuery("http://jabber.org/protocol/muc#owner");}};org.jive.spank.muc.Owner.prototype=Object.extend(new XMPP.IQ(null,null,null,null,true),{setDestroy:function(_50e,jid){var _510=this.doc.createElement("destroy");this.getExtension().appendChild(_510);if(jid){_510.setAttribute("jid",jid.toString());}if(_50e){var _511=this.doc.createElement("reason");_511.appendChild(this.doc.createTextNode(_50e));_510.appendChild(_511);}},getDestroy:function(){var _512=this.getExtension().childNodes;var _513;for(var i=0;i<_512.length;i++){if(_512[i].tagName=="destroy"){_513=_512[i];break;}}if(_513){var jid=_513.getAttribute("jid");var _516;if(_513.firstChild){_516=_513.firstChild.firstChild.nodeValue;}return {jid:jid,reason:_516};}else{return null;}},addItem:function(_517,jid,nick,role,_51b,_51c){var item=this.doc.createElement("item");this.getExtension().appendChild(item);if(_517){item.setAttribute("affiliation",_517);}if(jid&&jid instanceof XMPP.JID){item.setAttribute("jid",jid.toString());}if(nick){item.setAttribute("nick",nick);}if(role){item.setAttribute("role",role);}if(_51b){var _51e=this.doc.createElement("reason");_51e.appendChild(this.doc.createTextNode(_51b));destroy.appendChild(_51e);}if(_51c){var _51f=this.doc.createElement("actor");_51f.setAttribute("jid",_51c);destroy.appendChild(_51f);}}});XMPP.JID=function(jid){this.jid=jid.toLowerCase();};XMPP.JID.prototype={toString:function(){return this.jid;},toBareJID:function(){if(!this.bareJID){var i=this.jid.indexOf("/");if(i<0){this.bareJID=this.jid;}else{this.bareJID=this.jid.slice(0,i);}}return this.bareJID;},getBareJID:function(){return new XMPP.JID(this.toBareJID());},getResource:function(){var i=this.jid.indexOf("/");if(i<0){return null;}else{return this.jid.slice(i+1);}},getNode:function(){var i=this.jid.indexOf("@");if(i<0){return null;}else{return this.jid.slice(0,i);}},getDomain:function(){var i=this.jid.indexOf("@");var j=this.jid.indexOf("/");if(i<0){return null;}else{if(j<0){return this.jid.slice(i+1);}else{return this.jid.slice(i+1,j);}}}};XMPP.PacketExtension=function(){};XMPP.PacketExtension.prototype={_init:function(_526,_527,_528){this.doc=Sarissa.getDomDocument();var _529=!_528;if(!_528){_528=this.doc.createElementNS(_527,_526);}else{if(!_SARISSA_IS_IE){_528=this.doc.importNode(_528,true);}}this.doc.appendChild(_528);this.rootNode=this.doc.firstChild;}};XMPP.XData=function(type,_52b){this._init("x","jabber:x:data",_52b);if(type){this.setType(type);}};XMPP.XData.prototype=Object.extend(new XMPP.PacketExtension(),{getType:function(){this.rootNode.getAttribute("type");},setType:function(type){if(!type){type="form";}this.rootNode.setAttribute("type",type);},getFields:function(){var _52d=this.rootNode.childNodes;var _52e={};for(var i=0;i<_52d.length;i++){var _530=_52d[i];if(_530.tagName!="field"||_530.getAttribute("type")=="hidden"){continue;}var _531=_530.getAttribute("var");var _532=_530.getAttribute("label");var _533=new Array();var _534=_530.childNodes;for(var j=0;j<_534.length;j++){if(_534[j].tagName!="value"||!_534[j].firstChild){continue;}_533.push(_534[j].firstChild.nodeValue);}_52e[_531]={fieldLabel:_532,values:_533};}return _52e;},getAnswerForm:function(){var _536=new XMPP.XData("submit");var _537=$A(this.rootNode.childNodes);_537.each(function(_538){if(_538.tagName!="field"||!_538.getAttribute("var")){return;}var _539=_538.getAttribute("type")=="hidden";var node=_536.doc.importNode(_538.cloneNode(_539),true);_536.rootNode.appendChild(node);});return _536;},setAnswer:function(_53b,_53c){var _53d=this.getField(_53b);if(!_53d){return;}_53c.each(function(_53e){var _53f=_53d.appendChild(this.doc.createElement("value"));_53f.appendChild(this.doc.createTextNode(_53e));}.bind(this));},getField:function(_540){return $A(this.rootNode.childNodes).detect(function(_541){return _541.getAttribute("var")==_540;});}});XMPP.DelayInformation=function(_542){this.element=_542;};XMPP.DelayInformation.prototype={getDate:function(){var _543=this.element.getAttribute("stamp");var date=new Date();var _545=_543.split("T");date.setUTCFullYear(_545[0].substr(0,4),_545[0].substr(4,2)-1,_545[0].substr(6,2));var time=_545[1].split(":");date.setUTCHours(time[0],time[1],time[2]);return date;}};util.base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(_547){var _548="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;_547=util.base64._utf8_encode(_547);while(i<_547.length){chr1=_547.charCodeAt(i++);chr2=_547.charCodeAt(i++);chr3=_547.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else{if(isNaN(chr3)){enc4=64;}}_548=_548+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);}return _548;},decode:function(_54b){var _54c="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;_54b=_54b.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<_54b.length){enc1=this._keyStr.indexOf(_54b.charAt(i++));enc2=this._keyStr.indexOf(_54b.charAt(i++));enc3=this._keyStr.indexOf(_54b.charAt(i++));enc4=this._keyStr.indexOf(_54b.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;_54c=_54c+String.fromCharCode(chr1);if(enc3!=64){_54c=_54c+String.fromCharCode(chr2);}if(enc4!=64){_54c=_54c+String.fromCharCode(chr3);}}_54c=util.base64._utf8_decode(_54c);return _54c;},_utf8_encode:function(_550){_550=_550.replace(/\r\n/g,"\n");var _551="";for(var n=0;n<_550.length;n++){var c=_550.charCodeAt(n);if(c<128){_551+=String.fromCharCode(c);}else{if((c>127)&&(c<2048)){_551+=String.fromCharCode((c>>6)|192);_551+=String.fromCharCode((c&63)|128);}else{_551+=String.fromCharCode((c>>12)|224);_551+=String.fromCharCode(((c>>6)&63)|128);_551+=String.fromCharCode((c&63)|128);}}}return _551;},_utf8_decode:function(_554){var _555="";var i=0;var c,c1,c2=0;while(i<_554.length){c=_554.charCodeAt(i);if(c<128){_555+=String.fromCharCode(c);i++;}else{if((c>191)&&(c<224)){c2=_554.charCodeAt(i+1);_555+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2;}else{c2=_554.charCodeAt(i+1);var c3=_554.charCodeAt(i+2);_555+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}}return _555;}};if(typeof console=="undefined"||!console.firebug){var console=new Object;console.trace=function(){};console.log=function(){};console.debug=function(_559){if(typeof opera!="undefined"){opera.postError(_559);}};console.info=function(){};console.warn=function(){};console.error=function(_55a){if(typeof opera!="undefined"){opera.postError(_55a);}};console.time=function(){};console.timeEnd=function(){};console.count=function(){};console.profile=function(){};console.profileEnd=function(){};}(function(){var Y=YAHOO.util,getStyle,setStyle,id_counter=0,propertyCache={};var ua=navigator.userAgent.toLowerCase(),isOpera=(ua.indexOf("opera")>-1),isSafari=(ua.indexOf("safari")>-1),isGecko=(!isOpera&&!isSafari&&ua.indexOf("gecko")>-1),isIE=(!isOpera&&ua.indexOf("msie")>-1);var _55d={HYPHEN:/(-[a-z])/i};var _55e=function(_55f){if(!_55d.HYPHEN.test(_55f)){return _55f;}if(propertyCache[_55f]){return propertyCache[_55f];}while(_55d.HYPHEN.exec(_55f)){_55f=_55f.replace(RegExp.$1,RegExp.$1.substr(1).toUpperCase());}propertyCache[_55f]=_55f;return _55f;};if(document.defaultView&&document.defaultView.getComputedStyle){getStyle=function(el,_561){var _562=null;var _563=document.defaultView.getComputedStyle(el,"");if(_563){_562=_563[_55e(_561)];}return el.style[_561]||_562;};}else{if(document.documentElement.currentStyle&&isIE){getStyle=function(el,_565){switch(_55e(_565)){case "opacity":var val=100;try{val=el.filters["DXImageTransform.Microsoft.Alpha"].opacity;}catch(e){try{val=el.filters("alpha").opacity;}catch(e){}}return val/100;break;default:var _567=el.currentStyle?el.currentStyle[_565]:null;return (el.style[_565]||_567);}};}else{getStyle=function(el,_569){return el.style[_569];};}}if(isIE){setStyle=function(el,_56b,val){switch(_56b){case "opacity":if(typeof el.style.filter=="string"){el.style.filter="alpha(opacity="+val*100+")";if(!el.currentStyle||!el.currentStyle.hasLayout){el.style.zoom=1;}}break;default:el.style[_56b]=val;}};}else{setStyle=function(el,_56e,val){el.style[_56e]=val;};}YAHOO.util.Dom={get:function(el){if(!el){return null;}if(typeof el!="string"&&!(el instanceof Array)){return el;}if(typeof el=="string"){return document.getElementById(el);}else{var _571=[];for(var i=0,len=el.length;i<len;++i){_571[_571.length]=Y.Dom.get(el[i]);}return _571;}return null;},getStyle:function(el,_574){_574=_55e(_574);var f=function(_576){return getStyle(_576,_574);};return Y.Dom.batch(el,f,Y.Dom,true);},setStyle:function(el,_578,val){_578=_55e(_578);var f=function(_57b){setStyle(_57b,_578,val);};Y.Dom.batch(el,f,Y.Dom,true);},getXY:function(el){var f=function(el){if(el.parentNode===null||el.offsetParent===null||this.getStyle(el,"display")=="none"){return false;}var _57f=null;var pos=[];var box;if(el.getBoundingClientRect){box=el.getBoundingClientRect();var doc=document;if(!this.inDocument(el)&&parent.document!=document){doc=parent.document;if(!this.isAncestor(doc.documentElement,el)){return false;}}var _583=Math.max(doc.documentElement.scrollTop,doc.body.scrollTop);var _584=Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft);return [box.left+_584,box.top+_583];}else{pos=[el.offsetLeft,el.offsetTop];_57f=el.offsetParent;if(_57f!=el){while(_57f){pos[0]+=_57f.offsetLeft;pos[1]+=_57f.offsetTop;_57f=_57f.offsetParent;}}if(isSafari&&this.getStyle(el,"position")=="absolute"){pos[0]-=document.body.offsetLeft;pos[1]-=document.body.offsetTop;}}if(el.parentNode){_57f=el.parentNode;}else{_57f=null;}while(_57f&&_57f.tagName.toUpperCase()!="BODY"&&_57f.tagName.toUpperCase()!="HTML"){if(Y.Dom.getStyle(_57f,"display")!="inline"){pos[0]-=_57f.scrollLeft;pos[1]-=_57f.scrollTop;}if(_57f.parentNode){_57f=_57f.parentNode;}else{_57f=null;}}return pos;};return Y.Dom.batch(el,f,Y.Dom,true);},getX:function(el){var f=function(el){return Y.Dom.getXY(el)[0];};return Y.Dom.batch(el,f,Y.Dom,true);},getY:function(el){var f=function(el){return Y.Dom.getXY(el)[1];};return Y.Dom.batch(el,f,Y.Dom,true);},setXY:function(el,pos,_58d){var f=function(el){var _590=this.getStyle(el,"position");if(_590=="static"){this.setStyle(el,"position","relative");_590="relative";}var _591=this.getXY(el);if(_591===false){return false;}var _592=[parseInt(this.getStyle(el,"left"),10),parseInt(this.getStyle(el,"top"),10)];if(isNaN(_592[0])){_592[0]=(_590=="relative")?0:el.offsetLeft;}if(isNaN(_592[1])){_592[1]=(_590=="relative")?0:el.offsetTop;}if(pos[0]!==null){el.style.left=pos[0]-_591[0]+_592[0]+"px";}if(pos[1]!==null){el.style.top=pos[1]-_591[1]+_592[1]+"px";}if(!_58d){var _593=this.getXY(el);if((pos[0]!==null&&_593[0]!=pos[0])||(pos[1]!==null&&_593[1]!=pos[1])){this.setXY(el,pos,true);}}};Y.Dom.batch(el,f,Y.Dom,true);},setX:function(el,x){Y.Dom.setXY(el,[x,null]);},setY:function(el,y){Y.Dom.setXY(el,[null,y]);},getRegion:function(el){var f=function(el){var _59b=new Y.Region.getRegion(el);return _59b;};return Y.Dom.batch(el,f,Y.Dom,true);},getClientWidth:function(){return Y.Dom.getViewportWidth();},getClientHeight:function(){return Y.Dom.getViewportHeight();},getElementsByClassName:function(_59c,tag,root){var _59f=function(el){return Y.Dom.hasClass(el,_59c);};return Y.Dom.getElementsBy(_59f,tag,root);},hasClass:function(el,_5a2){var re=new RegExp("(?:^|\\s+)"+_5a2+"(?:\\s+|$)");var f=function(el){return re.test(el["className"]);};return Y.Dom.batch(el,f,Y.Dom,true);},addClass:function(el,_5a7){var f=function(el){if(this.hasClass(el,_5a7)){return;}el["className"]=[el["className"],_5a7].join(" ");};Y.Dom.batch(el,f,Y.Dom,true);},removeClass:function(el,_5ab){var re=new RegExp("(?:^|\\s+)"+_5ab+"(?:\\s+|$)","g");var f=function(el){if(!this.hasClass(el,_5ab)){return;}var c=el["className"];el["className"]=c.replace(re," ");if(this.hasClass(el,_5ab)){this.removeClass(el,_5ab);}};Y.Dom.batch(el,f,Y.Dom,true);},replaceClass:function(el,_5b1,_5b2){if(_5b1===_5b2){return false;}var re=new RegExp("(?:^|\\s+)"+_5b1+"(?:\\s+|$)","g");var f=function(el){if(!this.hasClass(el,_5b1)){this.addClass(el,_5b2);return;}el["className"]=el["className"].replace(re," "+_5b2+" ");if(this.hasClass(el,_5b1)){this.replaceClass(el,_5b1,_5b2);}};Y.Dom.batch(el,f,Y.Dom,true);},generateId:function(el,_5b7){_5b7=_5b7||"yui-gen";el=el||{};var f=function(el){if(el){el=Y.Dom.get(el);}else{el={};}if(!el.id){el.id=_5b7+id_counter++;}return el.id;};return Y.Dom.batch(el,f,Y.Dom,true);},isAncestor:function(_5ba,_5bb){_5ba=Y.Dom.get(_5ba);if(!_5ba||!_5bb){return false;}var f=function(_5bd){if(_5ba.contains&&!isSafari){return _5ba.contains(_5bd);}else{if(_5ba.compareDocumentPosition){return !!(_5ba.compareDocumentPosition(_5bd)&16);}else{var _5be=_5bd.parentNode;while(_5be){if(_5be==_5ba){return true;}else{if(!_5be.tagName||_5be.tagName.toUpperCase()=="HTML"){return false;}}_5be=_5be.parentNode;}return false;}}};return Y.Dom.batch(_5bb,f,Y.Dom,true);},inDocument:function(el){var f=function(el){return this.isAncestor(document.documentElement,el);};return Y.Dom.batch(el,f,Y.Dom,true);},getElementsBy:function(_5c2,tag,root){tag=tag||"*";var _5c5=[];if(root){root=Y.Dom.get(root);if(!root){return _5c5;}}else{root=document;}var _5c6=root.getElementsByTagName(tag);if(!_5c6.length&&(tag=="*"&&root.all)){_5c6=root.all;}for(var i=0,len=_5c6.length;i<len;++i){if(_5c2(_5c6[i])){_5c5[_5c5.length]=_5c6[i];}}return _5c5;},batch:function(el,_5c9,o,_5cb){var id=el;el=Y.Dom.get(el);var _5cd=(_5cb)?o:window;if(!el||el.tagName||!el.length){if(!el){return false;}return _5c9.call(_5cd,el,o);}var _5ce=[];for(var i=0,len=el.length;i<len;++i){if(!el[i]){id=el[i];}_5ce[_5ce.length]=_5c9.call(_5cd,el[i],o);}return _5ce;},getDocumentHeight:function(){var _5d0=(document.compatMode!="CSS1Compat")?document.body.scrollHeight:document.documentElement.scrollHeight;var h=Math.max(_5d0,Y.Dom.getViewportHeight());return h;},getDocumentWidth:function(){var _5d2=(document.compatMode!="CSS1Compat")?document.body.scrollWidth:document.documentElement.scrollWidth;var w=Math.max(_5d2,Y.Dom.getViewportWidth());return w;},getViewportHeight:function(){var _5d4=self.innerHeight;var mode=document.compatMode;if((mode||isIE)&&!isOpera){_5d4=(mode=="CSS1Compat")?document.documentElement.clientHeight:document.body.clientHeight;}return _5d4;},getViewportWidth:function(){var _5d6=self.innerWidth;var mode=document.compatMode;if(mode||isIE){_5d6=(mode=="CSS1Compat")?document.documentElement.clientWidth:document.body.clientWidth;}return _5d6;}};})();YAHOO.util.Region=function(t,r,b,l){this.top=t;this[1]=t;this.right=r;this.bottom=b;this.left=l;this[0]=l;};YAHOO.util.Region.prototype.contains=function(_5dc){return (_5dc.left>=this.left&&_5dc.right<=this.right&&_5dc.top>=this.top&&_5dc.bottom<=this.bottom);};YAHOO.util.Region.prototype.getArea=function(){return ((this.bottom-this.top)*(this.right-this.left));};YAHOO.util.Region.prototype.intersect=function(_5dd){var t=Math.max(this.top,_5dd.top);var r=Math.min(this.right,_5dd.right);var b=Math.min(this.bottom,_5dd.bottom);var l=Math.max(this.left,_5dd.left);if(b>=t&&r>=l){return new YAHOO.util.Region(t,r,b,l);}else{return null;}};YAHOO.util.Region.prototype.union=function(_5e2){var t=Math.min(this.top,_5e2.top);var r=Math.max(this.right,_5e2.right);var b=Math.max(this.bottom,_5e2.bottom);var l=Math.min(this.left,_5e2.left);return new YAHOO.util.Region(t,r,b,l);};YAHOO.util.Region.prototype.toString=function(){return ("Region {"+"top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+"}");};YAHOO.util.Region.getRegion=function(el){var p=YAHOO.util.Dom.getXY(el);var t=p[1];var r=p[0]+el.offsetWidth;var b=p[1]+el.offsetHeight;var l=p[0];return new YAHOO.util.Region(t,r,b,l);};YAHOO.util.Point=function(x,y){if(x instanceof Array){y=x[1];x=x[0];}this.x=this.right=this.left=this[0]=x;this.y=this.top=this.bottom=this[1]=y;};YAHOO.util.Point.prototype=new YAHOO.util.Region();YAHOO.util.CustomEvent=function(type,_5f0,_5f1,_5f2){this.type=type;this.scope=_5f0||window;this.silent=_5f1;this.signature=_5f2||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent){}var _5f3="_YUICEOnSubscribe";if(type!==_5f3){this.subscribeEvent=new YAHOO.util.CustomEvent(_5f3,this,true);}};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(fn,obj,_5f6){if(this.subscribeEvent){this.subscribeEvent.fire(fn,obj,_5f6);}this.subscribers.push(new YAHOO.util.Subscriber(fn,obj,_5f6));},unsubscribe:function(fn,obj){var _5f9=false;for(var i=0,len=this.subscribers.length;i<len;++i){var s=this.subscribers[i];if(s&&s.contains(fn,obj)){this._delete(i);_5f9=true;}}return _5f9;},fire:function(){var len=this.subscribers.length;if(!len&&this.silent){return true;}var args=[],ret=true,i;for(i=0;i<arguments.length;++i){args.push(arguments[i]);}var _5fe=args.length;if(!this.silent){}for(i=0;i<len;++i){var s=this.subscribers[i];if(s){if(!this.silent){}var _600=s.getScope(this.scope);if(this.signature==YAHOO.util.CustomEvent.FLAT){var _601=null;if(args.length>0){_601=args[0];}ret=s.fn.call(_600,_601,s.obj);}else{ret=s.fn.call(_600,this.type,args,s.obj);}if(false===ret){if(!this.silent){}return false;}}}return true;},unsubscribeAll:function(){for(var i=0,len=this.subscribers.length;i<len;++i){this._delete(len-1-i);}},_delete:function(_603){var s=this.subscribers[_603];if(s){delete s.fn;delete s.obj;}this.subscribers.splice(_603,1);},toString:function(){return "CustomEvent: "+"'"+this.type+"', "+"scope: "+this.scope;}};YAHOO.util.Subscriber=function(fn,obj,_607){this.fn=fn;this.obj=obj||null;this.override=_607;};YAHOO.util.Subscriber.prototype.getScope=function(_608){if(this.override){if(this.override===true){return this.obj;}else{return this.override;}}return _608;};YAHOO.util.Subscriber.prototype.contains=function(fn,obj){if(obj){return (this.fn==fn&&this.obj==obj);}else{return (this.fn==fn);}};YAHOO.util.Subscriber.prototype.toString=function(){return "Subscriber { obj: "+(this.obj||"")+", override: "+(this.override||"no")+" }";};if(!YAHOO.util.Event){YAHOO.util.Event=function(){var _60b=false;var _60c=[];var _60d=[];var _60e=[];var _60f=[];var _610=0;var _611=[];var _612=[];var _613=0;return {POLL_RETRYS:200,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,OBJ:3,ADJ_SCOPE:4,isSafari:(/Safari|Konqueror|KHTML/gi).test(navigator.userAgent),isIE:(!this.isSafari&&!navigator.userAgent.match(/opera/gi)&&navigator.userAgent.match(/msie/gi)),_interval:null,startInterval:function(){if(!this._interval){var self=this;var _615=function(){self._tryPreloadAttach();};this._interval=setInterval(_615,this.POLL_INTERVAL);}},onAvailable:function(p_id,p_fn,_618,_619){_611.push({id:p_id,fn:p_fn,obj:_618,override:_619,checkReady:false});_610=this.POLL_RETRYS;this.startInterval();},onContentReady:function(p_id,p_fn,_61c,_61d){_611.push({id:p_id,fn:p_fn,obj:_61c,override:_61d,checkReady:true});_610=this.POLL_RETRYS;this.startInterval();},addListener:function(el,_61f,fn,obj,_622){if(!fn||!fn.call){return false;}if(this._isValidCollection(el)){var ok=true;for(var i=0,len=el.length;i<len;++i){ok=this.on(el[i],_61f,fn,obj,_622)&&ok;}return ok;}else{if(typeof el=="string"){var oEl=this.getEl(el);if(oEl){el=oEl;}else{this.onAvailable(el,function(){YAHOO.util.Event.on(el,_61f,fn,obj,_622);});return true;}}}if(!el){return false;}if("unload"==_61f&&obj!==this){_60d[_60d.length]=[el,_61f,fn,obj,_622];return true;}var _626=el;if(_622){if(_622===true){_626=obj;}else{_626=_622;}}var _627=function(e){return fn.call(_626,YAHOO.util.Event.getEvent(e),obj);};var li=[el,_61f,fn,_627,_626];var _62a=_60c.length;_60c[_62a]=li;if(this.useLegacyEvent(el,_61f)){var _62b=this.getLegacyIndex(el,_61f);if(_62b==-1||el!=_60e[_62b][0]){_62b=_60e.length;_612[el.id+_61f]=_62b;_60e[_62b]=[el,_61f,el["on"+_61f]];_60f[_62b]=[];el["on"+_61f]=function(e){YAHOO.util.Event.fireLegacyEvent(YAHOO.util.Event.getEvent(e),_62b);};}_60f[_62b].push(li);}else{try{this._simpleAdd(el,_61f,_627,false);}catch(e){this.removeListener(el,_61f,fn);return false;}}return true;},fireLegacyEvent:function(e,_62e){var ok=true;var le=_60f[_62e];for(var i=0,len=le.length;i<len;++i){var li=le[i];if(li&&li[this.WFN]){var _633=li[this.ADJ_SCOPE];var ret=li[this.WFN].call(_633,e);ok=(ok&&ret);}}return ok;},getLegacyIndex:function(el,_636){var key=this.generateId(el)+_636;if(typeof _612[key]=="undefined"){return -1;}else{return _612[key];}},useLegacyEvent:function(el,_639){if(!el.addEventListener&&!el.attachEvent){return true;}else{if(this.isSafari){if("click"==_639||"dblclick"==_639){return true;}}}return false;},removeListener:function(el,_63b,fn){var i,len;if(typeof el=="string"){el=this.getEl(el);}else{if(this._isValidCollection(el)){var ok=true;for(i=0,len=el.length;i<len;++i){ok=(this.removeListener(el[i],_63b,fn)&&ok);}return ok;}}if(!fn||!fn.call){return this.purgeElement(el,false,_63b);}if("unload"==_63b){for(i=0,len=_60d.length;i<len;i++){var li=_60d[i];if(li&&li[0]==el&&li[1]==_63b&&li[2]==fn){_60d.splice(i,1);return true;}}return false;}var _640=null;var _641=arguments[3];if("undefined"==typeof _641){_641=this._getCacheIndex(el,_63b,fn);}if(_641>=0){_640=_60c[_641];}if(!el||!_640){return false;}if(this.useLegacyEvent(el,_63b)){var _642=this.getLegacyIndex(el,_63b);var _643=_60f[_642];if(_643){for(i=0,len=_643.length;i<len;++i){li=_643[i];if(li&&li[this.EL]==el&&li[this.TYPE]==_63b&&li[this.FN]==fn){_643.splice(i,1);break;}}}}else{try{this._simpleRemove(el,_63b,_640[this.WFN],false);}catch(e){return false;}}delete _60c[_641][this.WFN];delete _60c[_641][this.FN];_60c.splice(_641,1);return true;},getTarget:function(ev,_645){var t=ev.target||ev.srcElement;return this.resolveTextNode(t);},resolveTextNode:function(node){if(node&&3==node.nodeType){return node.parentNode;}else{return node;}},getPageX:function(ev){var x=ev.pageX;if(!x&&0!==x){x=ev.clientX||0;if(this.isIE){x+=this._getScrollLeft();}}return x;},getPageY:function(ev){var y=ev.pageY;if(!y&&0!==y){y=ev.clientY||0;if(this.isIE){y+=this._getScrollTop();}}return y;},getXY:function(ev){return [this.getPageX(ev),this.getPageY(ev)];},getRelatedTarget:function(ev){var t=ev.relatedTarget;if(!t){if(ev.type=="mouseout"){t=ev.toElement;}else{if(ev.type=="mouseover"){t=ev.fromElement;}}}return this.resolveTextNode(t);},getTime:function(ev){if(!ev.time){var t=new Date().getTime();try{ev.time=t;}catch(e){return t;}}return ev.time;},stopEvent:function(ev){this.stopPropagation(ev);this.preventDefault(ev);},stopPropagation:function(ev){if(ev.stopPropagation){ev.stopPropagation();}else{ev.cancelBubble=true;}},preventDefault:function(ev){if(ev.preventDefault){ev.preventDefault();}else{ev.returnValue=false;}},getEvent:function(e){var ev=e||window.event;if(!ev){var c=this.getEvent.caller;while(c){ev=c.arguments[0];if(ev&&Event==ev.constructor){break;}c=c.caller;}}return ev;},getCharCode:function(ev){return ev.charCode||ev.keyCode||0;},_getCacheIndex:function(el,_659,fn){for(var i=0,len=_60c.length;i<len;++i){var li=_60c[i];if(li&&li[this.FN]==fn&&li[this.EL]==el&&li[this.TYPE]==_659){return i;}}return -1;},generateId:function(el){var id=el.id;if(!id){id="yuievtautoid-"+_613;++_613;el.id=id;}return id;},_isValidCollection:function(o){return (o&&o.length&&typeof o!="string"&&!o.tagName&&!o.alert&&typeof o[0]!="undefined");},elCache:{},getEl:function(id){return document.getElementById(id);},clearCache:function(){},_load:function(e){_60b=true;var EU=YAHOO.util.Event;if(this.isIE){EU._simpleRemove(window,"load",EU._load);}},_tryPreloadAttach:function(){if(this.locked){return false;}this.locked=true;var _663=!_60b;if(!_663){_663=(_610>0);}var _664=[];for(var i=0,len=_611.length;i<len;++i){var item=_611[i];if(item){var el=this.getEl(item.id);if(el){if(!item.checkReady||_60b||el.nextSibling||(document&&document.body)){var _668=el;if(item.override){if(item.override===true){_668=item.obj;}else{_668=item.override;}}item.fn.call(_668,item.obj);_611[i]=null;}}else{_664.push(item);}}}_610=(_664.length===0)?0:_610-1;if(_663){_611=_664;this.startInterval();}else{clearInterval(this._interval);this._interval=null;}this.locked=false;return true;},purgeElement:function(el,_66a,_66b){var _66c=this.getListeners(el,_66b);if(_66c){for(var i=0,len=_66c.length;i<len;++i){var l=_66c[i];this.removeListener(el,l.type,l.fn);}}if(_66a&&el&&el.childNodes){for(i=0,len=el.childNodes.length;i<len;++i){this.purgeElement(el.childNodes[i],_66a,_66b);}}},getListeners:function(el,_670){var _671=[];if(_60c&&_60c.length>0){for(var i=0,len=_60c.length;i<len;++i){var l=_60c[i];if(l&&l[this.EL]===el&&(!_670||_670===l[this.TYPE])){_671.push({type:l[this.TYPE],fn:l[this.FN],obj:l[this.OBJ],adjust:l[this.ADJ_SCOPE],index:i});}}}return (_671.length)?_671:null;},_unload:function(e){var EU=YAHOO.util.Event,i,j,l,len,index;for(i=0,len=_60d.length;i<len;++i){l=_60d[i];if(l){var _676=window;if(l[EU.ADJ_SCOPE]){if(l[EU.ADJ_SCOPE]===true){_676=l[EU.OBJ];}else{_676=l[EU.ADJ_SCOPE];}}l[EU.FN].call(_676,EU.getEvent(e),l[EU.OBJ]);_60d[i]=null;l=null;_676=null;}}_60d=null;if(_60c&&_60c.length>0){j=_60c.length;while(j){index=j-1;l=_60c[index];if(l){EU.removeListener(l[EU.EL],l[EU.TYPE],l[EU.FN],index);}j=j-1;}l=null;EU.clearCache();}for(i=0,len=_60e.length;i<len;++i){_60e[i][0]=null;_60e[i]=null;}_60e=null;EU._simpleRemove(window,"unload",EU._unload);},_getScrollLeft:function(){return this._getScroll()[1];},_getScrollTop:function(){return this._getScroll()[0];},_getScroll:function(){var dd=document.documentElement,db=document.body;if(dd&&(dd.scrollTop||dd.scrollLeft)){return [dd.scrollTop,dd.scrollLeft];}else{if(db){return [db.scrollTop,db.scrollLeft];}else{return [0,0];}}},_simpleAdd:function(){if(window.addEventListener){return function(el,_679,fn,_67b){el.addEventListener(_679,fn,(_67b));};}else{if(window.attachEvent){return function(el,_67d,fn,_67f){el.attachEvent("on"+_67d,fn);};}else{return function(){};}}}(),_simpleRemove:function(){if(window.removeEventListener){return function(el,_681,fn,_683){el.removeEventListener(_681,fn,(_683));};}else{if(window.detachEvent){return function(el,_685,fn){el.detachEvent("on"+_685,fn);};}else{return function(){};}}}()};}();(function(){var EU=YAHOO.util.Event;EU.on=EU.addListener;if(document&&document.body){EU._load();}else{EU._simpleAdd(window,"load",EU._load);}EU._simpleAdd(window,"unload",EU._unload);EU._tryPreloadAttach();})();}YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(_688,p_fn,_68a,_68b){this.__yui_events=this.__yui_events||{};var ce=this.__yui_events[_688];if(ce){ce.subscribe(p_fn,_68a,_68b);}else{this.__yui_subscribers=this.__yui_subscribers||{};var subs=this.__yui_subscribers;if(!subs[_688]){subs[_688]=[];}subs[_688].push({fn:p_fn,obj:_68a,override:_68b});}},unsubscribe:function(_68e,p_fn,_690){this.__yui_events=this.__yui_events||{};var ce=this.__yui_events[_68e];if(ce){return ce.unsubscribe(p_fn,_690);}else{return false;}},createEvent:function(_692,_693){this.__yui_events=this.__yui_events||{};var opts=_693||{};var _695=this.__yui_events;if(_695[_692]){}else{var _696=opts.scope||this;var _697=opts.silent||null;var ce=new YAHOO.util.CustomEvent(_692,_696,_697,YAHOO.util.CustomEvent.FLAT);_695[_692]=ce;if(opts.onSubscribeCallback){ce.subscribeEvent.subscribe(opts.onSubscribeCallback);}this.__yui_subscribers=this.__yui_subscribers||{};var qs=this.__yui_subscribers[_692];if(qs){for(var i=0;i<qs.length;++i){ce.subscribe(qs[i].fn,qs[i].obj,qs[i].override);}}}return _695[_692];},fireEvent:function(_69b,arg1,arg2,etc){this.__yui_events=this.__yui_events||{};var ce=this.__yui_events[_69b];if(ce){var args=[];for(var i=1;i<arguments.length;++i){args.push(arguments[i]);}return ce.fire.apply(ce,args);}else{return null;}},hasEvent:function(type){if(this.__yui_events){if(this.__yui_events[type]){return true;}}return false;}};YAHOO.util.Config=function(_6a3){if(_6a3){this.init(_6a3);}};YAHOO.util.Config.prototype={owner:null,queueInProgress:false,checkBoolean:function(val){if(typeof val=="boolean"){return true;}else{return false;}},checkNumber:function(val){if(isNaN(val)){return false;}else{return true;}}};YAHOO.util.Config.prototype.init=function(_6a6){this.owner=_6a6;this.configChangedEvent=new YAHOO.util.CustomEvent("configChanged");this.queueInProgress=false;var _6a7={};var _6a8={};var _6a9=[];var _6aa=function(key,_6ac){key=key.toLowerCase();var _6ad=_6a7[key];if(typeof _6ad!="undefined"&&_6ad.event){_6ad.event.fire(_6ac);}};this.addProperty=function(key,_6af){key=key.toLowerCase();_6a7[key]=_6af;_6af.event=new YAHOO.util.CustomEvent(key);_6af.key=key;if(_6af.handler){_6af.event.subscribe(_6af.handler,this.owner,true);}this.setProperty(key,_6af.value,true);if(!_6af.suppressEvent){this.queueProperty(key,_6af.value);}};this.getConfig=function(){var cfg={};for(var prop in _6a7){var _6b2=_6a7[prop];if(typeof _6b2!="undefined"&&_6b2.event){cfg[prop]=_6b2.value;}}return cfg;};this.getProperty=function(key){key=key.toLowerCase();var _6b4=_6a7[key];if(typeof _6b4!="undefined"&&_6b4.event){return _6b4.value;}else{return undefined;}};this.resetProperty=function(key){key=key.toLowerCase();var _6b6=_6a7[key];if(typeof _6b6!="undefined"&&_6b6.event){if(_6a8[key]&&_6a8[key]!="undefined"){this.setProperty(key,_6a8[key]);}return true;}else{return false;}};this.setProperty=function(key,_6b8,_6b9){key=key.toLowerCase();if(this.queueInProgress&&!_6b9){this.queueProperty(key,_6b8);return true;}else{var _6ba=_6a7[key];if(typeof _6ba!="undefined"&&_6ba.event){if(_6ba.validator&&!_6ba.validator(_6b8)){return false;}else{_6ba.value=_6b8;if(!_6b9){_6aa(key,_6b8);this.configChangedEvent.fire([key,_6b8]);}return true;}}else{return false;}}};this.queueProperty=function(key,_6bc){key=key.toLowerCase();var _6bd=_6a7[key];if(typeof _6bd!="undefined"&&_6bd.event){if(typeof _6bc!="undefined"&&_6bd.validator&&!_6bd.validator(_6bc)){return false;}else{if(typeof _6bc!="undefined"){_6bd.value=_6bc;}else{_6bc=_6bd.value;}var _6be=false;for(var i=0;i<_6a9.length;i++){var _6c0=_6a9[i];if(_6c0){var _6c1=_6c0[0];var _6c2=_6c0[1];if(_6c1.toLowerCase()==key){_6a9[i]=null;_6a9.push([key,(typeof _6bc!="undefined"?_6bc:_6c2)]);_6be=true;break;}}}if(!_6be&&typeof _6bc!="undefined"){_6a9.push([key,_6bc]);}}if(_6bd.supercedes){for(var s=0;s<_6bd.supercedes.length;s++){var _6c4=_6bd.supercedes[s];for(var q=0;q<_6a9.length;q++){var _6c6=_6a9[q];if(_6c6){var _6c7=_6c6[0];var _6c8=_6c6[1];if(_6c7.toLowerCase()==_6c4.toLowerCase()){_6a9.push([_6c7,_6c8]);_6a9[q]=null;break;}}}}}return true;}else{return false;}};this.refireEvent=function(key){key=key.toLowerCase();var _6ca=_6a7[key];if(typeof _6ca!="undefined"&&_6ca.event&&typeof _6ca.value!="undefined"){if(this.queueInProgress){this.queueProperty(key);}else{_6aa(key,_6ca.value);}}};this.applyConfig=function(_6cb,init){if(init){_6a8=_6cb;}for(var prop in _6cb){this.queueProperty(prop,_6cb[prop]);}};this.refresh=function(){for(var prop in _6a7){this.refireEvent(prop);}};this.fireQueue=function(){this.queueInProgress=true;for(var i=0;i<_6a9.length;i++){var _6d0=_6a9[i];if(_6d0){var key=_6d0[0];var _6d2=_6d0[1];var _6d3=_6a7[key];_6d3.value=_6d2;_6aa(key,_6d2);}}this.queueInProgress=false;_6a9=[];};this.subscribeToConfigEvent=function(key,_6d5,obj,_6d7){key=key.toLowerCase();var _6d8=_6a7[key];if(typeof _6d8!="undefined"&&_6d8.event){if(!YAHOO.util.Config.alreadySubscribed(_6d8.event,_6d5,obj)){_6d8.event.subscribe(_6d5,obj,_6d7);}return true;}else{return false;}};this.unsubscribeFromConfigEvent=function(key,_6da,obj){key=key.toLowerCase();var _6dc=_6a7[key];if(typeof _6dc!="undefined"&&_6dc.event){return _6dc.event.unsubscribe(_6da,obj);}else{return false;}};this.toString=function(){var _6dd="Config";if(this.owner){_6dd+=" ["+this.owner.toString()+"]";}return _6dd;};this.outputEventQueue=function(){var _6de="";for(var q=0;q<_6a9.length;q++){var _6e0=_6a9[q];if(_6e0){_6de+=_6e0[0]+"="+_6e0[1]+", ";}}return _6de;};};YAHOO.util.Config.alreadySubscribed=function(evt,fn,obj){for(var e=0;e<evt.subscribers.length;e++){var _6e5=evt.subscribers[e];if(_6e5&&_6e5.obj==obj&&_6e5.fn==fn){return true;}}return false;};YAHOO.widget.Module=function(el,_6e7){if(el){this.init(el,_6e7);}};YAHOO.widget.Module.IMG_ROOT="http://us.i1.yimg.com/us.yimg.com/i/";YAHOO.widget.Module.IMG_ROOT_SSL="https://a248.e.akamai.net/sec.yimg.com/i/";YAHOO.widget.Module.CSS_MODULE="module";YAHOO.widget.Module.CSS_HEADER="hd";YAHOO.widget.Module.CSS_BODY="bd";YAHOO.widget.Module.CSS_FOOTER="ft";YAHOO.widget.Module.RESIZE_MONITOR_SECURE_URL="javascript:false;";YAHOO.widget.Module.textResizeEvent=new YAHOO.util.CustomEvent("textResize");YAHOO.widget.Module.prototype={constructor:YAHOO.widget.Module,element:null,header:null,body:null,footer:null,id:null,imageRoot:YAHOO.widget.Module.IMG_ROOT,initEvents:function(){this.beforeInitEvent=new YAHOO.util.CustomEvent("beforeInit");this.initEvent=new YAHOO.util.CustomEvent("init");this.appendEvent=new YAHOO.util.CustomEvent("append");this.beforeRenderEvent=new YAHOO.util.CustomEvent("beforeRender");this.renderEvent=new YAHOO.util.CustomEvent("render");this.changeHeaderEvent=new YAHOO.util.CustomEvent("changeHeader");this.changeBodyEvent=new YAHOO.util.CustomEvent("changeBody");this.changeFooterEvent=new YAHOO.util.CustomEvent("changeFooter");this.changeContentEvent=new YAHOO.util.CustomEvent("changeContent");this.destroyEvent=new YAHOO.util.CustomEvent("destroy");this.beforeShowEvent=new YAHOO.util.CustomEvent("beforeShow");this.showEvent=new YAHOO.util.CustomEvent("show");this.beforeHideEvent=new YAHOO.util.CustomEvent("beforeHide");this.hideEvent=new YAHOO.util.CustomEvent("hide");},platform:function(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("windows")!=-1||ua.indexOf("win32")!=-1){return "windows";}else{if(ua.indexOf("macintosh")!=-1){return "mac";}else{return false;}}}(),browser:function(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("opera")!=-1){return "opera";}else{if(ua.indexOf("msie 7")!=-1){return "ie7";}else{if(ua.indexOf("msie")!=-1){return "ie";}else{if(ua.indexOf("safari")!=-1){return "safari";}else{if(ua.indexOf("gecko")!=-1){return "gecko";}else{return false;}}}}}}(),isSecure:function(){if(window.location.href.toLowerCase().indexOf("https")===0){return true;}else{return false;}}(),initDefaultConfig:function(){this.cfg.addProperty("visible",{value:true,handler:this.configVisible,validator:this.cfg.checkBoolean});this.cfg.addProperty("effect",{suppressEvent:true,supercedes:["visible"]});this.cfg.addProperty("monitorresize",{value:true,handler:this.configMonitorResize});},init:function(el,_6eb){this.initEvents();this.beforeInitEvent.fire(YAHOO.widget.Module);this.cfg=new YAHOO.util.Config(this);if(this.isSecure){this.imageRoot=YAHOO.widget.Module.IMG_ROOT_SSL;}if(typeof el=="string"){var elId=el;el=document.getElementById(el);if(!el){el=document.createElement("DIV");el.id=elId;}}this.element=el;if(el.id){this.id=el.id;}var _6ed=this.element.childNodes;if(_6ed){for(var i=0;i<_6ed.length;i++){var _6ef=_6ed[i];switch(_6ef.className){case YAHOO.widget.Module.CSS_HEADER:this.header=_6ef;break;case YAHOO.widget.Module.CSS_BODY:this.body=_6ef;break;case YAHOO.widget.Module.CSS_FOOTER:this.footer=_6ef;break;}}}this.initDefaultConfig();YAHOO.util.Dom.addClass(this.element,YAHOO.widget.Module.CSS_MODULE);if(_6eb){this.cfg.applyConfig(_6eb,true);}if(!YAHOO.util.Config.alreadySubscribed(this.renderEvent,this.cfg.fireQueue,this.cfg)){this.renderEvent.subscribe(this.cfg.fireQueue,this.cfg,true);}this.initEvent.fire(YAHOO.widget.Module);},initResizeMonitor:function(){if(this.browser!="opera"){var _6f0=document.getElementById("_yuiResizeMonitor");if(!_6f0){_6f0=document.createElement("iframe");var bIE=(this.browser.indexOf("ie")===0);if(this.isSecure&&YAHOO.widget.Module.RESIZE_MONITOR_SECURE_URL&&bIE){_6f0.src=YAHOO.widget.Module.RESIZE_MONITOR_SECURE_URL;}_6f0.id="_yuiResizeMonitor";_6f0.style.visibility="hidden";document.body.appendChild(_6f0);_6f0.style.width="10em";_6f0.style.height="10em";_6f0.style.position="absolute";var _6f2=-1*_6f0.offsetWidth,nTop=-1*_6f0.offsetHeight;_6f0.style.top=nTop+"px";_6f0.style.left=_6f2+"px";_6f0.style.borderStyle="none";_6f0.style.borderWidth="0";YAHOO.util.Dom.setStyle(_6f0,"opacity","0");_6f0.style.visibility="visible";if(!bIE){var doc=_6f0.contentWindow.document;doc.open();doc.close();}}var _6f4=function(){YAHOO.widget.Module.textResizeEvent.fire();};if(_6f0&&_6f0.contentWindow){this.resizeMonitor=_6f0;YAHOO.widget.Module.textResizeEvent.subscribe(this.onDomResize,this,true);if(!YAHOO.widget.Module.textResizeInitialized){if(!YAHOO.util.Event.addListener(this.resizeMonitor.contentWindow,"resize",_6f4)){YAHOO.util.Event.addListener(this.resizeMonitor,"resize",_6f4);}YAHOO.widget.Module.textResizeInitialized=true;}}}},onDomResize:function(e,obj){var _6f7=-1*this.resizeMonitor.offsetWidth,nTop=-1*this.resizeMonitor.offsetHeight;this.resizeMonitor.style.top=nTop+"px";this.resizeMonitor.style.left=_6f7+"px";},setHeader:function(_6f8){if(!this.header){this.header=document.createElement("DIV");this.header.className=YAHOO.widget.Module.CSS_HEADER;}if(typeof _6f8=="string"){this.header.innerHTML=_6f8;}else{this.header.innerHTML="";this.header.appendChild(_6f8);}this.changeHeaderEvent.fire(_6f8);this.changeContentEvent.fire();},appendToHeader:function(_6f9){if(!this.header){this.header=document.createElement("DIV");this.header.className=YAHOO.widget.Module.CSS_HEADER;}this.header.appendChild(_6f9);this.changeHeaderEvent.fire(_6f9);this.changeContentEvent.fire();},setBody:function(_6fa){if(!this.body){this.body=document.createElement("DIV");this.body.className=YAHOO.widget.Module.CSS_BODY;}if(typeof _6fa=="string"){this.body.innerHTML=_6fa;}else{this.body.innerHTML="";this.body.appendChild(_6fa);}this.changeBodyEvent.fire(_6fa);this.changeContentEvent.fire();},appendToBody:function(_6fb){if(!this.body){this.body=document.createElement("DIV");this.body.className=YAHOO.widget.Module.CSS_BODY;}this.body.appendChild(_6fb);this.changeBodyEvent.fire(_6fb);this.changeContentEvent.fire();},setFooter:function(_6fc){if(!this.footer){this.footer=document.createElement("DIV");this.footer.className=YAHOO.widget.Module.CSS_FOOTER;}if(typeof _6fc=="string"){this.footer.innerHTML=_6fc;}else{this.footer.innerHTML="";this.footer.appendChild(_6fc);}this.changeFooterEvent.fire(_6fc);this.changeContentEvent.fire();},appendToFooter:function(_6fd){if(!this.footer){this.footer=document.createElement("DIV");this.footer.className=YAHOO.widget.Module.CSS_FOOTER;}this.footer.appendChild(_6fd);this.changeFooterEvent.fire(_6fd);this.changeContentEvent.fire();},render:function(_6fe,_6ff){this.beforeRenderEvent.fire();if(!_6ff){_6ff=this.element;}var me=this;var _701=function(_702){if(typeof _702=="string"){_702=document.getElementById(_702);}if(_702){_702.appendChild(me.element);me.appendEvent.fire();}};if(_6fe){_701(_6fe);}else{if(!YAHOO.util.Dom.inDocument(this.element)){return false;}}if(this.header&&!YAHOO.util.Dom.inDocument(this.header)){var _703=_6ff.firstChild;if(_703){_6ff.insertBefore(this.header,_703);}else{_6ff.appendChild(this.header);}}if(this.body&&!YAHOO.util.Dom.inDocument(this.body)){if(this.footer&&YAHOO.util.Dom.isAncestor(this.moduleElement,this.footer)){_6ff.insertBefore(this.body,this.footer);}else{_6ff.appendChild(this.body);}}if(this.footer&&!YAHOO.util.Dom.inDocument(this.footer)){_6ff.appendChild(this.footer);}this.renderEvent.fire();return true;},destroy:function(){var _704;if(this.element){YAHOO.util.Event.purgeElement(this.element,true);_704=this.element.parentNode;}if(_704){_704.removeChild(this.element);}this.element=null;this.header=null;this.body=null;this.footer=null;for(var e in this){if(e instanceof YAHOO.util.CustomEvent){e.unsubscribeAll();}}YAHOO.widget.Module.textResizeEvent.unsubscribe(this.onDomResize,this);this.destroyEvent.fire();},show:function(){this.cfg.setProperty("visible",true);},hide:function(){this.cfg.setProperty("visible",false);},configVisible:function(type,args,obj){var _709=args[0];if(_709){this.beforeShowEvent.fire();YAHOO.util.Dom.setStyle(this.element,"display","block");this.showEvent.fire();}else{this.beforeHideEvent.fire();YAHOO.util.Dom.setStyle(this.element,"display","none");this.hideEvent.fire();}},configMonitorResize:function(type,args,obj){var _70d=args[0];if(_70d){this.initResizeMonitor();}else{YAHOO.widget.Module.textResizeEvent.unsubscribe(this.onDomResize,this,true);this.resizeMonitor=null;}}};YAHOO.widget.Module.prototype.toString=function(){return "Module "+this.id;};YAHOO.widget.Overlay=function(el,_70f){YAHOO.widget.Overlay.superclass.constructor.call(this,el,_70f);};YAHOO.extend(YAHOO.widget.Overlay,YAHOO.widget.Module);YAHOO.widget.Overlay.IFRAME_SRC="javascript:false;";YAHOO.widget.Overlay.TOP_LEFT="tl";YAHOO.widget.Overlay.TOP_RIGHT="tr";YAHOO.widget.Overlay.BOTTOM_LEFT="bl";YAHOO.widget.Overlay.BOTTOM_RIGHT="br";YAHOO.widget.Overlay.CSS_OVERLAY="overlay";YAHOO.widget.Overlay.prototype.init=function(el,_711){YAHOO.widget.Overlay.superclass.init.call(this,el);this.beforeInitEvent.fire(YAHOO.widget.Overlay);YAHOO.util.Dom.addClass(this.element,YAHOO.widget.Overlay.CSS_OVERLAY);if(_711){this.cfg.applyConfig(_711,true);}if(this.platform=="mac"&&this.browser=="gecko"){if(!YAHOO.util.Config.alreadySubscribed(this.showEvent,this.showMacGeckoScrollbars,this)){this.showEvent.subscribe(this.showMacGeckoScrollbars,this,true);}if(!YAHOO.util.Config.alreadySubscribed(this.hideEvent,this.hideMacGeckoScrollbars,this)){this.hideEvent.subscribe(this.hideMacGeckoScrollbars,this,true);}}this.initEvent.fire(YAHOO.widget.Overlay);};YAHOO.widget.Overlay.prototype.initEvents=function(){YAHOO.widget.Overlay.superclass.initEvents.call(this);this.beforeMoveEvent=new YAHOO.util.CustomEvent("beforeMove",this);this.moveEvent=new YAHOO.util.CustomEvent("move",this);};YAHOO.widget.Overlay.prototype.initDefaultConfig=function(){YAHOO.widget.Overlay.superclass.initDefaultConfig.call(this);this.cfg.addProperty("x",{handler:this.configX,validator:this.cfg.checkNumber,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("y",{handler:this.configY,validator:this.cfg.checkNumber,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("xy",{handler:this.configXY,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("context",{handler:this.configContext,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("fixedcenter",{value:false,handler:this.configFixedCenter,validator:this.cfg.checkBoolean,supercedes:["iframe","visible"]});this.cfg.addProperty("width",{handler:this.configWidth,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("height",{handler:this.configHeight,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("zIndex",{value:null,handler:this.configzIndex});this.cfg.addProperty("constraintoviewport",{value:false,handler:this.configConstrainToViewport,validator:this.cfg.checkBoolean,supercedes:["iframe","x","y","xy"]});this.cfg.addProperty("iframe",{value:(this.browser=="ie"?true:false),handler:this.configIframe,validator:this.cfg.checkBoolean,supercedes:["zIndex"]});};YAHOO.widget.Overlay.prototype.moveTo=function(x,y){this.cfg.setProperty("xy",[x,y]);};YAHOO.widget.Overlay.prototype.hideMacGeckoScrollbars=function(){YAHOO.util.Dom.removeClass(this.element,"show-scrollbars");YAHOO.util.Dom.addClass(this.element,"hide-scrollbars");};YAHOO.widget.Overlay.prototype.showMacGeckoScrollbars=function(){YAHOO.util.Dom.removeClass(this.element,"hide-scrollbars");YAHOO.util.Dom.addClass(this.element,"show-scrollbars");};YAHOO.widget.Overlay.prototype.configVisible=function(type,args,obj){var _717=args[0];var _718=YAHOO.util.Dom.getStyle(this.element,"visibility");if(_718=="inherit"){var e=this.element.parentNode;while(e.nodeType!=9&&e.nodeType!=11){_718=YAHOO.util.Dom.getStyle(e,"visibility");if(_718!="inherit"){break;}e=e.parentNode;}if(_718=="inherit"){_718="visible";}}var _71a=this.cfg.getProperty("effect");var _71b=[];if(_71a){if(_71a instanceof Array){for(var i=0;i<_71a.length;i++){var eff=_71a[i];_71b[_71b.length]=eff.effect(this,eff.duration);}}else{_71b[_71b.length]=_71a.effect(this,_71a.duration);}}var _71e=(this.platform=="mac"&&this.browser=="gecko");if(_717){if(_71e){this.showMacGeckoScrollbars();}if(_71a){if(_717){if(_718!="visible"||_718===""){this.beforeShowEvent.fire();for(var j=0;j<_71b.length;j++){var ei=_71b[j];if(j===0&&!YAHOO.util.Config.alreadySubscribed(ei.animateInCompleteEvent,this.showEvent.fire,this.showEvent)){ei.animateInCompleteEvent.subscribe(this.showEvent.fire,this.showEvent,true);}ei.animateIn();}}}}else{if(_718!="visible"||_718===""){this.beforeShowEvent.fire();YAHOO.util.Dom.setStyle(this.element,"visibility","visible");this.cfg.refireEvent("iframe");this.showEvent.fire();}}}else{if(_71e){this.hideMacGeckoScrollbars();}if(_71a){if(_718=="visible"){this.beforeHideEvent.fire();for(var k=0;k<_71b.length;k++){var h=_71b[k];if(k===0&&!YAHOO.util.Config.alreadySubscribed(h.animateOutCompleteEvent,this.hideEvent.fire,this.hideEvent)){h.animateOutCompleteEvent.subscribe(this.hideEvent.fire,this.hideEvent,true);}h.animateOut();}}else{if(_718===""){YAHOO.util.Dom.setStyle(this.element,"visibility","hidden");}}}else{if(_718=="visible"||_718===""){this.beforeHideEvent.fire();YAHOO.util.Dom.setStyle(this.element,"visibility","hidden");this.cfg.refireEvent("iframe");this.hideEvent.fire();}}}};YAHOO.widget.Overlay.prototype.doCenterOnDOMEvent=function(){if(this.cfg.getProperty("visible")){this.center();}};YAHOO.widget.Overlay.prototype.configFixedCenter=function(type,args,obj){var val=args[0];if(val){this.center();if(!YAHOO.util.Config.alreadySubscribed(this.beforeShowEvent,this.center,this)){this.beforeShowEvent.subscribe(this.center,this,true);}if(!YAHOO.util.Config.alreadySubscribed(YAHOO.widget.Overlay.windowResizeEvent,this.doCenterOnDOMEvent,this)){YAHOO.widget.Overlay.windowResizeEvent.subscribe(this.doCenterOnDOMEvent,this,true);}if(!YAHOO.util.Config.alreadySubscribed(YAHOO.widget.Overlay.windowScrollEvent,this.doCenterOnDOMEvent,this)){YAHOO.widget.Overlay.windowScrollEvent.subscribe(this.doCenterOnDOMEvent,this,true);}}else{YAHOO.widget.Overlay.windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);YAHOO.widget.Overlay.windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);}};YAHOO.widget.Overlay.prototype.configHeight=function(type,args,obj){var _72a=args[0];var el=this.element;YAHOO.util.Dom.setStyle(el,"height",_72a);this.cfg.refireEvent("iframe");};YAHOO.widget.Overlay.prototype.configWidth=function(type,args,obj){var _72f=args[0];var el=this.element;YAHOO.util.Dom.setStyle(el,"width",_72f);this.cfg.refireEvent("iframe");};YAHOO.widget.Overlay.prototype.configzIndex=function(type,args,obj){var _734=args[0];var el=this.element;if(!_734){_734=YAHOO.util.Dom.getStyle(el,"zIndex");if(!_734||isNaN(_734)){_734=0;}}if(this.iframe){if(_734<=0){_734=1;}YAHOO.util.Dom.setStyle(this.iframe,"zIndex",(_734-1));}YAHOO.util.Dom.setStyle(el,"zIndex",_734);this.cfg.setProperty("zIndex",_734,true);};YAHOO.widget.Overlay.prototype.configXY=function(type,args,obj){var pos=args[0];var x=pos[0];var y=pos[1];this.cfg.setProperty("x",x);this.cfg.setProperty("y",y);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y]);};YAHOO.widget.Overlay.prototype.configX=function(type,args,obj){var x=args[0];var y=this.cfg.getProperty("y");this.cfg.setProperty("x",x,true);this.cfg.setProperty("y",y,true);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");YAHOO.util.Dom.setX(this.element,x,true);this.cfg.setProperty("xy",[x,y],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y]);};YAHOO.widget.Overlay.prototype.configY=function(type,args,obj){var x=this.cfg.getProperty("x");var y=args[0];this.cfg.setProperty("x",x,true);this.cfg.setProperty("y",y,true);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");YAHOO.util.Dom.setY(this.element,y,true);this.cfg.setProperty("xy",[x,y],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y]);};YAHOO.widget.Overlay.prototype.showIframe=function(){if(this.iframe){this.iframe.style.display="block";}};YAHOO.widget.Overlay.prototype.hideIframe=function(){if(this.iframe){this.iframe.style.display="none";}};YAHOO.widget.Overlay.prototype.configIframe=function(type,args,obj){var val=args[0];if(val){if(!YAHOO.util.Config.alreadySubscribed(this.showEvent,this.showIframe,this)){this.showEvent.subscribe(this.showIframe,this,true);}if(!YAHOO.util.Config.alreadySubscribed(this.hideEvent,this.hideIframe,this)){this.hideEvent.subscribe(this.hideIframe,this,true);}var x=this.cfg.getProperty("x");var y=this.cfg.getProperty("y");if(!x||!y){this.syncPosition();x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");}if(!isNaN(x)&&!isNaN(y)){if(!this.iframe){this.iframe=document.createElement("iframe");if(this.isSecure){this.iframe.src=YAHOO.widget.Overlay.IFRAME_SRC;}var _74c=this.element.parentNode;if(_74c){_74c.appendChild(this.iframe);}else{document.body.appendChild(this.iframe);}YAHOO.util.Dom.setStyle(this.iframe,"position","absolute");YAHOO.util.Dom.setStyle(this.iframe,"border","none");YAHOO.util.Dom.setStyle(this.iframe,"margin","0");YAHOO.util.Dom.setStyle(this.iframe,"padding","0");YAHOO.util.Dom.setStyle(this.iframe,"opacity","0");if(this.cfg.getProperty("visible")){this.showIframe();}else{this.hideIframe();}}var _74d=YAHOO.util.Dom.getStyle(this.iframe,"display");if(_74d=="none"){this.iframe.style.display="block";}YAHOO.util.Dom.setXY(this.iframe,[x,y]);var _74e=this.element.clientWidth;var _74f=this.element.clientHeight;YAHOO.util.Dom.setStyle(this.iframe,"width",(_74e+2)+"px");YAHOO.util.Dom.setStyle(this.iframe,"height",(_74f+2)+"px");if(_74d=="none"){this.iframe.style.display="none";}}}else{if(this.iframe){this.iframe.style.display="none";}this.showEvent.unsubscribe(this.showIframe,this);this.hideEvent.unsubscribe(this.hideIframe,this);}};YAHOO.widget.Overlay.prototype.configConstrainToViewport=function(type,args,obj){var val=args[0];if(val){if(!YAHOO.util.Config.alreadySubscribed(this.beforeMoveEvent,this.enforceConstraints,this)){this.beforeMoveEvent.subscribe(this.enforceConstraints,this,true);}}else{this.beforeMoveEvent.unsubscribe(this.enforceConstraints,this);}};YAHOO.widget.Overlay.prototype.configContext=function(type,args,obj){var _757=args[0];if(_757){var _758=_757[0];var _759=_757[1];var _75a=_757[2];if(_758){if(typeof _758=="string"){this.cfg.setProperty("context",[document.getElementById(_758),_759,_75a],true);}if(_759&&_75a){this.align(_759,_75a);}}}};YAHOO.widget.Overlay.prototype.align=function(_75b,_75c){var _75d=this.cfg.getProperty("context");if(_75d){var _75e=_75d[0];var _75f=this.element;var me=this;if(!_75b){_75b=_75d[1];}if(!_75c){_75c=_75d[2];}if(_75f&&_75e){var _761=YAHOO.util.Dom.getRegion(_75f);var _762=YAHOO.util.Dom.getRegion(_75e);var _763=function(v,h){switch(_75b){case YAHOO.widget.Overlay.TOP_LEFT:me.moveTo(h,v);break;case YAHOO.widget.Overlay.TOP_RIGHT:me.moveTo(h-_75f.offsetWidth,v);break;case YAHOO.widget.Overlay.BOTTOM_LEFT:me.moveTo(h,v-_75f.offsetHeight);break;case YAHOO.widget.Overlay.BOTTOM_RIGHT:me.moveTo(h-_75f.offsetWidth,v-_75f.offsetHeight);break;}};switch(_75c){case YAHOO.widget.Overlay.TOP_LEFT:_763(_762.top,_762.left);break;case YAHOO.widget.Overlay.TOP_RIGHT:_763(_762.top,_762.right);break;case YAHOO.widget.Overlay.BOTTOM_LEFT:_763(_762.bottom,_762.left);break;case YAHOO.widget.Overlay.BOTTOM_RIGHT:_763(_762.bottom,_762.right);break;}}}};YAHOO.widget.Overlay.prototype.enforceConstraints=function(type,args,obj){var pos=args[0];var x=pos[0];var y=pos[1];var _76c=this.element.offsetHeight;var _76d=this.element.offsetWidth;var _76e=YAHOO.util.Dom.getViewportWidth();var _76f=YAHOO.util.Dom.getViewportHeight();var _770=document.documentElement.scrollLeft||document.body.scrollLeft;var _771=document.documentElement.scrollTop||document.body.scrollTop;var _772=_771+10;var _773=_770+10;var _774=_771+_76f-_76c-10;var _775=_770+_76e-_76d-10;if(x<_773){x=_773;}else{if(x>_775){x=_775;}}if(y<_772){y=_772;}else{if(y>_774){y=_774;}}this.cfg.setProperty("x",x,true);this.cfg.setProperty("y",y,true);this.cfg.setProperty("xy",[x,y],true);};YAHOO.widget.Overlay.prototype.center=function(){var _776=document.documentElement.scrollLeft||document.body.scrollLeft;var _777=document.documentElement.scrollTop||document.body.scrollTop;var _778=YAHOO.util.Dom.getClientWidth();var _779=YAHOO.util.Dom.getClientHeight();var _77a=this.element.offsetWidth;var _77b=this.element.offsetHeight;var x=(_778/2)-(_77a/2)+_776;var y=(_779/2)-(_77b/2)+_777;this.cfg.setProperty("xy",[parseInt(x,10),parseInt(y,10)]);this.cfg.refireEvent("iframe");};YAHOO.widget.Overlay.prototype.syncPosition=function(){var pos=YAHOO.util.Dom.getXY(this.element);this.cfg.setProperty("x",pos[0],true);this.cfg.setProperty("y",pos[1],true);this.cfg.setProperty("xy",pos,true);};YAHOO.widget.Overlay.prototype.onDomResize=function(e,obj){YAHOO.widget.Overlay.superclass.onDomResize.call(this,e,obj);var me=this;setTimeout(function(){me.syncPosition();me.cfg.refireEvent("iframe");me.cfg.refireEvent("context");},0);};YAHOO.widget.Overlay.prototype.destroy=function(){if(this.iframe){this.iframe.parentNode.removeChild(this.iframe);}this.iframe=null;YAHOO.widget.Overlay.windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);YAHOO.widget.Overlay.windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);YAHOO.widget.Overlay.superclass.destroy.call(this);};YAHOO.widget.Overlay.prototype.toString=function(){return "Overlay "+this.id;};YAHOO.widget.Overlay.windowScrollEvent=new YAHOO.util.CustomEvent("windowScroll");YAHOO.widget.Overlay.windowResizeEvent=new YAHOO.util.CustomEvent("windowResize");YAHOO.widget.Overlay.windowScrollHandler=function(e){if(YAHOO.widget.Module.prototype.browser=="ie"||YAHOO.widget.Module.prototype.browser=="ie7"){if(!window.scrollEnd){window.scrollEnd=-1;}clearTimeout(window.scrollEnd);window.scrollEnd=setTimeout(function(){YAHOO.widget.Overlay.windowScrollEvent.fire();},1);}else{YAHOO.widget.Overlay.windowScrollEvent.fire();}};YAHOO.widget.Overlay.windowResizeHandler=function(e){if(YAHOO.widget.Module.prototype.browser=="ie"||YAHOO.widget.Module.prototype.browser=="ie7"){if(!window.resizeEnd){window.resizeEnd=-1;}clearTimeout(window.resizeEnd);window.resizeEnd=setTimeout(function(){YAHOO.widget.Overlay.windowResizeEvent.fire();},100);}else{YAHOO.widget.Overlay.windowResizeEvent.fire();}};YAHOO.widget.Overlay._initialized=null;if(YAHOO.widget.Overlay._initialized===null){YAHOO.util.Event.addListener(window,"scroll",YAHOO.widget.Overlay.windowScrollHandler);YAHOO.util.Event.addListener(window,"resize",YAHOO.widget.Overlay.windowResizeHandler);YAHOO.widget.Overlay._initialized=true;}YAHOO.widget.OverlayManager=function(_784){this.init(_784);};YAHOO.widget.OverlayManager.CSS_FOCUSED="focused";YAHOO.widget.OverlayManager.prototype={constructor:YAHOO.widget.OverlayManager,overlays:null,initDefaultConfig:function(){this.cfg.addProperty("overlays",{suppressEvent:true});this.cfg.addProperty("focusevent",{value:"mousedown"});},init:function(_785){this.cfg=new YAHOO.util.Config(this);this.initDefaultConfig();if(_785){this.cfg.applyConfig(_785,true);}this.cfg.fireQueue();var _786=null;this.getActive=function(){return _786;};this.focus=function(_787){var o=this.find(_787);if(o){this.blurAll();_786=o;YAHOO.util.Dom.addClass(_786.element,YAHOO.widget.OverlayManager.CSS_FOCUSED);this.overlays.sort(this.compareZIndexDesc);var _789=YAHOO.util.Dom.getStyle(this.overlays[0].element,"zIndex");if(!isNaN(_789)&&this.overlays[0]!=_787){_786.cfg.setProperty("zIndex",(parseInt(_789,10)+2));}this.overlays.sort(this.compareZIndexDesc);}};this.remove=function(_78a){var o=this.find(_78a);if(o){var _78c=YAHOO.util.Dom.getStyle(o.element,"zIndex");o.cfg.setProperty("zIndex",-1000,true);this.overlays.sort(this.compareZIndexDesc);this.overlays=this.overlays.slice(0,this.overlays.length-1);o.cfg.setProperty("zIndex",_78c,true);o.cfg.setProperty("manager",null);o.focusEvent=null;o.blurEvent=null;o.focus=null;o.blur=null;}};this.blurAll=function(){_786=null;for(var o=0;o<this.overlays.length;o++){YAHOO.util.Dom.removeClass(this.overlays[o].element,YAHOO.widget.OverlayManager.CSS_FOCUSED);}};var _78e=this.cfg.getProperty("overlays");if(!this.overlays){this.overlays=[];}if(_78e){this.register(_78e);this.overlays.sort(this.compareZIndexDesc);}},register:function(_78f){if(_78f instanceof YAHOO.widget.Overlay){_78f.cfg.addProperty("manager",{value:this});_78f.focusEvent=new YAHOO.util.CustomEvent("focus");_78f.blurEvent=new YAHOO.util.CustomEvent("blur");var mgr=this;_78f.focus=function(){mgr.focus(this);this.focusEvent.fire();};_78f.blur=function(){mgr.blurAll();this.blurEvent.fire();};var _791=function(e,obj){_78f.focus();};var _794=this.cfg.getProperty("focusevent");YAHOO.util.Event.addListener(_78f.element,_794,_791,this,true);var _795=YAHOO.util.Dom.getStyle(_78f.element,"zIndex");if(!isNaN(_795)){_78f.cfg.setProperty("zIndex",parseInt(_795,10));}else{_78f.cfg.setProperty("zIndex",0);}this.overlays.push(_78f);return true;}else{if(_78f instanceof Array){var _796=0;for(var i=0;i<_78f.length;i++){if(this.register(_78f[i])){_796++;}}if(_796>0){return true;}}else{return false;}}},find:function(_798){if(_798 instanceof YAHOO.widget.Overlay){for(var o=0;o<this.overlays.length;o++){if(this.overlays[o]==_798){return this.overlays[o];}}}else{if(typeof _798=="string"){for(var p=0;p<this.overlays.length;p++){if(this.overlays[p].id==_798){return this.overlays[p];}}}}return null;},compareZIndexDesc:function(o1,o2){var _79d=o1.cfg.getProperty("zIndex");var _79e=o2.cfg.getProperty("zIndex");if(_79d>_79e){return -1;}else{if(_79d<_79e){return 1;}else{return 0;}}},showAll:function(){for(var o=0;o<this.overlays.length;o++){this.overlays[o].show();}},hideAll:function(){for(var o=0;o<this.overlays.length;o++){this.overlays[o].hide();}},toString:function(){return "OverlayManager";}};YAHOO.util.KeyListener=function(_7a1,_7a2,_7a3,_7a4){if(!_7a4){_7a4=YAHOO.util.KeyListener.KEYDOWN;}var _7a5=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(typeof _7a1=="string"){_7a1=document.getElementById(_7a1);}if(typeof _7a3=="function"){_7a5.subscribe(_7a3);}else{_7a5.subscribe(_7a3.fn,_7a3.scope,_7a3.correctScope);}function handleKeyPress(e,obj){if(!_7a2.shift){_7a2.shift=false;}if(!_7a2.alt){_7a2.alt=false;}if(!_7a2.ctrl){_7a2.ctrl=false;}if(e.shiftKey==_7a2.shift&&e.altKey==_7a2.alt&&e.ctrlKey==_7a2.ctrl){var _7a8;var _7a9;if(_7a2.keys instanceof Array){for(var i=0;i<_7a2.keys.length;i++){_7a8=_7a2.keys[i];if(_7a8==e.charCode){_7a5.fire(e.charCode,e);break;}else{if(_7a8==e.keyCode){_7a5.fire(e.keyCode,e);break;}}}}else{_7a8=_7a2.keys;if(_7a8==e.charCode){_7a5.fire(e.charCode,e);}else{if(_7a8==e.keyCode){_7a5.fire(e.keyCode,e);}}}}}this.enable=function(){if(!this.enabled){YAHOO.util.Event.addListener(_7a1,_7a4,handleKeyPress);this.enabledEvent.fire(_7a2);}this.enabled=true;};this.disable=function(){if(this.enabled){YAHOO.util.Event.removeListener(_7a1,_7a4,handleKeyPress);this.disabledEvent.fire(_7a2);}this.enabled=false;};this.toString=function(){return "KeyListener ["+_7a2.keys+"] "+_7a1.tagName+(_7a1.id?"["+_7a1.id+"]":"");};};YAHOO.util.KeyListener.KEYDOWN="keydown";YAHOO.util.KeyListener.KEYUP="keyup";YAHOO.widget.ContainerEffect=function(_7ab,_7ac,_7ad,_7ae,_7af){if(!_7af){_7af=YAHOO.util.Anim;}this.overlay=_7ab;this.attrIn=_7ac;this.attrOut=_7ad;this.targetElement=_7ae||_7ab.element;this.animClass=_7af;};YAHOO.widget.ContainerEffect.prototype.init=function(){this.beforeAnimateInEvent=new YAHOO.util.CustomEvent("beforeAnimateIn");this.beforeAnimateOutEvent=new YAHOO.util.CustomEvent("beforeAnimateOut");this.animateInCompleteEvent=new YAHOO.util.CustomEvent("animateInComplete");this.animateOutCompleteEvent=new YAHOO.util.CustomEvent("animateOutComplete");this.animIn=new this.animClass(this.targetElement,this.attrIn.attributes,this.attrIn.duration,this.attrIn.method);this.animIn.onStart.subscribe(this.handleStartAnimateIn,this);this.animIn.onTween.subscribe(this.handleTweenAnimateIn,this);this.animIn.onComplete.subscribe(this.handleCompleteAnimateIn,this);this.animOut=new this.animClass(this.targetElement,this.attrOut.attributes,this.attrOut.duration,this.attrOut.method);this.animOut.onStart.subscribe(this.handleStartAnimateOut,this);this.animOut.onTween.subscribe(this.handleTweenAnimateOut,this);this.animOut.onComplete.subscribe(this.handleCompleteAnimateOut,this);};YAHOO.widget.ContainerEffect.prototype.animateIn=function(){this.beforeAnimateInEvent.fire();this.animIn.animate();};YAHOO.widget.ContainerEffect.prototype.animateOut=function(){this.beforeAnimateOutEvent.fire();this.animOut.animate();};YAHOO.widget.ContainerEffect.prototype.handleStartAnimateIn=function(type,args,obj){};YAHOO.widget.ContainerEffect.prototype.handleTweenAnimateIn=function(type,args,obj){};YAHOO.widget.ContainerEffect.prototype.handleCompleteAnimateIn=function(type,args,obj){};YAHOO.widget.ContainerEffect.prototype.handleStartAnimateOut=function(type,args,obj){};YAHOO.widget.ContainerEffect.prototype.handleTweenAnimateOut=function(type,args,obj){};YAHOO.widget.ContainerEffect.prototype.handleCompleteAnimateOut=function(type,args,obj){};YAHOO.widget.ContainerEffect.prototype.toString=function(){var _7c2="ContainerEffect";if(this.overlay){_7c2+=" ["+this.overlay.toString()+"]";}return _7c2;};YAHOO.widget.ContainerEffect.FADE=function(_7c3,dur){var fade=new YAHOO.widget.ContainerEffect(_7c3,{attributes:{opacity:{from:0,to:1}},duration:dur,method:YAHOO.util.Easing.easeIn},{attributes:{opacity:{to:0}},duration:dur,method:YAHOO.util.Easing.easeOut},_7c3.element);fade.handleStartAnimateIn=function(type,args,obj){YAHOO.util.Dom.addClass(obj.overlay.element,"hide-select");if(!obj.overlay.underlay){obj.overlay.cfg.refireEvent("underlay");}if(obj.overlay.underlay){obj.initialUnderlayOpacity=YAHOO.util.Dom.getStyle(obj.overlay.underlay,"opacity");obj.overlay.underlay.style.filter=null;}YAHOO.util.Dom.setStyle(obj.overlay.element,"visibility","visible");YAHOO.util.Dom.setStyle(obj.overlay.element,"opacity",0);};fade.handleCompleteAnimateIn=function(type,args,obj){YAHOO.util.Dom.removeClass(obj.overlay.element,"hide-select");if(obj.overlay.element.style.filter){obj.overlay.element.style.filter=null;}if(obj.overlay.underlay){YAHOO.util.Dom.setStyle(obj.overlay.underlay,"opacity",obj.initialUnderlayOpacity);}obj.overlay.cfg.refireEvent("iframe");obj.animateInCompleteEvent.fire();};fade.handleStartAnimateOut=function(type,args,obj){YAHOO.util.Dom.addClass(obj.overlay.element,"hide-select");if(obj.overlay.underlay){obj.overlay.underlay.style.filter=null;}};fade.handleCompleteAnimateOut=function(type,args,obj){YAHOO.util.Dom.removeClass(obj.overlay.element,"hide-select");if(obj.overlay.element.style.filter){obj.overlay.element.style.filter=null;}YAHOO.util.Dom.setStyle(obj.overlay.element,"visibility","hidden");YAHOO.util.Dom.setStyle(obj.overlay.element,"opacity",1);obj.overlay.cfg.refireEvent("iframe");obj.animateOutCompleteEvent.fire();};fade.init();return fade;};YAHOO.widget.ContainerEffect.SLIDE=function(_7d2,dur){var x=_7d2.cfg.getProperty("x")||YAHOO.util.Dom.getX(_7d2.element);var y=_7d2.cfg.getProperty("y")||YAHOO.util.Dom.getY(_7d2.element);var _7d6=YAHOO.util.Dom.getClientWidth();var _7d7=_7d2.element.offsetWidth;var _7d8=new YAHOO.widget.ContainerEffect(_7d2,{attributes:{points:{to:[x,y]}},duration:dur,method:YAHOO.util.Easing.easeIn},{attributes:{points:{to:[(_7d6+25),y]}},duration:dur,method:YAHOO.util.Easing.easeOut},_7d2.element,YAHOO.util.Motion);_7d8.handleStartAnimateIn=function(type,args,obj){obj.overlay.element.style.left=(-25-_7d7)+"px";obj.overlay.element.style.top=y+"px";};_7d8.handleTweenAnimateIn=function(type,args,obj){var pos=YAHOO.util.Dom.getXY(obj.overlay.element);var _7e0=pos[0];var _7e1=pos[1];if(YAHOO.util.Dom.getStyle(obj.overlay.element,"visibility")=="hidden"&&_7e0<x){YAHOO.util.Dom.setStyle(obj.overlay.element,"visibility","visible");}obj.overlay.cfg.setProperty("xy",[_7e0,_7e1],true);obj.overlay.cfg.refireEvent("iframe");};_7d8.handleCompleteAnimateIn=function(type,args,obj){obj.overlay.cfg.setProperty("xy",[x,y],true);obj.startX=x;obj.startY=y;obj.overlay.cfg.refireEvent("iframe");obj.animateInCompleteEvent.fire();};_7d8.handleStartAnimateOut=function(type,args,obj){var vw=YAHOO.util.Dom.getViewportWidth();var pos=YAHOO.util.Dom.getXY(obj.overlay.element);var yso=pos[1];var _7eb=obj.animOut.attributes.points.to;obj.animOut.attributes.points.to=[(vw+25),yso];};_7d8.handleTweenAnimateOut=function(type,args,obj){var pos=YAHOO.util.Dom.getXY(obj.overlay.element);var xto=pos[0];var yto=pos[1];obj.overlay.cfg.setProperty("xy",[xto,yto],true);obj.overlay.cfg.refireEvent("iframe");};_7d8.handleCompleteAnimateOut=function(type,args,obj){YAHOO.util.Dom.setStyle(obj.overlay.element,"visibility","hidden");obj.overlay.cfg.setProperty("xy",[x,y]);obj.animateOutCompleteEvent.fire();};_7d8.init();return _7d8;};(function(){var Dom=YAHOO.util.Dom,Event=YAHOO.util.Event;YAHOO.widget.MenuManager=function(){var _7f6=false,m_oMenus={},m_oItems={},m_oVisibleMenus={},me=this;function addItem(_7f7){var _7f8=Dom.generateId();if(_7f7&&m_oItems[_7f8]!=_7f7){_7f7.element.setAttribute("yuiid",_7f8);m_oItems[_7f8]=_7f7;_7f7.destroyEvent.subscribe(onItemDestroy,_7f7);}}function removeItem(_7f9){var _7fa=_7f9.element.getAttribute("yuiid");if(_7fa&&m_oItems[_7fa]){delete m_oItems[_7fa];}}function getMenuRootElement(_7fb){var _7fc;if(_7fb&&_7fb.tagName){switch(_7fb.tagName.toUpperCase()){case "DIV":_7fc=_7fb.parentNode;if(Dom.hasClass(_7fb,"bd")&&_7fc&&_7fc.tagName&&_7fc.tagName.toUpperCase()=="DIV"){return _7fc;}else{return _7fb;}break;case "LI":return _7fb;default:_7fc=_7fb.parentNode;if(_7fc){return getMenuRootElement(_7fc);}break;}}}function onDOMEvent(_7fd){var _7fe=Event.getTarget(_7fd),oElement=getMenuRootElement(_7fe),oMenuItem,oMenu;if(oElement){var _7ff=oElement.tagName.toUpperCase();if(_7ff=="LI"){var _800=oElement.getAttribute("yuiid");if(_800){oMenuItem=m_oItems[_800];oMenu=oMenuItem.parent;}}else{if(_7ff=="DIV"){if(oElement.id){oMenu=m_oMenus[oElement.id];}}}}if(oMenu){var _801={"click":"clickEvent","mousedown":"mouseDownEvent","mouseup":"mouseUpEvent","mouseover":"mouseOverEvent","mouseout":"mouseOutEvent","keydown":"keyDownEvent","keyup":"keyUpEvent","keypress":"keyPressEvent"},sCustomEventType=_801[_7fd.type];if(oMenuItem&&!oMenuItem.cfg.getProperty("disabled")){oMenuItem[sCustomEventType].fire(_7fd);}oMenu[sCustomEventType].fire(_7fd,oMenuItem);}else{if(_7fd.type=="mousedown"){var _802;for(var i in m_oMenus){if(m_oMenus.hasOwnProperty(i)){oMenu=m_oMenus[i];if(oMenu.cfg.getProperty("clicktohide")&&oMenu.cfg.getProperty("position")=="dynamic"){oMenu.hide();}else{oMenu.clearActiveItem(true);}}}}}}function onMenuDestroy(_804,_805,_806){if(_806&&m_oMenus[_806.id]){delete m_oMenus[_806.id];}}function onItemDestroy(_807,_808,_809){var _80a=_809.element.getAttribute("yuiid");if(_80a){delete m_oItems[_80a];}}function onMenuVisibleConfigChange(_80b,_80c,_80d){var _80e=_80c[0];if(_80e){m_oVisibleMenus[_80d.id]=_80d;}else{if(m_oVisibleMenus[_80d.id]){delete m_oVisibleMenus[_80d.id];}}}function onItemAdded(_80f,_810){addItem(_810[0]);}function onItemRemoved(_811,_812){removeItem(_812[0]);}return {addMenu:function(_813){if(_813&&_813.id&&!m_oMenus[_813.id]){m_oMenus[_813.id]=_813;if(!_7f6){var oDoc=document;Event.addListener(oDoc,"mouseover",onDOMEvent,me,true);Event.addListener(oDoc,"mouseout",onDOMEvent,me,true);Event.addListener(oDoc,"mousedown",onDOMEvent,me,true);Event.addListener(oDoc,"mouseup",onDOMEvent,me,true);Event.addListener(oDoc,"click",onDOMEvent,me,true);Event.addListener(oDoc,"keydown",onDOMEvent,me,true);Event.addListener(oDoc,"keyup",onDOMEvent,me,true);Event.addListener(oDoc,"keypress",onDOMEvent,me,true);_7f6=true;}_813.destroyEvent.subscribe(onMenuDestroy,_813,me);_813.cfg.subscribeToConfigEvent("visible",onMenuVisibleConfigChange,_813);_813.itemAddedEvent.subscribe(onItemAdded);_813.itemRemovedEvent.subscribe(onItemRemoved);}},removeMenu:function(_815){if(_815&&m_oMenus[_815.id]){delete m_oMenus[_815.id];}},hideVisible:function(){var _816;for(var i in m_oVisibleMenus){if(m_oVisibleMenus.hasOwnProperty(i)){_816=m_oVisibleMenus[i];if(_816.cfg.getProperty("position")=="dynamic"){_816.hide();}}}},getMenus:function(){return m_oMenus;},getMenu:function(_818){if(m_oMenus[_818]){return m_oMenus[_818];}},toString:function(){return ("MenuManager");}};}();})();(function(){var Dom=YAHOO.util.Dom,Event=YAHOO.util.Event;YAHOO.widget.Menu=function(_81a,_81b){if(_81b){this.parent=_81b.parent;this.lazyLoad=_81b.lazyLoad||_81b.lazyload;this.itemData=_81b.itemData||_81b.itemdata;}YAHOO.widget.Menu.superclass.constructor.call(this,_81a,_81b);};YAHOO.extend(YAHOO.widget.Menu,YAHOO.widget.Overlay,{CSS_CLASS_NAME:"yuimenu",ITEM_TYPE:null,GROUP_TITLE_TAG_NAME:"h6",_nHideDelayId:null,_nShowDelayId:null,_hideDelayEventHandlersAssigned:false,_bHandledMouseOverEvent:false,_bHandledMouseOutEvent:false,_aGroupTitleElements:null,_aItemGroups:null,_aListElements:null,lazyLoad:false,itemData:null,activeItem:null,parent:null,srcElement:null,mouseOverEvent:null,mouseOutEvent:null,mouseDownEvent:null,mouseUpEvent:null,clickEvent:null,keyPressEvent:null,keyDownEvent:null,keyUpEvent:null,itemAddedEvent:null,itemRemovedEvent:null,init:function(_81c,_81d){this._aItemGroups=[];this._aListElements=[];this._aGroupTitleElements=[];if(!this.ITEM_TYPE){this.ITEM_TYPE=YAHOO.widget.MenuItem;}var _81e;if(typeof _81c=="string"){_81e=document.getElementById(_81c);}else{if(_81c.tagName){_81e=_81c;}}if(_81e&&_81e.tagName){switch(_81e.tagName.toUpperCase()){case "DIV":this.srcElement=_81e;if(!_81e.id){_81e.setAttribute("id",Dom.generateId());}YAHOO.widget.Menu.superclass.init.call(this,_81e);this.beforeInitEvent.fire(YAHOO.widget.Menu);break;case "SELECT":this.srcElement=_81e;YAHOO.widget.Menu.superclass.init.call(this,Dom.generateId());this.beforeInitEvent.fire(YAHOO.widget.Menu);break;}}else{YAHOO.widget.Menu.superclass.init.call(this,_81c);this.beforeInitEvent.fire(YAHOO.widget.Menu);}if(this.element){var oEl=this.element;Dom.addClass(oEl,this.CSS_CLASS_NAME);this.initEvent.subscribe(this._onInit,this,true);this.beforeRenderEvent.subscribe(this._onBeforeRender,this,true);this.renderEvent.subscribe(this._onRender,this,true);this.beforeShowEvent.subscribe(this._onBeforeShow,this,true);this.showEvent.subscribe(this._onShow,this,true);this.beforeHideEvent.subscribe(this._onBeforeHide,this,true);this.mouseOverEvent.subscribe(this._onMouseOver,this,true);this.mouseOutEvent.subscribe(this._onMouseOut,this,true);this.clickEvent.subscribe(this._onClick,this,true);this.keyDownEvent.subscribe(this._onKeyDown,this,true);YAHOO.widget.Module.textResizeEvent.subscribe(this._onTextResize,this,true);if(_81d){this.cfg.applyConfig(_81d,true);}YAHOO.widget.MenuManager.addMenu(this);this.initEvent.fire(YAHOO.widget.Menu);}},_initSubTree:function(){var _820;if(this.srcElement.tagName=="DIV"){_820=this.body.firstChild;var _821=0,sGroupTitleTagName=this.GROUP_TITLE_TAG_NAME.toUpperCase();do{if(_820&&_820.tagName){switch(_820.tagName.toUpperCase()){case sGroupTitleTagName:this._aGroupTitleElements[_821]=_820;break;case "UL":this._aListElements[_821]=_820;this._aItemGroups[_821]=[];_821++;break;}}}while((_820=_820.nextSibling));if(this._aListElements[0]){Dom.addClass(this._aListElements[0],"first-of-type");}}_820=null;if(this.srcElement.tagName){var _822=this.srcElement.tagName.toUpperCase();switch(_822){case "DIV":if(this._aListElements.length>0){var i=this._aListElements.length-1;do{_820=this._aListElements[i].firstChild;do{if(_820&&_820.tagName&&_820.tagName.toUpperCase()=="LI"){this.addItem(new this.ITEM_TYPE(_820,{parent:this}),i);}}while((_820=_820.nextSibling));}while(i--);}break;case "SELECT":_820=this.srcElement.firstChild;do{if(_820&&_820.tagName){switch(_820.tagName.toUpperCase()){case "OPTGROUP":case "OPTION":this.addItem(new this.ITEM_TYPE(_820,{parent:this}));break;}}}while((_820=_820.nextSibling));break;}}},_getFirstEnabledItem:function(){var _824=this._aItemGroups.length,oItem,aItemGroup;for(var i=0;i<_824;i++){aItemGroup=this._aItemGroups[i];if(aItemGroup){var _826=aItemGroup.length;for(var n=0;n<_826;n++){oItem=aItemGroup[n];if(!oItem.cfg.getProperty("disabled")&&oItem.element.style.display!="none"){return oItem;}oItem=null;}}}},_checkPosition:function(_828){if(typeof _828=="string"){var _829=_828.toLowerCase();return ("dynamic,static".indexOf(_829)!=-1);}},_addItemToGroup:function(_82a,_82b,_82c){var _82d;if(_82b instanceof this.ITEM_TYPE){_82d=_82b;_82d.parent=this;}else{if(typeof _82b=="string"){_82d=new this.ITEM_TYPE(_82b,{parent:this});}else{if(typeof _82b=="object"){_82b.parent=this;_82d=new this.ITEM_TYPE(_82b.text,_82b);}}}if(_82d){var _82e=typeof _82a=="number"?_82a:0,aGroup=this._getItemGroup(_82e),oGroupItem;if(!aGroup){aGroup=this._createItemGroup(_82e);}if(typeof _82c=="number"){var _82f=(_82c>=aGroup.length);if(aGroup[_82c]){aGroup.splice(_82c,0,_82d);}else{aGroup[_82c]=_82d;}oGroupItem=aGroup[_82c];if(oGroupItem){if(_82f&&(!oGroupItem.element.parentNode||oGroupItem.element.parentNode.nodeType==11)){this._aListElements[_82e].appendChild(oGroupItem.element);}else{function getNextItemSibling(_830,_831){return (_830[_831]||getNextItemSibling(_830,(_831+1)));}var _832=getNextItemSibling(aGroup,(_82c+1));if(_832&&(!oGroupItem.element.parentNode||oGroupItem.element.parentNode.nodeType==11)){this._aListElements[_82e].insertBefore(oGroupItem.element,_832.element);}}oGroupItem.parent=this;this._subscribeToItemEvents(oGroupItem);this._configureSubmenu(oGroupItem);this._updateItemProperties(_82e);this.itemAddedEvent.fire(oGroupItem);return oGroupItem;}}else{var _833=aGroup.length;aGroup[_833]=_82d;oGroupItem=aGroup[_833];if(oGroupItem){if(!Dom.isAncestor(this._aListElements[_82e],oGroupItem.element)){this._aListElements[_82e].appendChild(oGroupItem.element);}oGroupItem.element.setAttribute("groupindex",_82e);oGroupItem.element.setAttribute("index",_833);oGroupItem.parent=this;oGroupItem.index=_833;oGroupItem.groupIndex=_82e;this._subscribeToItemEvents(oGroupItem);this._configureSubmenu(oGroupItem);if(_833===0){Dom.addClass(oGroupItem.element,"first-of-type");}this.itemAddedEvent.fire(oGroupItem);return oGroupItem;}}}},_removeItemFromGroupByIndex:function(_834,_835){var _836=typeof _834=="number"?_834:0,aGroup=this._getItemGroup(_836);if(aGroup){var _837=aGroup.splice(_835,1),oItem=_837[0];if(oItem){this._updateItemProperties(_836);if(aGroup.length===0){var oUL=this._aListElements[_836];if(this.body&&oUL){this.body.removeChild(oUL);}this._aItemGroups.splice(_836,1);this._aListElements.splice(_836,1);oUL=this._aListElements[0];if(oUL){Dom.addClass(oUL,"first-of-type");}}this.itemRemovedEvent.fire(oItem);return oItem;}}},_removeItemFromGroupByValue:function(_839,_83a){var _83b=this._getItemGroup(_839);if(_83b){var _83c=_83b.length,nItemIndex=-1;if(_83c>0){var i=_83c-1;do{if(_83b[i]==_83a){nItemIndex=i;break;}}while(i--);if(nItemIndex>-1){return this._removeItemFromGroupByIndex(_839,nItemIndex);}}}},_updateItemProperties:function(_83e){var _83f=this._getItemGroup(_83e),nItems=_83f.length;if(nItems>0){var i=nItems-1,oItem,oLI;do{oItem=_83f[i];if(oItem){oLI=oItem.element;oItem.index=i;oItem.groupIndex=_83e;oLI.setAttribute("groupindex",_83e);oLI.setAttribute("index",i);Dom.removeClass(oLI,"first-of-type");}}while(i--);if(oLI){Dom.addClass(oLI,"first-of-type");}}},_createItemGroup:function(_841){if(!this._aItemGroups[_841]){this._aItemGroups[_841]=[];var oUL=document.createElement("ul");this._aListElements[_841]=oUL;return this._aItemGroups[_841];}},_getItemGroup:function(_843){var _844=((typeof _843=="number")?_843:0);return this._aItemGroups[_844];},_configureSubmenu:function(_845){var _846=_845.cfg.getProperty("submenu");if(_846){this.cfg.configChangedEvent.subscribe(this._onParentMenuConfigChange,_846,true);this.renderEvent.subscribe(this._onParentMenuRender,_846,true);_846.beforeShowEvent.subscribe(this._onSubmenuBeforeShow,_846,true);_846.showEvent.subscribe(this._onSubmenuShow,_846,true);_846.hideEvent.subscribe(this._onSubmenuHide,_846,true);}},_subscribeToItemEvents:function(_847){_847.focusEvent.subscribe(this._onMenuItemFocus,_847,this);_847.blurEvent.subscribe(this._onMenuItemBlur,this,true);_847.cfg.configChangedEvent.subscribe(this._onMenuItemConfigChange,_847,this);},_getOffsetWidth:function(){var _848=this.element.cloneNode(true);Dom.setStyle(_848,"width","");document.body.appendChild(_848);var _849=_848.offsetWidth;document.body.removeChild(_848);return _849;},_cancelHideDelay:function(){var _84a=this.getRoot();if(_84a._nHideDelayId){window.clearTimeout(_84a._nHideDelayId);}},_execHideDelay:function(){this._cancelHideDelay();var _84b=this.getRoot(),me=this;function hideMenu(){if(_84b.activeItem){_84b.clearActiveItem();}if(_84b==me&&me.cfg.getProperty("position")=="dynamic"){me.hide();}}_84b._nHideDelayId=window.setTimeout(hideMenu,_84b.cfg.getProperty("hidedelay"));},_cancelShowDelay:function(){var _84c=this.getRoot();if(_84c._nShowDelayId){window.clearTimeout(_84c._nShowDelayId);}},_execShowDelay:function(_84d){var _84e=this.getRoot();function showMenu(){_84d.show();}_84e._nShowDelayId=window.setTimeout(showMenu,_84e.cfg.getProperty("showdelay"));},_onMouseOver:function(_84f,_850,_851){var _852=_850[0],oItem=_850[1],oTarget=Event.getTarget(_852);if(!this._bHandledMouseOverEvent&&(oTarget==this.element||Dom.isAncestor(this.element,oTarget))){this.clearActiveItem();this._bHandledMouseOverEvent=true;this._bHandledMouseOutEvent=false;}if(oItem&&!oItem.handledMouseOverEvent&&!oItem.cfg.getProperty("disabled")&&(oTarget==oItem.element||Dom.isAncestor(oItem.element,oTarget))){var _853=this.cfg.getProperty("showdelay"),bShowDelay=(_853>0);if(bShowDelay){this._cancelShowDelay();}var _854=this.activeItem;if(_854){_854.cfg.setProperty("selected",false);var _855=_854.cfg.getProperty("submenu");if(_855){_855.hide();}}var _856=oItem.cfg;_856.setProperty("selected",true);oItem.focus();if(this.cfg.getProperty("autosubmenudisplay")){var _857=_856.getProperty("submenu");if(_857){if(bShowDelay){this._execShowDelay(_857);}else{_857.show();}}}oItem.handledMouseOverEvent=true;oItem.handledMouseOutEvent=false;}},_onMouseOut:function(_858,_859,_85a){var _85b=_859[0],oItem=_859[1],oRelatedTarget=Event.getRelatedTarget(_85b),bMovingToSubmenu=false;if(oItem&&!oItem.cfg.getProperty("disabled")){var _85c=oItem.cfg,oSubmenu=_85c.getProperty("submenu");if(oSubmenu&&(oRelatedTarget==oSubmenu.element||Dom.isAncestor(oSubmenu.element,oRelatedTarget))){bMovingToSubmenu=true;}if(!oItem.handledMouseOutEvent&&((oRelatedTarget!=oItem.element&&!Dom.isAncestor(oItem.element,oRelatedTarget))||bMovingToSubmenu)){if(!oSubmenu||(oSubmenu&&!oSubmenu.cfg.getProperty("visible"))){oItem.cfg.setProperty("selected",false);if(oSubmenu&&oSubmenu.cfg.getProperty("showdelay")&&!oSubmenu.cfg.getProperty("visible")){this._cancelShowDelay();}}oItem.handledMouseOutEvent=true;oItem.handledMouseOverEvent=false;}}if(!this._bHandledMouseOutEvent&&((oRelatedTarget!=this.element&&!Dom.isAncestor(this.element,oRelatedTarget))||bMovingToSubmenu)){this._bHandledMouseOutEvent=true;this._bHandledMouseOverEvent=false;}},_onClick:function(_85d,_85e,_85f){var _860=_85e[0],oItem=_85e[1],oTarget=Event.getTarget(_860);if(oItem&&!oItem.cfg.getProperty("disabled")){var _861=oItem.cfg,oSubmenu=_861.getProperty("submenu");if(oTarget==oItem.submenuIndicator&&oSubmenu){if(oSubmenu.cfg.getProperty("visible")){oSubmenu.hide();}else{this.clearActiveItem();this.activeItem=oItem;oItem.cfg.setProperty("selected",true);oSubmenu.show();}}else{var sURL=_861.getProperty("url"),bCurrentPageURL=(sURL.substr((sURL.length-1),1)=="#"),sTarget=_861.getProperty("target"),bHasTarget=(sTarget&&sTarget.length>0);if(oTarget.tagName.toUpperCase()=="A"&&bCurrentPageURL&&!bHasTarget){Event.preventDefault(_860);}if(oTarget.tagName.toUpperCase()!="A"&&!bCurrentPageURL&&!bHasTarget){document.location=sURL;}if(bCurrentPageURL&&!oSubmenu){var _863=this.getRoot();if(_863.cfg.getProperty("position")=="static"){_863.clearActiveItem();}else{_863.hide();}}}}},_onKeyDown:function(_864,_865,_866){var _867=_865[0],oItem=_865[1],oSubmenu;if(oItem&&!oItem.cfg.getProperty("disabled")){var _868=oItem.cfg,oParentItem=this.parent,oRoot,oNextItem;switch(_867.keyCode){case 38:case 40:if(oItem==this.activeItem&&!_868.getProperty("selected")){_868.setProperty("selected",true);}else{oNextItem=(_867.keyCode==38)?oItem.getPreviousEnabledSibling():oItem.getNextEnabledSibling();if(oNextItem){this.clearActiveItem();oNextItem.cfg.setProperty("selected",true);oNextItem.focus();}}Event.preventDefault(_867);break;case 39:oSubmenu=_868.getProperty("submenu");if(oSubmenu){if(!_868.getProperty("selected")){_868.setProperty("selected",true);}oSubmenu.show();oSubmenu.setInitialSelection();}else{oRoot=this.getRoot();if(oRoot instanceof YAHOO.widget.MenuBar){oNextItem=oRoot.activeItem.getNextEnabledSibling();if(oNextItem){oRoot.clearActiveItem();oNextItem.cfg.setProperty("selected",true);oSubmenu=oNextItem.cfg.getProperty("submenu");if(oSubmenu){oSubmenu.show();}oNextItem.focus();}}}Event.preventDefault(_867);break;case 37:if(oParentItem){var _869=oParentItem.parent;if(_869 instanceof YAHOO.widget.MenuBar){oNextItem=_869.activeItem.getPreviousEnabledSibling();if(oNextItem){_869.clearActiveItem();oNextItem.cfg.setProperty("selected",true);oSubmenu=oNextItem.cfg.getProperty("submenu");if(oSubmenu){oSubmenu.show();}oNextItem.focus();}}else{this.hide();oParentItem.focus();}}Event.preventDefault(_867);break;}}if(_867.keyCode==27){if(this.cfg.getProperty("position")=="dynamic"){this.hide();if(this.parent){this.parent.focus();}}else{if(this.activeItem){oSubmenu=this.activeItem.cfg.getProperty("submenu");if(oSubmenu&&oSubmenu.cfg.getProperty("visible")){oSubmenu.hide();this.activeItem.focus();}else{this.activeItem.cfg.setProperty("selected",false);this.activeItem.blur();}}}Event.preventDefault(_867);}},_onTextResize:function(_86a,_86b,_86c){if(this.browser=="gecko"&&!this._handleResize){this._handleResize=true;return;}var _86d=this.cfg;if(_86d.getProperty("position")=="dynamic"){_86d.setProperty("width",(this._getOffsetWidth()+"px"));}},_onInit:function(_86e,_86f,_870){if(((this.parent&&!this.lazyLoad)||(!this.parent&&this.cfg.getProperty("position")=="static")||(!this.parent&&!this.lazyLoad&&this.cfg.getProperty("position")=="dynamic"))&&this.getItemGroups().length===0){if(this.srcElement){this._initSubTree();}if(this.itemData){this.addItems(this.itemData);}}else{if(this.lazyLoad){this.cfg.fireQueue();}}},_onBeforeRender:function(_871,_872,_873){var _874=this.cfg,oEl=this.element,nListElements=this._aListElements.length;if(nListElements>0){var i=0,bFirstList=true,oUL,oGroupTitle;do{oUL=this._aListElements[i];if(oUL){if(bFirstList){Dom.addClass(oUL,"first-of-type");bFirstList=false;}if(!Dom.isAncestor(oEl,oUL)){this.appendToBody(oUL);}oGroupTitle=this._aGroupTitleElements[i];if(oGroupTitle){if(!Dom.isAncestor(oEl,oGroupTitle)){oUL.parentNode.insertBefore(oGroupTitle,oUL);}Dom.addClass(oUL,"hastitle");}}i++;}while(i<nListElements);}},_onRender:function(_876,_877,_878){if(this.cfg.getProperty("position")=="dynamic"){var _879=this.element.parentNode.tagName.toUpperCase()=="BODY"?this.element.offsetWidth:this._getOffsetWidth();this.cfg.setProperty("width",(_879+"px"));}},_onBeforeShow:function(_87a,_87b,_87c){if(this.lazyLoad&&this.getItemGroups().length===0){if(this.srcElement){this._initSubTree();}if(this.itemData){if(this.parent&&this.parent.parent&&this.parent.parent.srcElement&&this.parent.parent.srcElement.tagName.toUpperCase()=="SELECT"){var _87d=this.itemData.length;for(var n=0;n<_87d;n++){if(this.itemData[n].tagName){this.addItem((new this.ITEM_TYPE(this.itemData[n])));}}}else{this.addItems(this.itemData);}}if(this.srcElement){this.render();}else{if(this.parent){this.render(this.parent.element);}else{this.render(this.cfg.getProperty("container"));}}}},_onShow:function(_87f,_880,_881){this.setInitialFocus();var _882=this.parent;if(_882){var _883=_882.parent,aParentAlignment=_883.cfg.getProperty("submenualignment"),aAlignment=this.cfg.getProperty("submenualignment");if((aParentAlignment[0]!=aAlignment[0])&&(aParentAlignment[1]!=aAlignment[1])){this.cfg.setProperty("submenualignment",[aParentAlignment[0],aParentAlignment[1]]);}if(!_883.cfg.getProperty("autosubmenudisplay")&&_883.cfg.getProperty("position")=="static"){_883.cfg.setProperty("autosubmenudisplay",true);function disableAutoSubmenuDisplay(_884){if(_884.type=="mousedown"||(_884.type=="keydown"&&_884.keyCode==27)){var _885=Event.getTarget(_884);if(_885!=_883.element||!YAHOO.util.Dom.isAncestor(_883.element,_885)){_883.cfg.setProperty("autosubmenudisplay",false);Event.removeListener(document,"mousedown",disableAutoSubmenuDisplay);Event.removeListener(document,"keydown",disableAutoSubmenuDisplay);}}}Event.addListener(document,"mousedown",disableAutoSubmenuDisplay);Event.addListener(document,"keydown",disableAutoSubmenuDisplay);}}},_onBeforeHide:function(_886,_887,_888){var _889=this.activeItem;if(_889){var _88a=_889.cfg;_88a.setProperty("selected",false);var _88b=_88a.getProperty("submenu");if(_88b){_88b.hide();}_889.blur();}},_onParentMenuConfigChange:function(_88c,_88d,_88e){var _88f=_88d[0][0],oPropertyValue=_88d[0][1];switch(_88f){case "iframe":case "constraintoviewport":case "hidedelay":case "showdelay":case "clicktohide":case "effect":_88e.cfg.setProperty(_88f,oPropertyValue);break;}},_onParentMenuRender:function(_890,_891,_892){var _893=_892.parent.parent,oConfig={constraintoviewport:_893.cfg.getProperty("constraintoviewport"),xy:[0,0],clicktohide:_893.cfg.getProperty("clicktohide"),effect:_893.cfg.getProperty("effect"),showdelay:_893.cfg.getProperty("showdelay"),hidedelay:_893.cfg.getProperty("hidedelay")};if(this.cfg.getProperty("position")==_893.cfg.getProperty("position")){oConfig.iframe=_893.cfg.getProperty("iframe");}_892.cfg.applyConfig(oConfig);if(!this.lazyLoad){if(Dom.inDocument(this.element)){this.render();}else{this.render(this.parent.element);}}},_onSubmenuBeforeShow:function(_894,_895,_896){var _897=this.parent,aAlignment=_897.parent.cfg.getProperty("submenualignment");this.cfg.setProperty("context",[_897.element,aAlignment[0],aAlignment[1]]);},_onSubmenuShow:function(_898,_899,_89a){var _89b=this.parent;_89b.submenuIndicator.alt=_89b.EXPANDED_SUBMENU_INDICATOR_ALT_TEXT;},_onSubmenuHide:function(_89c,_89d,_89e){var _89f=this.parent;_89f.submenuIndicator.alt=_89f.COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT;},_onMenuItemFocus:function(_8a0,_8a1,_8a2){this.activeItem=_8a2;},_onMenuItemBlur:function(_8a3,_8a4){this.activeItem=null;},_onMenuItemConfigChange:function(_8a5,_8a6,_8a7){var _8a8=_8a6[0][0];switch(_8a8){case "submenu":var _8a9=_8a6[0][1];if(_8a9){this._configureSubmenu(_8a7);}break;case "text":case "helptext":if(this.element.style.width){var _8aa=this._getOffsetWidth()+"px";Dom.setStyle(this.element,"width",_8aa);}break;}},enforceConstraints:function(type,args,obj){var _8ae=this.cfg,pos=args[0],x=pos[0],y=pos[1],offsetHeight=this.element.offsetHeight,offsetWidth=this.element.offsetWidth,viewPortWidth=YAHOO.util.Dom.getViewportWidth(),viewPortHeight=YAHOO.util.Dom.getViewportHeight(),scrollX=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),scrollY=Math.max(document.documentElement.scrollTop,document.body.scrollTop),topConstraint=scrollY+10,leftConstraint=scrollX+10,bottomConstraint=scrollY+viewPortHeight-offsetHeight-10,rightConstraint=scrollX+viewPortWidth-offsetWidth-10,aContext=_8ae.getProperty("context"),oContextElement=aContext?aContext[0]:null;if(x<10){x=leftConstraint;}else{if((x+offsetWidth)>viewPortWidth){if(oContextElement&&((x-oContextElement.offsetWidth)>offsetWidth)){x=(x-(oContextElement.offsetWidth+offsetWidth));}else{x=rightConstraint;}}}if(y<10){y=topConstraint;}else{if(y>bottomConstraint){if(oContextElement&&(y>offsetHeight)){y=((y+oContextElement.offsetHeight)-offsetHeight);}else{y=bottomConstraint;}}}_8ae.setProperty("x",x,true);_8ae.setProperty("y",y,true);_8ae.setProperty("xy",[x,y],true);},configVisible:function(_8af,_8b0,_8b1){if(this.cfg.getProperty("position")=="dynamic"){YAHOO.widget.Menu.superclass.configVisible.call(this,_8af,_8b0,_8b1);}else{var _8b2=_8b0[0],sDisplay=Dom.getStyle(this.element,"display");if(_8b2){if(sDisplay!="block"){this.beforeShowEvent.fire();Dom.setStyle(this.element,"display","block");this.showEvent.fire();}}else{if(sDisplay=="block"){this.beforeHideEvent.fire();Dom.setStyle(this.element,"display","none");this.hideEvent.fire();}}}},configPosition:function(_8b3,_8b4,_8b5){var _8b6=_8b4[0]=="static"?"static":"absolute",oCfg=this.cfg;Dom.setStyle(this.element,"position",_8b6);if(_8b6=="static"){oCfg.setProperty("iframe",false);Dom.setStyle(this.element,"display","block");oCfg.setProperty("visible",true);}else{Dom.setStyle(this.element,"visibility","hidden");}if(_8b6=="absolute"){var _8b7=oCfg.getProperty("zindex");if(!_8b7||_8b7===0){_8b7=this.parent?(this.parent.parent.cfg.getProperty("zindex")+1):1;oCfg.setProperty("zindex",_8b7);}}},configIframe:function(_8b8,_8b9,_8ba){if(this.cfg.getProperty("position")=="dynamic"){YAHOO.widget.Menu.superclass.configIframe.call(this,_8b8,_8b9,_8ba);}},configHideDelay:function(_8bb,_8bc,_8bd){var _8be=_8bc[0],oMouseOutEvent=this.mouseOutEvent,oMouseOverEvent=this.mouseOverEvent,oKeyDownEvent=this.keyDownEvent;if(_8be>0){if(!this._hideDelayEventHandlersAssigned){oMouseOutEvent.subscribe(this._execHideDelay,true);oMouseOverEvent.subscribe(this._cancelHideDelay,this,true);oKeyDownEvent.subscribe(this._cancelHideDelay,this,true);this._hideDelayEventHandlersAssigned=true;}}else{oMouseOutEvent.unsubscribe(this._execHideDelay,this);oMouseOverEvent.unsubscribe(this._cancelHideDelay,this);oKeyDownEvent.unsubscribe(this._cancelHideDelay,this);this._hideDelayEventHandlersAssigned=false;}},configContainer:function(_8bf,_8c0,_8c1){var _8c2=_8c0[0];if(typeof _8c2=="string"){this.cfg.setProperty("container",document.getElementById(_8c2),true);}},initEvents:function(){YAHOO.widget.Menu.superclass.initEvents.call(this);var _8c3=YAHOO.util.CustomEvent;this.mouseOverEvent=new _8c3("mouseOverEvent",this);this.mouseOutEvent=new _8c3("mouseOutEvent",this);this.mouseDownEvent=new _8c3("mouseDownEvent",this);this.mouseUpEvent=new _8c3("mouseUpEvent",this);this.clickEvent=new _8c3("clickEvent",this);this.keyPressEvent=new _8c3("keyPressEvent",this);this.keyDownEvent=new _8c3("keyDownEvent",this);this.keyUpEvent=new _8c3("keyUpEvent",this);this.itemAddedEvent=new _8c3("itemAddedEvent",this);this.itemRemovedEvent=new _8c3("itemRemovedEvent",this);},getRoot:function(){var _8c4=this.parent;if(_8c4){var _8c5=_8c4.parent;return _8c5?_8c5.getRoot():this;}else{return this;}},toString:function(){return ("Menu "+this.id);},setItemGroupTitle:function(_8c6,_8c7){if(typeof _8c6=="string"&&_8c6.length>0){var _8c8=typeof _8c7=="number"?_8c7:0,oTitle=this._aGroupTitleElements[_8c8];if(oTitle){oTitle.innerHTML=_8c6;}else{oTitle=document.createElement(this.GROUP_TITLE_TAG_NAME);oTitle.innerHTML=_8c6;this._aGroupTitleElements[_8c8]=oTitle;}var i=this._aGroupTitleElements.length-1,nFirstIndex;do{if(this._aGroupTitleElements[i]){Dom.removeClass(this._aGroupTitleElements[i],"first-of-type");nFirstIndex=i;}}while(i--);if(nFirstIndex!==null){Dom.addClass(this._aGroupTitleElements[nFirstIndex],"first-of-type");}}},addItem:function(_8ca,_8cb){if(_8ca){return this._addItemToGroup(_8cb,_8ca);}},addItems:function(_8cc,_8cd){function isArray(_8ce){return (typeof _8ce=="object"&&_8ce.constructor==Array);}if(isArray(_8cc)){var _8cf=_8cc.length,aItems=[],oItem;for(var i=0;i<_8cf;i++){oItem=_8cc[i];if(isArray(oItem)){aItems[aItems.length]=this.addItems(oItem,i);}else{aItems[aItems.length]=this._addItemToGroup(_8cd,oItem);}}if(aItems.length){return aItems;}}},insertItem:function(_8d1,_8d2,_8d3){if(_8d1){return this._addItemToGroup(_8d3,_8d1,_8d2);}},removeItem:function(_8d4,_8d5){if(typeof _8d4!="undefined"){var _8d6;if(_8d4 instanceof YAHOO.widget.MenuItem){_8d6=this._removeItemFromGroupByValue(_8d5,_8d4);}else{if(typeof _8d4=="number"){_8d6=this._removeItemFromGroupByIndex(_8d5,_8d4);}}if(_8d6){_8d6.destroy();return _8d6;}}},getItemGroups:function(){return this._aItemGroups;},getItem:function(_8d7,_8d8){if(typeof _8d7=="number"){var _8d9=this._getItemGroup(_8d8);if(_8d9){return _8d9[_8d7];}}},destroy:function(){this.mouseOverEvent.unsubscribeAll();this.mouseOutEvent.unsubscribeAll();this.mouseDownEvent.unsubscribeAll();this.mouseUpEvent.unsubscribeAll();this.clickEvent.unsubscribeAll();this.keyPressEvent.unsubscribeAll();this.keyDownEvent.unsubscribeAll();this.keyUpEvent.unsubscribeAll();this.itemAddedEvent.unsubscribeAll();this.itemRemovedEvent.unsubscribeAll();var _8da=this._aItemGroups.length,nItems,oItemGroup,oItem,i,n;if(_8da>0){i=_8da-1;do{oItemGroup=this._aItemGroups[i];if(oItemGroup){nItems=oItemGroup.length;if(nItems>0){n=nItems-1;do{oItem=this._aItemGroups[i][n];if(oItem){oItem.destroy();}}while(n--);}}}while(i--);}YAHOO.widget.Menu.superclass.destroy.call(this);},setInitialFocus:function(){var _8db=this._getFirstEnabledItem();if(_8db){_8db.focus();}},setInitialSelection:function(){var _8dc=this._getFirstEnabledItem();if(_8dc){_8dc.cfg.setProperty("selected",true);}},clearActiveItem:function(_8dd){if(this.cfg.getProperty("showdelay")>0){this._cancelShowDelay();}var _8de=this.activeItem;if(_8de){var _8df=_8de.cfg;_8df.setProperty("selected",false);var _8e0=_8df.getProperty("submenu");if(_8e0){_8e0.hide();}if(_8dd){_8de.blur();}}},initDefaultConfig:function(){YAHOO.widget.Menu.superclass.initDefaultConfig.call(this);var _8e1=this.cfg;_8e1.addProperty("visible",{value:false,handler:this.configVisible,validator:this.cfg.checkBoolean});_8e1.addProperty("constraintoviewport",{value:true,handler:this.configConstrainToViewport,validator:this.cfg.checkBoolean,supercedes:["iframe","x","y","xy"]});_8e1.addProperty("position",{value:"dynamic",handler:this.configPosition,validator:this._checkPosition,supercedes:["visible"]});_8e1.addProperty("submenualignment",{value:["tl","tr"]});_8e1.addProperty("autosubmenudisplay",{value:true,validator:_8e1.checkBoolean});_8e1.addProperty("showdelay",{value:0,validator:_8e1.checkNumber});_8e1.addProperty("hidedelay",{value:0,validator:_8e1.checkNumber,handler:this.configHideDelay,suppressEvent:true});_8e1.addProperty("clicktohide",{value:true,validator:_8e1.checkBoolean});this.cfg.addProperty("container",{value:document.body,handler:this.configContainer});}});})();YAHOO.widget.MenuModule=YAHOO.widget.Menu;(function(){var Dom=YAHOO.util.Dom,Module=YAHOO.widget.Module,Menu=YAHOO.widget.Menu;YAHOO.widget.MenuItem=function(_8e3,_8e4){if(_8e3){if(_8e4){this.parent=_8e4.parent;this.value=_8e4.value;}this.init(_8e3,_8e4);}};YAHOO.widget.MenuItem.prototype={SUBMENU_INDICATOR_IMAGE_PATH:"nt/ic/ut/alt1/menuarorght8_nrm_1.gif",SELECTED_SUBMENU_INDICATOR_IMAGE_PATH:"nt/ic/ut/alt1/menuarorght8_hov_1.gif",DISABLED_SUBMENU_INDICATOR_IMAGE_PATH:"nt/ic/ut/alt1/menuarorght8_dim_1.gif",COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT:"Collapsed.  Click to expand.",EXPANDED_SUBMENU_INDICATOR_ALT_TEXT:"Expanded.  Click to collapse.",DISABLED_SUBMENU_INDICATOR_ALT_TEXT:"Disabled.",CHECKED_IMAGE_PATH:"nt/ic/ut/bsc/menuchk8_nrm_1.gif",SELECTED_CHECKED_IMAGE_PATH:"nt/ic/ut/bsc/menuchk8_hov_1.gif",DISABLED_CHECKED_IMAGE_PATH:"nt/ic/ut/bsc/menuchk8_dim_1.gif",CHECKED_IMAGE_ALT_TEXT:"Checked.",DISABLED_CHECKED_IMAGE_ALT_TEXT:"Checked. (Item disabled.)",CSS_CLASS_NAME:"yuimenuitem",SUBMENU_TYPE:null,IMG_ROOT:"http://us.i1.yimg.com/us.yimg.com/i/",IMG_ROOT_SSL:"https://a248.e.akamai.net/sec.yimg.com/i/",_oAnchor:null,_oText:null,_oHelpTextEM:null,_oSubmenu:null,_checkImage:null,constructor:YAHOO.widget.MenuItem,imageRoot:null,isSecure:Module.prototype.isSecure,index:null,groupIndex:null,parent:null,element:null,srcElement:null,value:null,submenuIndicator:null,browser:Module.prototype.browser,destroyEvent:null,mouseOverEvent:null,mouseOutEvent:null,mouseDownEvent:null,mouseUpEvent:null,clickEvent:null,keyPressEvent:null,keyDownEvent:null,keyUpEvent:null,focusEvent:null,blurEvent:null,init:function(_8e5,_8e6){this.imageRoot=(this.isSecure)?this.IMG_ROOT_SSL:this.IMG_ROOT;if(!this.SUBMENU_TYPE){this.SUBMENU_TYPE=Menu;}this.cfg=new YAHOO.util.Config(this);this.initDefaultConfig();var _8e7=this.cfg;if(this._checkString(_8e5)){this._createRootNodeStructure();_8e7.setProperty("text",_8e5);}else{if(this._checkDOMNode(_8e5)){switch(_8e5.tagName.toUpperCase()){case "OPTION":this._createRootNodeStructure();_8e7.setProperty("text",_8e5.text);this.srcElement=_8e5;break;case "OPTGROUP":this._createRootNodeStructure();_8e7.setProperty("text",_8e5.label);this.srcElement=_8e5;this._initSubTree();break;case "LI":var _8e8=this._getFirstElement(_8e5,"A"),sURL="#",sTarget,sText;if(_8e8){sURL=_8e8.getAttribute("href");sTarget=_8e8.getAttribute("target");if(_8e8.innerText){sText=_8e8.innerText;}else{var _8e9=_8e8.ownerDocument.createRange();_8e9.selectNodeContents(_8e8);sText=_8e9.toString();}}else{var _8ea=_8e5.firstChild;sText=_8ea.nodeValue;_8e8=document.createElement("a");_8e8.setAttribute("href",sURL);_8e5.replaceChild(_8e8,_8ea);_8e8.appendChild(_8ea);}this.srcElement=_8e5;this.element=_8e5;this._oAnchor=_8e8;var _8eb=this._getFirstElement(_8e8),bEmphasis=false,bStrongEmphasis=false;if(_8eb){this._oText=_8eb.firstChild;switch(_8eb.tagName.toUpperCase()){case "EM":bEmphasis=true;break;case "STRONG":bStrongEmphasis=true;break;}}else{this._oText=_8e8.firstChild;}_8e7.setProperty("text",sText,true);_8e7.setProperty("url",sURL,true);_8e7.setProperty("target",sTarget,true);_8e7.setProperty("emphasis",bEmphasis,true);_8e7.setProperty("strongemphasis",bStrongEmphasis,true);this._initSubTree();break;}}}if(this.element){Dom.addClass(this.element,this.CSS_CLASS_NAME);var _8ec=YAHOO.util.CustomEvent;this.destroyEvent=new _8ec("destroyEvent",this);this.mouseOverEvent=new _8ec("mouseOverEvent",this);this.mouseOutEvent=new _8ec("mouseOutEvent",this);this.mouseDownEvent=new _8ec("mouseDownEvent",this);this.mouseUpEvent=new _8ec("mouseUpEvent",this);this.clickEvent=new _8ec("clickEvent",this);this.keyPressEvent=new _8ec("keyPressEvent",this);this.keyDownEvent=new _8ec("keyDownEvent",this);this.keyUpEvent=new _8ec("keyUpEvent",this);this.focusEvent=new _8ec("focusEvent",this);this.blurEvent=new _8ec("blurEvent",this);if(_8e6){_8e7.applyConfig(_8e6);}_8e7.fireQueue();}},_getFirstElement:function(_8ed,_8ee){var _8ef;if(_8ed.firstChild&&_8ed.firstChild.nodeType==1){_8ef=_8ed.firstChild;}else{if(_8ed.firstChild&&_8ed.firstChild.nextSibling&&_8ed.firstChild.nextSibling.nodeType==1){_8ef=_8ed.firstChild.nextSibling;}}if(_8ee){return (_8ef&&_8ef.tagName.toUpperCase()==_8ee)?_8ef:false;}return _8ef;},_checkString:function(_8f0){return (typeof _8f0=="string");},_checkDOMNode:function(_8f1){return (_8f1&&_8f1.tagName);},_createRootNodeStructure:function(){this.element=document.createElement("li");this._oText=document.createTextNode("");this._oAnchor=document.createElement("a");this._oAnchor.appendChild(this._oText);this.cfg.refireEvent("url");this.element.appendChild(this._oAnchor);},_initSubTree:function(){var _8f2=this.srcElement,oConfig=this.cfg;if(_8f2.childNodes.length>0){if(this.parent.lazyLoad&&this.parent.srcElement&&this.parent.srcElement.tagName.toUpperCase()=="SELECT"){oConfig.setProperty("submenu",{id:Dom.generateId(),itemdata:_8f2.childNodes});}else{var _8f3=_8f2.firstChild,aOptions=[];do{if(_8f3&&_8f3.tagName){switch(_8f3.tagName.toUpperCase()){case "DIV":oConfig.setProperty("submenu",_8f3);break;case "OPTION":aOptions[aOptions.length]=_8f3;break;}}}while((_8f3=_8f3.nextSibling));var _8f4=aOptions.length;if(_8f4>0){var _8f5=new this.SUBMENU_TYPE(Dom.generateId());oConfig.setProperty("submenu",_8f5);for(var n=0;n<_8f4;n++){_8f5.addItem((new _8f5.ITEM_TYPE(aOptions[n])));}}}}},_preloadImage:function(_8f7){var _8f8=this.imageRoot+_8f7;if(!document.images[_8f8]){var _8f9=document.createElement("img");_8f9.src=_8f8;_8f9.name=_8f8;_8f9.id=_8f8;_8f9.style.display="none";document.body.appendChild(_8f9);}},configText:function(_8fa,_8fb,_8fc){var _8fd=_8fb[0];if(this._oText){this._oText.nodeValue=_8fd;}},configHelpText:function(_8fe,_8ff,_900){var me=this,oHelpText=_8ff[0],oEl=this.element,oConfig=this.cfg,aNodes=[oEl,this._oAnchor],oImg=this.submenuIndicator;function initHelpText(){Dom.addClass(aNodes,"hashelptext");if(oConfig.getProperty("disabled")){oConfig.refireEvent("disabled");}if(oConfig.getProperty("selected")){oConfig.refireEvent("selected");}}function removeHelpText(){Dom.removeClass(aNodes,"hashelptext");oEl.removeChild(me._oHelpTextEM);me._oHelpTextEM=null;}if(this._checkDOMNode(oHelpText)){if(this._oHelpTextEM){this._oHelpTextEM.parentNode.replaceChild(oHelpText,this._oHelpTextEM);}else{this._oHelpTextEM=oHelpText;oEl.insertBefore(this._oHelpTextEM,oImg);}initHelpText();}else{if(this._checkString(oHelpText)){if(oHelpText.length===0){removeHelpText();}else{if(!this._oHelpTextEM){this._oHelpTextEM=document.createElement("em");oEl.insertBefore(this._oHelpTextEM,oImg);}this._oHelpTextEM.innerHTML=oHelpText;initHelpText();}}else{if(!oHelpText&&this._oHelpTextEM){removeHelpText();}}}},configURL:function(_902,_903,_904){var sURL=_903[0];if(!sURL){sURL="#";}this._oAnchor.setAttribute("href",sURL);},configTarget:function(_906,_907,_908){var _909=_907[0],oAnchor=this._oAnchor;if(_909&&_909.length>0){oAnchor.setAttribute("target",_909);}else{oAnchor.removeAttribute("target");}},configEmphasis:function(_90a,_90b,_90c){var _90d=_90b[0],oAnchor=this._oAnchor,oText=this._oText,oConfig=this.cfg,oEM;if(_90d&&oConfig.getProperty("strongemphasis")){oConfig.setProperty("strongemphasis",false);}if(oAnchor){if(_90d){oEM=document.createElement("em");oEM.appendChild(oText);oAnchor.appendChild(oEM);}else{oEM=this._getFirstElement(oAnchor,"EM");if(oEM){oAnchor.removeChild(oEM);oAnchor.appendChild(oText);}}}},configStrongEmphasis:function(_90e,_90f,_910){var _911=_90f[0],oAnchor=this._oAnchor,oText=this._oText,oConfig=this.cfg,oStrong;if(_911&&oConfig.getProperty("emphasis")){oConfig.setProperty("emphasis",false);}if(oAnchor){if(_911){oStrong=document.createElement("strong");oStrong.appendChild(oText);oAnchor.appendChild(oStrong);}else{oStrong=this._getFirstElement(oAnchor,"STRONG");if(oStrong){oAnchor.removeChild(oStrong);oAnchor.appendChild(oText);}}}},configChecked:function(_912,_913,_914){var _915=_913[0],oEl=this.element,oConfig=this.cfg,oImg;if(_915){this._preloadImage(this.CHECKED_IMAGE_PATH);this._preloadImage(this.SELECTED_CHECKED_IMAGE_PATH);this._preloadImage(this.DISABLED_CHECKED_IMAGE_PATH);oImg=document.createElement("img");oImg.src=(this.imageRoot+this.CHECKED_IMAGE_PATH);oImg.alt=this.CHECKED_IMAGE_ALT_TEXT;var _916=this.cfg.getProperty("submenu");if(_916){oEl.insertBefore(oImg,_916.element);}else{oEl.appendChild(oImg);}Dom.addClass([oEl,oImg],"checked");this._checkImage=oImg;if(oConfig.getProperty("disabled")){oConfig.refireEvent("disabled");}if(oConfig.getProperty("selected")){oConfig.refireEvent("selected");}}else{oImg=this._checkImage;Dom.removeClass([oEl,oImg],"checked");if(oImg){oEl.removeChild(oImg);}this._checkImage=null;}},configDisabled:function(_917,_918,_919){var _91a=_918[0],oAnchor=this._oAnchor,aNodes=[this.element,oAnchor],oEM=this._oHelpTextEM,oConfig=this.cfg,oImg,sImgSrc,sImgAlt;if(oEM){aNodes[2]=oEM;}if(this.cfg.getProperty("checked")){sImgAlt=this.CHECKED_IMAGE_ALT_TEXT;sImgSrc=this.CHECKED_IMAGE_PATH;oImg=this._checkImage;if(_91a){sImgAlt=this.DISABLED_CHECKED_IMAGE_ALT_TEXT;sImgSrc=this.DISABLED_CHECKED_IMAGE_PATH;}oImg.src=document.images[(this.imageRoot+sImgSrc)].src;oImg.alt=sImgAlt;}oImg=this.submenuIndicator;if(_91a){if(oConfig.getProperty("selected")){oConfig.setProperty("selected",false);}oAnchor.removeAttribute("href");Dom.addClass(aNodes,"disabled");sImgSrc=this.DISABLED_SUBMENU_INDICATOR_IMAGE_PATH;sImgAlt=this.DISABLED_SUBMENU_INDICATOR_ALT_TEXT;}else{oAnchor.setAttribute("href",oConfig.getProperty("url"));Dom.removeClass(aNodes,"disabled");sImgSrc=this.SUBMENU_INDICATOR_IMAGE_PATH;sImgAlt=this.COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT;}if(oImg){oImg.src=this.imageRoot+sImgSrc;oImg.alt=sImgAlt;}},configSelected:function(_91b,_91c,_91d){if(!this.cfg.getProperty("disabled")){var _91e=_91c[0],oEM=this._oHelpTextEM,aNodes=[this.element,this._oAnchor],oImg=this.submenuIndicator,sImgSrc;if(oEM){aNodes[aNodes.length]=oEM;}if(oImg){aNodes[aNodes.length]=oImg;}if(this.cfg.getProperty("checked")){sImgSrc=this.imageRoot+(_91e?this.SELECTED_CHECKED_IMAGE_PATH:this.CHECKED_IMAGE_PATH);this._checkImage.src=document.images[sImgSrc].src;}if(_91e){Dom.addClass(aNodes,"selected");sImgSrc=this.SELECTED_SUBMENU_INDICATOR_IMAGE_PATH;}else{Dom.removeClass(aNodes,"selected");sImgSrc=this.SUBMENU_INDICATOR_IMAGE_PATH;}if(oImg){oImg.src=document.images[(this.imageRoot+sImgSrc)].src;}}},configSubmenu:function(_91f,_920,_921){var oEl=this.element,oSubmenu=_920[0],oImg=this.submenuIndicator,oConfig=this.cfg,aNodes=[this.element,this._oAnchor],oMenu,bLazyLoad=this.parent&&this.parent.lazyLoad;if(oSubmenu){if(oSubmenu instanceof Menu){oMenu=oSubmenu;oMenu.parent=this;oMenu.lazyLoad=bLazyLoad;}else{if(typeof oSubmenu=="object"&&oSubmenu.id&&!oSubmenu.nodeType){var _923=oSubmenu.id,oSubmenuConfig=oSubmenu;oSubmenuConfig.lazyload=bLazyLoad;oSubmenuConfig.parent=this;oMenu=new this.SUBMENU_TYPE(_923,oSubmenuConfig);this.cfg.setProperty("submenu",oMenu,true);}else{oMenu=new this.SUBMENU_TYPE(oSubmenu,{lazyload:bLazyLoad,parent:this});this.cfg.setProperty("submenu",oMenu,true);}}if(oMenu){this._oSubmenu=oMenu;if(!oImg){this._preloadImage(this.SUBMENU_INDICATOR_IMAGE_PATH);this._preloadImage(this.SELECTED_SUBMENU_INDICATOR_IMAGE_PATH);this._preloadImage(this.DISABLED_SUBMENU_INDICATOR_IMAGE_PATH);oImg=document.createElement("img");oImg.src=(this.imageRoot+this.SUBMENU_INDICATOR_IMAGE_PATH);oImg.alt=this.COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT;oEl.appendChild(oImg);this.submenuIndicator=oImg;Dom.addClass(aNodes,"hassubmenu");if(oConfig.getProperty("disabled")){oConfig.refireEvent("disabled");}if(oConfig.getProperty("selected")){oConfig.refireEvent("selected");}}}}else{Dom.removeClass(aNodes,"hassubmenu");if(oImg){oEl.removeChild(oImg);}if(this._oSubmenu){this._oSubmenu.destroy();}}},initDefaultConfig:function(){var _924=this.cfg,CheckBoolean=_924.checkBoolean;_924.addProperty("text",{value:"",handler:this.configText,validator:this._checkString,suppressEvent:true});_924.addProperty("helptext",{handler:this.configHelpText});_924.addProperty("url",{value:"#",handler:this.configURL,suppressEvent:true});_924.addProperty("target",{handler:this.configTarget,suppressEvent:true});_924.addProperty("emphasis",{value:false,handler:this.configEmphasis,validator:CheckBoolean,suppressEvent:true});_924.addProperty("strongemphasis",{value:false,handler:this.configStrongEmphasis,validator:CheckBoolean,suppressEvent:true});_924.addProperty("checked",{value:false,handler:this.configChecked,validator:this.cfg.checkBoolean,suppressEvent:true,supercedes:["disabled"]});_924.addProperty("disabled",{value:false,handler:this.configDisabled,validator:CheckBoolean,suppressEvent:true});_924.addProperty("selected",{value:false,handler:this.configSelected,validator:CheckBoolean,suppressEvent:true});_924.addProperty("submenu",{handler:this.configSubmenu});},getNextEnabledSibling:function(){if(this.parent instanceof Menu){var _925=this.groupIndex;function getNextArrayItem(_926,_927){return _926[_927]||getNextArrayItem(_926,(_927+1));}var _928=this.parent.getItemGroups(),oNextItem;if(this.index<(_928[_925].length-1)){oNextItem=getNextArrayItem(_928[_925],(this.index+1));}else{var _929;if(_925<(_928.length-1)){_929=_925+1;}else{_929=0;}var _92a=getNextArrayItem(_928,_929);oNextItem=getNextArrayItem(_92a,0);}return (oNextItem.cfg.getProperty("disabled")||oNextItem.element.style.display=="none")?oNextItem.getNextEnabledSibling():oNextItem;}},getPreviousEnabledSibling:function(){if(this.parent instanceof Menu){var _92b=this.groupIndex;function getPreviousArrayItem(_92c,_92d){return _92c[_92d]||getPreviousArrayItem(_92c,(_92d-1));}function getFirstItemIndex(_92e,_92f){return _92e[_92f]?_92f:getFirstItemIndex(_92e,(_92f+1));}var _930=this.parent.getItemGroups(),oPreviousItem;if(this.index>getFirstItemIndex(_930[_92b],0)){oPreviousItem=getPreviousArrayItem(_930[_92b],(this.index-1));}else{var _931;if(_92b>getFirstItemIndex(_930,0)){_931=_92b-1;}else{_931=_930.length-1;}var _932=getPreviousArrayItem(_930,_931);oPreviousItem=getPreviousArrayItem(_932,(_932.length-1));}return (oPreviousItem.cfg.getProperty("disabled")||oPreviousItem.element.style.display=="none")?oPreviousItem.getPreviousEnabledSibling():oPreviousItem;}},focus:function(){var _933=this.parent,oAnchor=this._oAnchor,oActiveItem=_933.activeItem;function setFocus(){try{oAnchor.focus();}catch(e){}}if(!this.cfg.getProperty("disabled")&&_933&&_933.cfg.getProperty("visible")&&this.element.style.display!="none"){if(oActiveItem){oActiveItem.blur();}window.setTimeout(setFocus,0);this.focusEvent.fire();}},blur:function(){var _934=this.parent;if(!this.cfg.getProperty("disabled")&&_934&&Dom.getStyle(_934.element,"visibility")=="visible"){this._oAnchor.blur();this.blurEvent.fire();}},destroy:function(){var oEl=this.element;if(oEl){var _936=this.cfg.getProperty("submenu");if(_936){_936.destroy();}this.mouseOverEvent.unsubscribeAll();this.mouseOutEvent.unsubscribeAll();this.mouseDownEvent.unsubscribeAll();this.mouseUpEvent.unsubscribeAll();this.clickEvent.unsubscribeAll();this.keyPressEvent.unsubscribeAll();this.keyDownEvent.unsubscribeAll();this.keyUpEvent.unsubscribeAll();this.focusEvent.unsubscribeAll();this.blurEvent.unsubscribeAll();this.cfg.configChangedEvent.unsubscribeAll();var _937=oEl.parentNode;if(_937){_937.removeChild(oEl);this.destroyEvent.fire();}this.destroyEvent.unsubscribeAll();}},toString:function(){return ("MenuItem: "+this.cfg.getProperty("text"));}};})();YAHOO.widget.MenuModuleItem=YAHOO.widget.MenuItem;YAHOO.widget.ContextMenu=function(_938,_939){YAHOO.widget.ContextMenu.superclass.constructor.call(this,_938,_939);};YAHOO.extend(YAHOO.widget.ContextMenu,YAHOO.widget.Menu,{_oTrigger:null,contextEventTarget:null,init:function(_93a,_93b){if(!this.ITEM_TYPE){this.ITEM_TYPE=YAHOO.widget.ContextMenuItem;}YAHOO.widget.ContextMenu.superclass.init.call(this,_93a);this.beforeInitEvent.fire(YAHOO.widget.ContextMenu);if(_93b){this.cfg.applyConfig(_93b,true);}this.initEvent.fire(YAHOO.widget.ContextMenu);},_removeEventHandlers:function(){var _93c=YAHOO.util.Event,oTrigger=this._oTrigger,bOpera=(this.browser=="opera");_93c.removeListener(oTrigger,(bOpera?"mousedown":"contextmenu"),this._onTriggerContextMenu);if(bOpera){_93c.removeListener(oTrigger,"click",this._onTriggerClick);}},_onTriggerClick:function(_93d,_93e){if(_93d.ctrlKey){YAHOO.util.Event.stopEvent(_93d);}},_onTriggerContextMenu:function(_93f,_940){YAHOO.widget.MenuManager.hideVisible();var _941=YAHOO.util.Event,oConfig=this.cfg;if(_93f.type=="mousedown"&&!_93f.ctrlKey){return;}this.contextEventTarget=_941.getTarget(_93f);var nX=_941.getPageX(_93f),nY=_941.getPageY(_93f);oConfig.applyConfig({xy:[nX,nY],visible:true});oConfig.fireQueue();_941.stopEvent(_93f);},toString:function(){return ("ContextMenu "+this.id);},initDefaultConfig:function(){YAHOO.widget.ContextMenu.superclass.initDefaultConfig.call(this);this.cfg.addProperty("trigger",{handler:this.configTrigger});},destroy:function(){this._removeEventHandlers();YAHOO.widget.ContextMenu.superclass.destroy.call(this);},configTrigger:function(_943,_944,_945){var _946=YAHOO.util.Event,oTrigger=_944[0];if(oTrigger){if(this._oTrigger){this._removeEventHandlers();}this._oTrigger=oTrigger;var _947=(this.browser=="opera");_946.addListener(oTrigger,(_947?"mousedown":"contextmenu"),this._onTriggerContextMenu,this,true);if(_947){_946.addListener(oTrigger,"click",this._onTriggerClick,this,true);}}else{this._removeEventHandlers();}}});YAHOO.widget.ContextMenuItem=function(_948,_949){YAHOO.widget.ContextMenuItem.superclass.constructor.call(this,_948,_949);};YAHOO.extend(YAHOO.widget.ContextMenuItem,YAHOO.widget.MenuItem,{init:function(_94a,_94b){if(!this.SUBMENU_TYPE){this.SUBMENU_TYPE=YAHOO.widget.ContextMenu;}YAHOO.widget.ContextMenuItem.superclass.init.call(this,_94a);var _94c=this.cfg;if(_94b){_94c.applyConfig(_94b,true);}_94c.fireQueue();},toString:function(){return ("MenuBarItem: "+this.cfg.getProperty("text"));}});YAHOO.widget.MenuBar=function(_94d,_94e){YAHOO.widget.MenuBar.superclass.constructor.call(this,_94d,_94e);};YAHOO.extend(YAHOO.widget.MenuBar,YAHOO.widget.Menu,{init:function(_94f,_950){if(!this.ITEM_TYPE){this.ITEM_TYPE=YAHOO.widget.MenuBarItem;}YAHOO.widget.MenuBar.superclass.init.call(this,_94f);this.beforeInitEvent.fire(YAHOO.widget.MenuBar);if(_950){this.cfg.applyConfig(_950,true);}this.initEvent.fire(YAHOO.widget.MenuBar);},CSS_CLASS_NAME:"yuimenubar",_onKeyDown:function(_951,_952,_953){var _954=YAHOO.util.Event,oEvent=_952[0],oItem=_952[1],oSubmenu;if(oItem&&!oItem.cfg.getProperty("disabled")){var _955=oItem.cfg;switch(oEvent.keyCode){case 37:case 39:if(oItem==this.activeItem&&!_955.getProperty("selected")){_955.setProperty("selected",true);}else{var _956=(oEvent.keyCode==37)?oItem.getPreviousEnabledSibling():oItem.getNextEnabledSibling();if(_956){this.clearActiveItem();_956.cfg.setProperty("selected",true);if(this.cfg.getProperty("autosubmenudisplay")){oSubmenu=_956.cfg.getProperty("submenu");if(oSubmenu){oSubmenu.show();oSubmenu.activeItem.blur();oSubmenu.activeItem=null;}}_956.focus();}}_954.preventDefault(oEvent);break;case 40:if(this.activeItem!=oItem){this.clearActiveItem();_955.setProperty("selected",true);oItem.focus();}oSubmenu=_955.getProperty("submenu");if(oSubmenu){if(oSubmenu.cfg.getProperty("visible")){oSubmenu.setInitialSelection();oSubmenu.setInitialFocus();}else{oSubmenu.show();}}_954.preventDefault(oEvent);break;}}if(oEvent.keyCode==27&&this.activeItem){oSubmenu=this.activeItem.cfg.getProperty("submenu");if(oSubmenu&&oSubmenu.cfg.getProperty("visible")){oSubmenu.hide();this.activeItem.focus();}else{this.activeItem.cfg.setProperty("selected",false);this.activeItem.blur();}_954.preventDefault(oEvent);}},_onClick:function(_957,_958,_959){YAHOO.widget.MenuBar.superclass._onClick.call(this,_957,_958,_959);var _95a=_958[1];if(_95a&&!_95a.cfg.getProperty("disabled")){var _95b=YAHOO.util.Event,Dom=YAHOO.util.Dom,oEvent=_958[0],oTarget=_95b.getTarget(oEvent),oActiveItem=this.activeItem,oConfig=this.cfg;if(oActiveItem&&oActiveItem!=_95a){this.clearActiveItem();}_95a.cfg.setProperty("selected",true);_95a.focus();var _95c=_95a.cfg.getProperty("submenu");if(_95c&&oTarget!=_95a.submenuIndicator){if(_95c.cfg.getProperty("visible")){_95c.hide();}else{_95c.show();}}}},toString:function(){return ("MenuBar "+this.id);},initDefaultConfig:function(){YAHOO.widget.MenuBar.superclass.initDefaultConfig.call(this);var _95d=this.cfg;_95d.addProperty("position",{value:"static",handler:this.configPosition,validator:this._checkPosition,supercedes:["visible"]});_95d.addProperty("submenualignment",{value:["tl","bl"]});_95d.addProperty("autosubmenudisplay",{value:false,validator:_95d.checkBoolean});}});YAHOO.widget.MenuBarItem=function(_95e,_95f){YAHOO.widget.MenuBarItem.superclass.constructor.call(this,_95e,_95f);};YAHOO.extend(YAHOO.widget.MenuBarItem,YAHOO.widget.MenuItem,{init:function(_960,_961){if(!this.SUBMENU_TYPE){this.SUBMENU_TYPE=YAHOO.widget.Menu;}YAHOO.widget.MenuBarItem.superclass.init.call(this,_960);var _962=this.cfg;if(_961){_962.applyConfig(_961,true);}_962.fireQueue();},CSS_CLASS_NAME:"yuimenubaritem",SUBMENU_INDICATOR_IMAGE_PATH:"nt/ic/ut/alt1/menuarodwn8_nrm_1.gif",SELECTED_SUBMENU_INDICATOR_IMAGE_PATH:"nt/ic/ut/alt1/menuarodwn8_hov_1.gif",DISABLED_SUBMENU_INDICATOR_IMAGE_PATH:"nt/ic/ut/alt1/menuarodwn8_dim_1.gif",toString:function(){return ("MenuBarItem: "+this.cfg.getProperty("text"));}});(function(){var _963=YAHOO.util.Event;var Dom=YAHOO.util.Dom;YAHOO.util.DragDrop=function(id,_966,_967){if(id){this.init(id,_966,_967);}};YAHOO.util.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,b4StartDrag:function(x,y){},startDrag:function(x,y){},b4Drag:function(e){},onDrag:function(e){},onDragEnter:function(e,id){},b4DragOver:function(e){},onDragOver:function(e,id){},b4DragOut:function(e){},onDragOut:function(e,id){},b4DragDrop:function(e){},onDragDrop:function(e,id){},onInvalidDrop:function(e){},b4EndDrag:function(e){},endDrag:function(e){},b4MouseDown:function(e){},onMouseDown:function(e){},onMouseUp:function(e){},onAvailable:function(){},getEl:function(){if(!this._domRef){this._domRef=Dom.get(this.id);}return this._domRef;},getDragEl:function(){return Dom.get(this.dragElId);},init:function(id,_980,_981){this.initTarget(id,_980,_981);_963.on(this.id,"mousedown",this.handleMouseDown,this,true);},initTarget:function(id,_983,_984){this.config=_984||{};this.DDM=YAHOO.util.DDM;this.groups={};if(typeof id!=="string"){YAHOO.log("id is not a string, assuming it is an HTMLElement");id=Dom.generateId(id);}this.id=id;this.addToGroup((_983)?_983:"default");this.handleElId=id;_963.onAvailable(id,this.handleOnAvailable,this,true);this.setDragElId(id);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false);},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable();},setPadding:function(iTop,_986,iBot,_988){if(!_986&&0!==_986){this.padding=[iTop,iTop,iTop,iTop];}else{if(!iBot&&0!==iBot){this.padding=[iTop,_986,iTop,_986];}else{this.padding=[iTop,_986,iBot,_988];}}},setInitPosition:function(_989,_98a){var el=this.getEl();if(!this.DDM.verifyEl(el)){return;}var dx=_989||0;var dy=_98a||0;var p=Dom.getXY(el);this.initPageX=p[0]-dx;this.initPageY=p[1]-dy;this.lastPageX=p[0];this.lastPageY=p[1];this.setStartPosition(p);},setStartPosition:function(pos){var p=pos||Dom.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=p[0];this.startPageY=p[1];},addToGroup:function(_991){this.groups[_991]=true;this.DDM.regDragDrop(this,_991);},removeFromGroup:function(_992){if(this.groups[_992]){delete this.groups[_992];}this.DDM.removeDDFromGroup(this,_992);},setDragElId:function(id){this.dragElId=id;},setHandleElId:function(id){if(typeof id!=="string"){YAHOO.log("id is not a string, assuming it is an HTMLElement");id=Dom.generateId(id);}this.handleElId=id;this.DDM.regHandle(this.id,id);},setOuterHandleElId:function(id){if(typeof id!=="string"){YAHOO.log("id is not a string, assuming it is an HTMLElement");id=Dom.generateId(id);}_963.on(id,"mousedown",this.handleMouseDown,this,true);this.setHandleElId(id);this.hasOuterHandles=true;},unreg:function(){_963.removeListener(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this);},isLocked:function(){return (this.DDM.isLocked()||this.locked);},handleMouseDown:function(e,oDD){var _998=e.which||e.button;if(this.primaryButtonOnly&&_998>1){return;}if(this.isLocked()){return;}this.DDM.refreshCache(this.groups);var pt=new YAHOO.util.Point(_963.getPageX(e),_963.getPageY(e));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(pt,this)){}else{if(this.clickValidator(e)){this.setStartPosition();this.b4MouseDown(e);this.onMouseDown(e);this.DDM.handleMouseDown(e,this);this.DDM.stopEvent(e);}else{}}},clickValidator:function(e){var _99b=_963.getTarget(e);return (this.isValidHandleChild(_99b)&&(this.id==this.handleElId||this.DDM.handleWasClicked(_99b,this.id)));},addInvalidHandleType:function(_99c){var type=_99c.toUpperCase();this.invalidHandleTypes[type]=type;},addInvalidHandleId:function(id){if(typeof id!=="string"){YAHOO.log("id is not a string, assuming it is an HTMLElement");id=Dom.generateId(id);}this.invalidHandleIds[id]=id;},addInvalidHandleClass:function(_99f){this.invalidHandleClasses.push(_99f);},removeInvalidHandleType:function(_9a0){var type=_9a0.toUpperCase();delete this.invalidHandleTypes[type];},removeInvalidHandleId:function(id){if(typeof id!=="string"){YAHOO.log("id is not a string, assuming it is an HTMLElement");id=Dom.generateId(id);}delete this.invalidHandleIds[id];},removeInvalidHandleClass:function(_9a3){for(var i=0,len=this.invalidHandleClasses.length;i<len;++i){if(this.invalidHandleClasses[i]==_9a3){delete this.invalidHandleClasses[i];}}},isValidHandleChild:function(node){var _9a6=true;var _9a7;try{_9a7=node.nodeName.toUpperCase();}catch(e){_9a7=node.nodeName;}_9a6=_9a6&&!this.invalidHandleTypes[_9a7];_9a6=_9a6&&!this.invalidHandleIds[node.id];for(var i=0,len=this.invalidHandleClasses.length;_9a6&&i<len;++i){_9a6=!Dom.hasClass(node,this.invalidHandleClasses[i]);}return _9a6;},setXTicks:function(_9a9,_9aa){this.xTicks=[];this.xTickSize=_9aa;var _9ab={};for(var i=this.initPageX;i>=this.minX;i=i-_9aa){if(!_9ab[i]){this.xTicks[this.xTicks.length]=i;_9ab[i]=true;}}for(i=this.initPageX;i<=this.maxX;i=i+_9aa){if(!_9ab[i]){this.xTicks[this.xTicks.length]=i;_9ab[i]=true;}}this.xTicks.sort(this.DDM.numericSort);},setYTicks:function(_9ad,_9ae){this.yTicks=[];this.yTickSize=_9ae;var _9af={};for(var i=this.initPageY;i>=this.minY;i=i-_9ae){if(!_9af[i]){this.yTicks[this.yTicks.length]=i;_9af[i]=true;}}for(i=this.initPageY;i<=this.maxY;i=i+_9ae){if(!_9af[i]){this.yTicks[this.yTicks.length]=i;_9af[i]=true;}}this.yTicks.sort(this.DDM.numericSort);},setXConstraint:function(_9b1,_9b2,_9b3){this.leftConstraint=_9b1;this.rightConstraint=_9b2;this.minX=this.initPageX-_9b1;this.maxX=this.initPageX+_9b2;if(_9b3){this.setXTicks(this.initPageX,_9b3);}this.constrainX=true;},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks();},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0;},setYConstraint:function(iUp,_9b5,_9b6){this.topConstraint=iUp;this.bottomConstraint=_9b5;this.minY=this.initPageY-iUp;this.maxY=this.initPageY+_9b5;if(_9b6){this.setYTicks(this.initPageY,_9b6);}this.constrainY=true;},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var dx=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var dy=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(dx,dy);}else{this.setInitPosition();}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize);}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize);}},getTick:function(val,_9ba){if(!_9ba){return val;}else{if(_9ba[0]>=val){return _9ba[0];}else{for(var i=0,len=_9ba.length;i<len;++i){var next=i+1;if(_9ba[next]&&_9ba[next]>=val){var _9bd=val-_9ba[i];var _9be=_9ba[next]-val;return (_9be>_9bd)?_9ba[i]:_9ba[next];}}return _9ba[_9ba.length-1];}}},toString:function(){return ("DragDrop "+this.id);}};})();if(!YAHOO.util.DragDropMgr){YAHOO.util.DragDropMgr=function(){var _9bf=YAHOO.util.Event;return {ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initalized:false,locked:false,init:function(){this.initialized=true;},POINT:0,INTERSECT:1,STRICT_INTERSECT:2,mode:0,_execOnAll:function(_9c0,args){for(var i in this.ids){for(var j in this.ids[i]){var oDD=this.ids[i][j];if(!this.isTypeOfDD(oDD)){continue;}oDD[_9c0].apply(oDD,args);}}},_onLoad:function(){this.init();_9bf.on(document,"mouseup",this.handleMouseUp,this,true);_9bf.on(document,"mousemove",this.handleMouseMove,this,true);_9bf.on(window,"unload",this._onUnload,this,true);_9bf.on(window,"resize",this._onResize,this,true);},_onResize:function(e){this._execOnAll("resetConstraints",[]);},lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isLocked:function(){return this.locked;},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:1000,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(oDD,_9c7){if(!this.initialized){this.init();}if(!this.ids[_9c7]){this.ids[_9c7]={};}this.ids[_9c7][oDD.id]=oDD;},removeDDFromGroup:function(oDD,_9c9){if(!this.ids[_9c9]){this.ids[_9c9]={};}var obj=this.ids[_9c9];if(obj&&obj[oDD.id]){delete obj[oDD.id];}},_remove:function(oDD){for(var g in oDD.groups){if(g&&this.ids[g][oDD.id]){delete this.ids[g][oDD.id];}}delete this.handleIds[oDD.id];},regHandle:function(_9cd,_9ce){if(!this.handleIds[_9cd]){this.handleIds[_9cd]={};}this.handleIds[_9cd][_9ce]=_9ce;},isDragDrop:function(id){return (this.getDDById(id))?true:false;},getRelated:function(_9d0,_9d1){var oDDs=[];for(var i in _9d0.groups){for(j in this.ids[i]){var dd=this.ids[i][j];if(!this.isTypeOfDD(dd)){continue;}if(!_9d1||dd.isTarget){oDDs[oDDs.length]=dd;}}}return oDDs;},isLegalTarget:function(oDD,_9d6){var _9d7=this.getRelated(oDD,true);for(var i=0,len=_9d7.length;i<len;++i){if(_9d7[i].id==_9d6.id){return true;}}return false;},isTypeOfDD:function(oDD){return (oDD&&oDD.__ygDragDrop);},isHandle:function(_9da,_9db){return (this.handleIds[_9da]&&this.handleIds[_9da][_9db]);},getDDById:function(id){for(var i in this.ids){if(this.ids[i][id]){return this.ids[i][id];}}return null;},handleMouseDown:function(e,oDD){this.currentTarget=YAHOO.util.Event.getTarget(e);this.dragCurrent=oDD;var el=oDD.getEl();this.startX=YAHOO.util.Event.getPageX(e);this.startY=YAHOO.util.Event.getPageY(e);this.deltaX=this.startX-el.offsetLeft;this.deltaY=this.startY-el.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var DDM=YAHOO.util.DDM;DDM.startDrag(DDM.startX,DDM.startY);},this.clickTimeThresh);},startDrag:function(x,y){clearTimeout(this.clickTimeout);if(this.dragCurrent){this.dragCurrent.b4StartDrag(x,y);this.dragCurrent.startDrag(x,y);}this.dragThreshMet=true;},handleMouseUp:function(e){if(!this.dragCurrent){return;}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this.fireEvents(e,true);}else{}this.stopDrag(e);this.stopEvent(e);},stopEvent:function(e){if(this.stopPropagation){YAHOO.util.Event.stopPropagation(e);}if(this.preventDefault){YAHOO.util.Event.preventDefault(e);}},stopDrag:function(e){if(this.dragCurrent){if(this.dragThreshMet){this.dragCurrent.b4EndDrag(e);this.dragCurrent.endDrag(e);}this.dragCurrent.onMouseUp(e);}this.dragCurrent=null;this.dragOvers={};},handleMouseMove:function(e){if(!this.dragCurrent){return true;}if(YAHOO.util.Event.isIE&&!e.button){this.stopEvent(e);return this.handleMouseUp(e);}if(!this.dragThreshMet){var _9e8=Math.abs(this.startX-YAHOO.util.Event.getPageX(e));var _9e9=Math.abs(this.startY-YAHOO.util.Event.getPageY(e));if(_9e8>this.clickPixelThresh||_9e9>this.clickPixelThresh){this.startDrag(this.startX,this.startY);}}if(this.dragThreshMet){this.dragCurrent.b4Drag(e);this.dragCurrent.onDrag(e);this.fireEvents(e,false);}this.stopEvent(e);return true;},fireEvents:function(e,_9eb){var dc=this.dragCurrent;if(!dc||dc.isLocked()){return;}var x=YAHOO.util.Event.getPageX(e);var y=YAHOO.util.Event.getPageY(e);var pt=new YAHOO.util.Point(x,y);var _9f0=[];var _9f1=[];var _9f2=[];var _9f3=[];var _9f4=[];for(var i in this.dragOvers){var ddo=this.dragOvers[i];if(!this.isTypeOfDD(ddo)){continue;}if(!this.isOverTarget(pt,ddo,this.mode)){_9f1.push(ddo);}_9f0[i]=true;delete this.dragOvers[i];}for(var _9f7 in dc.groups){if("string"!=typeof _9f7){continue;}for(i in this.ids[_9f7]){var oDD=this.ids[_9f7][i];if(!this.isTypeOfDD(oDD)){continue;}if(oDD.isTarget&&!oDD.isLocked()&&oDD!=dc){if(this.isOverTarget(pt,oDD,this.mode)){if(_9eb){_9f3.push(oDD);}else{if(!_9f0[oDD.id]){_9f4.push(oDD);}else{_9f2.push(oDD);}this.dragOvers[oDD.id]=oDD;}}}}}if(this.mode){if(_9f1.length){dc.b4DragOut(e,_9f1);dc.onDragOut(e,_9f1);}if(_9f4.length){dc.onDragEnter(e,_9f4);}if(_9f2.length){dc.b4DragOver(e,_9f2);dc.onDragOver(e,_9f2);}if(_9f3.length){dc.b4DragDrop(e,_9f3);dc.onDragDrop(e,_9f3);}}else{var len=0;for(i=0,len=_9f1.length;i<len;++i){dc.b4DragOut(e,_9f1[i].id);dc.onDragOut(e,_9f1[i].id);}for(i=0,len=_9f4.length;i<len;++i){dc.onDragEnter(e,_9f4[i].id);}for(i=0,len=_9f2.length;i<len;++i){dc.b4DragOver(e,_9f2[i].id);dc.onDragOver(e,_9f2[i].id);}for(i=0,len=_9f3.length;i<len;++i){dc.b4DragDrop(e,_9f3[i].id);dc.onDragDrop(e,_9f3[i].id);}}if(_9eb&&!_9f3.length){dc.onInvalidDrop(e);}},getBestMatch:function(dds){var _9fb=null;var len=dds.length;if(len==1){_9fb=dds[0];}else{for(var i=0;i<len;++i){var dd=dds[i];if(this.mode==this.INTERSECT&&dd.cursorIsOver){_9fb=dd;break;}else{if(!_9fb||!_9fb.overlap||(dd.overlap&&_9fb.overlap.getArea()<dd.overlap.getArea())){_9fb=dd;}}}}return _9fb;},refreshCache:function(_9ff){for(var _a00 in _9ff){if("string"!=typeof _a00){continue;}for(var i in this.ids[_a00]){var oDD=this.ids[_a00][i];if(this.isTypeOfDD(oDD)){var loc=this.getLocation(oDD);if(loc){this.locationCache[oDD.id]=loc;}else{delete this.locationCache[oDD.id];}}}}},verifyEl:function(el){try{if(el){var _a05=el.offsetParent;if(_a05){return true;}}}catch(e){}return false;},getLocation:function(oDD){if(!this.isTypeOfDD(oDD)){return null;}var el=oDD.getEl(),pos,x1,x2,y1,y2,t,r,b,l;try{pos=YAHOO.util.Dom.getXY(el);}catch(e){}if(!pos){return null;}x1=pos[0];x2=x1+el.offsetWidth;y1=pos[1];y2=y1+el.offsetHeight;t=y1-oDD.padding[0];r=x2+oDD.padding[1];b=y2+oDD.padding[2];l=x1-oDD.padding[3];return new YAHOO.util.Region(t,r,b,l);},isOverTarget:function(pt,_a09,_a0a){var loc=this.locationCache[_a09.id];if(!loc||!this.useCache){loc=this.getLocation(_a09);this.locationCache[_a09.id]=loc;}if(!loc){return false;}_a09.cursorIsOver=loc.contains(pt);var dc=this.dragCurrent;if(!dc||!dc.getTargetCoord||(!_a0a&&!dc.constrainX&&!dc.constrainY)){return _a09.cursorIsOver;}_a09.overlap=null;var pos=dc.getTargetCoord(pt.x,pt.y);var el=dc.getDragEl();var _a0f=new YAHOO.util.Region(pos.y,pos.x+el.offsetWidth,pos.y+el.offsetHeight,pos.x);var _a10=_a0f.intersect(loc);if(_a10){_a09.overlap=_a10;return (_a0a)?true:_a09.cursorIsOver;}else{return false;}},_onUnload:function(e,me){this.unregAll();},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null;}this._execOnAll("unreg",[]);for(i in this.elementCache){delete this.elementCache[i];}this.elementCache={};this.ids={};},elementCache:{},getElWrapper:function(id){var _a14=this.elementCache[id];if(!_a14||!_a14.el){_a14=this.elementCache[id]=new this.ElementWrapper(YAHOO.util.Dom.get(id));}return _a14;},getElement:function(id){return YAHOO.util.Dom.get(id);},getCss:function(id){var el=YAHOO.util.Dom.get(id);return (el)?el.style:null;},ElementWrapper:function(el){this.el=el||null;this.id=this.el&&el.id;this.css=this.el&&el.style;},getPosX:function(el){return YAHOO.util.Dom.getX(el);},getPosY:function(el){return YAHOO.util.Dom.getY(el);},swapNode:function(n1,n2){if(n1.swapNode){n1.swapNode(n2);}else{var p=n2.parentNode;var s=n2.nextSibling;if(s==n1){p.insertBefore(n1,n2);}else{if(n2==n1.nextSibling){p.insertBefore(n2,n1);}else{n1.parentNode.replaceChild(n2,n1);p.insertBefore(n1,s);}}}},getScroll:function(){var t,l,dde=document.documentElement,db=document.body;if(dde&&(dde.scrollTop||dde.scrollLeft)){t=dde.scrollTop;l=dde.scrollLeft;}else{if(db){t=db.scrollTop;l=db.scrollLeft;}else{YAHOO.log("could not get scroll property");}}return {top:t,left:l};},getStyle:function(el,_a21){return YAHOO.util.Dom.getStyle(el,_a21);},getScrollTop:function(){return this.getScroll().top;},getScrollLeft:function(){return this.getScroll().left;},moveToEl:function(_a22,_a23){var _a24=YAHOO.util.Dom.getXY(_a23);YAHOO.util.Dom.setXY(_a22,_a24);},getClientHeight:function(){return YAHOO.util.Dom.getViewportHeight();},getClientWidth:function(){return YAHOO.util.Dom.getViewportWidth();},numericSort:function(a,b){return (a-b);},_timeoutCount:0,_addListeners:function(){var DDM=YAHOO.util.DDM;if(YAHOO.util.Event&&document){DDM._onLoad();}else{if(DDM._timeoutCount>2000){}else{setTimeout(DDM._addListeners,10);if(document&&document.body){DDM._timeoutCount+=1;}}}},handleWasClicked:function(node,id){if(this.isHandle(id,node.id)){return true;}else{var p=node.parentNode;while(p){if(this.isHandle(id,p.id)){return true;}else{p=p.parentNode;}}}return false;}};}();YAHOO.util.DDM=YAHOO.util.DragDropMgr;YAHOO.util.DDM._addListeners();}YAHOO.util.DD=function(id,_a2c,_a2d){if(id){this.init(id,_a2c,_a2d);}};YAHOO.extend(YAHOO.util.DD,YAHOO.util.DragDrop,{scroll:true,autoOffset:function(_a2e,_a2f){var x=_a2e-this.startPageX;var y=_a2f-this.startPageY;this.setDelta(x,y);},setDelta:function(_a32,_a33){this.deltaX=_a32;this.deltaY=_a33;},setDragElPos:function(_a34,_a35){var el=this.getDragEl();this.alignElWithMouse(el,_a34,_a35);},alignElWithMouse:function(el,_a38,_a39){var _a3a=this.getTargetCoord(_a38,_a39);if(!this.deltaSetXY){var _a3b=[_a3a.x,_a3a.y];YAHOO.util.Dom.setXY(el,_a3b);var _a3c=parseInt(YAHOO.util.Dom.getStyle(el,"left"),10);var _a3d=parseInt(YAHOO.util.Dom.getStyle(el,"top"),10);this.deltaSetXY=[_a3c-_a3a.x,_a3d-_a3a.y];}else{YAHOO.util.Dom.setStyle(el,"left",(_a3a.x+this.deltaSetXY[0])+"px");YAHOO.util.Dom.setStyle(el,"top",(_a3a.y+this.deltaSetXY[1])+"px");}this.cachePosition(_a3a.x,_a3a.y);this.autoScroll(_a3a.x,_a3a.y,el.offsetHeight,el.offsetWidth);},cachePosition:function(_a3e,_a3f){if(_a3e){this.lastPageX=_a3e;this.lastPageY=_a3f;}else{var _a40=YAHOO.util.Dom.getXY(this.getEl());this.lastPageX=_a40[0];this.lastPageY=_a40[1];}},autoScroll:function(x,y,h,w){if(this.scroll){var _a45=this.DDM.getClientHeight();var _a46=this.DDM.getClientWidth();var st=this.DDM.getScrollTop();var sl=this.DDM.getScrollLeft();var bot=h+y;var _a4a=w+x;var _a4b=(_a45+st-y-this.deltaY);var _a4c=(_a46+sl-x-this.deltaX);var _a4d=40;var _a4e=(document.all)?80:30;if(bot>_a45&&_a4b<_a4d){window.scrollTo(sl,st+_a4e);}if(y<st&&st>0&&y-st<_a4d){window.scrollTo(sl,st-_a4e);}if(_a4a>_a46&&_a4c<_a4d){window.scrollTo(sl+_a4e,st);}if(x<sl&&sl>0&&x-sl<_a4d){window.scrollTo(sl-_a4e,st);}}},getTargetCoord:function(_a4f,_a50){var x=_a4f-this.deltaX;var y=_a50-this.deltaY;if(this.constrainX){if(x<this.minX){x=this.minX;}if(x>this.maxX){x=this.maxX;}}if(this.constrainY){if(y<this.minY){y=this.minY;}if(y>this.maxY){y=this.maxY;}}x=this.getTick(x,this.xTicks);y=this.getTick(y,this.yTicks);return {x:x,y:y};},applyConfig:function(){YAHOO.util.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false);},b4MouseDown:function(e){this.autoOffset(YAHOO.util.Event.getPageX(e),YAHOO.util.Event.getPageY(e));},b4Drag:function(e){this.setDragElPos(YAHOO.util.Event.getPageX(e),YAHOO.util.Event.getPageY(e));},toString:function(){return ("DD "+this.id);}});YAHOO.util.DDProxy=function(id,_a56,_a57){if(id){this.init(id,_a56,_a57);this.initFrame();}};YAHOO.util.DDProxy.dragElId="ygddfdiv";YAHOO.extend(YAHOO.util.DDProxy,YAHOO.util.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var self=this;var body=document.body;if(!body||!body.firstChild){setTimeout(function(){self.createFrame();},50);return;}var div=this.getDragEl();if(!div){div=document.createElement("div");div.id=this.dragElId;var s=div.style;s.position="absolute";s.visibility="hidden";s.cursor="move";s.border="2px solid #aaa";s.zIndex=999;body.insertBefore(div,body.firstChild);}},initFrame:function(){this.createFrame();},applyConfig:function(){YAHOO.util.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||YAHOO.util.DDProxy.dragElId);},showFrame:function(_a5c,_a5d){var el=this.getEl();var _a5f=this.getDragEl();var s=_a5f.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(s.width,10)/2),Math.round(parseInt(s.height,10)/2));}this.setDragElPos(_a5c,_a5d);YAHOO.util.Dom.setStyle(_a5f,"visibility","visible");},_resizeProxy:function(){if(this.resizeFrame){var DOM=YAHOO.util.Dom;var el=this.getEl();var _a63=this.getDragEl();var bt=parseInt(DOM.getStyle(_a63,"borderTopWidth"),10);var br=parseInt(DOM.getStyle(_a63,"borderRightWidth"),10);var bb=parseInt(DOM.getStyle(_a63,"borderBottomWidth"),10);var bl=parseInt(DOM.getStyle(_a63,"borderLeftWidth"),10);if(isNaN(bt)){bt=0;}if(isNaN(br)){br=0;}if(isNaN(bb)){bb=0;}if(isNaN(bl)){bl=0;}var _a68=Math.max(0,el.offsetWidth-br-bl);var _a69=Math.max(0,el.offsetHeight-bt-bb);DOM.setStyle(_a63,"width",_a68+"px");DOM.setStyle(_a63,"height",_a69+"px");}},b4MouseDown:function(e){var x=YAHOO.util.Event.getPageX(e);var y=YAHOO.util.Event.getPageY(e);this.autoOffset(x,y);this.setDragElPos(x,y);},b4StartDrag:function(x,y){this.showFrame(x,y);},b4EndDrag:function(e){YAHOO.util.Dom.setStyle(this.getDragEl(),"visibility","hidden");},endDrag:function(e){var DOM=YAHOO.util.Dom;var lel=this.getEl();var del=this.getDragEl();DOM.setStyle(del,"visibility","");DOM.setStyle(lel,"visibility","hidden");YAHOO.util.DDM.moveToEl(lel,del);DOM.setStyle(del,"visibility","hidden");DOM.setStyle(lel,"visibility","");},toString:function(){return ("DDProxy "+this.id);}});YAHOO.util.DDTarget=function(id,_a75,_a76){if(id){this.initTarget(id,_a75,_a76);}};YAHOO.extend(YAHOO.util.DDTarget,YAHOO.util.DragDrop,{toString:function(){return ("DDTarget "+this.id);}});YAHOO.namespace("ext","ext.util","ext.grid");YAHOO.ext.Strict=(document.compatMode=="CSS1Compat");YAHOO.ext.SSL_SECURE_URL="javascript:false";window.undefined=undefined;Function.prototype.createCallback=function(){var args=arguments;var _a78=this;return function(){return _a78.apply(window,args);};};Function.prototype.createDelegate=function(obj,args,_a7b){var _a7c=this;return function(){var _a7d=args||arguments;if(_a7b===true){_a7d=Array.prototype.slice.call(arguments,0);_a7d=_a7d.concat(args);}else{if(typeof _a7b=="number"){_a7d=Array.prototype.slice.call(arguments,0);var _a7e=[_a7b,0].concat(args);Array.prototype.splice.apply(_a7d,_a7e);}}return _a7c.apply(obj||window,_a7d);};};Function.prototype.defer=function(_a7f,obj,args,_a82){return setTimeout(this.createDelegate(obj,args,_a82),_a7f);};Function.prototype.createSequence=function(fcn,_a84){if(typeof fcn!="function"){return this;}var _a85=this;return function(){var _a86=_a85.apply(this||window,arguments);fcn.apply(_a84||this||window,arguments);return _a86;};};YAHOO.util.Event.on(window,"unload",function(){delete Function.prototype.createSequence;delete Function.prototype.defer;delete Function.prototype.createDelegate;delete Function.prototype.createCallback;delete Function.prototype.createInterceptor;});Function.prototype.createInterceptor=function(fcn,_a88){if(typeof fcn!="function"){return this;}var _a89=this;return function(){fcn.target=this;fcn.method=_a89;if(fcn.apply(_a88||this||window,arguments)===false){return;}return _a89.apply(this||window,arguments);};};YAHOO.ext.util.Browser=new function(){var ua=navigator.userAgent.toLowerCase();this.isOpera=(ua.indexOf("opera")>-1);this.isSafari=(ua.indexOf("webkit")>-1);this.isIE=(window.ActiveXObject);this.isIE7=(ua.indexOf("msie 7")>-1);this.isGecko=!this.isSafari&&(ua.indexOf("gecko")>-1);if(ua.indexOf("windows")!=-1||ua.indexOf("win32")!=-1){this.isWindows=true;}else{if(ua.indexOf("macintosh")!=-1){this.isMac=true;}}if(this.isIE&&!this.isIE7){try{document.execCommand("BackgroundImageCache",false,true);}catch(e){}}}();YAHOO.print=function(arg1,arg2,etc){if(!YAHOO.ext._console){var cs=YAHOO.ext.DomHelper.insertBefore(document.body.firstChild,{tag:"div",style:"width:250px;height:350px;overflow:auto;border:3px solid #c3daf9;"+"background:white;position:absolute;right:5px;top:5px;"+"font:normal 8pt arial,verdana,helvetica;z-index:50000;padding:5px;"},true);new YAHOO.ext.Resizable(cs,{transparent:true,handles:"all",pinned:true,adjustments:[0,0],wrap:true,draggable:(YAHOO.util.DD?true:false)});cs.on("dblclick",cs.hide);YAHOO.ext._console=cs;}var msg="";for(var i=0,len=arguments.length;i<len;i++){msg+=arguments[i]+"<hr noshade style=\"color:#eeeeee;\" size=\"1\">";}YAHOO.ext._console.dom.innerHTML=msg+YAHOO.ext._console.dom.innerHTML;YAHOO.ext._console.dom.scrollTop=0;YAHOO.ext._console.show();};YAHOO.printf=function(_a91,arg1,arg2,etc){var args=Array.prototype.slice.call(arguments,1);YAHOO.print(_a91.replace(/\{\{[^{}]*\}\}|\{(\d+)(,\s*([\w.]+))?\}/g,function(m,a1,a2,a3){if(m.chatAt=="{"){return m.slice(1,-1);}var rpl=args[a1];if(a3){var f=eval(a3);rpl=f(rpl);}return rpl?rpl:"";}));};YAHOO.util.CustomEvent.prototype.fireDirect=function(){var len=this.subscribers.length;for(var i=0;i<len;++i){var s=this.subscribers[i];if(s){var _a9f=(s.override)?s.obj:this.scope;if(s.fn.apply(_a9f,arguments)===false){return false;}}}return true;};YAHOO.extendX=function(_aa0,_aa1,_aa2){YAHOO.extend(_aa0,_aa1);_aa0.override=function(o){YAHOO.override(_aa0,o);};if(!_aa0.prototype.override){_aa0.prototype.override=function(o){for(var _aa5 in o){this[_aa5]=o[_aa5];}};}if(_aa2){_aa0.override(_aa2);}};YAHOO.override=function(_aa6,_aa7){if(_aa7){var p=_aa6.prototype;for(var _aa9 in _aa7){p[_aa9]=_aa7[_aa9];}}};YAHOO.ext.util.DelayedTask=function(fn,_aab,args){var _aad=null;this.delay=function(_aae,_aaf,_ab0,_ab1){if(_aad){clearTimeout(_aad);}fn=_aaf||fn;_aab=_ab0||_aab;args=_ab1||args;_aad=setTimeout(fn.createDelegate(_aab,args),_aae);};this.cancel=function(){if(_aad){clearTimeout(_aad);_aad=null;}};};YAHOO.ext.KeyMap=function(el,_ab3,_ab4){this.el=getEl(el);this.eventName=_ab4||"keydown";this.bindings=[];if(_ab3 instanceof Array){for(var i=0,len=_ab3.length;i<len;i++){this.addBinding(_ab3[i]);}}else{this.addBinding(_ab3);}this.keyDownDelegate=YAHOO.ext.EventManager.wrap(this.handleKeyDown,this,true);this.enable();};YAHOO.ext.KeyMap.prototype={addBinding:function(_ab6){var _ab7=_ab6.key,shift=_ab6.shift,ctrl=_ab6.ctrl,alt=_ab6.alt,fn=_ab6.fn,scope=_ab6.scope;if(typeof _ab7=="string"){var ks=[];var _ab9=_ab7.toUpperCase();for(var j=0,len=_ab9.length;j<len;j++){ks.push(_ab9.charCodeAt(j));}_ab7=ks;}var _abb=_ab7 instanceof Array;var _abc=function(e){if((!shift||e.shiftKey)&&(!ctrl||e.ctrlKey)&&(!alt||e.altKey)){var k=e.getKey();if(_abb){for(var i=0,len=_ab7.length;i<len;i++){if(_ab7[i]==k){fn.call(scope||window,k,e);return;}}}else{if(k==_ab7){fn.call(scope||window,k,e);}}}};this.bindings.push(_abc);},handleKeyDown:function(e){if(this.enabled){var b=this.bindings;for(var i=0,len=b.length;i<len;i++){b[i](e);}}},isEnabled:function(){return this.enabled;},enable:function(){if(!this.enabled){this.el.on(this.eventName,this.keyDownDelegate);this.enabled=true;}},disable:function(){if(this.enabled){this.el.removeListener(this.eventName,this.keyDownDelegate);this.enabled=false;}}};YAHOO.ext.util.Observable=function(){};YAHOO.ext.util.Observable.prototype={fireEvent:function(){var ce=this.events[arguments[0].toLowerCase()];if(typeof ce=="object"){return ce.fireDirect.apply(ce,Array.prototype.slice.call(arguments,1));}else{return true;}},addListener:function(_ac4,fn,_ac6,_ac7){_ac4=_ac4.toLowerCase();var ce=this.events[_ac4];if(!ce){throw "You are trying to listen for an event that does not exist: \""+_ac4+"\".";}if(typeof ce=="boolean"){ce=new YAHOO.util.CustomEvent(_ac4);this.events[_ac4]=ce;}ce.subscribe(fn,_ac6,_ac7);},delayedListener:function(_ac9,fn,_acb,_acc){var _acd=function(){setTimeout(fn.createDelegate(_acb,arguments),_acc||1);};this.addListener(_ac9,_acd);return _acd;},bufferedListener:function(_ace,fn,_ad0,_ad1){var task=new YAHOO.ext.util.DelayedTask();var _ad3=function(){task.delay(_ad1||250,fn,_ad0,Array.prototype.slice.call(arguments,0));};this.addListener(_ace,_ad3);return _ad3;},removeListener:function(_ad4,fn,_ad6){var ce=this.events[_ad4.toLowerCase()];if(typeof ce=="object"){ce.unsubscribe(fn,_ad6);}},purgeListeners:function(){for(var evt in this.events){if(typeof this.events[evt]=="object"){this.events[evt].unsubscribeAll();}}}};YAHOO.ext.util.Observable.prototype.on=YAHOO.ext.util.Observable.prototype.addListener;YAHOO.ext.util.Config={apply:function(obj,_ada,_adb){if(_adb){this.apply(obj,_adb);}if(_ada){for(var prop in _ada){obj[prop]=_ada[prop];}}return obj;}};if(!String.escape){String.escape=function(_add){return _add.replace(/('|\\)/g,"\\$1");};}String.leftPad=function(val,size,ch){var _ae1=new String(val);if(ch==null){ch=" ";}while(_ae1.length<size){_ae1=ch+_ae1;}return _ae1;};if(YAHOO.util.Connect){YAHOO.util.Connect.setHeader=function(o){for(var prop in this._http_header){if(typeof this._http_header[prop]!="function"){o.conn.setRequestHeader(prop,this._http_header[prop]);}}delete this._http_header;this._http_header={};this._has_http_headers=false;};}if(YAHOO.util.DragDrop){YAHOO.util.DragDrop.prototype.defaultPadding={left:0,right:0,top:0,bottom:0};YAHOO.util.DragDrop.prototype.constrainTo=function(_ae4,pad,_ae6){if(typeof pad=="number"){pad={left:pad,right:pad,top:pad,bottom:pad};}pad=pad||this.defaultPadding;var b=getEl(this.getEl()).getBox();var ce=getEl(_ae4);var c=ce.dom==document.body?{x:0,y:0,width:YAHOO.util.Dom.getViewportWidth(),height:YAHOO.util.Dom.getViewportHeight()}:ce.getBox(_ae6||false);var _aea=b.y-c.y;var _aeb=b.x-c.x;this.resetConstraints();this.setXConstraint(_aeb-(pad.left||0),c.width-_aeb-b.width-(pad.right||0));this.setYConstraint(_aea-(pad.top||0),c.height-_aea-b.height-(pad.bottom||0));};}YAHOO.ext.Element=function(_aec,_aed){var dom=YAHOO.util.Dom.get(_aec);if(!dom){return null;}if(!_aed&&YAHOO.ext.Element.cache[dom.id]){return YAHOO.ext.Element.cache[dom.id];}this.dom=dom;this.id=this.dom.id;this.visibilityMode=YAHOO.ext.Element.VISIBILITY;this.originalDisplay=YAHOO.util.Dom.getStyle(this.dom,"display")||"";if(this.autoDisplayMode){if(this.originalDisplay=="none"){this.setVisibilityMode(YAHOO.ext.Element.DISPLAY);}}if(this.originalDisplay=="none"){this.originalDisplay="";}this.defaultUnit="px";};YAHOO.ext.Element.prototype={setVisibilityMode:function(_aef){this.visibilityMode=_aef;return this;},enableDisplayMode:function(_af0){this.setVisibilityMode(YAHOO.ext.Element.DISPLAY);if(typeof _af0!="undefined"){this.originalDisplay=_af0;}return this;},animate:function(args,_af2,_af3,_af4,_af5){this.anim(args,_af2,_af3,_af4,_af5);return this;},anim:function(args,_af7,_af8,_af9,_afa){_afa=_afa||YAHOO.util.Anim;var anim=new _afa(this.dom,args,_af7||0.35,_af9||YAHOO.util.Easing.easeBoth);if(_af8){if(!(_af8 instanceof Array)){anim.onComplete.subscribe(_af8,this,true);}else{for(var i=0;i<_af8.length;i++){var fn=_af8[i];if(fn){anim.onComplete.subscribe(fn,this,true);}}}}anim.animate();},scrollIntoView:function(_afe){var c=getEl(_afe||document.body,true);var cp=c.getStyle("position");var _b01=false;if(cp!="relative"&&cp!="absolute"){c.setStyle("position","relative");_b01=true;}var el=this.dom;var _b03=parseInt(el.offsetTop,10);var _b04=_b03+el.offsetHeight;var _b05=parseInt(c.scrollTop,10);var _b06=_b05+c.clientHeight;if(_b03<_b05){c.scrollTop=_b03;}else{if(_b04>_b06){c.scrollTop=_b04-c.clientHeight;}}if(_b01){c.setStyle("position",cp);}return this;},autoHeight:function(_b07,_b08,_b09,_b0a){var _b0b=this.getHeight();this.clip();this.setHeight(1);setTimeout(function(){var _b0c=parseInt(this.dom.scrollHeight,10);if(!_b07){this.setHeight(_b0c);this.unclip();if(typeof _b09=="function"){_b09();}}else{this.setHeight(_b0b);this.setHeight(_b0c,_b07,_b08,function(){this.unclip();if(typeof _b09=="function"){_b09();}}.createDelegate(this),_b0a);}}.createDelegate(this),0);return this;},isVisible:function(deep){var vis=YAHOO.util.Dom.getStyle(this.dom,"visibility")!="hidden"&&YAHOO.util.Dom.getStyle(this.dom,"display")!="none";if(!deep||!vis){return vis;}var p=this.dom.parentNode;while(p&&p.tagName.toLowerCase()!="body"){if(YAHOO.util.Dom.getStyle(p,"visibility")=="hidden"||YAHOO.util.Dom.getStyle(p,"display")=="none"){return false;}p=p.parentNode;}return true;},select:function(_b10,_b11){return YAHOO.ext.Element.select("#"+this.dom.id+" "+_b10,_b11);},initDD:function(_b12,_b13,_b14){var dd=new YAHOO.util.DD(YAHOO.util.Dom.generateId(this.dom),_b12,_b13);return YAHOO.ext.util.Config.apply(dd,_b14);},initDDProxy:function(_b16,_b17,_b18){var dd=new YAHOO.util.DDProxy(YAHOO.util.Dom.generateId(this.dom),_b16,_b17);return YAHOO.ext.util.Config.apply(dd,_b18);},initDDTarget:function(_b1a,_b1b,_b1c){var dd=new YAHOO.util.DDTarget(YAHOO.util.Dom.generateId(this.dom),_b1a,_b1b);return YAHOO.ext.util.Config.apply(dd,_b1c);},setVisible:function(_b1e,_b1f,_b20,_b21,_b22){if(!_b1f||!YAHOO.util.Anim){if(this.visibilityMode==YAHOO.ext.Element.DISPLAY){this.setDisplayed(_b1e);}else{YAHOO.util.Dom.setStyle(this.dom,"visibility",_b1e?"visible":"hidden");}}else{this.setOpacity(_b1e?0:1);YAHOO.util.Dom.setStyle(this.dom,"visibility","visible");if(this.visibilityMode==YAHOO.ext.Element.DISPLAY){this.setDisplayed(true);}var args={opacity:{from:(_b1e?0:1),to:(_b1e?1:0)}};var anim=new YAHOO.util.Anim(this.dom,args,_b20||0.35,_b22||(_b1e?YAHOO.util.Easing.easeIn:YAHOO.util.Easing.easeOut));anim.onComplete.subscribe((function(){if(this.visibilityMode==YAHOO.ext.Element.DISPLAY){this.setDisplayed(_b1e);}else{YAHOO.util.Dom.setStyle(this.dom,"visibility",_b1e?"visible":"hidden");}}).createDelegate(this));if(_b21){anim.onComplete.subscribe(_b21);}anim.animate();}return this;},isDisplayed:function(){return YAHOO.util.Dom.getStyle(this.dom,"display")!="none";},toggle:function(_b25,_b26,_b27,_b28){this.setVisible(!this.isVisible(),_b25,_b26,_b27,_b28);return this;},setDisplayed:function(_b29){if(typeof _b29=="boolean"){_b29=_b29?this.originalDisplay:"none";}YAHOO.util.Dom.setStyle(this.dom,"display",_b29);return this;},focus:function(){try{this.dom.focus();}catch(e){}return this;},blur:function(){try{this.dom.blur();}catch(e){}return this;},addClass:function(_b2a){if(_b2a instanceof Array){for(var i=0,len=_b2a.length;i<len;i++){this.addClass(_b2a[i]);}}else{if(!this.hasClass(_b2a)){this.dom.className=this.dom.className+" "+_b2a;}}return this;},radioClass:function(_b2c){var _b2d=this.dom.parentNode.childNodes;for(var i=0;i<_b2d.length;i++){var s=_b2d[i];if(s.nodeType==1){YAHOO.util.Dom.removeClass(s,_b2c);}}this.addClass(_b2c);return this;},removeClass:function(_b30){if(_b30 instanceof Array){for(var i=0,len=_b30.length;i<len;i++){this.removeClass(_b30[i]);}}else{var re=new RegExp("(?:^|\\s+)"+_b30+"(?:\\s+|$)","g");var c=this.dom.className;if(re.test(c)){this.dom.className=c.replace(re," ");}}return this;},toggleClass:function(_b34){if(this.hasClass(_b34)){this.removeClass(_b34);}else{this.addClass(_b34);}return this;},hasClass:function(_b35){var re=new RegExp("(?:^|\\s+)"+_b35+"(?:\\s+|$)");return re.test(this.dom.className);},replaceClass:function(_b37,_b38){this.removeClass(_b37);this.addClass(_b38);return this;},getStyle:function(name){return YAHOO.util.Dom.getStyle(this.dom,name);},setStyle:function(name,_b3b){if(typeof name=="string"){YAHOO.util.Dom.setStyle(this.dom,name,_b3b);}else{var D=YAHOO.util.Dom;for(var _b3d in name){if(typeof name[_b3d]!="function"){D.setStyle(this.dom,_b3d,name[_b3d]);}}}return this;},applyStyles:function(_b3e){YAHOO.ext.DomHelper.applyStyles(this.dom,_b3e);},getX:function(){return YAHOO.util.Dom.getX(this.dom);},getY:function(){return YAHOO.util.Dom.getY(this.dom);},getXY:function(){return YAHOO.util.Dom.getXY(this.dom);},setX:function(x,_b40,_b41,_b42,_b43){if(!_b40||!YAHOO.util.Anim){YAHOO.util.Dom.setX(this.dom,x);}else{this.setXY([x,this.getY()],_b40,_b41,_b42,_b43);}return this;},setY:function(y,_b45,_b46,_b47,_b48){if(!_b45||!YAHOO.util.Anim){YAHOO.util.Dom.setY(this.dom,y);}else{this.setXY([this.getX(),y],_b45,_b46,_b47,_b48);}return this;},setLeft:function(left){YAHOO.util.Dom.setStyle(this.dom,"left",this.addUnits(left));return this;},setTop:function(top){YAHOO.util.Dom.setStyle(this.dom,"top",this.addUnits(top));return this;},setRight:function(_b4b){YAHOO.util.Dom.setStyle(this.dom,"right",this.addUnits(_b4b));return this;},setBottom:function(_b4c){YAHOO.util.Dom.setStyle(this.dom,"bottom",this.addUnits(_b4c));return this;},setXY:function(pos,_b4e,_b4f,_b50,_b51){if(!_b4e||!YAHOO.util.Anim){YAHOO.util.Dom.setXY(this.dom,pos);}else{this.anim({points:{to:pos}},_b4f,_b50,_b51,YAHOO.util.Motion);}return this;},setLocation:function(x,y,_b54,_b55,_b56,_b57){this.setXY([x,y],_b54,_b55,_b56,_b57);return this;},moveTo:function(x,y,_b5a,_b5b,_b5c,_b5d){this.setXY([x,y],_b5a,_b5b,_b5c,_b5d);return this;},getRegion:function(){return YAHOO.util.Dom.getRegion(this.dom);},getHeight:function(_b5e){var h=this.dom.offsetHeight;return _b5e!==true?h:h-this.getBorderWidth("tb")-this.getPadding("tb");},getWidth:function(_b60){var w=this.dom.offsetWidth;return _b60!==true?w:w-this.getBorderWidth("lr")-this.getPadding("lr");},getSize:function(_b62){return {width:this.getWidth(_b62),height:this.getHeight(_b62)};},adjustWidth:function(_b63){if(typeof _b63=="number"){if(this.autoBoxAdjust&&!this.isBorderBox()){_b63-=(this.getBorderWidth("lr")+this.getPadding("lr"));}if(_b63<0){_b63=0;}}return _b63;},adjustHeight:function(_b64){if(typeof _b64=="number"){if(this.autoBoxAdjust&&!this.isBorderBox()){_b64-=(this.getBorderWidth("tb")+this.getPadding("tb"));}if(_b64<0){_b64=0;}}return _b64;},setWidth:function(_b65,_b66,_b67,_b68,_b69){_b65=this.adjustWidth(_b65);if(!_b66||!YAHOO.util.Anim){YAHOO.util.Dom.setStyle(this.dom,"width",this.addUnits(_b65));}else{this.anim({width:{to:_b65}},_b67,_b68,_b69||(_b65>this.getWidth()?YAHOO.util.Easing.easeOut:YAHOO.util.Easing.easeIn));}return this;},setHeight:function(_b6a,_b6b,_b6c,_b6d,_b6e){_b6a=this.adjustHeight(_b6a);if(!_b6b||!YAHOO.util.Anim){YAHOO.util.Dom.setStyle(this.dom,"height",this.addUnits(_b6a));}else{this.anim({height:{to:_b6a}},_b6c,_b6d,_b6e||(_b6a>this.getHeight()?YAHOO.util.Easing.easeOut:YAHOO.util.Easing.easeIn));}return this;},setSize:function(_b6f,_b70,_b71,_b72,_b73,_b74){if(!_b71||!YAHOO.util.Anim){this.setWidth(_b6f);this.setHeight(_b70);}else{_b6f=this.adjustWidth(_b6f);_b70=this.adjustHeight(_b70);this.anim({width:{to:_b6f},height:{to:_b70}},_b72,_b73,_b74);}return this;},setBounds:function(x,y,_b77,_b78,_b79,_b7a,_b7b,_b7c){if(!_b79||!YAHOO.util.Anim){this.setWidth(_b77);this.setHeight(_b78);this.setLocation(x,y);}else{_b77=this.adjustWidth(_b77);_b78=this.adjustHeight(_b78);this.anim({points:{to:[x,y]},width:{to:_b77},height:{to:_b78}},_b7a,_b7b,_b7c,YAHOO.util.Motion);}return this;},setRegion:function(_b7d,_b7e,_b7f,_b80,_b81){this.setBounds(_b7d.left,_b7d.top,_b7d.right-_b7d.left,_b7d.bottom-_b7d.top,_b7e,_b7f,_b80,_b81);return this;},addListener:function(_b82,_b83,_b84,_b85){YAHOO.util.Event.addListener(this.dom,_b82,_b83,_b84||this,true);return this;},bufferedListener:function(_b86,fn,_b88,_b89){var task=new YAHOO.ext.util.DelayedTask();_b88=_b88||this;var _b8b=function(){task.delay(_b89||250,fn,_b88,Array.prototype.slice.call(arguments,0));};this.addListener(_b86,_b8b);return _b8b;},addHandler:function(_b8c,_b8d,_b8e,_b8f,_b90){var fn=YAHOO.ext.Element.createStopHandler(_b8d,_b8e,_b8f||this,true);YAHOO.util.Event.addListener(this.dom,_b8c,fn);return this;},on:function(_b92,_b93,_b94,_b95){YAHOO.util.Event.addListener(this.dom,_b92,_b93,_b94||this,true);return this;},addManagedListener:function(_b96,fn,_b98,_b99){return YAHOO.ext.EventManager.on(this.dom,_b96,fn,_b98||this,true);},mon:function(_b9a,fn,_b9c,_b9d){return YAHOO.ext.EventManager.on(this.dom,_b9a,fn,_b9c||this,true);},removeListener:function(_b9e,_b9f,_ba0){YAHOO.util.Event.removeListener(this.dom,_b9e,_b9f);return this;},removeAllListeners:function(){YAHOO.util.Event.purgeElement(this.dom);return this;},setOpacity:function(_ba1,_ba2,_ba3,_ba4,_ba5){if(!_ba2||!YAHOO.util.Anim){YAHOO.util.Dom.setStyle(this.dom,"opacity",_ba1);}else{this.anim({opacity:{to:_ba1}},_ba3,_ba4,_ba5);}return this;},getLeft:function(_ba6){if(!_ba6){return this.getX();}else{return parseInt(this.getStyle("left"),10)||0;}},getRight:function(_ba7){if(!_ba7){return this.getX()+this.getWidth();}else{return (this.getLeft(true)+this.getWidth())||0;}},getTop:function(_ba8){if(!_ba8){return this.getY();}else{return parseInt(this.getStyle("top"),10)||0;}},getBottom:function(_ba9){if(!_ba9){return this.getY()+this.getHeight();}else{return (this.getTop(true)+this.getHeight())||0;}},setAbsolutePositioned:function(_baa){this.setStyle("position","absolute");if(_baa){this.setStyle("z-index",_baa);}return this;},setRelativePositioned:function(_bab){this.setStyle("position","relative");if(_bab){this.setStyle("z-index",_bab);}return this;},clearPositioning:function(){this.setStyle("position","");this.setStyle("left","");this.setStyle("right","");this.setStyle("top","");this.setStyle("bottom","");return this;},getPositioning:function(){return {"position":this.getStyle("position"),"left":this.getStyle("left"),"right":this.getStyle("right"),"top":this.getStyle("top"),"bottom":this.getStyle("bottom")};},getBorderWidth:function(side){return this.addStyles(side,YAHOO.ext.Element.borders);},getPadding:function(side){return this.addStyles(side,YAHOO.ext.Element.paddings);},setPositioning:function(_bae){if(_bae.position){this.setStyle("position",_bae.position);}if(_bae.left){this.setLeft(_bae.left);}if(_bae.right){this.setRight(_bae.right);}if(_bae.top){this.setTop(_bae.top);}if(_bae.bottom){this.setBottom(_bae.bottom);}return this;},setLeftTop:function(left,top){this.dom.style.left=this.addUnits(left);this.dom.style.top=this.addUnits(top);return this;},move:function(_bb1,_bb2,_bb3,_bb4,_bb5,_bb6){var xy=this.getXY();_bb1=_bb1.toLowerCase();switch(_bb1){case "l":case "left":this.moveTo(xy[0]-_bb2,xy[1],_bb3,_bb4,_bb5,_bb6);break;case "r":case "right":this.moveTo(xy[0]+_bb2,xy[1],_bb3,_bb4,_bb5,_bb6);break;case "t":case "top":case "up":this.moveTo(xy[0],xy[1]-_bb2,_bb3,_bb4,_bb5,_bb6);break;case "b":case "bottom":case "down":this.moveTo(xy[0],xy[1]+_bb2,_bb3,_bb4,_bb5,_bb6);break;}return this;},clip:function(){if(!this.isClipped){this.isClipped=true;this.originalClip={"o":this.getStyle("overflow"),"x":this.getStyle("overflow-x"),"y":this.getStyle("overflow-y")};this.setStyle("overflow","hidden");this.setStyle("overflow-x","hidden");this.setStyle("overflow-y","hidden");}return this;},unclip:function(){if(this.isClipped){this.isClipped=false;var o=this.originalClip;if(o.o){this.setStyle("overflow",o.o);}if(o.x){this.setStyle("overflow-x",o.x);}if(o.y){this.setStyle("overflow-y",o.y);}}return this;},alignTo:function(_bb9,_bba,_bbb,_bbc,_bbd,_bbe,_bbf){var _bc0=getEl(_bb9);if(!_bc0){return this;}_bbb=_bbb||[0,0];var r=_bc0.getRegion();_bba=_bba.toLowerCase();switch(_bba){case "bl":this.moveTo(r.left+_bbb[0],r.bottom+_bbb[1],_bbc,_bbd,_bbe,_bbf);break;case "br":this.moveTo(r.right+_bbb[0],r.bottom+_bbb[1],_bbc,_bbd,_bbe,_bbf);break;case "tl":this.moveTo(r.left+_bbb[0],r.top+_bbb[1],_bbc,_bbd,_bbe,_bbf);break;case "tr":this.moveTo(r.right+_bbb[0],r.top+_bbb[1],_bbc,_bbd,_bbe,_bbf);break;}return this;},clearOpacity:function(){if(window.ActiveXObject){this.dom.style.filter="";}else{this.dom.style.opacity="";this.dom.style["-moz-opacity"]="";this.dom.style["-khtml-opacity"]="";}return this;},hide:function(_bc2,_bc3,_bc4,_bc5){this.setVisible(false,_bc2,_bc3,_bc4,_bc5);return this;},show:function(_bc6,_bc7,_bc8,_bc9){this.setVisible(true,_bc6,_bc7,_bc8,_bc9);return this;},addUnits:function(size){if(size===""||size=="auto"||typeof size=="undefined"){return size;}if(typeof size=="number"||!YAHOO.ext.Element.unitPattern.test(size)){return size+this.defaultUnit;}return size;},beginMeasure:function(){var el=this.dom;if(el.offsetWidth||el.offsetHeight){return this;}var _bcc=[];var p=this.dom;while((!el.offsetWidth&&!el.offsetHeight)&&p&&p.tagName&&p.tagName.toLowerCase()!="body"){if(YAHOO.util.Dom.getStyle(p,"display")=="none"){_bcc.push({el:p,visibility:YAHOO.util.Dom.getStyle(p,"visibility")});p.style.visibility="hidden";p.style.display="block";}p=p.parentNode;}this._measureChanged=_bcc;return this;},endMeasure:function(){var _bce=this._measureChanged;if(_bce){for(var i=0,len=_bce.length;i<len;i++){var r=_bce[i];r.el.style.visibility=r.visibility;r.el.style.display="none";}this._measureChanged=null;}return this;},update:function(html,_bd2,_bd3){if(typeof html=="undefined"){html="";}if(_bd2!==true){this.dom.innerHTML=html;if(typeof _bd3=="function"){_bd3();}return this;}var id=YAHOO.util.Dom.generateId();var dom=this.dom;html+="<span id=\""+id+"\"></span>";YAHOO.util.Event.onAvailable(id,function(){var hd=document.getElementsByTagName("head")[0];var re=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/img;var _bd8=/\ssrc=([\'\"])(.*?)\1/i;var _bd9;while(_bd9=re.exec(html)){var _bda=_bd9[0].match(_bd8);if(_bda&&_bda[2]){var s=document.createElement("script");s.src=_bda[2];hd.appendChild(s);}else{if(_bd9[1]&&_bd9[1].length>0){eval(_bd9[1]);}}}var el=document.getElementById(id);if(el){el.parentNode.removeChild(el);}if(typeof _bd3=="function"){_bd3();}});dom.innerHTML=html.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/img,"");return this;},load:function(){var um=this.getUpdateManager();um.update.apply(um,arguments);return this;},getUpdateManager:function(){if(!this.updateManager){this.updateManager=new YAHOO.ext.UpdateManager(this);}return this.updateManager;},unselectable:function(){this.dom.unselectable="on";this.swallowEvent("selectstart",true);this.applyStyles("-moz-user-select:none;-khtml-user-select:none;");return this;},getCenterXY:function(_bde){var _bdf=Math.round((YAHOO.util.Dom.getViewportWidth()-this.getWidth())/2);var _be0=Math.round((YAHOO.util.Dom.getViewportHeight()-this.getHeight())/2);if(!_bde){return [_bdf,_be0];}else{var _be1=document.documentElement.scrollLeft||document.body.scrollLeft||0;var _be2=document.documentElement.scrollTop||document.body.scrollTop||0;return [_bdf+_be1,_be0+_be2];}},center:function(_be3){if(!_be3){this.setXY(this.getCenterXY(true));}else{var box=YAHOO.ext.Element.get(_be3).getBox();this.setXY([box.x+(box.width/2)-(this.getWidth()/2),box.y+(box.height/2)-(this.getHeight()/2)]);}return this;},getChildrenByTagName:function(_be5){var _be6=this.dom.getElementsByTagName(_be5);var len=_be6.length;var ce=new Array(len);for(var i=0;i<len;++i){ce[i]=YAHOO.ext.Element.get(_be6[i],true);}return ce;},getChildrenByClassName:function(_bea,_beb){var _bec=YAHOO.util.Dom.getElementsByClassName(_bea,_beb,this.dom);var len=_bec.length;var ce=new Array(len);for(var i=0;i<len;++i){ce[i]=YAHOO.ext.Element.get(_bec[i],true);}return ce;},isBorderBox:function(){if(typeof this.bbox=="undefined"){var el=this.dom;var b=YAHOO.ext.util.Browser;var _bf2=YAHOO.ext.Strict;this.bbox=((b.isIE&&!_bf2&&el.style.boxSizing!="content-box")||(b.isGecko&&YAHOO.util.Dom.getStyle(el,"-moz-box-sizing")=="border-box")||(!b.isSafari&&YAHOO.util.Dom.getStyle(el,"box-sizing")=="border-box"));}return this.bbox;},getBox:function(_bf3,_bf4){var xy;if(!_bf4){xy=this.getXY();}else{var left=parseInt(YAHOO.util.Dom.getStyle("left"),10)||0;var top=parseInt(YAHOO.util.Dom.getStyle("top"),10)||0;xy=[left,top];}var el=this.dom;var w=el.offsetWidth;var h=el.offsetHeight;if(!_bf3){return {x:xy[0],y:xy[1],width:w,height:h};}else{var l=this.getBorderWidth("l")+this.getPadding("l");var r=this.getBorderWidth("r")+this.getPadding("r");var t=this.getBorderWidth("t")+this.getPadding("t");var b=this.getBorderWidth("b")+this.getPadding("b");return {x:xy[0]+l,y:xy[1]+t,width:w-(l+r),height:h-(t+b)};}},setBox:function(box,_c00,_c01,_c02,_c03,_c04){var w=box.width,h=box.height;if((_c00&&!this.autoBoxAdjust)&&!this.isBorderBox()){w-=(this.getBorderWidth("lr")+this.getPadding("lr"));h-=(this.getBorderWidth("tb")+this.getPadding("tb"));}this.setBounds(box.x,box.y,w,h,_c01,_c02,_c03,_c04);return this;},repaint:function(){var dom=this.dom;YAHOO.util.Dom.addClass(dom,"yui-ext-repaint");setTimeout(function(){YAHOO.util.Dom.removeClass(dom,"yui-ext-repaint");},1);return this;},getMargins:function(side){if(!side){return {top:parseInt(this.getStyle("margin-top"),10)||0,left:parseInt(this.getStyle("margin-left"),10)||0,bottom:parseInt(this.getStyle("margin-bottom"),10)||0,right:parseInt(this.getStyle("margin-right"),10)||0};}else{return this.addStyles(side,YAHOO.ext.Element.margins);}},addStyles:function(_c08,_c09){var val=0;for(var i=0,len=_c08.length;i<len;i++){var w=parseInt(this.getStyle(_c09[_c08.charAt(i)]),10);if(!isNaN(w)){val+=w;}}return val;},createProxy:function(_c0d,_c0e,_c0f){if(_c0e){_c0e=YAHOO.util.Dom.get(_c0e);}else{_c0e=document.body;}_c0d=typeof _c0d=="object"?_c0d:{tag:"div",cls:_c0d};var _c10=YAHOO.ext.DomHelper.append(_c0e,_c0d,true);if(_c0f){_c10.setBox(this.getBox());}return _c10;},createShim:function(){var _c11={tag:"iframe",frameBorder:"no",cls:"yiframe-shim",style:"position:absolute;visibility:hidden;left:0;top:0;overflow:hidden;",src:YAHOO.ext.SSL_SECURE_URL};var shim=YAHOO.ext.DomHelper.append(this.dom.parentNode,_c11,true);shim.setBox(this.getBox());return shim;},remove:function(){this.dom.parentNode.removeChild(this.dom);delete YAHOO.ext.Element.cache[this.dom.id];},addClassOnOver:function(_c13){this.on("mouseover",function(){this.addClass(_c13);},this,true);this.on("mouseout",function(){this.removeClass(_c13);},this,true);return this;},swallowEvent:function(_c14,_c15){var fn=function(e){e.stopPropagation();if(_c15){e.preventDefault();}};this.mon(_c14,fn);return this;},fitToParent:function(_c18){var p=getEl(this.dom.parentNode,true);p.beginMeasure();var box=p.getBox(true,true);p.endMeasure();this.setSize(box.width,box.height);if(_c18===true){YAHOO.ext.EventManager.onWindowResize(this.fitToParent,this,true);}return this;},getNextSibling:function(){var n=this.dom.nextSibling;while(n&&n.nodeType!=1){n=n.nextSibling;}return n;},getPrevSibling:function(){var n=this.dom.previousSibling;while(n&&n.nodeType!=1){n=n.previousSibling;}return n;},appendChild:function(el){el=getEl(el);el.appendTo(this);return this;},createChild:function(_c1e,_c1f){var c;if(_c1f){c=YAHOO.ext.DomHelper.insertBefore(_c1f,_c1e,true);}else{c=YAHOO.ext.DomHelper.append(this.dom,_c1e,true);}return c;},appendTo:function(el){var node=getEl(el).dom;node.appendChild(this.dom);return this;},insertBefore:function(el){var node=getEl(el).dom;node.parentNode.insertBefore(this.dom,node);return this;},insertAfter:function(el){var node=getEl(el).dom;node.parentNode.insertBefore(this.dom,node.nextSibling);return this;},wrap:function(_c27){if(!_c27){_c27={tag:"div"};}var _c28=YAHOO.ext.DomHelper.insertBefore(this.dom,_c27,true);_c28.dom.appendChild(this.dom);return _c28;},replace:function(el){el=getEl(el);this.insertBefore(el);el.remove();return this;},insertHtml:function(_c2a,html){YAHOO.ext.DomHelper.insertHtml(_c2a,this.dom,html);return this;},set:function(o){var el=this.dom;var _c2e=el.setAttribute?true:false;for(var attr in o){if(attr=="style"||typeof o[attr]=="function"){continue;}if(attr=="cls"){el.className=o["cls"];}else{if(_c2e){el.setAttribute(attr,o[attr]);}else{el[attr]=o[attr];}}}YAHOO.ext.DomHelper.applyStyles(el,o.style);return this;},addKeyListener:function(key,fn,_c32){var _c33;if(typeof key!="object"||key instanceof Array){_c33={key:key,fn:fn,scope:_c32};}else{_c33={key:key.key,shift:key.shift,ctrl:key.ctrl,alt:key.alt,fn:fn,scope:_c32};}var map=new YAHOO.ext.KeyMap(this,_c33);return map;},addKeyMap:function(_c35){return new YAHOO.ext.KeyMap(this,_c35);}};YAHOO.ext.Element.prototype.autoBoxAdjust=true;YAHOO.ext.Element.prototype.autoDisplayMode=true;YAHOO.ext.Element.unitPattern=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i;YAHOO.ext.Element.VISIBILITY=1;YAHOO.ext.Element.DISPLAY=2;YAHOO.ext.Element.blockElements=/^(?:address|blockquote|center|dir|div|dl|fieldset|form|h\d|hr|isindex|menu|ol|ul|p|pre|table|dd|dt|li|tbody|tr|td|thead|tfoot|iframe)$/i;YAHOO.ext.Element.borders={l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"};YAHOO.ext.Element.paddings={l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"};YAHOO.ext.Element.margins={l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"};YAHOO.ext.Element.createStopHandler=function(_c36,_c37,_c38,_c39){return function(e){if(e){if(_c36){YAHOO.util.Event.stopEvent(e);}else{YAHOO.util.Event.preventDefault(e);}}_c37.call(_c39&&_c38?_c38:window,e,_c38);};};YAHOO.ext.Element.cache={};YAHOO.ext.Element.get=function(el,_c3c){if(!el){return null;}_c3c=true;if(el instanceof YAHOO.ext.Element){el.dom=YAHOO.util.Dom.get(el.id);YAHOO.ext.Element.cache[el.id]=el;return el;}else{if(el.isComposite){return el;}else{if(el instanceof Array){return YAHOO.ext.Element.select(el);}else{if(el===document){if(!YAHOO.ext.Element.cache["__ydocument"]){var _c3d=function(){};_c3d.prototype=YAHOO.ext.Element.prototype;var o=new _c3d();o.dom=document;YAHOO.ext.Element.cache["__ydocument"]=o;}return YAHOO.ext.Element.cache["__ydocument"];}}}}var key=el;if(typeof el!="string"){if(!el.id&&!_c3c){return null;}YAHOO.util.Dom.generateId(el,"elgen-");key=el.id;}var _c40=YAHOO.ext.Element.cache[key];if(!_c40){_c40=new YAHOO.ext.Element(key);if(!_c40.dom){return null;}YAHOO.ext.Element.cache[key]=_c40;}else{_c40.dom=YAHOO.util.Dom.get(key);}return _c40;};var getEl=YAHOO.ext.Element.get;YAHOO.util.Event.addListener(window,"unload",function(){YAHOO.ext.Element.cache=null;});YAHOO.ext.DomHelper=new function(){var d=document;var _c42=null;this.useDom=false;var _c43=/^(?:base|basefont|br|frame|hr|img|input|isindex|link|meta|nextid|range|spacer|wbr|audioscope|area|param|keygen|col|limittext|spot|tab|over|right|left|choose|atop|of)$/i;this.applyStyles=function(el,_c45){if(_c45){var D=YAHOO.util.Dom;if(typeof _c45=="string"){var re=/\s?([a-z\-]*)\:([^;]*);?/gi;var _c48;while((_c48=re.exec(_c45))!=null){D.setStyle(el,_c48[1],_c48[2]);}}else{if(typeof _c45=="object"){for(var _c49 in _c45){D.setStyle(el,_c49,_c45[_c49]);}}else{if(typeof _c45=="function"){YAHOO.ext.DomHelper.applyStyles(el,_c45.call());}}}}};var _c4a=function(o){var b="";b+="<"+o.tag;for(var attr in o){if(attr=="tag"||attr=="children"||attr=="html"||typeof o[attr]=="function"){continue;}if(attr=="style"){var s=o["style"];if(typeof s=="function"){s=s.call();}if(typeof s=="string"){b+=" style=\""+s+"\"";}else{if(typeof s=="object"){b+=" style=\"";for(var key in s){if(typeof s[key]!="function"){b+=key+":"+s[key]+";";}}b+="\"";}}}else{if(attr=="cls"){b+=" class=\""+o["cls"]+"\"";}else{if(attr=="htmlFor"){b+=" for=\""+o["htmlFor"]+"\"";}else{b+=" "+attr+"=\""+o[attr]+"\"";}}}}if(_c43.test(o.tag)){b+=" />";}else{b+=">";if(o.children){for(var i=0,len=o.children.length;i<len;i++){b+=_c4a(o.children[i],b);}}if(o.html){b+=o.html;}b+="</"+o.tag+">";}return b;};var _c51=function(o,_c53){var el=d.createElement(o.tag);var _c55=el.setAttribute?true:false;for(var attr in o){if(attr=="tag"||attr=="children"||attr=="html"||attr=="style"||typeof o[attr]=="function"){continue;}if(attr=="cls"){el.className=o["cls"];}else{if(_c55){el.setAttribute(attr,o[attr]);}else{el[attr]=o[attr];}}}YAHOO.ext.DomHelper.applyStyles(el,o.style);if(o.children){for(var i=0,len=o.children.length;i<len;i++){_c51(o.children[i],el);}}if(o.html){el.innerHTML=o.html;}if(_c53){_c53.appendChild(el);}return el;};var _c58=function(tag,_c5a,el,html){if(!_c42){_c42=document.createElement("div");}var node;if(tag=="table"||tag=="tbody"){_c42.innerHTML="<table><tbody>"+html+"</tbody></table>";node=_c42.firstChild.firstChild.firstChild;}else{_c42.innerHTML="<table><tbody><tr>"+html+"</tr></tbody></table>";node=_c42.firstChild.firstChild.firstChild.firstChild;}if(_c5a=="beforebegin"){el.parentNode.insertBefore(node,el);return node;}else{if(_c5a=="afterbegin"){el.insertBefore(node,el.firstChild);return node;}else{if(_c5a=="beforeend"){el.appendChild(node);return node;}else{if(_c5a=="afterend"){el.parentNode.insertBefore(node,el.nextSibling);return node;}}}}};this.insertHtml=function(_c5e,el,html){_c5e=_c5e.toLowerCase();if(el.insertAdjacentHTML){var tag=el.tagName.toLowerCase();if(tag=="table"||tag=="tbody"||tag=="tr"){return _c58(tag,_c5e,el,html);}switch(_c5e){case "beforebegin":el.insertAdjacentHTML(_c5e,html);return el.previousSibling;case "afterbegin":el.insertAdjacentHTML(_c5e,html);return el.firstChild;case "beforeend":el.insertAdjacentHTML(_c5e,html);return el.lastChild;case "afterend":el.insertAdjacentHTML(_c5e,html);return el.nextSibling;}throw "Illegal insertion point -> \""+_c5e+"\"";}var _c62=el.ownerDocument.createRange();var frag;switch(_c5e){case "beforebegin":_c62.setStartBefore(el);frag=_c62.createContextualFragment(html);el.parentNode.insertBefore(frag,el);return el.previousSibling;case "afterbegin":if(el.firstChild){_c62.setStartBefore(el.firstChild);}else{_c62.selectNodeContents(el);_c62.collapse(true);}frag=_c62.createContextualFragment(html);el.insertBefore(frag,el.firstChild);return el.firstChild;case "beforeend":if(el.lastChild){_c62.setStartAfter(el.lastChild);}else{_c62.selectNodeContents(el);_c62.collapse(false);}frag=_c62.createContextualFragment(html);el.appendChild(frag);return el.lastChild;case "afterend":_c62.setStartAfter(el);frag=_c62.createContextualFragment(html);el.parentNode.insertBefore(frag,el.nextSibling);return el.nextSibling;}throw "Illegal insertion point -> \""+_c5e+"\"";};this.insertBefore=function(el,o,_c66){el=YAHOO.util.Dom.get(el);var _c67;if(this.useDom){_c67=_c51(o,null);el.parentNode.insertBefore(_c67,el);}else{var html=_c4a(o);_c67=this.insertHtml("beforeBegin",el,html);}return _c66?YAHOO.ext.Element.get(_c67,true):_c67;};this.insertAfter=function(el,o,_c6b){el=YAHOO.util.Dom.get(el);var _c6c;if(this.useDom){_c6c=_c51(o,null);el.parentNode.insertBefore(_c6c,el.nextSibling);}else{var html=_c4a(o);_c6c=this.insertHtml("afterEnd",el,html);}return _c6b?YAHOO.ext.Element.get(_c6c,true):_c6c;};this.append=function(el,o,_c70){el=YAHOO.util.Dom.get(el);var _c71;if(this.useDom){_c71=_c51(o,null);el.appendChild(_c71);}else{var html=_c4a(o);_c71=this.insertHtml("beforeEnd",el,html);}return _c70?YAHOO.ext.Element.get(_c71,true):_c71;};this.overwrite=function(el,o,_c75){el=YAHOO.util.Dom.get(el);el.innerHTML=_c4a(o);return _c75?YAHOO.ext.Element.get(el.firstChild,true):el.firstChild;};this.createTemplate=function(o){var html=_c4a(o);return new YAHOO.ext.DomHelper.Template(html);};}();YAHOO.ext.DomHelper.Template=function(html){this.html=html;};YAHOO.ext.DomHelper.Template.prototype={applyTemplate:function(_c79){if(this.compiled){return this.compiled(_c79);}var _c7a="";var fn=function(_c7c,_c7d){if(typeof _c79[_c7d]!="undefined"){return _c79[_c7d];}else{return _c7a;}};return this.html.replace(this.re,fn);},re:/\{(\w+)\}/g,compile:function(){var html=this.html;var re=this.re;var body=[];body.push("this.compiled = function(values){ return [");var _c81;var _c82=0;while((_c81=re.exec(html))!=null){body.push("'",html.substring(_c82,_c81.index),"', ");body.push("values['",html.substring(_c81.index+1,re.lastIndex-1),"'], ");_c82=re.lastIndex;}body.push("'",html.substr(_c82),"'].join('');};");eval(body.join(""));},insertBefore:function(el,_c84,_c85){el=YAHOO.util.Dom.get(el);var _c86=YAHOO.ext.DomHelper.insertHtml("beforeBegin",el,this.applyTemplate(_c84));return _c85?YAHOO.ext.Element.get(_c86,true):_c86;},insertAfter:function(el,_c88,_c89){el=YAHOO.util.Dom.get(el);var _c8a=YAHOO.ext.DomHelper.insertHtml("afterEnd",el,this.applyTemplate(_c88));return _c89?YAHOO.ext.Element.get(_c8a,true):_c8a;},append:function(el,_c8c,_c8d){el=YAHOO.util.Dom.get(el);var _c8e=YAHOO.ext.DomHelper.insertHtml("beforeEnd",el,this.applyTemplate(_c8c));return _c8d?YAHOO.ext.Element.get(_c8e,true):_c8e;},overwrite:function(el,_c90,_c91){el=YAHOO.util.Dom.get(el);el.innerHTML="";var _c92=YAHOO.ext.DomHelper.insertHtml("beforeEnd",el,this.applyTemplate(_c90));return _c91?YAHOO.ext.Element.get(_c92,true):_c92;}};YAHOO.ext.Template=YAHOO.ext.DomHelper.Template;YAHOO.ext.CompositeElement=function(els){this.elements=[];this.addElements(els);};YAHOO.ext.CompositeElement.prototype={isComposite:true,addElements:function(els){if(!els){return this;}var yels=this.elements;var _c96=yels.length-1;for(var i=0,len=els.length;i<len;i++){yels[++_c96]=getEl(els[i],true);}return this;},invoke:function(fn,args){var els=this.elements;for(var i=0,len=els.length;i<len;i++){YAHOO.ext.Element.prototype[fn].apply(els[i],args);}return this;},add:function(els){if(typeof els=="string"){this.addElements(YAHOO.ext.Element.selectorFunction(string));}else{if(els instanceof Array){this.addElements(els);}else{this.addElements([els]);}}return this;},each:function(fn,_c9e){var els=this.elements;for(var i=0,len=els.length;i<len;i++){fn.call(_c9e||els[i],els[i],this,i);}return this;}};YAHOO.ext.CompositeElementLite=function(els){YAHOO.ext.CompositeElementLite.superclass.constructor.call(this,els);this.el=YAHOO.ext.Element.get(this.elements[0],true);};YAHOO.extendX(YAHOO.ext.CompositeElementLite,YAHOO.ext.CompositeElement,{addElements:function(els){if(els){this.elements=this.elements.concat(els);}return this;},invoke:function(fn,args){var els=this.elements;var el=this.el;for(var i=0,len=els.length;i<len;i++){el.dom=els[i];YAHOO.ext.Element.prototype[fn].apply(el,args);}return this;}});YAHOO.ext.CompositeElement.createCall=function(_ca8,_ca9){if(!_ca8[_ca9]){_ca8[_ca9]=function(){return this.invoke(_ca9,arguments);};}};for(var fnName in YAHOO.ext.Element.prototype){if(typeof YAHOO.ext.Element.prototype[fnName]=="function"){YAHOO.ext.CompositeElement.createCall(YAHOO.ext.CompositeElement.prototype,fnName);}}if(typeof cssQuery=="function"){YAHOO.ext.Element.selectorFunction=cssQuery;}else{if(typeof document.getElementsBySelector=="function"){YAHOO.ext.Element.selectorFunction=document.getElementsBySelector.createDelegate(document);}}YAHOO.ext.Element.select=function(_caa,_cab){var els;if(typeof _caa=="string"){els=YAHOO.ext.Element.selectorFunction(_caa);}else{if(_caa instanceof Array){els=_caa;}else{throw "Invalid selector";}}if(_cab===true){return new YAHOO.ext.CompositeElement(els);}else{return new YAHOO.ext.CompositeElementLite(els);}};var getEls=YAHOO.ext.Element.select;YAHOO.ext.EventManager=new function(){var _cad;var _cae;var _caf=false;this.ieDeferSrc=false;var _cb0;var _cb1;var _cb2=function(){if(!_caf){_caf=true;if(_cae){clearInterval(_cae);}if(_cad){_cad.fire();}}};var _cb3=function(){_cad=new YAHOO.util.CustomEvent("documentready");if(document.addEventListener){YAHOO.util.Event.on(document,"DOMContentLoaded",_cb2);}else{if(YAHOO.ext.util.Browser.isIE){document.write("<s"+"cript id=\"ie-deferred-loader\" defer=\"defer\" src=\""+(YAHOO.ext.EventManager.ieDeferSrc||YAHOO.ext.SSL_SECURE_URL)+"\"></s"+"cript>");YAHOO.util.Event.on("ie-deferred-loader","readystatechange",function(){if(this.readyState=="complete"){_cb2();}});}else{if(YAHOO.ext.util.Browser.isSafari){_cae=setInterval(function(){var rs=document.readyState;if(rs=="loaded"||rs=="complete"){_cb2();}},10);}}}YAHOO.util.Event.on(window,"load",_cb2);};this.wrap=function(fn,_cb6,_cb7){var _cb8=function(e){YAHOO.ext.EventObject.setEvent(e);fn.call(_cb7?_cb6||window:window,YAHOO.ext.EventObject,_cb6);};return _cb8;};this.addListener=function(_cba,_cbb,fn,_cbd,_cbe){var _cbf=this.wrap(fn,_cbd,_cbe);YAHOO.util.Event.addListener(_cba,_cbb,_cbf);return _cbf;};this.removeListener=function(_cc0,_cc1,_cc2){return YAHOO.util.Event.removeListener(_cc0,_cc1,_cc2);};this.on=this.addListener;this.onDocumentReady=function(fn,_cc4,_cc5){if(_caf){fn.call(_cc5?_cc4||window:window,_cc4);return;}if(!_cad){_cb3();}_cad.subscribe(fn,_cc4,_cc5);};this.onWindowResize=function(fn,_cc7,_cc8){if(!_cb0){_cb0=new YAHOO.util.CustomEvent("windowresize");_cb1=new YAHOO.ext.util.DelayedTask(function(){_cb0.fireDirect(YAHOO.util.Dom.getViewportWidth(),YAHOO.util.Dom.getViewportHeight());});YAHOO.util.Event.on(window,"resize",function(){_cb1.delay(50);});}_cb0.subscribe(fn,_cc7,_cc8);},this.removeResizeListener=function(fn,_cca){if(_cb0){_cb0.unsubscribe(fn,_cca);}};};YAHOO.ext.EventObject=new function(){this.browserEvent=null;this.button=-1;this.shiftKey=false;this.ctrlKey=false;this.altKey=false;this.BACKSPACE=8;this.TAB=9;this.RETURN=13;this.ESC=27;this.SPACE=32;this.PAGEUP=33;this.PAGEDOWN=34;this.END=35;this.HOME=36;this.LEFT=37;this.UP=38;this.RIGHT=39;this.DOWN=40;this.DELETE=46;this.F5=116;this.setEvent=function(e){if(e==this){return this;}this.browserEvent=e;if(e){this.button=e.button;this.shiftKey=e.shiftKey;this.ctrlKey=e.ctrlKey;this.altKey=e.altKey;}else{this.button=-1;this.shiftKey=false;this.ctrlKey=false;this.altKey=false;}return this;};this.stopEvent=function(){if(this.browserEvent){YAHOO.util.Event.stopEvent(this.browserEvent);}};this.preventDefault=function(){if(this.browserEvent){YAHOO.util.Event.preventDefault(this.browserEvent);}};this.isNavKeyPress=function(){return (this.browserEvent.keyCode&&this.browserEvent.keyCode>=33&&this.browserEvent.keyCode<=40);};this.stopPropagation=function(){if(this.browserEvent){YAHOO.util.Event.stopPropagation(this.browserEvent);}};this.getCharCode=function(){if(this.browserEvent){return YAHOO.util.Event.getCharCode(this.browserEvent);}return null;};this.getKey=function(){if(this.browserEvent){return this.browserEvent.keyCode||this.browserEvent.charCode;}return null;};this.getPageX=function(){if(this.browserEvent){return YAHOO.util.Event.getPageX(this.browserEvent);}return null;};this.getPageY=function(){if(this.browserEvent){return YAHOO.util.Event.getPageY(this.browserEvent);}return null;};this.getTime=function(){if(this.browserEvent){return YAHOO.util.Event.getTime(this.browserEvent);}return null;};this.getXY=function(){if(this.browserEvent){return YAHOO.util.Event.getXY(this.browserEvent);}return [];};this.getTarget=function(){if(this.browserEvent){return YAHOO.util.Event.getTarget(this.browserEvent);}return null;};this.findTarget=function(_ccc,_ccd){if(_ccd){_ccd=_ccd.toLowerCase();}if(this.browserEvent){function isMatch(el){if(!el){return false;}if(_ccc&&!YAHOO.util.Dom.hasClass(el,_ccc)){return false;}if(_ccd&&el.tagName.toLowerCase()!=_ccd){return false;}return true;}var t=this.getTarget();if(!t||isMatch(t)){return t;}var p=t.parentNode;var b=document.body;while(p&&p!=b){if(isMatch(p)){return p;}p=p.parentNode;}}return null;};this.getRelatedTarget=function(){if(this.browserEvent){return YAHOO.util.Event.getRelatedTarget(this.browserEvent);}return null;};this.getWheelDelta=function(){var e=this.browserEvent;var _cd3=0;if(e.wheelDelta){_cd3=e.wheelDelta/120;if(window.opera){_cd3=-_cd3;}}else{if(e.detail){_cd3=-e.detail/3;}}return _cd3;};this.hasModifier=function(){return this.ctrlKey||this.altKey||this.shiftKey;};}();YAHOO.widget.AutoComplete=function(_cd4,_cd5,_cd6,_cd7){if(_cd4&&_cd5&&_cd6){if(_cd6&&(_cd6 instanceof YAHOO.widget.DataSource)){this.dataSource=_cd6;}else{return;}if(YAHOO.util.Dom.inDocument(_cd4)){if(typeof _cd4=="string"){this._sName="instance"+YAHOO.widget.AutoComplete._nIndex+" "+_cd4;this._oTextbox=document.getElementById(_cd4);}else{this._sName=(_cd4.id)?"instance"+YAHOO.widget.AutoComplete._nIndex+" "+_cd4.id:"instance"+YAHOO.widget.AutoComplete._nIndex;this._oTextbox=_cd4;}}else{return;}if(YAHOO.util.Dom.inDocument(_cd5)){if(typeof _cd5=="string"){this._oContainer=document.getElementById(_cd5);}else{this._oContainer=_cd5;}if(this._oContainer.style.display=="none"){}}else{return;}if(typeof _cd7=="object"){for(var _cd8 in _cd7){if(_cd8){this[_cd8]=_cd7[_cd8];}}}this._initContainer();this._initProps();this._initList();this._initContainerHelpers();var _cd9=this;var _cda=this._oTextbox;var _cdb=this._oContainer._oContent;YAHOO.util.Event.addListener(_cda,"keyup",_cd9._onTextboxKeyUp,_cd9);YAHOO.util.Event.addListener(_cda,"keydown",_cd9._onTextboxKeyDown,_cd9);YAHOO.util.Event.addListener(_cda,"focus",_cd9._onTextboxFocus,_cd9);YAHOO.util.Event.addListener(_cda,"blur",_cd9._onTextboxBlur,_cd9);YAHOO.util.Event.addListener(_cdb,"mouseover",_cd9._onContainerMouseover,_cd9);YAHOO.util.Event.addListener(_cdb,"mouseout",_cd9._onContainerMouseout,_cd9);YAHOO.util.Event.addListener(_cdb,"scroll",_cd9._onContainerScroll,_cd9);YAHOO.util.Event.addListener(_cdb,"resize",_cd9._onContainerResize,_cd9);if(_cda.form){YAHOO.util.Event.addListener(_cda.form,"submit",_cd9._onFormSubmit,_cd9);}YAHOO.util.Event.addListener(_cda,"keypress",_cd9._onTextboxKeyPress,_cd9);this.textboxFocusEvent=new YAHOO.util.CustomEvent("textboxFocus",this);this.textboxKeyEvent=new YAHOO.util.CustomEvent("textboxKey",this);this.dataRequestEvent=new YAHOO.util.CustomEvent("dataRequest",this);this.dataReturnEvent=new YAHOO.util.CustomEvent("dataReturn",this);this.dataErrorEvent=new YAHOO.util.CustomEvent("dataError",this);this.containerExpandEvent=new YAHOO.util.CustomEvent("containerExpand",this);this.typeAheadEvent=new YAHOO.util.CustomEvent("typeAhead",this);this.itemMouseOverEvent=new YAHOO.util.CustomEvent("itemMouseOver",this);this.itemMouseOutEvent=new YAHOO.util.CustomEvent("itemMouseOut",this);this.itemArrowToEvent=new YAHOO.util.CustomEvent("itemArrowTo",this);this.itemArrowFromEvent=new YAHOO.util.CustomEvent("itemArrowFrom",this);this.itemSelectEvent=new YAHOO.util.CustomEvent("itemSelect",this);this.unmatchedItemSelectEvent=new YAHOO.util.CustomEvent("unmatchedItemSelect",this);this.selectionEnforceEvent=new YAHOO.util.CustomEvent("selectionEnforce",this);this.containerCollapseEvent=new YAHOO.util.CustomEvent("containerCollapse",this);this.textboxBlurEvent=new YAHOO.util.CustomEvent("textboxBlur",this);_cda.setAttribute("autocomplete","off");YAHOO.widget.AutoComplete._nIndex++;}else{}};YAHOO.widget.AutoComplete.prototype.dataSource=null;YAHOO.widget.AutoComplete.prototype.minQueryLength=1;YAHOO.widget.AutoComplete.prototype.maxResultsDisplayed=10;YAHOO.widget.AutoComplete.prototype.queryDelay=0.5;YAHOO.widget.AutoComplete.prototype.highlightClassName="yui-ac-highlight";YAHOO.widget.AutoComplete.prototype.prehighlightClassName=null;YAHOO.widget.AutoComplete.prototype.delimChar=null;YAHOO.widget.AutoComplete.prototype.autoHighlight=true;YAHOO.widget.AutoComplete.prototype.typeAhead=false;YAHOO.widget.AutoComplete.prototype.animHoriz=false;YAHOO.widget.AutoComplete.prototype.animVert=true;YAHOO.widget.AutoComplete.prototype.animSpeed=0.3;YAHOO.widget.AutoComplete.prototype.forceSelection=false;YAHOO.widget.AutoComplete.prototype.allowBrowserAutocomplete=true;YAHOO.widget.AutoComplete.prototype.alwaysShowContainer=false;YAHOO.widget.AutoComplete.prototype.useIFrame=false;YAHOO.widget.AutoComplete.prototype.useShadow=false;YAHOO.widget.AutoComplete.prototype.toString=function(){return "AutoComplete "+this._sName;};YAHOO.widget.AutoComplete.prototype.isContainerOpen=function(){return this._bContainerOpen;};YAHOO.widget.AutoComplete.prototype.getListItems=function(){return this._aListItems;};YAHOO.widget.AutoComplete.prototype.getListItemData=function(_cdc){if(_cdc._oResultData){return _cdc._oResultData;}else{return false;}};YAHOO.widget.AutoComplete.prototype.setHeader=function(_cdd){if(_cdd){if(this._oContainer._oContent._oHeader){this._oContainer._oContent._oHeader.innerHTML=_cdd;this._oContainer._oContent._oHeader.style.display="block";}}else{this._oContainer._oContent._oHeader.innerHTML="";this._oContainer._oContent._oHeader.style.display="none";}};YAHOO.widget.AutoComplete.prototype.setFooter=function(_cde){if(_cde){if(this._oContainer._oContent._oFooter){this._oContainer._oContent._oFooter.innerHTML=_cde;this._oContainer._oContent._oFooter.style.display="block";}}else{this._oContainer._oContent._oFooter.innerHTML="";this._oContainer._oContent._oFooter.style.display="none";}};YAHOO.widget.AutoComplete.prototype.setBody=function(_cdf){if(_cdf){if(this._oContainer._oContent._oBody){this._oContainer._oContent._oBody.innerHTML=_cdf;this._oContainer._oContent._oBody.style.display="block";this._oContainer._oContent.style.display="block";}}else{this._oContainer._oContent._oBody.innerHTML="";this._oContainer._oContent.style.display="none";}this._maxResultsDisplayed=0;};YAHOO.widget.AutoComplete.prototype.formatResult=function(_ce0,_ce1){var _ce2=_ce0[0];if(_ce2){return _ce2;}else{return "";}};YAHOO.widget.AutoComplete.prototype.doBeforeExpandContainer=function(_ce3,_ce4){return true;};YAHOO.widget.AutoComplete.prototype.sendQuery=function(_ce5){this._sendQuery(_ce5);};YAHOO.widget.AutoComplete.prototype.textboxFocusEvent=null;YAHOO.widget.AutoComplete.prototype.textboxKeyEvent=null;YAHOO.widget.AutoComplete.prototype.dataRequestEvent=null;YAHOO.widget.AutoComplete.prototype.dataReturnEvent=null;YAHOO.widget.AutoComplete.prototype.dataErrorEvent=null;YAHOO.widget.AutoComplete.prototype.containerExpandEvent=null;YAHOO.widget.AutoComplete.prototype.typeAheadEvent=null;YAHOO.widget.AutoComplete.prototype.itemMouseOverEvent=null;YAHOO.widget.AutoComplete.prototype.itemMouseOutEvent=null;YAHOO.widget.AutoComplete.prototype.itemArrowToEvent=null;YAHOO.widget.AutoComplete.prototype.itemArrowFromEvent=null;YAHOO.widget.AutoComplete.prototype.itemSelectEvent=null;YAHOO.widget.AutoComplete.prototype.unmatchedItemSelectEvent=null;YAHOO.widget.AutoComplete.prototype.selectionEnforceEvent=null;YAHOO.widget.AutoComplete.prototype.containerCollapseEvent=null;YAHOO.widget.AutoComplete.prototype.textboxBlurEvent=null;YAHOO.widget.AutoComplete._nIndex=0;YAHOO.widget.AutoComplete.prototype._sName=null;YAHOO.widget.AutoComplete.prototype._oTextbox=null;YAHOO.widget.AutoComplete.prototype._bFocused=true;YAHOO.widget.AutoComplete.prototype._oAnim=null;YAHOO.widget.AutoComplete.prototype._oContainer=null;YAHOO.widget.AutoComplete.prototype._bContainerOpen=false;YAHOO.widget.AutoComplete.prototype._bOverContainer=false;YAHOO.widget.AutoComplete.prototype._aListItems=null;YAHOO.widget.AutoComplete.prototype._nDisplayedItems=0;YAHOO.widget.AutoComplete.prototype._maxResultsDisplayed=0;YAHOO.widget.AutoComplete.prototype._sCurQuery=null;YAHOO.widget.AutoComplete.prototype._sSavedQuery=null;YAHOO.widget.AutoComplete.prototype._oCurItem=null;YAHOO.widget.AutoComplete.prototype._bItemSelected=false;YAHOO.widget.AutoComplete.prototype._nKeyCode=null;YAHOO.widget.AutoComplete.prototype._nDelayID=-1;YAHOO.widget.AutoComplete.prototype._iFrameSrc="javascript:false;";YAHOO.widget.AutoComplete.prototype._queryInterval=null;YAHOO.widget.AutoComplete.prototype._sLastTextboxValue=null;YAHOO.widget.AutoComplete.prototype._initProps=function(){var _ce6=this.minQueryLength;if(isNaN(_ce6)||(_ce6<1)){_ce6=1;}var _ce7=this.maxResultsDisplayed;if(isNaN(this.maxResultsDisplayed)||(this.maxResultsDisplayed<1)){this.maxResultsDisplayed=10;}var _ce8=this.queryDelay;if(isNaN(this.queryDelay)||(this.queryDelay<0)){this.queryDelay=0.5;}var _ce9=(this.delimChar)?this.delimChar:null;if(_ce9){if(typeof _ce9=="string"){this.delimChar=[_ce9];}else{if(_ce9.constructor!=Array){this.delimChar=null;}}}var _cea=this.animSpeed;if((this.animHoriz||this.animVert)&&YAHOO.util.Anim){if(isNaN(_cea)||(_cea<0)){_cea=0.3;}if(!this._oAnim){oAnim=new YAHOO.util.Anim(this._oContainer._oContent,{},this.animSpeed);this._oAnim=oAnim;}else{this._oAnim.duration=_cea;}}if(this.forceSelection&&this.delimChar){}};YAHOO.widget.AutoComplete.prototype._initContainerHelpers=function(){if(this.useShadow&&!this._oContainer._oShadow){var _ceb=document.createElement("div");_ceb.className="yui-ac-shadow";this._oContainer._oShadow=this._oContainer.appendChild(_ceb);}if(this.useIFrame&&!this._oContainer._oIFrame){var _cec=document.createElement("iframe");_cec.src=this._iFrameSrc;_cec.frameBorder=0;_cec.scrolling="no";_cec.style.position="absolute";_cec.style.width="100%";_cec.style.height="100%";_cec.tabIndex=-1;this._oContainer._oIFrame=this._oContainer.appendChild(_cec);}};YAHOO.widget.AutoComplete.prototype._initContainer=function(){if(!this._oContainer._oContent){var _ced=document.createElement("div");_ced.className="yui-ac-content";_ced.style.display="none";this._oContainer._oContent=this._oContainer.appendChild(_ced);var _cee=document.createElement("div");_cee.className="yui-ac-hd";_cee.style.display="none";this._oContainer._oContent._oHeader=this._oContainer._oContent.appendChild(_cee);var _cef=document.createElement("div");_cef.className="yui-ac-bd";this._oContainer._oContent._oBody=this._oContainer._oContent.appendChild(_cef);var _cf0=document.createElement("div");_cf0.className="yui-ac-ft";_cf0.style.display="none";this._oContainer._oContent._oFooter=this._oContainer._oContent.appendChild(_cf0);}else{}};YAHOO.widget.AutoComplete.prototype._initList=function(){this._aListItems=[];while(this._oContainer._oContent._oBody.hasChildNodes()){var _cf1=this.getListItems();if(_cf1){for(var oldi=_cf1.length-1;oldi>=0;i--){_cf1[oldi]=null;}}this._oContainer._oContent._oBody.innerHTML="";}var _cf3=document.createElement("ul");_cf3=this._oContainer._oContent._oBody.appendChild(_cf3);for(var i=0;i<this.maxResultsDisplayed;i++){var _cf5=document.createElement("li");_cf5=_cf3.appendChild(_cf5);this._aListItems[i]=_cf5;this._initListItem(_cf5,i);}this._maxResultsDisplayed=this.maxResultsDisplayed;};YAHOO.widget.AutoComplete.prototype._initListItem=function(_cf6,_cf7){var _cf8=this;_cf6.style.display="none";_cf6._nItemIndex=_cf7;_cf6.mouseover=_cf6.mouseout=_cf6.onclick=null;YAHOO.util.Event.addListener(_cf6,"mouseover",_cf8._onItemMouseover,_cf8);YAHOO.util.Event.addListener(_cf6,"mouseout",_cf8._onItemMouseout,_cf8);YAHOO.util.Event.addListener(_cf6,"click",_cf8._onItemMouseclick,_cf8);};YAHOO.widget.AutoComplete.prototype._onIMEDetected=function(_cf9){_cf9._enableIntervalDetection();};YAHOO.widget.AutoComplete.prototype._enableIntervalDetection=function(){var _cfa=this._oTextbox.value;var _cfb=this._sLastTextboxValue;if(_cfa!=_cfb){this._sLastTextboxValue=_cfa;this._sendQuery(_cfa);}};YAHOO.widget.AutoComplete.prototype._cancelIntervalDetection=function(_cfc){if(_cfc._queryInterval){clearInterval(_cfc._queryInterval);}};YAHOO.widget.AutoComplete.prototype._isIgnoreKey=function(_cfd){if((_cfd==9)||(_cfd==13)||(_cfd==16)||(_cfd==17)||(_cfd>=18&&_cfd<=20)||(_cfd==27)||(_cfd>=33&&_cfd<=35)||(_cfd>=36&&_cfd<=38)||(_cfd==40)||(_cfd>=44&&_cfd<=45)){return true;}return false;};YAHOO.widget.AutoComplete.prototype._sendQuery=function(_cfe){if(this.minQueryLength==-1){this._toggleContainer(false);return;}var _cff=(this.delimChar)?this.delimChar:null;if(_cff){var _d00=-1;for(var i=_cff.length-1;i>=0;i--){var _d02=_cfe.lastIndexOf(_cff[i]);if(_d02>_d00){_d00=_d02;}}if(_cff[i]==" "){for(var j=_cff.length-1;j>=0;j--){if(_cfe[_d00-1]==_cff[j]){_d00--;break;}}}if(_d00>-1){var _d04=_d00+1;while(_cfe.charAt(_d04)==" "){_d04+=1;}this._sSavedQuery=_cfe.substring(0,_d04);_cfe=_cfe.substr(_d04);}else{if(_cfe.indexOf(this._sSavedQuery)<0){this._sSavedQuery=null;}}}if(_cfe&&(_cfe.length<this.minQueryLength)||(!_cfe&&this.minQueryLength>0)){if(this._nDelayID!=-1){clearTimeout(this._nDelayID);}this._toggleContainer(false);return;}_cfe=encodeURIComponent(_cfe);this._nDelayID=-1;this.dataRequestEvent.fire(this,_cfe);this.dataSource.getResults(this._populateList,_cfe,this);};YAHOO.widget.AutoComplete.prototype._populateList=function(_d05,_d06,_d07){if(_d06===null){_d07.dataErrorEvent.fire(_d07,_d05);}if(!_d07._bFocused||!_d06){return;}var _d08=(navigator.userAgent.toLowerCase().indexOf("opera")!=-1);var _d09=_d07._oContainer._oContent.style;_d09.width=(!_d08)?null:"";_d09.height=(!_d08)?null:"";var _d0a=decodeURIComponent(_d05);_d07._sCurQuery=_d0a;_d07._bItemSelected=false;if(_d07._maxResultsDisplayed!=_d07.maxResultsDisplayed){_d07._initList();}var _d0b=Math.min(_d06.length,_d07.maxResultsDisplayed);_d07._nDisplayedItems=_d0b;if(_d0b>0){_d07._initContainerHelpers();var _d0c=_d07._aListItems;for(var i=_d0b-1;i>=0;i--){var _d0e=_d0c[i];var _d0f=_d06[i];_d0e.innerHTML=_d07.formatResult(_d0f,_d0a);_d0e.style.display="list-item";_d0e._sResultKey=_d0f[0];_d0e._oResultData=_d0f;}for(var j=_d0c.length-1;j>=_d0b;j--){var _d11=_d0c[j];_d11.innerHTML=null;_d11.style.display="none";_d11._sResultKey=null;_d11._oResultData=null;}if(_d07.autoHighlight){var _d12=_d0c[0];_d07._toggleHighlight(_d12,"to");_d07.itemArrowToEvent.fire(_d07,_d12);_d07._typeAhead(_d12,_d05);}else{_d07._oCurItem=null;}var ok=_d07.doBeforeExpandContainer(_d07._oTextbox,_d07._oContainer,_d05,_d06);_d07._toggleContainer(ok);}else{_d07._toggleContainer(false);}_d07.dataReturnEvent.fire(_d07,_d05,_d06);};YAHOO.widget.AutoComplete.prototype._clearSelection=function(){var _d14=this._oTextbox.value;var _d15=(this.delimChar)?this.delimChar[0]:null;var _d16=(_d15)?_d14.lastIndexOf(_d15,_d14.length-2):-1;if(_d16>-1){this._oTextbox.value=_d14.substring(0,_d16);}else{this._oTextbox.value="";}this._sSavedQuery=this._oTextbox.value;this.selectionEnforceEvent.fire(this);};YAHOO.widget.AutoComplete.prototype._textMatchesOption=function(){var _d17=false;for(var i=this._nDisplayedItems-1;i>=0;i--){var _d19=this._aListItems[i];var _d1a=_d19._sResultKey.toLowerCase();if(_d1a==this._sCurQuery.toLowerCase()){_d17=true;break;}}return (_d17);};YAHOO.widget.AutoComplete.prototype._typeAhead=function(_d1b,_d1c){if(!this.typeAhead||(this._nKeyCode==8)){return;}var _d1d=this._oTextbox;var _d1e=this._oTextbox.value;if(!_d1d.setSelectionRange&&!_d1d.createTextRange){return;}var _d1f=_d1e.length;this._updateValue(_d1b);var nEnd=_d1d.value.length;this._selectText(_d1d,_d1f,nEnd);var _d21=_d1d.value.substr(_d1f,nEnd);this.typeAheadEvent.fire(this,_d1c,_d21);};YAHOO.widget.AutoComplete.prototype._selectText=function(_d22,_d23,nEnd){if(_d22.setSelectionRange){_d22.setSelectionRange(_d23,nEnd);}else{if(_d22.createTextRange){var _d25=_d22.createTextRange();_d25.moveStart("character",_d23);_d25.moveEnd("character",nEnd-_d22.value.length);_d25.select();}else{_d22.select();}}};YAHOO.widget.AutoComplete.prototype._toggleContainerHelpers=function(_d26){var _d27=false;var _d28=this._oContainer._oContent.offsetWidth+"px";var _d29=this._oContainer._oContent.offsetHeight+"px";if(this.useIFrame&&this._oContainer._oIFrame){_d27=true;if(_d26){this._oContainer._oIFrame.style.width=_d28;this._oContainer._oIFrame.style.height=_d29;}else{this._oContainer._oIFrame.style.width=0;this._oContainer._oIFrame.style.height=0;}}if(this.useShadow&&this._oContainer._oShadow){_d27=true;if(_d26){this._oContainer._oShadow.style.width=_d28;this._oContainer._oShadow.style.height=_d29;}else{this._oContainer._oShadow.style.width=0;this._oContainer._oShadow.style.height=0;}}};YAHOO.widget.AutoComplete.prototype._toggleContainer=function(_d2a){var _d2b=this._oContainer;if(this.alwaysShowContainer&&this._bContainerOpen){return;}if(!_d2a){this._oContainer._oContent.scrollTop=0;var _d2c=this._aListItems;if(_d2c&&(_d2c.length>0)){for(var i=_d2c.length-1;i>=0;i--){_d2c[i].style.display="none";}}if(this._oCurItem){this._toggleHighlight(this._oCurItem,"from");}this._oCurItem=null;this._nDisplayedItems=0;this._sCurQuery=null;}if(!_d2a&&!this._bContainerOpen){_d2b._oContent.style.display="none";return;}var _d2e=this._oAnim;if(_d2e&&_d2e.getEl()&&(this.animHoriz||this.animVert)){if(!_d2a){this._toggleContainerHelpers(_d2a);}if(_d2e.isAnimated()){_d2e.stop();}var _d2f=_d2b._oContent.cloneNode(true);_d2b.appendChild(_d2f);_d2f.style.top="-9000px";_d2f.style.display="block";var wExp=_d2f.offsetWidth;var hExp=_d2f.offsetHeight;var _d32=(this.animHoriz)?0:wExp;var _d33=(this.animVert)?0:hExp;_d2e.attributes=(_d2a)?{width:{to:wExp},height:{to:hExp}}:{width:{to:_d32},height:{to:_d33}};if(_d2a&&!this._bContainerOpen){_d2b._oContent.style.width=_d32+"px";_d2b._oContent.style.height=_d33+"px";}else{_d2b._oContent.style.width=wExp+"px";_d2b._oContent.style.height=hExp+"px";}_d2b.removeChild(_d2f);_d2f=null;var _d34=this;var _d35=function(){_d2e.onComplete.unsubscribeAll();if(_d2a){_d34.containerExpandEvent.fire(_d34);}else{_d2b._oContent.style.display="none";_d34.containerCollapseEvent.fire(_d34);}_d34._toggleContainerHelpers(_d2a);};_d2b._oContent.style.display="block";_d2e.onComplete.subscribe(_d35);_d2e.animate();this._bContainerOpen=_d2a;}else{if(_d2a){_d2b._oContent.style.display="block";this.containerExpandEvent.fire(this);}else{_d2b._oContent.style.display="none";this.containerCollapseEvent.fire(this);}this._toggleContainerHelpers(_d2a);this._bContainerOpen=_d2a;}};YAHOO.widget.AutoComplete.prototype._toggleHighlight=function(_d36,_d37){var _d38=this.highlightClassName;if(this._oCurItem){YAHOO.util.Dom.removeClass(this._oCurItem,_d38);}if((_d37=="to")&&_d38){YAHOO.util.Dom.addClass(_d36,_d38);this._oCurItem=_d36;}};YAHOO.widget.AutoComplete.prototype._togglePrehighlight=function(_d39,_d3a){if(_d39==this._oCurItem){return;}var _d3b=this.prehighlightClassName;if((_d3a=="mouseover")&&_d3b){YAHOO.util.Dom.addClass(_d39,_d3b);}else{YAHOO.util.Dom.removeClass(_d39,_d3b);}};YAHOO.widget.AutoComplete.prototype._updateValue=function(_d3c){var _d3d=this._oTextbox;var _d3e=(this.delimChar)?(this.delimChar[0]||this.delimChar):null;var _d3f=this._sSavedQuery;var _d40=_d3c._sResultKey;_d3d.focus();_d3d.value="";if(_d3e){if(_d3f){_d3d.value=_d3f;}_d3d.value+=_d40+_d3e;if(_d3e!=" "){_d3d.value+=" ";}}else{_d3d.value=_d40;}if(_d3d.type=="textarea"){_d3d.scrollTop=_d3d.scrollHeight;}var end=_d3d.value.length;this._selectText(_d3d,end,end);this._oCurItem=_d3c;};YAHOO.widget.AutoComplete.prototype._selectItem=function(_d42){this._bItemSelected=true;this._updateValue(_d42);this._cancelIntervalDetection(this);this.itemSelectEvent.fire(this,_d42,_d42._oResultData);this._toggleContainer(false);};YAHOO.widget.AutoComplete.prototype._jumpSelection=function(){if(!this.typeAhead){return;}else{this._toggleContainer(false);}};YAHOO.widget.AutoComplete.prototype._moveSelection=function(_d43){if(this._bContainerOpen){var _d44=this._oCurItem;var _d45=-1;if(_d44){_d45=_d44._nItemIndex;}var _d46=(_d43==40)?(_d45+1):(_d45-1);if(_d46<-2||_d46>=this._nDisplayedItems){return;}if(_d44){this._toggleHighlight(_d44,"from");this.itemArrowFromEvent.fire(this,_d44);}if(_d46==-1){if(this.delimChar&&this._sSavedQuery){if(!this._textMatchesOption()){this._oTextbox.value=this._sSavedQuery;}else{this._oTextbox.value=this._sSavedQuery+this._sCurQuery;}}else{this._oTextbox.value=this._sCurQuery;}this._oCurItem=null;return;}if(_d46==-2){this._toggleContainer(false);return;}var _d47=this._aListItems[_d46];var _d48=this._oContainer._oContent;var _d49=((YAHOO.util.Dom.getStyle(_d48,"overflow")=="auto")||(YAHOO.util.Dom.getStyle(_d48,"overflowY")=="auto"));if(_d49&&(_d46>-1)&&(_d46<this._nDisplayedItems)){if(_d43==40){if((_d47.offsetTop+_d47.offsetHeight)>(_d48.scrollTop+_d48.offsetHeight)){_d48.scrollTop=(_d47.offsetTop+_d47.offsetHeight)-_d48.offsetHeight;}else{if((_d47.offsetTop+_d47.offsetHeight)<_d48.scrollTop){_d48.scrollTop=_d47.offsetTop;}}}else{if(_d47.offsetTop<_d48.scrollTop){this._oContainer._oContent.scrollTop=_d47.offsetTop;}else{if(_d47.offsetTop>(_d48.scrollTop+_d48.offsetHeight)){this._oContainer._oContent.scrollTop=(_d47.offsetTop+_d47.offsetHeight)-_d48.offsetHeight;}}}}this._toggleHighlight(_d47,"to");this.itemArrowToEvent.fire(this,_d47);if(this.typeAhead){this._updateValue(_d47);}}};YAHOO.widget.AutoComplete.prototype._onItemMouseover=function(v,_d4b){if(_d4b.prehighlightClassName){_d4b._togglePrehighlight(this,"mouseover");}else{_d4b._toggleHighlight(this,"to");}_d4b.itemMouseOverEvent.fire(_d4b,this);};YAHOO.widget.AutoComplete.prototype._onItemMouseout=function(v,_d4d){if(_d4d.prehighlightClassName){_d4d._togglePrehighlight(this,"mouseout");}else{_d4d._toggleHighlight(this,"from");}_d4d.itemMouseOutEvent.fire(_d4d,this);};YAHOO.widget.AutoComplete.prototype._onItemMouseclick=function(v,_d4f){_d4f._toggleHighlight(this,"to");_d4f._selectItem(this);};YAHOO.widget.AutoComplete.prototype._onContainerMouseover=function(v,_d51){_d51._bOverContainer=true;};YAHOO.widget.AutoComplete.prototype._onContainerMouseout=function(v,_d53){_d53._bOverContainer=false;if(_d53._oCurItem){_d53._toggleHighlight(_d53._oCurItem,"to");}};YAHOO.widget.AutoComplete.prototype._onContainerScroll=function(v,_d55){_d55._oTextbox.focus();};YAHOO.widget.AutoComplete.prototype._onContainerResize=function(v,_d57){_d57._toggleContainerHelpers(_d57._bContainerOpen);};YAHOO.widget.AutoComplete.prototype._onTextboxKeyDown=function(v,_d59){var _d5a=v.keyCode;switch(_d5a){case 9:if(_d59.delimChar&&(_d59._nKeyCode!=_d5a)){if(_d59._bContainerOpen){YAHOO.util.Event.stopEvent(v);}}if(_d59._oCurItem){_d59._selectItem(_d59._oCurItem);}else{_d59._toggleContainer(false);}break;case 13:if(_d59._nKeyCode!=_d5a){if(_d59._bContainerOpen){YAHOO.util.Event.stopEvent(v);}}if(_d59._oCurItem){_d59._selectItem(_d59._oCurItem);}else{_d59._toggleContainer(false);}break;case 27:_d59._toggleContainer(false);return;case 39:_d59._jumpSelection();break;case 38:YAHOO.util.Event.stopEvent(v);_d59._moveSelection(_d5a);break;case 40:YAHOO.util.Event.stopEvent(v);_d59._moveSelection(_d5a);break;default:break;}};YAHOO.widget.AutoComplete.prototype._onTextboxKeyPress=function(v,_d5c){var _d5d=v.keyCode;var _d5e=(navigator.userAgent.toLowerCase().indexOf("mac")!=-1);if(_d5e){switch(_d5d){case 9:if(_d5c.delimChar&&(_d5c._nKeyCode!=_d5d)){if(_d5c._bContainerOpen){YAHOO.util.Event.stopEvent(v);}}break;case 13:if(_d5c._nKeyCode!=_d5d){if(_d5c._bContainerOpen){YAHOO.util.Event.stopEvent(v);}}break;case 38:case 40:YAHOO.util.Event.stopEvent(v);break;default:break;}}else{if(_d5d==229){_d5c._queryInterval=setInterval(function(){_d5c._onIMEDetected(_d5c);},500);}}};YAHOO.widget.AutoComplete.prototype._onTextboxKeyUp=function(v,_d60){_d60._initProps();var _d61=v.keyCode;_d60._nKeyCode=_d61;var _d62=this.value;if(_d60._isIgnoreKey(_d61)||(_d62.toLowerCase()==_d60._sCurQuery)){return;}else{_d60.textboxKeyEvent.fire(_d60,_d61);}if(_d60.queryDelay>0){var _d63=setTimeout(function(){_d60._sendQuery(_d62);},(_d60.queryDelay*1000));if(_d60._nDelayID!=-1){clearTimeout(_d60._nDelayID);}_d60._nDelayID=_d63;}else{_d60._sendQuery(_d62);}};YAHOO.widget.AutoComplete.prototype._onTextboxFocus=function(v,_d65){_d65._oTextbox.setAttribute("autocomplete","off");_d65._bFocused=true;_d65.textboxFocusEvent.fire(_d65);};YAHOO.widget.AutoComplete.prototype._onTextboxBlur=function(v,_d67){if(!_d67._bOverContainer||(_d67._nKeyCode==9)){if(!_d67._bItemSelected){if(!_d67._bContainerOpen||(_d67._bContainerOpen&&!_d67._textMatchesOption())){if(_d67.forceSelection){_d67._clearSelection();}else{_d67.unmatchedItemSelectEvent.fire(_d67,_d67._sCurQuery);}}}if(_d67._bContainerOpen){_d67._toggleContainer(false);}_d67._cancelIntervalDetection(_d67);_d67._bFocused=false;_d67.textboxBlurEvent.fire(_d67);}};YAHOO.widget.AutoComplete.prototype._onFormSubmit=function(v,_d69){if(_d69.allowBrowserAutocomplete){_d69._oTextbox.setAttribute("autocomplete","on");}else{_d69._oTextbox.setAttribute("autocomplete","off");}};YAHOO.widget.DataSource=function(){};YAHOO.widget.DataSource.ERROR_DATANULL="Response data was null";YAHOO.widget.DataSource.ERROR_DATAPARSE="Response data could not be parsed";YAHOO.widget.DataSource.prototype.maxCacheEntries=15;YAHOO.widget.DataSource.prototype.queryMatchContains=false;YAHOO.widget.DataSource.prototype.queryMatchSubset=false;YAHOO.widget.DataSource.prototype.queryMatchCase=false;YAHOO.widget.DataSource.prototype.toString=function(){return "DataSource "+this._sName;};YAHOO.widget.DataSource.prototype.getResults=function(_d6a,_d6b,_d6c){var _d6d=this._doQueryCache(_d6a,_d6b,_d6c);if(_d6d.length===0){this.queryEvent.fire(this,_d6c,_d6b);this.doQuery(_d6a,_d6b,_d6c);}};YAHOO.widget.DataSource.prototype.doQuery=function(_d6e,_d6f,_d70){};YAHOO.widget.DataSource.prototype.flushCache=function(){if(this._aCache){this._aCache=[];}if(this._aCacheHelper){this._aCacheHelper=[];}this.cacheFlushEvent.fire(this);};YAHOO.widget.DataSource.prototype.queryEvent=null;YAHOO.widget.DataSource.prototype.cacheQueryEvent=null;YAHOO.widget.DataSource.prototype.getResultsEvent=null;YAHOO.widget.DataSource.prototype.getCachedResultsEvent=null;YAHOO.widget.DataSource.prototype.dataErrorEvent=null;YAHOO.widget.DataSource.prototype.cacheFlushEvent=null;YAHOO.widget.DataSource._nIndex=0;YAHOO.widget.DataSource.prototype._sName=null;YAHOO.widget.DataSource.prototype._aCache=null;YAHOO.widget.DataSource.prototype._init=function(){var _d71=this.maxCacheEntries;if(isNaN(_d71)||(_d71<0)){_d71=0;}if(_d71>0&&!this._aCache){this._aCache=[];}this._sName="instance"+YAHOO.widget.DataSource._nIndex;YAHOO.widget.DataSource._nIndex++;this.queryEvent=new YAHOO.util.CustomEvent("query",this);this.cacheQueryEvent=new YAHOO.util.CustomEvent("cacheQuery",this);this.getResultsEvent=new YAHOO.util.CustomEvent("getResults",this);this.getCachedResultsEvent=new YAHOO.util.CustomEvent("getCachedResults",this);this.dataErrorEvent=new YAHOO.util.CustomEvent("dataError",this);this.cacheFlushEvent=new YAHOO.util.CustomEvent("cacheFlush",this);};YAHOO.widget.DataSource.prototype._addCacheElem=function(_d72){var _d73=this._aCache;if(!_d73||!_d72||!_d72.query||!_d72.results){return;}if(_d73.length>=this.maxCacheEntries){_d73.shift();}_d73.push(_d72);};YAHOO.widget.DataSource.prototype._doQueryCache=function(_d74,_d75,_d76){var _d77=[];var _d78=false;var _d79=this._aCache;var _d7a=(_d79)?_d79.length:0;var _d7b=this.queryMatchContains;if((this.maxCacheEntries>0)&&_d79&&(_d7a>0)){this.cacheQueryEvent.fire(this,_d76,_d75);if(!this.queryMatchCase){var _d7c=_d75;_d75=_d75.toLowerCase();}for(var i=_d7a-1;i>=0;i--){var _d7e=_d79[i];var _d7f=_d7e.results;var _d80=(!this.queryMatchCase)?encodeURIComponent(_d7e.query).toLowerCase():encodeURIComponent(_d7e.query);if(_d80==_d75){_d78=true;_d77=_d7f;if(i!=_d7a-1){_d79.splice(i,1);this._addCacheElem(_d7e);}break;}else{if(this.queryMatchSubset){for(var j=_d75.length-1;j>=0;j--){var _d82=_d75.substr(0,j);if(_d80==_d82){_d78=true;for(var k=_d7f.length-1;k>=0;k--){var _d84=_d7f[k];var _d85=(this.queryMatchCase)?encodeURIComponent(_d84[0]).indexOf(_d75):encodeURIComponent(_d84[0]).toLowerCase().indexOf(_d75);if((!_d7b&&(_d85===0))||(_d7b&&(_d85>-1))){_d77.unshift(_d84);}}_d7e={};_d7e.query=_d75;_d7e.results=_d77;this._addCacheElem(_d7e);break;}}if(_d78){break;}}}}if(_d78){this.getCachedResultsEvent.fire(this,_d76,_d7c,_d77);_d74(_d7c,_d77,_d76);}}return _d77;};YAHOO.widget.DS_XHR=function(_d86,_d87,_d88){if(typeof _d88=="object"){for(var _d89 in _d88){this[_d89]=_d88[_d89];}}if(!_d87||(_d87.constructor!=Array)){return;}else{this.schema=_d87;}this.scriptURI=_d86;this._init();};YAHOO.widget.DS_XHR.prototype=new YAHOO.widget.DataSource();YAHOO.widget.DS_XHR.TYPE_JSON=0;YAHOO.widget.DS_XHR.TYPE_XML=1;YAHOO.widget.DS_XHR.TYPE_FLAT=2;YAHOO.widget.DS_XHR.ERROR_DATAXHR="XHR response failed";YAHOO.widget.DS_XHR.prototype.connMgr=YAHOO.util.Connect;YAHOO.widget.DS_XHR.prototype.connTimeout=0;YAHOO.widget.DS_XHR.prototype.scriptURI=null;YAHOO.widget.DS_XHR.prototype.scriptQueryParam="query";YAHOO.widget.DS_XHR.prototype.scriptQueryAppend="";YAHOO.widget.DS_XHR.prototype.responseType=YAHOO.widget.DS_XHR.TYPE_JSON;YAHOO.widget.DS_XHR.prototype.responseStripAfter="\n<!-";YAHOO.widget.DS_XHR.prototype.doQuery=function(_d8a,_d8b,_d8c){var _d8d=(this.responseType==YAHOO.widget.DS_XHR.TYPE_XML);var sUri=this.scriptURI+"?"+this.scriptQueryParam+"="+_d8b;if(this.scriptQueryAppend.length>0){sUri+="&"+this.scriptQueryAppend;}var _d8f=null;var _d90=this;var _d91=function(_d92){if(!_d90._oConn||(_d92.tId!=_d90._oConn.tId)){_d90.dataErrorEvent.fire(_d90,_d8c,_d8b,YAHOO.widget.DataSource.ERROR_DATANULL);return;}for(var foo in _d92){}if(!_d8d){_d92=_d92.responseText;}else{_d92=_d92.responseXML;}if(_d92===null){_d90.dataErrorEvent.fire(_d90,_d8c,_d8b,YAHOO.widget.DataSource.ERROR_DATANULL);return;}var _d94=_d90.parseResponse(_d8b,_d92,_d8c);var _d95={};_d95.query=decodeURIComponent(_d8b);_d95.results=_d94;if(_d94===null){_d90.dataErrorEvent.fire(_d90,_d8c,_d8b,YAHOO.widget.DataSource.ERROR_DATAPARSE);_d94=[];}else{_d90.getResultsEvent.fire(_d90,_d8c,_d8b,_d94);_d90._addCacheElem(_d95);}_d8a(_d8b,_d94,_d8c);};var _d96=function(_d97){_d90.dataErrorEvent.fire(_d90,_d8c,_d8b,YAHOO.widget.DS_XHR.ERROR_DATAXHR);return;};var _d98={success:_d91,failure:_d96};if(!isNaN(this.connTimeout)&&this.connTimeout>0){_d98.timeout=this.connTimeout;}if(this._oConn){this.connMgr.abort(this._oConn);}_d90._oConn=this.connMgr.asyncRequest("GET",sUri,_d98,null);};YAHOO.widget.DS_XHR.prototype.parseResponse=function(_d99,_d9a,_d9b){var _d9c=this.schema;var _d9d=[];var _d9e=false;var nEnd=((this.responseStripAfter!=="")&&(_d9a.indexOf))?_d9a.indexOf(this.responseStripAfter):-1;if(nEnd!=-1){_d9a=_d9a.substring(0,nEnd);}switch(this.responseType){case YAHOO.widget.DS_XHR.TYPE_JSON:var _da0;if(window.JSON&&(navigator.userAgent.toLowerCase().indexOf("khtml")==-1)){var _da1=JSON.parse(_d9a);if(!_da1){_d9e=true;break;}else{try{_da0=eval("jsonObjParsed."+_d9c[0]);}catch(e){_d9e=true;break;}}}else{try{while(_d9a.substring(0,1)==" "){_d9a=_d9a.substring(1,_d9a.length);}if(_d9a.indexOf("{")<0){_d9e=true;break;}if(_d9a.indexOf("{}")===0){break;}var _da2=eval("("+_d9a+")");if(!_da2){_d9e=true;break;}_da0=eval("(jsonObjRaw."+_d9c[0]+")");}catch(e){_d9e=true;break;}}if(!_da0){_d9e=true;break;}if(_da0.constructor!=Array){_da0=[_da0];}for(var i=_da0.length-1;i>=0;i--){var _da4=[];var _da5=_da0[i];for(var j=_d9c.length-1;j>=1;j--){var _da7=_da5[_d9c[j]];if(!_da7){_da7="";}_da4.unshift(_da7);}if(_da4.length==1){_da4.push(_da5);}_d9d.unshift(_da4);}break;case YAHOO.widget.DS_XHR.TYPE_XML:var _da8=_d9a.getElementsByTagName(_d9c[0]);if(!_da8){_d9e=true;break;}for(var k=_da8.length-1;k>=0;k--){var _daa=_da8.item(k);var _dab=[];for(var m=_d9c.length-1;m>=1;m--){var _dad=null;var _dae=_daa.attributes.getNamedItem(_d9c[m]);if(_dae){_dad=_dae.value;}else{var _daf=_daa.getElementsByTagName(_d9c[m]);if(_daf&&_daf.item(0)&&_daf.item(0).firstChild){_dad=_daf.item(0).firstChild.nodeValue;}else{_dad="";}}_dab.unshift(_dad);}_d9d.unshift(_dab);}break;case YAHOO.widget.DS_XHR.TYPE_FLAT:if(_d9a.length>0){var _db0=_d9a.length-_d9c[0].length;if(_d9a.substr(_db0)==_d9c[0]){_d9a=_d9a.substr(0,_db0);}var _db1=_d9a.split(_d9c[0]);for(var n=_db1.length-1;n>=0;n--){_d9d[n]=_db1[n].split(_d9c[1]);}}break;default:break;}_d99=null;_d9a=null;_d9b=null;if(_d9e){return null;}else{return _d9d;}};YAHOO.widget.DS_XHR.prototype._oConn=null;YAHOO.widget.DS_JSFunction=function(_db3,_db4){if(typeof _db4=="object"){for(var _db5 in _db4){this[_db5]=_db4[_db5];}}if(!_db3||(_db3.constructor!=Function)){return;}else{this.dataFunction=_db3;this._init();}};YAHOO.widget.DS_JSFunction.prototype=new YAHOO.widget.DataSource();YAHOO.widget.DS_JSFunction.prototype.dataFunction=null;YAHOO.widget.DS_JSFunction.prototype.doQuery=function(_db6,_db7,_db8){var _db9=this.dataFunction;var _dba=[];_dba=_db9(_db7);if(_dba===null){this.dataErrorEvent.fire(this,_db8,_db7,YAHOO.widget.DataSource.ERROR_DATANULL);return;}var _dbb={};_dbb.query=decodeURIComponent(_db7);_dbb.results=_dba;this._addCacheElem(_dbb);this.getResultsEvent.fire(this,_db8,_db7,_dba);_db6(_db7,_dba,_db8);return;};YAHOO.widget.DS_JSArray=function(_dbc,_dbd){if(typeof _dbd=="object"){for(var _dbe in _dbd){this[_dbe]=_dbd[_dbe];}}if(!_dbc||(_dbc.constructor!=Array)){return;}else{this.data=_dbc;this._init();}};YAHOO.widget.DS_JSArray.prototype=new YAHOO.widget.DataSource();YAHOO.widget.DS_JSArray.prototype.data=null;YAHOO.widget.DS_JSArray.prototype.doQuery=function(_dbf,_dc0,_dc1){var _dc2=this.data;var _dc3=[];var _dc4=false;var _dc5=this.queryMatchContains;if(_dc0){if(!this.queryMatchCase){_dc0=_dc0.toLowerCase();}for(var i=_dc2.length-1;i>=0;i--){var _dc7=[];if(_dc2[i]){if(_dc2[i].constructor==String){_dc7[0]=_dc2[i];}else{if(_dc2[i].constructor==Array){_dc7=_dc2[i];}}}if(_dc7[0]&&(_dc7[0].constructor==String)){var _dc8=(this.queryMatchCase)?encodeURIComponent(_dc7[0]).indexOf(_dc0):encodeURIComponent(_dc7[0]).toLowerCase().indexOf(_dc0);if((!_dc5&&(_dc8===0))||(_dc5&&(_dc8>-1))){_dc3.unshift(_dc7);}}}}this.getResultsEvent.fire(this,_dc1,_dc0,_dc3);_dbf(_dc0,_dc3,_dc1);};YAHOO.ext.TabPanel=function(_dc9,_dca){this.el=getEl(_dc9,true);this.tabPosition="top";this.currentTabWidth=0;this.minTabWidth=40;this.maxTabWidth=250;this.preferredTabWidth=175;this.resizeTabs=false;this.monitorResize=true;if(_dca){if(typeof _dca=="boolean"){this.tabPosition=_dca?"bottom":"top";}else{YAHOO.ext.util.Config.apply(this,_dca);}}if(this.tabPosition=="bottom"){this.bodyEl=getEl(this.createBody(this.el.dom));this.el.addClass("ytabs-bottom");}this.stripWrap=getEl(this.createStrip(this.el.dom),true);this.stripEl=getEl(this.createStripList(this.stripWrap.dom),true);this.stripBody=getEl(this.stripWrap.dom.firstChild.firstChild,true);if(YAHOO.ext.util.Browser.isIE){YAHOO.util.Dom.setStyle(this.stripWrap.dom.firstChild,"overflow-x","hidden");}if(this.tabPosition!="bottom"){this.bodyEl=getEl(this.createBody(this.el.dom));this.el.addClass("ytabs-top");}this.items=[];this.bodyEl.setStyle("position","relative");if(!this.items.indexOf){this.items.indexOf=function(o){for(var i=0,len=this.length;i<len;i++){if(this[i]==o){return i;}}return -1;};}this.active=null;this.onTabChange=new YAHOO.util.CustomEvent("TabItem.onTabChange");this.activateDelegate=this.activate.createDelegate(this);this.events={"tabchange":this.onTabChange,"beforetabchange":new YAHOO.util.CustomEvent("beforechange")};YAHOO.ext.EventManager.onWindowResize(this.onResize,this,true);this.cpad=this.el.getPadding("lr");this.hiddenCount=0;};YAHOO.ext.TabPanel.prototype={fireEvent:YAHOO.ext.util.Observable.prototype.fireEvent,on:YAHOO.ext.util.Observable.prototype.on,addListener:YAHOO.ext.util.Observable.prototype.addListener,delayedListener:YAHOO.ext.util.Observable.prototype.delayedListener,removeListener:YAHOO.ext.util.Observable.prototype.removeListener,purgeListeners:YAHOO.ext.util.Observable.prototype.purgeListeners,addTab:function(id,text,_dcf,_dd0){var item=new YAHOO.ext.TabPanelItem(this,id,text,_dd0);this.addTabItem(item);if(_dcf){item.setContent(_dcf);}return item;},getTab:function(id){return this.items[id];},hideTab:function(id){var t=this.items[id];if(!t.isHidden()){t.setHidden(true);this.hiddenCount++;this.autoSizeTabs();}},unhideTab:function(id){var t=this.items[id];if(t.isHidden()){t.setHidden(false);this.hiddenCount--;this.autoSizeTabs();}},addTabItem:function(item){this.items[item.id]=item;this.items.push(item);if(this.resizeTabs){item.setWidth(this.currentTabWidth||this.preferredTabWidth);this.autoSizeTabs();}else{item.autoSize();}},removeTab:function(id){var _dd9=this.items;var tab=_dd9[id];if(!tab){return;}var _ddb=_dd9.indexOf(tab);if(this.active==tab&&_dd9.length>1){var _ddc=this.getNextAvailable(_ddb);if(_ddc){_ddc.activate();}}this.stripEl.dom.removeChild(tab.pnode.dom);if(tab.bodyEl.dom.parentNode==this.bodyEl.dom){this.bodyEl.dom.removeChild(tab.bodyEl.dom);}_dd9.splice(_ddb,1);delete this.items[tab.id];tab.fireEvent("close",tab);tab.purgeListeners();this.autoSizeTabs();},getNextAvailable:function(_ddd){var _dde=this.items;var _ddf=_ddd;while(_ddf<_dde.length){var item=_dde[++_ddf];if(item&&!item.isHidden()){return item;}}var _de1=_ddd;while(_de1>=0){var item=_dde[--_de1];if(item&&!item.isHidden()){return item;}}return null;},disableTab:function(id){var tab=this.items[id];if(tab&&this.active!=tab){tab.disable();}},enableTab:function(id){var tab=this.items[id];tab.enable();},activate:function(id){var tab=this.items[id];if(tab==this.active){return tab;}var e={};this.fireEvent("beforetabchange",this,e,tab);if(e.cancel!==true&&!tab.disabled){if(this.active){this.active.hide();}this.active=this.items[id];this.active.show();this.onTabChange.fireDirect(this,this.active);}return tab;},getActiveTab:function(){return this.active;},syncHeight:function(_dea){var _deb=(_dea||this.el.getHeight())-this.el.getBorderWidth("tb")-this.el.getPadding("tb");var bm=this.bodyEl.getMargins();var _ded=_deb-(this.stripWrap.getHeight()||0)-(bm.top+bm.bottom);this.bodyEl.setHeight(_ded);return _ded;},onResize:function(){if(this.monitorResize){this.autoSizeTabs();}},beginUpdate:function(){this.updating=true;},endUpdate:function(){this.updating=false;this.autoSizeTabs();},autoSizeTabs:function(){var _dee=this.items.length;var _def=_dee-this.hiddenCount;if(!this.resizeTabs||_dee<1||_def<1||this.updating){return;}var w=Math.max(this.el.getWidth()-this.cpad,10);var _df1=Math.floor(w/_def);var b=this.stripBody;if(b.getWidth()>w){var tabs=this.items;this.setTabWidth(Math.max(_df1,this.minTabWidth));if(_df1<this.minTabWidth){}}else{if(this.currentTabWidth<this.preferredTabWidth){this.setTabWidth(Math.min(_df1,this.preferredTabWidth));}}},getCount:function(){return this.items.length;},setTabWidth:function(_df4){this.currentTabWidth=_df4;for(var i=0,len=this.items.length;i<len;i++){if(!this.items[i].isHidden()){this.items[i].setWidth(_df4);}}},destroy:function(_df6){YAHOO.ext.EventManager.removeResizeListener(this.onResize,this);for(var i=0,len=this.items.length;i<len;i++){this.items[i].purgeListeners();}if(_df6===true){this.el.update("");this.el.remove();}}};YAHOO.ext.TabPanelItem=function(_df8,id,text,_dfb){this.tabPanel=_df8;this.id=id;this.disabled=false;this.text=text;this.loaded=false;this.closable=_dfb;this.bodyEl=getEl(_df8.createItemBody(_df8.bodyEl.dom,id));this.bodyEl.setVisibilityMode(YAHOO.ext.Element.VISIBILITY);this.bodyEl.setStyle("display","block");this.bodyEl.setStyle("zoom","1");this.hideAction();var els=_df8.createStripElements(_df8.stripEl.dom,text,_dfb);this.el=getEl(els.el,true);this.inner=getEl(els.inner,true);this.textEl=getEl(this.el.dom.firstChild.firstChild.firstChild,true);this.pnode=getEl(els.el.parentNode,true);this.el.mon("click",this.onTabClick,this,true);if(_dfb){var c=getEl(els.close,true);c.dom.title=this.closeText;c.addClassOnOver("close-over");c.mon("click",this.closeClick,this,true);}this.onActivate=new YAHOO.util.CustomEvent("TabItem.onActivate");this.onDeactivate=new YAHOO.util.CustomEvent("TabItem.onDeactivate");this.events={"activate":this.onActivate,"beforeclose":new YAHOO.util.CustomEvent("beforeclose"),"close":new YAHOO.util.CustomEvent("close"),"deactivate":this.onDeactivate};this.hidden=false;};YAHOO.ext.TabPanelItem.prototype={fireEvent:YAHOO.ext.util.Observable.prototype.fireEvent,on:YAHOO.ext.util.Observable.prototype.on,addListener:YAHOO.ext.util.Observable.prototype.addListener,delayedListener:YAHOO.ext.util.Observable.prototype.delayedListener,removeListener:YAHOO.ext.util.Observable.prototype.removeListener,purgeListeners:function(){YAHOO.ext.util.Observable.prototype.purgeListeners.call(this);this.el.removeAllListeners();},show:function(){this.pnode.addClass("on");this.showAction();if(YAHOO.ext.util.Browser.isOpera){this.tabPanel.stripWrap.repaint();}this.onActivate.fireDirect(this.tabPanel,this);},isActive:function(){return this.tabPanel.getActiveTab()==this;},hide:function(){this.pnode.removeClass("on");this.hideAction();this.onDeactivate.fireDirect(this.tabPanel,this);},hideAction:function(){this.bodyEl.setStyle("position","absolute");this.bodyEl.setLeft("-20000px");this.bodyEl.setTop("-20000px");this.bodyEl.hide();},showAction:function(){this.bodyEl.setStyle("position","relative");this.bodyEl.setTop("");this.bodyEl.setLeft("");this.bodyEl.show();this.tabPanel.el.repaint.defer(1);},setTooltip:function(text){this.textEl.dom.title=text;},onTabClick:function(e){e.preventDefault();this.tabPanel.activate(this.id);},getWidth:function(){return this.inner.getWidth();},setWidth:function(_e00){var _e01=_e00-this.pnode.getPadding("lr");this.inner.setWidth(_e01);this.textEl.setWidth(_e01-this.inner.getPadding("lr"));this.pnode.setWidth(_e00);},setHidden:function(_e02){this.hidden=_e02;this.pnode.setStyle("display",_e02?"none":"");},isHidden:function(){return this.hidden;},getText:function(){return this.text;},autoSize:function(){this.el.beginMeasure();this.textEl.setWidth(1);this.setWidth(this.textEl.dom.scrollWidth+this.pnode.getPadding("lr")+this.inner.getPadding("lr"));this.el.endMeasure();},setText:function(text){this.text=text;this.textEl.update(text);this.textEl.dom.title=text;if(!this.tabPanel.resizeTabs){this.autoSize();}},activate:function(){this.tabPanel.activate(this.id);},disable:function(){if(this.tabPanel.active!=this){this.disabled=true;this.pnode.addClass("disabled");}},enable:function(){this.disabled=false;this.pnode.removeClass("disabled");},setContent:function(_e04,_e05){this.bodyEl.update(_e04,_e05);},getUpdateManager:function(){return this.bodyEl.getUpdateManager();},setUrl:function(url,_e07,_e08){if(this.refreshDelegate){this.onActivate.unsubscribe(this.refreshDelegate);}this.refreshDelegate=this._handleRefresh.createDelegate(this,[url,_e07,_e08]);this.onActivate.subscribe(this.refreshDelegate);return this.bodyEl.getUpdateManager();},_handleRefresh:function(url,_e0a,_e0b){if(!_e0b||!this.loaded){var _e0c=this.bodyEl.getUpdateManager();_e0c.update(url,_e0a,this._setLoaded.createDelegate(this));}},refresh:function(){if(this.refreshDelegate){this.loaded=false;this.refreshDelegate();}},_setLoaded:function(){this.loaded=true;},closeClick:function(e){var e={};this.fireEvent("beforeclose",this,e);if(e.cancel!==true){this.tabPanel.removeTab(this.id);}},closeText:"Close this tab"};YAHOO.ext.TabPanel.prototype.createStrip=function(_e0f){var _e10=document.createElement("div");_e10.className="ytab-wrap";_e0f.appendChild(_e10);return _e10;};YAHOO.ext.TabPanel.prototype.createStripList=function(_e11){_e11.innerHTML="<div class=\"ytab-strip-wrap\"><table class=\"ytab-strip\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\"><tbody><tr></tr></tbody></table></div>";return _e11.firstChild.firstChild.firstChild.firstChild;};YAHOO.ext.TabPanel.prototype.createBody=function(_e12){var body=document.createElement("div");YAHOO.util.Dom.generateId(body,"tab-body");YAHOO.util.Dom.addClass(body,"yui-ext-tabbody");_e12.appendChild(body);return body;};YAHOO.ext.TabPanel.prototype.createItemBody=function(_e14,id){var body=YAHOO.util.Dom.get(id);if(!body){body=document.createElement("div");body.id=id;}YAHOO.util.Dom.addClass(body,"yui-ext-tabitembody");_e14.insertBefore(body,_e14.firstChild);return body;};YAHOO.ext.TabPanel.prototype.createStripElements=function(_e17,text,_e19){var td=document.createElement("td");_e17.appendChild(td);if(_e19){td.className="ytab-closable";if(!this.closeTpl){this.closeTpl=new YAHOO.ext.Template("<a href=\"#\" class=\"ytab-right\"><span class=\"ytab-left\"><em class=\"ytab-inner\">"+"<span unselectable=\"on\" title=\"{text}\" class=\"ytab-text\">{text}</span>"+"<div unselectable=\"on\" class=\"close-icon\">&#160;</div></em></span></a>");}var el=this.closeTpl.overwrite(td,{"text":text});var _e1c=el.getElementsByTagName("div")[0];var _e1d=el.getElementsByTagName("em")[0];return {"el":el,"close":_e1c,"inner":_e1d};}else{if(!this.tabTpl){this.tabTpl=new YAHOO.ext.Template("<a href=\"#\" class=\"ytab-right\"><span class=\"ytab-left\"><em class=\"ytab-inner\">"+"<span unselectable=\"on\" title=\"{text}\" class=\"ytab-text\">{text}</span></em></span></a>");}var el=this.tabTpl.overwrite(td,{"text":text});var _e1f=el.getElementsByTagName("em")[0];return {"el":el,"inner":_e1f};}};YAHOO.ext.Resizable=function(el,_e21){var _e22=YAHOO.ext.Element.get;this.el=_e22(el,true);this.el.autoBoxAdjust=true;if(this.el.getStyle("position")!="absolute"){this.el.setStyle("position","relative");}var dh=YAHOO.ext.DomHelper;var tpl=dh.createTemplate({tag:"div",cls:"yresizable-handle yresizable-handle-{0}",html:"&nbsp;"});this.east=_e22(tpl.append(this.el.dom,["east"]),true);this.south=_e22(tpl.append(this.el.dom,["south"]),true);if(_e21&&_e21.multiDirectional){this.west=_e22(tpl.append(this.el.dom,["west"]),true);this.north=_e22(tpl.append(this.el.dom,["north"]),true);}this.corner=_e22(tpl.append(this.el.dom,["southeast"]),true);this.proxy=_e22(dh.insertBefore(document.body.firstChild,{tag:"div",cls:"yresizable-proxy",id:this.el.id+"-rzproxy"}),true);this.proxy.autoBoxAdjust=true;this.moveHandler=YAHOO.ext.EventManager.wrap(this.onMouseMove,this,true);this.upHandler=YAHOO.ext.EventManager.wrap(this.onMouseUp,this,true);this.selHandler=YAHOO.ext.EventManager.wrap(this.cancelSelection,this,true);this.events={"beforeresize":new YAHOO.util.CustomEvent(),"resize":new YAHOO.util.CustomEvent()};this.dir=null;this.resizeChild=false;this.adjustments=[0,0];this.minWidth=5;this.minHeight=5;this.maxWidth=10000;this.maxHeight=10000;this.enabled=true;this.animate=false;this.duration=0.35;this.dynamic=false;this.multiDirectional=false;this.disableTrackOver=false;this.easing=YAHOO.util.Easing?YAHOO.util.Easing.easeOutStrong:null;YAHOO.ext.util.Config.apply(this,_e21);if(this.resizeChild){if(typeof this.resizeChild=="boolean"){this.resizeChild=YAHOO.ext.Element.get(this.el.dom.firstChild,true);}else{this.resizeChild=YAHOO.ext.Element.get(this.resizeChild,true);}}var _e25=this.onMouseDown.createDelegate(this);this.east.mon("mousedown",_e25);this.south.mon("mousedown",_e25);if(this.multiDirectional){this.west.mon("mousedown",_e25);this.north.mon("mousedown",_e25);}this.corner.mon("mousedown",_e25);if(!this.disableTrackOver){var _e26=this.onMouseOver.createDelegate(this);var mout=this.onMouseOut.createDelegate(this);this.east.mon("mouseover",_e26);this.east.mon("mouseout",mout);this.south.mon("mouseover",_e26);this.south.mon("mouseout",mout);if(this.multiDirectional){this.west.mon("mouseover",_e26);this.west.mon("mouseout",mout);this.north.mon("mouseover",_e26);this.north.mon("mouseout",mout);}this.corner.mon("mouseover",_e26);this.corner.mon("mouseout",mout);}this.updateChildSize();};YAHOO.extendX(YAHOO.ext.Resizable,YAHOO.ext.util.Observable,{resizeTo:function(_e28,_e29){this.el.setSize(_e28,_e29);this.fireEvent("resize",this,_e28,_e29,null);},cancelSelection:function(e){e.preventDefault();},startSizing:function(e){this.fireEvent("beforeresize",this,e);if(this.enabled){e.preventDefault();this.startBox=this.el.getBox();this.startPoint=e.getXY();this.offsets=[(this.startBox.x+this.startBox.width)-this.startPoint[0],(this.startBox.y+this.startBox.height)-this.startPoint[1]];this.proxy.setBox(this.startBox);if(!this.dynamic){this.proxy.show();}YAHOO.util.Event.on(document.body,"selectstart",this.selHandler);YAHOO.util.Event.on(document.body,"mousemove",this.moveHandler);YAHOO.util.Event.on(document.body,"mouseup",this.upHandler);}},onMouseDown:function(e){if(this.enabled){var t=e.getTarget();if(t==this.corner.dom){this.dir="both";this.proxy.setStyle("cursor",this.corner.getStyle("cursor"));this.startSizing(e);}else{if(t==this.east.dom){this.dir="east";this.proxy.setStyle("cursor",this.east.getStyle("cursor"));this.startSizing(e);}else{if(t==this.south.dom){this.dir="south";this.proxy.setStyle("cursor",this.south.getStyle("cursor"));this.startSizing(e);}else{if(t==this.west.dom){this.dir="west";this.proxy.setStyle("cursor",this.west.getStyle("cursor"));this.startSizing(e);}else{if(t==this.north.dom){this.dir="north";this.proxy.setStyle("cursor",this.north.getStyle("cursor"));this.startSizing(e);}}}}}}},onMouseUp:function(e){YAHOO.util.Event.removeListener(document.body,"selectstart",this.selHandler);YAHOO.util.Event.removeListener(document.body,"mousemove",this.moveHandler);YAHOO.util.Event.removeListener(document.body,"mouseup",this.upHandler);var size=this.resizeElement();this.fireEvent("resize",this,size.width,size.height,e);},updateChildSize:function(){if(this.resizeChild&&this.el.dom.offsetWidth){var el=this.el;var _e31=this.resizeChild;var adj=this.adjustments;setTimeout(function(){var b=el.getBox(true);_e31.setSize(b.width+adj[0],b.height+adj[1]);},1);}},snap:function(_e34,inc){if(!inc||!_e34){return _e34;}var _e36=_e34;var m=_e34%inc;if(m>0){if(m>(inc/2)){_e36=_e34+(inc-m);}else{_e36=_e34-m;}}return _e36;},resizeElement:function(){var box=this.proxy.getBox();box.width=this.snap(box.width,this.widthIncrement);box.height=this.snap(box.height,this.heightIncrement);if(this.multiDirectional){this.el.setBox(box,false,this.animate,this.duration,null,this.easing);}else{this.el.setSize(box.width,box.height,this.animate,this.duration,null,this.easing);}this.updateChildSize();this.proxy.hide();return box;},onMouseMove:function(e){if(this.enabled){var xy=e.getXY();if(this.dir=="both"||this.dir=="east"||this.dir=="south"){var w=Math.min(Math.max(this.minWidth,xy[0]-this.startBox.x+this.offsets[0]),this.maxWidth);var h=Math.min(Math.max(this.minHeight,xy[1]-this.startBox.y+this.offsets[1]),this.maxHeight);if(this.dir=="both"){this.proxy.setSize(w,h);}else{if(this.dir=="east"){this.proxy.setWidth(w);}else{if(this.dir=="south"){this.proxy.setHeight(h);}}}}else{var x=this.startBox.x+(xy[0]-this.startPoint[0]);var y=this.startBox.y+(xy[1]-this.startPoint[1]);var w=this.startBox.width+(this.startBox.x-x);var h=this.startBox.height+(this.startBox.y-y);if(this.dir=="west"&&w<=this.maxWidth&&w>=this.minWidth){this.proxy.setX(x);this.proxy.setWidth(w);}else{if(this.dir=="north"&&h<=this.maxHeight&&h>=this.minHeight){this.proxy.setY(y);this.proxy.setHeight(h);}}}if(this.dynamic){this.resizeElement();}}},onMouseOver:function(){if(this.enabled){this.el.addClass("yresizable-over");}},onMouseOut:function(){this.el.removeClass("yresizable-over");}});YAHOO.namespace("ext.state");YAHOO.ext.state.Provider=function(){YAHOO.ext.state.Provider.superclass.constructor.call(this);this.events={"statechange":new YAHOO.util.CustomEvent("statechange")};this.state={};};YAHOO.extendX(YAHOO.ext.state.Provider,YAHOO.ext.util.Observable,{get:function(name,_e42){return typeof this.state[name]=="undefined"?_e42:this.state[name];},clear:function(name){delete this.state[name];this.fireEvent("statechange",this,name,null);},set:function(name,_e45){this.state[name]=_e45;this.fireEvent("statechange",this,name,_e45);},decodeValue:function(_e46){var re=/^(a|n|d|b|s|o)\:(.*)$/;var _e48=re.exec(unescape(_e46));if(!_e48||!_e48[1]){return;}var type=_e48[1];var v=_e48[2];switch(type){case "n":return parseFloat(v);case "d":return new Date(Date.parse(v));case "b":return (v=="1");case "a":var all=[];var _e4c=v.split("^");for(var i=0,len=_e4c.length;i<len;i++){all.push(this.decodeValue(_e4c[i]));}return all;case "o":var all={};var _e4f=v.split("^");for(var i=0,len=_e4f.length;i<len;i++){var kv=_e4f[i].split("=");all[kv[0]]=this.decodeValue(kv[1]);}return all;default:return v;}},encodeValue:function(v){var enc;if(typeof v=="number"){enc="n:"+v;}else{if(typeof v=="boolean"){enc="b:"+(v?"1":"0");}else{if(v instanceof Date){enc="d:"+v.toGMTString();}else{if(v instanceof Array){var flat="";for(var i=0,len=v.length;i<len;i++){flat+=this.encodeValue(v[i]);if(i!=len-1){flat+="^";}}enc="a:"+flat;}else{if(typeof v=="object"){var flat="";for(var key in v){if(typeof v[key]!="function"){flat+=key+"="+this.encodeValue(v[key])+"^";}}enc="o:"+flat.substring(0,flat.length-1);}else{enc="s:"+v;}}}}}return escape(enc);}});YAHOO.ext.state.Manager=new function(){var _e58=new YAHOO.ext.state.Provider();return {setProvider:function(_e59){_e58=_e59;},get:function(key,_e5b){return _e58.get(key,_e5b);},set:function(key,_e5d){_e58.set(key,_e5d);},clear:function(key){_e58.clear(key);},getProvider:function(){return _e58;}};}();YAHOO.ext.state.CookieProvider=function(_e5f){YAHOO.ext.state.CookieProvider.superclass.constructor.call(this);this.path="/";this.expires=new Date(new Date().getTime()+(1000*60*60*24*7));this.domain=null;this.secure=false;YAHOO.ext.util.Config.apply(this,_e5f);this.state=this.readCookies();};YAHOO.extendX(YAHOO.ext.state.CookieProvider,YAHOO.ext.state.Provider,{set:function(name,_e61){if(typeof _e61=="undefined"||_e61===null){this.clear(name);return;}this.setCookie(name,_e61);YAHOO.ext.state.CookieProvider.superclass.set.call(this,name,_e61);},clear:function(name){this.clearCookie(name);YAHOO.ext.state.CookieProvider.superclass.clear.call(this,name);},readCookies:function(){var _e63={};var c=document.cookie+";";var re=/\s?(.*?)=(.*?);/g;var _e66;while((_e66=re.exec(c))!=null){var name=_e66[1];var _e68=_e66[2];if(name&&name.substring(0,3)=="ys-"){_e63[name.substr(3)]=this.decodeValue(_e68);}}return _e63;},setCookie:function(name,_e6a){document.cookie="ys-"+name+"="+this.encodeValue(_e6a)+((this.expires==null)?"":("; expires="+this.expires.toGMTString()))+((this.path==null)?"":("; path="+this.path))+((this.domain==null)?"":("; domain="+this.domain))+((this.secure==true)?"; secure":"");},clearCookie:function(name){document.cookie="ys-"+name+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+((this.path==null)?"":("; path="+this.path))+((this.domain==null)?"":("; domain="+this.domain))+((this.secure==true)?"; secure":"");}});YAHOO.ext.BasicDialog=function(el,_e6d){this.el=getEl(el);var dh=YAHOO.ext.DomHelper;if(!this.el&&_e6d&&_e6d.autoCreate){if(typeof _e6d.autoCreate=="object"){if(!_e6d.autoCreate.id){_e6d.autoCreate.id=el;}this.el=dh.append(document.body,_e6d.autoCreate,true);}else{this.el=dh.append(document.body,{tag:"div",id:el},true);}}el=this.el;el.setDisplayed(true);el.hide=this.hideAction;this.id=el.id;el.addClass("ydlg");this.shadowOffset=3;this.minHeight=80;this.minWidth=200;this.minButtonWidth=75;this.defaultButton=null;YAHOO.ext.util.Config.apply(this,_e6d);this.proxy=el.createProxy("ydlg-proxy");this.proxy.hide=this.hideAction;this.proxy.setOpacity(0.5);this.proxy.hide();if(_e6d.width){el.setWidth(_e6d.width);}if(_e6d.height){el.setHeight(_e6d.height);}this.size=el.getSize();if(typeof _e6d.x!="undefined"&&typeof _e6d.y!="undefined"){this.xy=[_e6d.x,_e6d.y];}else{this.xy=el.getCenterXY(true);}var cn=el.dom.childNodes;for(var i=0,len=cn.length;i<len;i++){var node=cn[i];if(node&&node.nodeType==1){if(YAHOO.util.Dom.hasClass(node,"ydlg-hd")){this.header=getEl(node,true);}else{if(YAHOO.util.Dom.hasClass(node,"ydlg-bd")){this.body=getEl(node,true);}else{if(YAHOO.util.Dom.hasClass(node,"ydlg-ft")){this.footer=getEl(node,true);}}}}}if(!this.header){this.header=dh.append(el.dom,{tag:"div",cls:"ydlg-hd"},true);}if(this.title){this.header.update(this.title);}if(!this.body){this.body=dh.append(el.dom,{tag:"div",cls:"ydlg-bd"},true);}var hl=dh.insertBefore(this.header.dom,{tag:"div",cls:"ydlg-hd-left"});var hr=dh.append(hl,{tag:"div",cls:"ydlg-hd-right"});hr.appendChild(this.header.dom);this.bwrap=dh.insertBefore(this.body.dom,{tag:"div",cls:"ydlg-dlg-body"},true);this.bwrap.dom.appendChild(this.body.dom);if(this.footer){this.bwrap.dom.appendChild(this.footer.dom);}if(this.autoScroll!==false&&!this.autoTabs){this.body.setStyle("overflow","auto");}if(this.closable!==false){this.el.addClass("ydlg-closable");this.close=dh.append(el.dom,{tag:"div",cls:"ydlg-close"},true);this.close.mon("click",function(){this.hide();},this,true);}if(this.resizable!==false){this.el.addClass("ydlg-resizable");this.resizer=new YAHOO.ext.Resizable(el,{minWidth:this.minWidth||80,minHeight:this.minHeight||80,handles:"all",pinned:true});this.resizer.on("beforeresize",this.beforeResize,this,true);this.resizer.on("resize",this.onResize,this,true);}if(this.draggable!==false){el.addClass("ydlg-draggable");if(!this.proxyDrag){var dd=new YAHOO.util.DD(el.dom.id,"WindowDrag");}else{var dd=new YAHOO.util.DDProxy(el.dom.id,"WindowDrag",{dragElId:this.proxy.id});}dd.setHandleElId(this.header.id);dd.endDrag=this.endMove.createDelegate(this);dd.startDrag=this.startMove.createDelegate(this);dd.onDrag=this.onDrag.createDelegate(this);this.dd=dd;}if(this.modal){this.mask=dh.append(document.body,{tag:"div",cls:"ydlg-mask"},true);this.mask.enableDisplayMode("block");this.mask.hide();}if(this.shadow){this.shadow=el.createProxy({tag:"div",cls:"ydlg-shadow"});this.shadow.setOpacity(0.3);this.shadow.setVisibilityMode(YAHOO.ext.Element.VISIBILITY);this.shadow.setDisplayed("block");this.shadow.hide=this.hideAction;this.shadow.hide();}else{this.shadowOffset=0;}if(this.shim){this.shim=this.el.createShim();this.shim.hide=this.hideAction;this.shim.hide();}if(this.autoTabs){var _e76=YAHOO.util.Dom.getElementsByClassName("ydlg-tab",this.tabTag||"div",el.dom);if(_e76.length>0){this.body.addClass(this.tabPosition=="bottom"?"ytabs-bottom":"ytabs-top");this.tabs=new YAHOO.ext.TabPanel(this.body.dom,this.tabPosition=="bottom");for(var i=0,len=_e76.length;i<len;i++){var _e78=_e76[i];this.tabs.addTab(YAHOO.util.Dom.generateId(_e78),_e78.title);_e78.title="";}this.tabs.activate(_e76[0].id);}}this.syncBodyHeight();this.events={"keydown":true,"move":true,"resize":true,"beforehide":true,"hide":true,"beforeshow":true,"show":true};el.mon("keydown",this.onKeyDown,this,true);el.mon("mousedown",this.toFront,this,true);YAHOO.ext.EventManager.onWindowResize(this.adjustViewport,this,true);this.el.hide();YAHOO.ext.DialogManager.register(this);};YAHOO.extendX(YAHOO.ext.BasicDialog,YAHOO.ext.util.Observable,{setTitle:function(text){this.header.update(text);return this;},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getHeaderFooterHeight(true)+40);},onResize:function(){this.refreshSize();this.syncBodyHeight();this.adjustAssets();this.fireEvent("resize",this,this.size.width,this.size.height);},onKeyDown:function(e){this.fireEvent("keydown",this,e);},resizeTo:function(_e7b,_e7c){this.el.setSize(_e7b,_e7c);this.size={width:_e7b,height:_e7c};this.syncBodyHeight();if(this.fixedcenter){this.center();}if(this.isVisible()){this.constrainXY();this.adjustAssets();}this.fireEvent("resize",this,_e7b,_e7c);return this;},addKeyListener:function(key,fn,_e7f){var _e80,shift,ctrl,alt;if(typeof key=="object"&&!(key instanceof Array)){_e80=key["key"];shift=key["shift"];ctrl=key["ctrl"];alt=key["alt"];}else{_e80=key;}var _e81=function(dlg,e){if((!shift||e.shiftKey)&&(!ctrl||e.ctrlKey)&&(!alt||e.altKey)){var k=e.getKey();if(_e80 instanceof Array){for(var i=0,len=_e80.length;i<len;i++){if(_e80[i]==k){fn.call(_e7f||window,dlg,k,e);return;}}}else{if(k==_e80){fn.call(_e7f||window,dlg,k,e);}}}};this.on("keydown",_e81);return this;},getTabs:function(){if(!this.tabs){this.body.addClass(this.tabPosition=="bottom"?"ytabs-bottom":"ytabs-top");this.tabs=new YAHOO.ext.TabPanel(this.body.dom,this.tabPosition=="bottom");}return this.tabs;},addButton:function(_e86,_e87,_e88){var dh=YAHOO.ext.DomHelper;if(!this.footer){this.footer=dh.append(this.bwrap.dom,{tag:"div",cls:"ydlg-ft"},true);}var _e8a={handler:_e87,scope:_e88,minWidth:this.minButtonWidth};if(typeof _e86=="string"){_e8a.text=_e86;}else{_e8a.dhconfig=_e86;}var btn=new YAHOO.ext.Button(this.footer,_e8a);this.syncBodyHeight();if(!this.buttons){this.buttons=[];}this.buttons.push(btn);return btn;},setDefaultButton:function(btn){this.defaultButton=btn;return this;},getHeaderFooterHeight:function(safe){var _e8e=0;if(this.header){_e8e+=this.header.getHeight();}if(this.footer){var fm=this.footer.getMargins();_e8e+=(this.footer.getHeight()+fm.top+fm.bottom);}_e8e+=this.bwrap.getPadding("tb")+this.bwrap.getBorderWidth("tb");return _e8e;},syncBodyHeight:function(){var _e90=this.size.height-this.getHeaderFooterHeight(false);var bm=this.body.getMargins();this.body.setHeight(_e90-(bm.top+bm.bottom));if(this.tabs){this.tabs.syncHeight();}this.bwrap.setHeight(this.size.height-this.header.getHeight());this.body.setWidth(this.el.getWidth(true)-this.bwrap.getBorderWidth("lr")-this.bwrap.getPadding("lr"));},restoreState:function(){var box=YAHOO.ext.state.Manager.get(this.el.id+"-state");if(box&&box.width){this.xy=[box.x,box.y];this.resizeTo(box.width,box.height);}return this;},beforeShow:function(){if(this.fixedcenter){this.xy=this.el.getCenterXY(true);}if(this.modal){YAHOO.util.Dom.addClass(document.body,"masked");this.mask.setSize(YAHOO.util.Dom.getDocumentWidth(),YAHOO.util.Dom.getDocumentHeight());this.mask.show();}this.constrainXY();},animShow:function(){var b=getEl(this.animateTarget,true).getBox();this.proxy.setSize(b.width,b.height);this.proxy.setLocation(b.x,b.y);this.proxy.show();this.proxy.setBounds(this.xy[0],this.xy[1],this.size.width,this.size.height,true,0.35,this.showEl.createDelegate(this));},show:function(_e94){if(this.fireEvent("beforeshow",this)===false){return;}if(this.syncHeightBeforeShow){this.syncBodyHeight();}this.animateTarget=_e94||this.animateTarget;if(!this.el.isVisible()){this.beforeShow();if(this.animateTarget){this.animShow();}else{this.showEl();}}return this;},showEl:function(){this.proxy.hide();this.el.setXY(this.xy);this.el.show();this.adjustAssets(true);this.toFront();if(this.defaultButton){this.defaultButton.focus();}this.fireEvent("show",this);},constrainXY:function(){if(this.constraintoviewport!==false){if(!this.viewSize){this.viewSize=[YAHOO.util.Dom.getViewportWidth(),YAHOO.util.Dom.getViewportHeight()];}var x=this.xy[0],y=this.xy[1];var w=this.size.width,h=this.size.height;var vw=this.viewSize[0],vh=this.viewSize[1];var _e98=false;if(x+w>vw){x=vw-w;_e98=true;}if(y+h>vh){y=vh-h;_e98=true;}if(x<0){x=0;_e98=true;}if(y<0){y=0;_e98=true;}if(_e98){this.xy=[x,y];if(this.isVisible()){this.el.setLocation(x,y);this.adjustAssets();}}}},onDrag:function(){if(!this.proxyDrag){this.xy=this.el.getXY();this.adjustAssets();}},adjustAssets:function(_e99){var x=this.xy[0],y=this.xy[1];var w=this.size.width,h=this.size.height;if(_e99===true){if(this.shadow){this.shadow.show();}if(this.shim){this.shim.show();}}if(this.shadow&&this.shadow.isVisible()){this.shadow.setBounds(x+this.shadowOffset,y+this.shadowOffset,w,h);}if(this.shim&&this.shim.isVisible()){this.shim.setBounds(x,y,w,h);}},adjustViewport:function(w,h){if(!w||!h){w=YAHOO.util.Dom.getViewportWidth();h=YAHOO.util.Dom.getViewportHeight();}this.viewSize=[w,h];if(this.modal&&this.mask.isVisible()){this.mask.setSize(w,h);this.mask.setSize(YAHOO.util.Dom.getDocumentWidth(),YAHOO.util.Dom.getDocumentHeight());}if(this.isVisible()){this.constrainXY();}},destroy:function(_e9e){YAHOO.ext.EventManager.removeResizeListener(this.adjustViewport,this);if(this.tabs){this.tabs.destroy(_e9e);}if(_e9e===true){this.el.update("");this.el.remove();}YAHOO.ext.DialogManager.unregister(this);},startMove:function(){if(this.proxyDrag){this.proxy.show();}if(this.constraintoviewport!==false){this.dd.constrainTo(document.body,{right:this.shadowOffset,bottom:this.shadowOffset});}},endMove:function(){if(!this.proxyDrag){YAHOO.util.DD.prototype.endDrag.apply(this.dd,arguments);}else{YAHOO.util.DDProxy.prototype.endDrag.apply(this.dd,arguments);this.proxy.hide();}this.refreshSize();this.adjustAssets();this.fireEvent("move",this,this.xy[0],this.xy[1]);},toFront:function(){YAHOO.ext.DialogManager.bringToFront(this);return this;},toBack:function(){YAHOO.ext.DialogManager.sendToBack(this);return this;},center:function(){this.moveTo(this.el.getCenterXY(true));return this;},moveTo:function(x,y){this.xy=[x,y];if(this.isVisible()){this.el.setXY(this.xy);this.adjustAssets();}return this;},isVisible:function(){return this.el.isVisible();},animHide:function(_ea1){var b=getEl(this.animateTarget,true).getBox();this.proxy.show();this.proxy.setBounds(this.xy[0],this.xy[1],this.size.width,this.size.height);this.el.hide();this.proxy.setBounds(b.x,b.y,b.width,b.height,true,0.35,this.hideEl.createDelegate(this,[_ea1]));},hide:function(_ea3){if(this.fireEvent("beforehide",this)===false){return;}if(this.shadow){this.shadow.hide();}if(this.shim){this.shim.hide();}if(this.animateTarget){this.animHide(_ea3);}else{this.el.hide();this.hideEl(_ea3);}return this;},hideEl:function(_ea4){this.proxy.hide();if(this.modal){this.mask.hide();YAHOO.util.Dom.removeClass(document.body,"masked");}this.fireEvent("hide",this);if(typeof _ea4=="function"){_ea4();}},hideAction:function(){this.setLeft("-10000px");this.setTop("-10000px");this.setStyle("visibility","hidden");},refreshSize:function(){this.size=this.el.getSize();this.xy=this.el.getXY();YAHOO.ext.state.Manager.set(this.el.id+"-state",this.el.getBox());},setZIndex:function(_ea5){if(this.modal){this.mask.setStyle("z-index",_ea5);}if(this.shadow){this.shadow.setStyle("z-index",++_ea5);}if(this.shim){this.shim.setStyle("z-index",++_ea5);}this.el.setStyle("z-index",++_ea5);if(this.proxy){this.proxy.setStyle("z-index",++_ea5);}if(this.resizer){this.resizer.proxy.setStyle("z-index",++_ea5);}this.lastZIndex=_ea5;},getEl:function(){return this.el;}});YAHOO.ext.DialogManager=function(){var list={};var _ea7=[];var _ea8=null;var _ea9=function(d1,d2){return (!d1._lastAccess||d1._lastAccess<d2._lastAccess)?-1:1;};var _eac=function(){_ea7.sort(_ea9);var seed=YAHOO.ext.DialogManager.zseed;for(var i=0,len=_ea7.length;i<len;i++){if(_ea7[i]){_ea7[i].setZIndex(seed+(i*10));}}};return {zseed:10000,register:function(dlg){list[dlg.id]=dlg;_ea7.push(dlg);},unregister:function(dlg){delete list[dlg.id];if(!_ea7.indexOf){for(var i=0,len=_ea7.length;i<len;i++){_ea7.splice(i,1);return;}}else{var i=_ea7.indexOf(dlg);if(i!=-1){_ea7.splice(i,1);}}},get:function(id){return typeof id=="object"?id:list[id];},bringToFront:function(dlg){dlg=this.get(dlg);if(dlg!=_ea8){_ea8=dlg;dlg._lastAccess=new Date().getTime();_eac();}return dlg;},sendToBack:function(dlg){dlg=this.get(dlg);dlg._lastAccess=-(new Date().getTime());_eac();return dlg;}};}();YAHOO.ext.LayoutDialog=function(el,_eb7){_eb7.autoTabs=false;YAHOO.ext.LayoutDialog.superclass.constructor.call(this,el,_eb7);this.body.setStyle({overflow:"hidden",position:"relative"});this.layout=new YAHOO.ext.BorderLayout(this.body.dom,_eb7);this.layout.monitorWindowResize=false;this.center=YAHOO.ext.BasicDialog.prototype.center;this.on("show",this.layout.layout,this.layout,true);};YAHOO.extendX(YAHOO.ext.LayoutDialog,YAHOO.ext.BasicDialog,{endUpdate:function(){this.layout.endUpdate();},beginUpdate:function(){this.layout.beginUpdate();},getLayout:function(){return this.layout;},syncBodyHeight:function(){YAHOO.ext.LayoutDialog.superclass.syncBodyHeight.call(this);if(this.layout){this.layout.layout();}}});if(YAHOO.util.DragDropMgr){YAHOO.util.DragDropMgr.clickTimeThresh=350;}YAHOO.ext.SplitBar=function(_eb8,_eb9,_eba,_ebb){this.el=YAHOO.ext.Element.get(_eb8,true);this.el.dom.unselectable="on";this.resizingEl=YAHOO.ext.Element.get(_eb9,true);this.orientation=_eba||YAHOO.ext.SplitBar.HORIZONTAL;this.minSize=0;this.maxSize=2000;this.onMoved=new YAHOO.util.CustomEvent("SplitBarMoved",this);this.animate=false;this.useShim=false;this.shim=null;this.proxy=YAHOO.ext.SplitBar.createProxy(this.orientation);this.dd=new YAHOO.util.DDProxy(this.el.dom.id,"SplitBars",{dragElId:this.proxy.id});this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this);this.dd.endDrag=this.onEndProxyDrag.createDelegate(this);this.dragSpecs={};this.adapter=new YAHOO.ext.SplitBar.BasicLayoutAdapter();this.adapter.init(this);if(this.orientation==YAHOO.ext.SplitBar.HORIZONTAL){this.placement=_ebb||(this.el.getX()>this.resizingEl.getX()?YAHOO.ext.SplitBar.LEFT:YAHOO.ext.SplitBar.RIGHT);this.el.setStyle("cursor","e-resize");}else{this.placement=_ebb||(this.el.getY()>this.resizingEl.getY()?YAHOO.ext.SplitBar.TOP:YAHOO.ext.SplitBar.BOTTOM);this.el.setStyle("cursor","n-resize");}this.events={"resize":this.onMoved,"moved":this.onMoved,"beforeresize":new YAHOO.util.CustomEvent("beforeresize")};};YAHOO.extendX(YAHOO.ext.SplitBar,YAHOO.ext.util.Observable,{onStartProxyDrag:function(x,y){this.fireEvent("beforeresize",this);if(this.useShim){if(!this.shim){this.shim=YAHOO.ext.SplitBar.createShim();}this.shim.setVisible(true);}YAHOO.util.Dom.setStyle(this.proxy,"display","block");var size=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize();this.activeMaxSize=this.getMaximumSize();var c1=size-this.activeMinSize;var c2=Math.max(this.activeMaxSize-size,0);if(this.orientation==YAHOO.ext.SplitBar.HORIZONTAL){this.dd.resetConstraints();this.dd.setXConstraint(this.placement==YAHOO.ext.SplitBar.LEFT?c1:c2,this.placement==YAHOO.ext.SplitBar.LEFT?c2:c1);this.dd.setYConstraint(0,0);}else{this.dd.resetConstraints();this.dd.setXConstraint(0,0);this.dd.setYConstraint(this.placement==YAHOO.ext.SplitBar.TOP?c1:c2,this.placement==YAHOO.ext.SplitBar.TOP?c2:c1);}this.dragSpecs.startSize=size;this.dragSpecs.startPoint=[x,y];YAHOO.util.DDProxy.prototype.b4StartDrag.call(this.dd,x,y);},onEndProxyDrag:function(e){YAHOO.util.Dom.setStyle(this.proxy,"display","none");var _ec2=YAHOO.util.Event.getXY(e);if(this.useShim){this.shim.setVisible(false);}var _ec3;if(this.orientation==YAHOO.ext.SplitBar.HORIZONTAL){_ec3=this.dragSpecs.startSize+(this.placement==YAHOO.ext.SplitBar.LEFT?_ec2[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-_ec2[0]);}else{_ec3=this.dragSpecs.startSize+(this.placement==YAHOO.ext.SplitBar.TOP?_ec2[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-_ec2[1]);}_ec3=Math.min(Math.max(_ec3,this.activeMinSize),this.activeMaxSize);if(_ec3!=this.dragSpecs.startSize){this.adapter.setElementSize(this,_ec3);this.onMoved.fireDirect(this,_ec3);}},getAdapter:function(){return this.adapter;},setAdapter:function(_ec4){this.adapter=_ec4;this.adapter.init(this);},getMinimumSize:function(){return this.minSize;},setMinimumSize:function(_ec5){this.minSize=_ec5;},getMaximumSize:function(){return this.maxSize;},setMaximumSize:function(_ec6){this.maxSize=_ec6;},setCurrentSize:function(size){var _ec8=this.animate;this.animate=false;this.adapter.setElementSize(this,size);this.animate=_ec8;},destroy:function(_ec9){if(this.shim){this.shim.remove();}this.dd.unreg();this.proxy.parentNode.removeChild(this.proxy);if(_ec9){this.el.remove();}}});YAHOO.ext.SplitBar.createShim=function(){var shim=document.createElement("div");shim.unselectable="on";YAHOO.util.Dom.generateId(shim,"split-shim");YAHOO.util.Dom.setStyle(shim,"width","100%");YAHOO.util.Dom.setStyle(shim,"height","100%");YAHOO.util.Dom.setStyle(shim,"position","absolute");YAHOO.util.Dom.setStyle(shim,"background","white");YAHOO.util.Dom.setStyle(shim,"z-index",11000);window.document.body.appendChild(shim);var _ecb=YAHOO.ext.Element.get(shim);_ecb.setOpacity(0.01);_ecb.setXY([0,0]);return _ecb;};YAHOO.ext.SplitBar.createProxy=function(_ecc){var _ecd=document.createElement("div");_ecd.unselectable="on";YAHOO.util.Dom.generateId(_ecd,"split-proxy");YAHOO.util.Dom.setStyle(_ecd,"position","absolute");YAHOO.util.Dom.setStyle(_ecd,"visibility","hidden");YAHOO.util.Dom.setStyle(_ecd,"z-index",11001);YAHOO.util.Dom.setStyle(_ecd,"background-color","#aaa");if(_ecc==YAHOO.ext.SplitBar.HORIZONTAL){YAHOO.util.Dom.setStyle(_ecd,"cursor","e-resize");}else{YAHOO.util.Dom.setStyle(_ecd,"cursor","n-resize");}YAHOO.util.Dom.setStyle(_ecd,"line-height","0px");YAHOO.util.Dom.setStyle(_ecd,"font-size","0px");window.document.body.appendChild(_ecd);return _ecd;};YAHOO.ext.SplitBar.BasicLayoutAdapter=function(){};YAHOO.ext.SplitBar.BasicLayoutAdapter.prototype={init:function(s){},getElementSize:function(s){if(s.orientation==YAHOO.ext.SplitBar.HORIZONTAL){return s.resizingEl.getWidth();}else{return s.resizingEl.getHeight();}},setElementSize:function(s,_ed1,_ed2){if(s.orientation==YAHOO.ext.SplitBar.HORIZONTAL){if(!YAHOO.util.Anim||!s.animate){s.resizingEl.setWidth(_ed1);if(_ed2){_ed2(s,_ed1);}}else{s.resizingEl.setWidth(_ed1,true,0.1,_ed2,YAHOO.util.Easing.easeOut);}}else{if(!YAHOO.util.Anim||!s.animate){s.resizingEl.setHeight(_ed1);if(_ed2){_ed2(s,_ed1);}}else{s.resizingEl.setHeight(_ed1,true,0.1,_ed2,YAHOO.util.Easing.easeOut);}}}};YAHOO.ext.SplitBar.AbsoluteLayoutAdapter=function(_ed3){this.basic=new YAHOO.ext.SplitBar.BasicLayoutAdapter();this.container=getEl(_ed3);};YAHOO.ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(s){this.basic.init(s);},getElementSize:function(s){return this.basic.getElementSize(s);},setElementSize:function(s,_ed7,_ed8){this.basic.setElementSize(s,_ed7,this.moveSplitter.createDelegate(this,[s]));},moveSplitter:function(s){var yes=YAHOO.ext.SplitBar;switch(s.placement){case yes.LEFT:s.el.setX(s.resizingEl.getRight());break;case yes.RIGHT:s.el.setStyle("right",(this.container.getWidth()-s.resizingEl.getLeft())+"px");break;case yes.TOP:s.el.setY(s.resizingEl.getBottom());break;case yes.BOTTOM:s.el.setY(s.resizingEl.getTop()-s.el.getHeight());break;}}};YAHOO.ext.SplitBar.VERTICAL=1;YAHOO.ext.SplitBar.HORIZONTAL=2;YAHOO.ext.SplitBar.LEFT=1;YAHOO.ext.SplitBar.RIGHT=2;YAHOO.ext.SplitBar.TOP=3;YAHOO.ext.SplitBar.BOTTOM=4;YAHOO.ext.util.MixedCollection=function(_edb){this.items=[];this.keys=[];this.events={"clear":new YAHOO.util.CustomEvent("clear"),"add":new YAHOO.util.CustomEvent("add"),"replace":new YAHOO.util.CustomEvent("replace"),"remove":new YAHOO.util.CustomEvent("remove")};this.allowFunctions=_edb===true;};YAHOO.extendX(YAHOO.ext.util.MixedCollection,YAHOO.ext.util.Observable,{allowFunctions:false,add:function(key,o){if(arguments.length==1){o=arguments[0];key=this.getKey(o);}this.items.push(o);if(typeof key!="undefined"&&key!=null){this.items[key]=o;this.keys.push(key);}this.fireEvent("add",this.items.length-1,o,key);return o;},getKey:function(o){return null;},replace:function(key,o){if(arguments.length==1){o=arguments[0];key=this.getKey(o);}if(typeof this.items[key]=="undefined"){return this.add(key,o);}var old=this.items[key];if(typeof key=="number"){this.items[key]=o;}else{var _ee2=this.indexOfKey(key);this.items[_ee2]=o;this.items[key]=o;}this.fireEvent("replace",key,old,o);return o;},addAll:function(objs){if(arguments.length>1||objs instanceof Array){var args=arguments.length>1?arguments:objs;for(var i=0,len=args.length;i<len;i++){this.add(args[i]);}}else{for(var key in objs){if(this.allowFunctions||typeof objs[key]!="function"){this.add(objs[key],key);}}}},each:function(fn,_ee8){for(var i=0,len=this.items.length;i<len;i++){fn.call(_ee8||window,this.items[i]);}},eachKey:function(fn,_eeb){for(var i=0,len=this.keys.length;i<len;i++){fn.call(_eeb||window,this.keys[i],this.items[i]);}},find:function(fn,_eee){for(var i=0,len=this.items.length;i<len;i++){if(fn.call(_eee||window,this.items[i])){return this.items[i];}}return null;},insert:function(_ef0,key,o){if(arguments.length==2){o=arguments[1];key=this.getKey(o);}if(_ef0>=this.items.length){return this.add(o,key);}this.items.splice(_ef0,0,o);if(typeof key!="undefined"&&key!=null){this.items[key]=o;this.keys.splice(_ef0,0,key);}this.fireEvent("add",_ef0,o,key);return o;},remove:function(o){var _ef4=this.indexOf(o);this.items.splice(_ef4,1);if(typeof this.keys[_ef4]!="undefined"){var key=this.keys[_ef4];this.keys.splice(_ef4,1);delete this.items[key];}this.fireEvent("remove",o);return o;},removeAt:function(_ef6){this.items.splice(_ef6,1);var key=this.keys[_ef6];if(typeof key!="undefined"){this.keys.splice(_ef6,1);delete this.items[key];}this.fireEvent("remove",o,key);},removeKey:function(key){var o=this.items[key];var _efa=this.indexOf(o);this.items.splice(_efa,1);this.keys.splice(_efa,1);delete this.items[key];this.fireEvent("remove",o,key);},getCount:function(){return this.items.length;},indexOf:function(o){if(!this.items.indexOf){for(var i=0,len=this.items.length;i<len;i++){if(this.items[i]==o){return i;}}return -1;}else{return this.items.indexOf(o);}},indexOfKey:function(key){if(!this.keys.indexOf){for(var i=0,len=this.keys.length;i<len;i++){if(this.keys[i]==key){return i;}}return -1;}else{return this.keys.indexOf(key);}},item:function(key){return this.items[key];},contains:function(o){return this.indexOf(o)!=-1;},containsKey:function(key){return typeof this.items[key]!="undefined";},clear:function(o){this.items=[];this.keys=[];this.fireEvent("clear");},first:function(){return this.items[0];},last:function(){return this.items[this.items.length];}});YAHOO.ext.util.MixedCollection.prototype.get=YAHOO.ext.util.MixedCollection.prototype.item;YAHOO.ext.LayoutManager=function(_f03){YAHOO.ext.LayoutManager.superclass.constructor.call(this);this.el=getEl(_f03,true);this.id=this.el.id;this.el.addClass("ylayout-container");this.monitorWindowResize=true;this.regions={};this.events={"layout":new YAHOO.util.CustomEvent(),"regionresized":new YAHOO.util.CustomEvent(),"regioncollapsed":new YAHOO.util.CustomEvent(),"regionexpanded":new YAHOO.util.CustomEvent()};this.updating=false;YAHOO.ext.EventManager.onWindowResize(this.onWindowResize,this,true);};YAHOO.extendX(YAHOO.ext.LayoutManager,YAHOO.ext.util.Observable,{isUpdating:function(){return this.updating;},beginUpdate:function(){this.updating=true;},endUpdate:function(_f04){this.updating=false;if(!_f04){this.layout();}},layout:function(){},onRegionResized:function(_f05,_f06){this.fireEvent("regionresized",_f05,_f06);this.layout();},onRegionCollapsed:function(_f07){this.fireEvent("regioncollapsed",_f07);},onRegionExpanded:function(_f08){this.fireEvent("regionexpanded",_f08);},getViewSize:function(){var size;if(this.el.dom!=document.body){this.el.beginMeasure();size=this.el.getSize();this.el.endMeasure();}else{size={width:YAHOO.util.Dom.getViewportWidth(),height:YAHOO.util.Dom.getViewportHeight()};}size.width-=this.el.getBorderWidth("lr")-this.el.getPadding("lr");size.height-=this.el.getBorderWidth("tb")-this.el.getPadding("tb");return size;},getEl:function(){return this.el;},getRegion:function(_f0a){return this.regions[_f0a.toLowerCase()];},onWindowResize:function(){if(this.monitorWindowResize){this.layout();}}});YAHOO.ext.BorderLayout=function(_f0b,_f0c){YAHOO.ext.BorderLayout.superclass.constructor.call(this,_f0b);this.factory=_f0c.factory||YAHOO.ext.BorderLayout.RegionFactory;this.hideOnLayout=_f0c.hideOnLayout||false;for(var i=0,len=this.factory.validRegions.length;i<len;i++){var _f0e=this.factory.validRegions[i];if(_f0c[_f0e]){this.addRegion(_f0e,_f0c[_f0e]);}}};YAHOO.extendX(YAHOO.ext.BorderLayout,YAHOO.ext.LayoutManager,{addRegion:function(_f0f,_f10){if(!this.regions[_f0f]){var r=this.factory.create(_f0f,this,_f10);this.regions[_f0f]=r;r.on("visibilitychange",this.layout,this,true);r.on("paneladded",this.layout,this,true);r.on("panelremoved",this.layout,this,true);r.on("invalidated",this.layout,this,true);r.on("resized",this.onRegionResized,this,true);r.on("collapsed",this.onRegionCollapsed,this,true);r.on("expanded",this.onRegionExpanded,this,true);}return this.regions[_f0f];},layout:function(){if(this.updating){return;}var size=this.getViewSize();var w=size.width,h=size.height;var _f14=w,centerH=h,centerY=0,centerX=0;var x=0,y=0;var rs=this.regions;var n=rs["north"],s=rs["south"],west=rs["west"],e=rs["east"],c=rs["center"];if(this.hideOnLayout){c.el.setStyle("display","none");}if(n&&n.isVisible()){var b=n.getBox();var m=n.getMargins();b.width=w-(m.left+m.right);b.x=m.left;b.y=m.top;centerY=b.height+b.y+m.bottom;centerH-=centerY;n.updateBox(this.safeBox(b));}if(s&&s.isVisible()){var b=s.getBox();var m=s.getMargins();b.width=w-(m.left+m.right);b.x=m.left;var _f1c=(b.height+m.top+m.bottom);b.y=h-_f1c+m.top;centerH-=_f1c;s.updateBox(this.safeBox(b));}if(west&&west.isVisible()){var b=west.getBox();var m=west.getMargins();b.height=centerH-(m.top+m.bottom);b.x=m.left;b.y=centerY+m.top;var _f1f=(b.width+m.left+m.right);centerX+=_f1f;_f14-=_f1f;west.updateBox(this.safeBox(b));}if(e&&e.isVisible()){var b=e.getBox();var m=e.getMargins();b.height=centerH-(m.top+m.bottom);var _f22=(b.width+m.left+m.right);b.x=w-_f22+m.left;b.y=centerY+m.top;_f14-=_f22;e.updateBox(this.safeBox(b));}if(c){var m=c.getMargins();var _f24={x:centerX+m.left,y:centerY+m.top,width:_f14-(m.left+m.right),height:centerH-(m.top+m.bottom)};if(this.hideOnLayout){c.el.setStyle("display","block");}c.updateBox(this.safeBox(_f24));}this.el.repaint();this.fireEvent("layout",this);},safeBox:function(box){box.width=Math.max(0,box.width);box.height=Math.max(0,box.height);return box;},add:function(_f26,_f27){_f26=_f26.toLowerCase();return this.regions[_f26].add(_f27);},remove:function(_f28,_f29){_f28=_f28.toLowerCase();return this.regions[_f28].remove(_f29);},findPanel:function(_f2a){var rs=this.regions;for(var _f2c in rs){if(typeof rs[_f2c]!="function"){var p=rs[_f2c].getPanel(_f2a);if(p){return p;}}}return null;},showPanel:function(_f2e){var rs=this.regions;for(var _f30 in rs){var r=rs[_f30];if(typeof r!="function"){if(r.hasPanel(_f2e)){return r.showPanel(_f2e);}}}return null;},restoreState:function(_f32){if(!_f32){_f32=YAHOO.ext.state.Manager;}var sm=new YAHOO.ext.LayoutStateManager();sm.init(this,_f32);}});YAHOO.ext.BorderLayout.RegionFactory={};YAHOO.ext.BorderLayout.RegionFactory.validRegions=["north","south","east","west","center"];YAHOO.ext.BorderLayout.RegionFactory.create=function(_f34,mgr,_f36){if(_f36.lightweight){return new YAHOO.ext.LayoutRegionLite(mgr,_f36);}_f34=_f34.toLowerCase();switch(_f34){case "north":return new YAHOO.ext.NorthLayoutRegion(mgr,_f36);case "south":return new YAHOO.ext.SouthLayoutRegion(mgr,_f36);case "east":return new YAHOO.ext.EastLayoutRegion(mgr,_f36);case "west":return new YAHOO.ext.WestLayoutRegion(mgr,_f36);case "center":return new YAHOO.ext.CenterLayoutRegion(mgr,_f36);}throw "Layout region \""+_f34+"\" not supported.";};YAHOO.ext.ContentPanel=function(el,_f38,_f39){YAHOO.ext.ContentPanel.superclass.constructor.call(this);this.el=getEl(el,true);if(!this.el&&_f38&&_f38.autoCreate){if(typeof _f38.autoCreate=="object"){if(!_f38.autoCreate.id){_f38.autoCreate.id=el;}this.el=YAHOO.ext.DomHelper.append(document.body,_f38.autoCreate,true);}else{this.el=YAHOO.ext.DomHelper.append(document.body,{tag:"div",cls:"ylayout-inactive-content",id:el},true);}}this.closable=false;this.loaded=false;this.active=false;if(typeof _f38=="string"){this.title=_f38;}else{YAHOO.ext.util.Config.apply(this,_f38);}if(this.resizeEl){this.resizeEl=getEl(this.resizeEl,true);}else{this.resizeEl=this.el;}this.events={"activate":new YAHOO.util.CustomEvent("activate"),"deactivate":new YAHOO.util.CustomEvent("deactivate")};if(this.autoScroll){this.el.setStyle("overflow","auto");}if(_f39){this.setContent(_f39);}};YAHOO.extendX(YAHOO.ext.ContentPanel,YAHOO.ext.util.Observable,{setRegion:function(_f3a){this.region=_f3a;if(_f3a){this.el.replaceClass("ylayout-inactive-content","ylayout-active-content");}else{this.el.replaceClass("ylayout-active-content","ylayout-inactive-content");}},getToolbar:function(){return this.toolbar;},setActiveState:function(_f3b){this.active=_f3b;if(!_f3b){this.fireEvent("deactivate",this);}else{this.fireEvent("activate",this);}},setContent:function(_f3c,_f3d){this.el.update(_f3c,_f3d);},getUpdateManager:function(){return this.el.getUpdateManager();},setUrl:function(url,_f3f,_f40){if(this.refreshDelegate){this.removeListener("activate",this.refreshDelegate);}this.refreshDelegate=this._handleRefresh.createDelegate(this,[url,_f3f,_f40]);this.on("activate",this._handleRefresh.createDelegate(this,[url,_f3f,_f40]));return this.el.getUpdateManager();},_handleRefresh:function(url,_f42,_f43){if(!_f43||!this.loaded){var _f44=this.el.getUpdateManager();_f44.update(url,_f42,this._setLoaded.createDelegate(this));}},_setLoaded:function(){this.loaded=true;},getId:function(){return this.el.id;},getEl:function(){return this.el;},adjustForComponents:function(_f45,_f46){if(this.toolbar){var te=this.toolbar.getEl();_f46-=te.getHeight();te.setWidth(_f45);}if(this.adjustments){_f45+=this.adjustments[0];_f46+=this.adjustments[1];}return {"width":_f45,"height":_f46};},setSize:function(_f48,_f49){if(this.fitToFrame){var size=this.adjustForComponents(_f48,_f49);this.resizeEl.setSize(this.autoWidth?"auto":size.width,size.height);}},getTitle:function(){return this.title;},setTitle:function(_f4b){this.title=_f4b;if(this.region){this.region.updatePanelTitle(this,_f4b);}},isClosable:function(){return this.closable;},beforeSlide:function(){this.el.clip();this.resizeEl.clip();},afterSlide:function(){this.el.unclip();this.resizeEl.unclip();},refresh:function(){if(this.refreshDelegate){this.loaded=false;this.refreshDelegate();}},destroy:function(){this.el.removeAllListeners();var _f4c=document.createElement("span");_f4c.appendChild(this.el.dom);_f4c.innerHTML="";this.el=null;}});YAHOO.ext.GridPanel=function(grid,_f4e){this.wrapper=YAHOO.ext.DomHelper.append(document.body,{tag:"div",cls:"ylayout-grid-wrapper ylayout-inactive-content"},true);this.wrapper.dom.appendChild(grid.container.dom);YAHOO.ext.GridPanel.superclass.constructor.call(this,this.wrapper,_f4e);if(this.toolbar){this.toolbar.el.insertBefore(this.wrapper.dom.firstChild);}grid.monitorWindowResize=false;grid.autoHeight=false;grid.autoWidth=false;this.grid=grid;this.grid.container.replaceClass("ylayout-inactive-content","ylayout-component-panel");};YAHOO.extendX(YAHOO.ext.GridPanel,YAHOO.ext.ContentPanel,{getId:function(){return this.grid.id;},getGrid:function(){return this.grid;},setSize:function(_f4f,_f50){var grid=this.grid;var size=this.adjustForComponents(_f4f,_f50);grid.container.setSize(size.width,size.height);grid.autoSize();},beforeSlide:function(){this.grid.getView().wrapEl.clip();},afterSlide:function(){this.grid.getView().wrapEl.unclip();},destroy:function(){this.grid.getView().unplugDataModel(this.grid.getDataModel());this.grid.container.removeAllListeners();YAHOO.ext.GridPanel.superclass.destroy.call(this);}});YAHOO.ext.NestedLayoutPanel=function(_f53,_f54){YAHOO.ext.NestedLayoutPanel.superclass.constructor.call(this,_f53.getEl(),_f54);_f53.monitorWindowResize=false;this.layout=_f53;this.layout.getEl().addClass("ylayout-nested-layout");};YAHOO.extendX(YAHOO.ext.NestedLayoutPanel,YAHOO.ext.ContentPanel,{setSize:function(_f55,_f56){var size=this.adjustForComponents(_f55,_f56);this.layout.getEl().setSize(size.width,size.height);this.layout.layout();},getLayout:function(){return this.layout;}});YAHOO.ext.LayoutRegion=function(mgr,_f59,pos){this.mgr=mgr;this.position=pos;var dh=YAHOO.ext.DomHelper;this.el=dh.append(mgr.el.dom,{tag:"div",cls:"ylayout-panel ylayout-panel-"+this.position},true);this.titleEl=dh.append(this.el.dom,{tag:"div",unselectable:"on",cls:"yunselectable ylayout-panel-hd ylayout-title-"+this.position,children:[{tag:"span",cls:"yunselectable ylayout-panel-hd-text",unselectable:"on",html:"&#160;"},{tag:"div",cls:"yunselectable ylayout-panel-hd-tools",unselectable:"on"}]},true);this.titleEl.enableDisplayMode();this.titleTextEl=this.titleEl.dom.firstChild;this.tools=getEl(this.titleEl.dom.childNodes[1],true);this.closeBtn=this.createTool(this.tools.dom,"ylayout-close");this.closeBtn.enableDisplayMode();this.closeBtn.on("click",this.closeClicked,this,true);this.closeBtn.hide();this.bodyEl=dh.append(this.el.dom,{tag:"div",cls:"ylayout-panel-body"},true);this.events={"beforeremove":new YAHOO.util.CustomEvent("beforeremove"),"invalidated":new YAHOO.util.CustomEvent("invalidated"),"visibilitychange":new YAHOO.util.CustomEvent("visibilitychange"),"paneladded":new YAHOO.util.CustomEvent("paneladded"),"panelremoved":new YAHOO.util.CustomEvent("panelremoved"),"collapsed":new YAHOO.util.CustomEvent("collapsed"),"expanded":new YAHOO.util.CustomEvent("expanded"),"panelactivated":new YAHOO.util.CustomEvent("panelactivated"),"resized":new YAHOO.util.CustomEvent("resized")};this.panels=new YAHOO.ext.util.MixedCollection();this.panels.getKey=this.getPanelId.createDelegate(this);this.box=null;this.visible=false;this.collapsed=false;this.hide();this.on("paneladded",this.validateVisibility,this,true);this.on("panelremoved",this.validateVisibility,this,true);this.activePanel=null;this.applyConfig(_f59);};YAHOO.extendX(YAHOO.ext.LayoutRegion,YAHOO.ext.util.Observable,{getPanelId:function(p){return p.getId();},applyConfig:function(_f5d){if(_f5d.collapsible&&this.position!="center"&&!this.collapsedEl){var dh=YAHOO.ext.DomHelper;this.collapseBtn=this.createTool(this.tools.dom,"ylayout-collapse-"+this.position);this.collapseBtn.mon("click",this.collapse,this,true);this.collapsedEl=dh.append(this.mgr.el.dom,{tag:"div",cls:"ylayout-collapsed ylayout-collapsed-"+this.position,children:[{tag:"div",cls:"ylayout-collapsed-tools"}]},true);if(_f5d.floatable!==false){this.collapsedEl.addClassOnOver("ylayout-collapsed-over");this.collapsedEl.mon("click",this.collapseClick,this,true);}this.expandBtn=this.createTool(this.collapsedEl.dom.firstChild,"ylayout-expand-"+this.position);this.expandBtn.mon("click",this.expand,this,true);}if(this.collapseBtn){this.collapseBtn.setVisible(_f5d.collapsible==true);}this.cmargins=_f5d.cmargins||this.cmargins||(this.position=="west"||this.position=="east"?{top:0,left:2,right:2,bottom:0}:{top:2,left:0,right:0,bottom:2});this.margins=_f5d.margins||this.margins||{top:0,left:0,right:0,bottom:0};this.bottomTabs=_f5d.tabPosition!="top";this.autoScroll=_f5d.autoScroll||false;if(this.autoScroll){this.bodyEl.setStyle("overflow","auto");}else{this.bodyEl.setStyle("overflow","hidden");}if((!_f5d.titlebar&&!_f5d.title)||_f5d.titlebar===false){this.titleEl.hide();}else{this.titleEl.show();if(_f5d.title){this.titleTextEl.innerHTML=_f5d.title;}}this.duration=_f5d.duration||0.3;this.slideDuration=_f5d.slideDuration||0.45;this.config=_f5d;if(_f5d.collapsed){this.collapse(true);}},resizeTo:function(_f5f){switch(this.position){case "east":case "west":this.el.setWidth(_f5f);this.fireEvent("resized",this,_f5f);break;case "north":case "south":this.el.setHeight(_f5f);this.fireEvent("resized",this,_f5f);break;}},getBox:function(){var b;if(!this.collapsed){b=this.el.getBox(false,true);}else{b=this.collapsedEl.getBox(false,true);}return b;},getMargins:function(){return this.collapsed?this.cmargins:this.margins;},highlight:function(){this.el.addClass("ylayout-panel-dragover");},unhighlight:function(){this.el.removeClass("ylayout-panel-dragover");},updateBox:function(box){this.box=box;if(!this.collapsed){this.el.dom.style.left=box.x+"px";this.el.dom.style.top=box.y+"px";this.el.setSize(box.width,box.height);var _f62=this.titleEl.isVisible()?box.height-(this.titleEl.getHeight()||0):box.height;_f62-=this.el.getBorderWidth("tb");bodyWidth=box.width-this.el.getBorderWidth("rl");this.bodyEl.setHeight(_f62);this.bodyEl.setWidth(bodyWidth);var _f63=_f62;if(this.tabs){_f63=this.tabs.syncHeight(_f62);if(YAHOO.ext.util.Browser.isIE){this.tabs.el.repaint();}}this.panelSize={width:bodyWidth,height:_f63};if(this.activePanel){this.activePanel.setSize(bodyWidth,_f63);}}else{this.collapsedEl.dom.style.left=box.x+"px";this.collapsedEl.dom.style.top=box.y+"px";this.collapsedEl.setSize(box.width,box.height);}if(this.tabs){this.tabs.autoSizeTabs();}},getEl:function(){return this.el;},hide:function(){if(!this.collapsed){this.el.dom.style.left="-2000px";this.el.hide();}else{this.collapsedEl.dom.style.left="-2000px";this.collapsedEl.hide();}this.visible=false;this.fireEvent("visibilitychange",this,false);},show:function(){if(!this.collapsed){this.el.show();}else{this.collapsedEl.show();}this.visible=true;this.fireEvent("visibilitychange",this,true);},isVisible:function(){return this.visible;},closeClicked:function(){if(this.activePanel){this.remove(this.activePanel);}},collapseClick:function(e){if(this.isSlid){e.stopPropagation();this.slideIn();}else{e.stopPropagation();this.slideOut();}},collapse:function(_f65){if(this.collapsed){return;}this.collapsed=true;if(this.split){this.split.el.hide();}if(this.config.animate&&_f65!==true){this.fireEvent("invalidated",this);this.animateCollapse();}else{this.el.setLocation(-20000,-20000);this.el.hide();this.collapsedEl.show();this.fireEvent("collapsed",this);this.fireEvent("invalidated",this);}},animateCollapse:function(){},expand:function(e,_f67){if(e){e.stopPropagation();}if(!this.collapsed){return;}if(this.isSlid){this.slideIn(this.expand.createDelegate(this));return;}this.collapsed=false;this.el.show();if(this.config.animate&&_f67!==true){this.animateExpand();}else{if(this.split){this.split.el.show();}this.collapsedEl.setLocation(-2000,-2000);this.collapsedEl.hide();this.fireEvent("invalidated",this);this.fireEvent("expanded",this);}},animateExpand:function(){},initTabs:function(){this.bodyEl.setStyle("overflow","hidden");var ts=new YAHOO.ext.TabPanel(this.bodyEl.dom,this.bottomTabs);this.tabs=ts;ts.resizeTabs=this.config.resizeTabs===true;ts.minTabWidth=this.config.minTabWidth||40;ts.maxTabWidth=this.config.maxTabWidth||250;ts.preferredTabWidth=this.config.preferredTabWidth||150;ts.monitorResize=false;ts.bodyEl.setStyle("overflow",this.config.autoScroll?"auto":"hidden");this.panels.each(this.initPanelAsTab,this);},initPanelAsTab:function(_f69){var ti=this.tabs.addTab(_f69.getEl().id,_f69.getTitle(),null,this.config.closeOnTab&&_f69.isClosable());ti.on("activate",function(){this.setActivePanel(_f69);},this,true);if(this.config.closeOnTab){ti.on("beforeclose",function(t,e){e.cancel=true;this.remove(_f69);},this,true);}return ti;},updatePanelTitle:function(_f6d,_f6e){if(this.activePanel==_f6d){this.updateTitle(_f6e);}if(this.tabs){this.tabs.getTab(_f6d.getEl().id).setText(_f6e);}},updateTitle:function(_f6f){if(this.titleTextEl&&!this.config.title){this.titleTextEl.innerHTML=(typeof _f6f!="undefined"&&_f6f.length>0?_f6f:"&#160;");}},setActivePanel:function(_f70){_f70=this.getPanel(_f70);if(this.activePanel&&this.activePanel!=_f70){this.activePanel.setActiveState(false);}this.activePanel=_f70;_f70.setActiveState(true);if(this.panelSize){_f70.setSize(this.panelSize.width,this.panelSize.height);}this.closeBtn.setVisible(!this.config.closeOnTab&&!this.isSlid&&_f70.isClosable());this.updateTitle(_f70.getTitle());this.fireEvent("panelactivated",this,_f70);},showPanel:function(_f71){if(_f71=this.getPanel(_f71)){if(this.tabs){this.tabs.activate(_f71.getEl().id);}else{this.setActivePanel(_f71);}}return _f71;},getActivePanel:function(){return this.activePanel;},validateVisibility:function(){if(this.panels.getCount()<1){this.updateTitle("&#160;");this.closeBtn.hide();this.hide();}else{if(!this.isVisible()){this.show();}}},add:function(_f72){if(arguments.length>1){for(var i=0,len=arguments.length;i<len;i++){this.add(arguments[i]);}return null;}if(this.hasPanel(_f72)){this.showPanel(_f72);return _f72;}_f72.setRegion(this);this.panels.add(_f72);if(this.panels.getCount()==1&&!this.config.alwaysShowTabs){this.bodyEl.dom.appendChild(_f72.getEl().dom);this.setActivePanel(_f72);this.fireEvent("paneladded",this,_f72);return _f72;}if(!this.tabs){this.initTabs();}else{this.initPanelAsTab(_f72);}this.tabs.activate(_f72.getEl().id);this.fireEvent("paneladded",this,_f72);return _f72;},hasPanel:function(_f74){if(typeof _f74=="object"){_f74=_f74.getId();}return this.getPanel(_f74)?true:false;},hidePanel:function(_f75){if(this.tabs&&(_f75=this.getPanel(_f75))){this.tabs.hideTab(_f75.getEl().id);}},unhidePanel:function(_f76){if(this.tabs&&(_f76=this.getPanel(_f76))){this.tabs.unhideTab(_f76.getEl().id);}},clearPanels:function(){while(this.panels.getCount()>0){this.remove(this.panels.first());}},remove:function(_f77,_f78){_f77=this.getPanel(_f77);if(!_f77){return null;}var e={};this.fireEvent("beforeremove",this,_f77,e);if(e.cancel===true){return null;}_f78=(typeof _f78!="undefined"?_f78:(this.config.preservePanels===true||_f77.preserve===true));var _f7a=_f77.getId();this.panels.removeKey(_f7a);if(_f78){document.body.appendChild(_f77.getEl().dom);}if(this.tabs){this.tabs.removeTab(_f77.getEl().id);}else{if(!_f78){this.bodyEl.dom.removeChild(_f77.getEl().dom);}}if(this.panels.getCount()==1&&this.tabs&&!this.config.alwaysShowTabs){var p=this.panels.first();var _f7c=document.createElement("span");_f7c.appendChild(p.getEl().dom);this.bodyEl.update("");this.bodyEl.dom.appendChild(p.getEl().dom);_f7c=null;this.updateTitle(p.getTitle());this.tabs=null;this.bodyEl.setStyle("overflow",this.config.autoScroll?"auto":"hidden");this.setActivePanel(p);}_f77.setRegion(null);if(this.activePanel==_f77){this.activePanel=null;}if(this.config.autoDestroy!==false&&_f78!==true){try{_f77.destroy();}catch(e){}}this.fireEvent("panelremoved",this,_f77);return _f77;},getTabs:function(){return this.tabs;},getPanel:function(id){if(typeof id=="object"){return id;}return this.panels.get(id);},getPosition:function(){return this.position;},createTool:function(_f7e,_f7f){var btn=YAHOO.ext.DomHelper.append(_f7e,{tag:"div",cls:"ylayout-tools-button",children:[{tag:"div",cls:"ylayout-tools-button-inner "+_f7f,html:"&#160;"}]},true);btn.addClassOnOver("ylayout-tools-button-over");return btn;}});YAHOO.ext.LayoutStateManager=function(_f81){this.state={north:{},south:{},east:{},west:{}};};YAHOO.ext.LayoutStateManager.prototype={init:function(_f82,_f83){this.provider=_f83;var _f84=_f83.get(_f82.id+"-layout-state");if(_f84){var _f85=_f82.isUpdating();if(!_f85){_f82.beginUpdate();}for(var key in _f84){if(typeof _f84[key]!="function"){var _f87=_f84[key];var r=_f82.getRegion(key);if(r&&_f87){if(_f87.size){r.resizeTo(_f87.size);}if(_f87.collapsed==true){r.collapse(true);}else{r.expand(null,true);}}}}if(!_f85){_f82.endUpdate();}this.state=_f84;}this.layout=_f82;_f82.on("regionresized",this.onRegionResized,this,true);_f82.on("regioncollapsed",this.onRegionCollapsed,this,true);_f82.on("regionexpanded",this.onRegionExpanded,this,true);},storeState:function(){this.provider.set(this.layout.id+"-layout-state",this.state);},onRegionResized:function(_f89,_f8a){this.state[_f89.getPosition()].size=_f8a;this.storeState();},onRegionCollapsed:function(_f8b){this.state[_f8b.getPosition()].collapsed=true;this.storeState();},onRegionExpanded:function(_f8c){this.state[_f8c.getPosition()].collapsed=false;this.storeState();}};YAHOO.ext.SplitLayoutRegion=function(mgr,_f8e,pos,_f90){this.cursor=_f90;YAHOO.ext.SplitLayoutRegion.superclass.constructor.call(this,mgr,_f8e,pos);if(_f8e.split){this.hide();}};YAHOO.extendX(YAHOO.ext.SplitLayoutRegion,YAHOO.ext.LayoutRegion,{applyConfig:function(_f91){YAHOO.ext.SplitLayoutRegion.superclass.applyConfig.call(this,_f91);if(_f91.split){if(!this.split){var _f92=YAHOO.ext.DomHelper.append(this.mgr.el.dom,{tag:"div",id:this.el.id+"-split",cls:"ylayout-split ylayout-split-"+this.position,html:"&#160;"});this.split=new YAHOO.ext.SplitBar(_f92,this.el);this.split.onMoved.subscribe(this.onSplitMove,this,true);this.split.useShim=_f91.useShim===true;YAHOO.util.Dom.setStyle([this.split.el.dom,this.split.proxy],"cursor",this.cursor);this.split.getMaximumSize=this.getMaxSize.createDelegate(this);}if(typeof _f91.minSize!="undefined"){this.split.minSize=_f91.minSize;}if(typeof _f91.maxSize!="undefined"){this.split.maxSize=_f91.maxSize;}}},getMaxSize:function(){var cmax=this.config.maxSize||10000;var _f94=this.mgr.getRegion("center");return Math.min(cmax,(this.el.getWidth()+_f94.getEl().getWidth())-_f94.getMinWidth());},onSplitMove:function(_f95,_f96){this.fireEvent("resized",this,_f96);},getSplitBar:function(){return this.split;},hide:function(){if(this.split){this.split.el.setLocation(-2000,-2000);this.split.el.hide();}YAHOO.ext.SplitLayoutRegion.superclass.hide.call(this);},show:function(){if(this.split){this.split.el.show();}YAHOO.ext.SplitLayoutRegion.superclass.show.call(this);},beforeSlide:function(){if(YAHOO.ext.util.Browser.isGecko){this.bodyEl.clip();if(this.tabs){this.tabs.bodyEl.clip();}if(this.activePanel){this.activePanel.getEl().clip();if(this.activePanel.beforeSlide){this.activePanel.beforeSlide();}}}},afterSlide:function(){if(YAHOO.ext.util.Browser.isGecko){this.bodyEl.unclip();if(this.tabs){this.tabs.bodyEl.unclip();}if(this.activePanel){this.activePanel.getEl().unclip();if(this.activePanel.afterSlide){this.activePanel.afterSlide();}}}},slideOut:function(){if(!this.slideEl){this.slideEl=new YAHOO.ext.Actor(YAHOO.ext.DomHelper.append(this.mgr.el.dom,{tag:"div",cls:"ylayout-slider"}));if(this.config.autoHide!==false){var _f97=new YAHOO.ext.util.DelayedTask(this.slideIn,this);this.slideEl.mon("mouseout",function(e){var to=e.getRelatedTarget();if(to&&to!=this.slideEl.dom&&!YAHOO.util.Dom.isAncestor(this.slideEl.dom,to)){_f97.delay(500);}},this,true);this.slideEl.mon("mouseover",function(e){_f97.cancel();},this,true);}}var sl=this.slideEl,c=this.collapsedEl,cm=this.cmargins;this.isSlid=true;this.snapshot={"left":this.el.getLeft(true),"top":this.el.getTop(true),"colbtn":this.collapseBtn.isVisible(),"closebtn":this.closeBtn.isVisible()};this.collapseBtn.hide();this.closeBtn.hide();this.el.show();this.el.setLeftTop(0,0);sl.startCapture(true);var size;switch(this.position){case "west":sl.setLeft(c.getRight(true));sl.setTop(c.getTop(true));size=this.el.getWidth();break;case "east":sl.setRight(this.mgr.getViewSize().width-c.getLeft(true));sl.setTop(c.getTop(true));size=this.el.getWidth();break;case "north":sl.setLeft(c.getLeft(true));sl.setTop(c.getBottom(true));size=this.el.getHeight();break;case "south":sl.setLeft(c.getLeft(true));sl.setBottom(this.mgr.getViewSize().height-c.getTop(true));size=this.el.getHeight();break;}sl.dom.appendChild(this.el.dom);YAHOO.util.Event.on(document.body,"click",this.slideInIf,this,true);sl.setSize(this.el.getWidth(),this.el.getHeight());this.beforeSlide();if(this.activePanel){this.activePanel.setSize(this.bodyEl.getWidth(),this.bodyEl.getHeight());}sl.slideShow(this.getAnchor(),size,this.slideDuration,null,false);sl.play(function(){this.afterSlide();}.createDelegate(this));},slideInIf:function(e){var t=YAHOO.util.Event.getTarget(e);if(!YAHOO.util.Dom.isAncestor(this.el.dom,t)){this.slideIn();}},slideIn:function(_f9f){if(this.isSlid&&!this.slideEl.playlist.isPlaying()){YAHOO.util.Event.removeListener(document.body,"click",this.slideInIf,this,true);this.slideEl.startCapture(true);this.slideEl.slideHide(this.getAnchor(),this.slideDuration,null);this.beforeSlide();this.slideEl.play(function(){this.isSlid=false;this.el.setPositioning(this.snapshot);this.collapseBtn.setVisible(this.snapshot.colbtn);this.closeBtn.setVisible(this.snapshot.closebtn);this.afterSlide();this.mgr.el.dom.appendChild(this.el.dom);if(typeof _f9f=="function"){_f9f();}}.createDelegate(this));}},animateExpand:function(){var em=this.margins,cm=this.cmargins;var c=this.collapsedEl,el=this.el;var _fa2,distance;switch(this.position){case "west":_fa2="right";el.setLeft(-(el.getWidth()+(em.right+em.left)));el.setTop(c.getTop(true)-cm.top+em.top);distance=el.getWidth()+(em.right+em.left);break;case "east":_fa2="left";el.setLeft(this.mgr.getViewSize().width+em.left);el.setTop(c.getTop(true)-cm.top+em.top);distance=el.getWidth()+(em.right+em.left);break;case "north":_fa2="down";el.setLeft(em.left);el.setTop(-(el.getHeight()+(em.top+em.bottom)));distance=el.getHeight()+(em.top+em.bottom);break;case "south":_fa2="up";el.setLeft(em.left);el.setTop(this.mgr.getViewSize().height+em.top);distance=el.getHeight()+(em.top+em.bottom);break;}this.beforeSlide();el.setStyle("z-index","100");el.show();c.setLocation(-2000,-2000);c.hide();el.move(_fa2,distance,true,this.duration,function(){this.afterSlide();el.setStyle("z-index","");if(this.split){this.split.el.show();}this.fireEvent("invalidated",this);this.fireEvent("expanded",this);}.createDelegate(this),this.config.easing||YAHOO.util.Easing.easeOut);},animateCollapse:function(){var em=this.margins,cm=this.cmargins;var c=this.collapsedEl,el=this.el;var _fa5,distance;switch(this.position){case "west":_fa5="left";distance=el.getWidth()+(em.right+em.left);break;case "east":_fa5="right";distance=el.getWidth()+(em.right+em.left);break;case "north":_fa5="up";distance=el.getHeight()+(em.top+em.bottom);break;case "south":_fa5="down";distance=el.getHeight()+(em.top+em.bottom);break;}this.el.setStyle("z-index","100");this.beforeSlide();this.el.move(_fa5,distance,true,this.duration,function(){this.afterSlide();this.el.setStyle("z-index","");this.el.setLocation(-20000,-20000);this.el.hide();this.collapsedEl.show();this.fireEvent("collapsed",this);}.createDelegate(this),YAHOO.util.Easing.easeIn);},getAnchor:function(){switch(this.position){case "west":return "left";case "east":return "right";case "north":return "top";case "south":return "bottom";}}});YAHOO.ext.CenterLayoutRegion=function(mgr,_fa7){YAHOO.ext.CenterLayoutRegion.superclass.constructor.call(this,mgr,_fa7,"center");this.visible=true;this.minWidth=_fa7.minWidth||20;this.minHeight=_fa7.minHeight||20;};YAHOO.extendX(YAHOO.ext.CenterLayoutRegion,YAHOO.ext.LayoutRegion,{hide:function(){},show:function(){},getMinWidth:function(){return this.minWidth;},getMinHeight:function(){return this.minHeight;}});YAHOO.ext.NorthLayoutRegion=function(mgr,_fa9){YAHOO.ext.NorthLayoutRegion.superclass.constructor.call(this,mgr,_fa9,"north","n-resize");if(this.split){this.split.placement=YAHOO.ext.SplitBar.TOP;this.split.orientation=YAHOO.ext.SplitBar.VERTICAL;this.split.el.addClass("ylayout-split-v");}if(typeof _fa9.initialSize!="undefined"){this.el.setHeight(_fa9.initialSize);}};YAHOO.extendX(YAHOO.ext.NorthLayoutRegion,YAHOO.ext.SplitLayoutRegion,{getBox:function(){if(this.collapsed){return this.collapsedEl.getBox();}var box=this.el.getBox();if(this.split){box.height+=this.split.el.getHeight();}return box;},updateBox:function(box){if(this.split&&!this.collapsed){box.height-=this.split.el.getHeight();this.split.el.setLeft(box.x);this.split.el.setTop(box.y+box.height);this.split.el.setWidth(box.width);}if(this.collapsed){this.el.setWidth(box.width);var _fac=box.width-this.el.getBorderWidth("rl");this.bodyEl.setWidth(_fac);if(this.activePanel&&this.panelSize){this.activePanel.setSize(_fac,this.panelSize.height);}}YAHOO.ext.NorthLayoutRegion.superclass.updateBox.call(this,box);}});YAHOO.ext.SouthLayoutRegion=function(mgr,_fae){YAHOO.ext.SouthLayoutRegion.superclass.constructor.call(this,mgr,_fae,"south","s-resize");if(this.split){this.split.placement=YAHOO.ext.SplitBar.BOTTOM;this.split.orientation=YAHOO.ext.SplitBar.VERTICAL;this.split.el.addClass("ylayout-split-v");}if(typeof _fae.initialSize!="undefined"){this.el.setHeight(_fae.initialSize);}};YAHOO.extendX(YAHOO.ext.SouthLayoutRegion,YAHOO.ext.SplitLayoutRegion,{getBox:function(){if(this.collapsed){return this.collapsedEl.getBox();}var box=this.el.getBox();if(this.split){var sh=this.split.el.getHeight();box.height+=sh;box.y-=sh;}return box;},updateBox:function(box){if(this.split&&!this.collapsed){var sh=this.split.el.getHeight();box.height-=sh;box.y+=sh;this.split.el.setLeft(box.x);this.split.el.setTop(box.y-sh);this.split.el.setWidth(box.width);}if(this.collapsed){this.el.setWidth(box.width);var _fb3=box.width-this.el.getBorderWidth("rl");this.bodyEl.setWidth(_fb3);if(this.activePanel&&this.panelSize){this.activePanel.setSize(_fb3,this.panelSize.height);}}YAHOO.ext.SouthLayoutRegion.superclass.updateBox.call(this,box);}});YAHOO.ext.EastLayoutRegion=function(mgr,_fb5){YAHOO.ext.EastLayoutRegion.superclass.constructor.call(this,mgr,_fb5,"east","e-resize");if(this.split){this.split.placement=YAHOO.ext.SplitBar.RIGHT;this.split.orientation=YAHOO.ext.SplitBar.HORIZONTAL;this.split.el.addClass("ylayout-split-h");}if(typeof _fb5.initialSize!="undefined"){this.el.setWidth(_fb5.initialSize);}};YAHOO.extendX(YAHOO.ext.EastLayoutRegion,YAHOO.ext.SplitLayoutRegion,{getBox:function(){if(this.collapsed){return this.collapsedEl.getBox();}var box=this.el.getBox();if(this.split){var sw=this.split.el.getWidth();box.width+=sw;box.x-=sw;}return box;},updateBox:function(box){if(this.split&&!this.collapsed){var sw=this.split.el.getWidth();box.width-=sw;this.split.el.setLeft(box.x);this.split.el.setTop(box.y);this.split.el.setHeight(box.height);box.x+=sw;}if(this.collapsed){this.el.setHeight(box.height);var _fba=this.config.titlebar?box.height-(this.titleEl.getHeight()||0):box.height;_fba-=this.el.getBorderWidth("tb");this.bodyEl.setHeight(_fba);if(this.activePanel&&this.panelSize){this.activePanel.setSize(this.panelSize.width,_fba);}}YAHOO.ext.EastLayoutRegion.superclass.updateBox.call(this,box);}});YAHOO.ext.WestLayoutRegion=function(mgr,_fbc){YAHOO.ext.WestLayoutRegion.superclass.constructor.call(this,mgr,_fbc,"west","w-resize");if(this.split){this.split.placement=YAHOO.ext.SplitBar.LEFT;this.split.orientation=YAHOO.ext.SplitBar.HORIZONTAL;this.split.el.addClass("ylayout-split-h");}if(typeof _fbc.initialSize!="undefined"){this.el.setWidth(_fbc.initialSize);}};YAHOO.extendX(YAHOO.ext.WestLayoutRegion,YAHOO.ext.SplitLayoutRegion,{getBox:function(){if(this.collapsed){return this.collapsedEl.getBox();}var box=this.el.getBox();if(this.split){box.width+=this.split.el.getWidth();}return box;},updateBox:function(box){if(this.split&&!this.collapsed){var sw=this.split.el.getWidth();box.width-=sw;this.split.el.setLeft(box.x+box.width);this.split.el.setTop(box.y);this.split.el.setHeight(box.height);}if(this.collapsed){this.el.setHeight(box.height);var _fc0=this.config.titlebar?box.height-(this.titleEl.getHeight()||0):box.height;_fc0-=this.el.getBorderWidth("tb");this.bodyEl.setHeight(_fc0);if(this.activePanel&&this.panelSize){this.activePanel.setSize(this.panelSize.width,_fc0);}}YAHOO.ext.WestLayoutRegion.superclass.updateBox.call(this,box);}});YAHOO.ext.grid.AbstractColumnModel=function(){this.onWidthChange=new YAHOO.util.CustomEvent("widthChanged");this.onHeaderChange=new YAHOO.util.CustomEvent("headerChanged");this.onHiddenChange=new YAHOO.util.CustomEvent("hiddenChanged");this.events={"widthchange":this.onWidthChange,"headerchange":this.onHeaderChange,"hiddenchange":this.onHiddenChange};};YAHOO.ext.grid.AbstractColumnModel.prototype={fireEvent:YAHOO.ext.util.Observable.prototype.fireEvent,on:YAHOO.ext.util.Observable.prototype.on,addListener:YAHOO.ext.util.Observable.prototype.addListener,delayedListener:YAHOO.ext.util.Observable.prototype.delayedListener,removeListener:YAHOO.ext.util.Observable.prototype.removeListener,purgeListeners:YAHOO.ext.util.Observable.prototype.purgeListeners,bufferedListener:YAHOO.ext.util.Observable.prototype.bufferedListener,fireWidthChange:function(_fc1,_fc2){this.onWidthChange.fireDirect(this,_fc1,_fc2);},fireHeaderChange:function(_fc3,_fc4){this.onHeaderChange.fireDirect(this,_fc3,_fc4);},fireHiddenChange:function(_fc5,_fc6){this.onHiddenChange.fireDirect(this,_fc5,_fc6);},getColumnCount:function(){return 0;},isSortable:function(col){return false;},isHidden:function(col){return false;},getSortType:function(col){return YAHOO.ext.grid.DefaultColumnModel.sortTypes.none;},getRenderer:function(col){return YAHOO.ext.grid.DefaultColumnModel.defaultRenderer;},getColumnWidth:function(col){return 0;},getTotalWidth:function(){return 0;},getColumnHeader:function(col){return "";}};YAHOO.ext.grid.DefaultColumnModel=function(_fcd){YAHOO.ext.grid.DefaultColumnModel.superclass.constructor.call(this);this.config=_fcd;this.defaultWidth=100;this.defaultSortable=false;};YAHOO.extendX(YAHOO.ext.grid.DefaultColumnModel,YAHOO.ext.grid.AbstractColumnModel,{getColumnCount:function(){return this.config.length;},isSortable:function(col){if(typeof this.config[col].sortable=="undefined"){return this.defaultSortable;}return this.config[col].sortable;},getSortType:function(col){if(!this.dataMap){var map=[];for(var i=0,len=this.config.length;i<len;i++){map[this.getDataIndex(i)]=i;}this.dataMap=map;}col=this.dataMap[col];if(!this.config[col].sortType){return YAHOO.ext.grid.DefaultColumnModel.sortTypes.none;}return this.config[col].sortType;},setSortType:function(col,fn){this.config[col].sortType=fn;},getRenderer:function(col){if(!this.config[col].renderer){return YAHOO.ext.grid.DefaultColumnModel.defaultRenderer;}return this.config[col].renderer;},setRenderer:function(col,fn){this.config[col].renderer=fn;},getColumnWidth:function(col){return this.config[col].width||this.defaultWidth;},setColumnWidth:function(col,_fd9,_fda){this.config[col].width=_fd9;this.totalWidth=null;if(!_fda){this.onWidthChange.fireDirect(this,col,_fd9);}},getTotalWidth:function(_fdb){if(!this.totalWidth){this.totalWidth=0;for(var i=0;i<this.config.length;i++){if(_fdb||!this.isHidden(i)){this.totalWidth+=this.getColumnWidth(i);}}}return this.totalWidth;},getColumnHeader:function(col){return this.config[col].header;},setColumnHeader:function(col,_fdf){this.config[col].header=_fdf;this.onHeaderChange.fireDirect(this,col,_fdf);},getColumnTooltip:function(col){return this.config[col].tooltip;},setColumnTooltip:function(col,_fe2){this.config[col].tooltip=tooltip;},getDataIndex:function(col){if(typeof this.config[col].dataIndex!="number"){return col;}return this.config[col].dataIndex;},setDataIndex:function(col,_fe5){this.config[col].dataIndex=_fe5;},isCellEditable:function(_fe6,_fe7){return this.config[_fe6].editable||(typeof this.config[_fe6].editable=="undefined"&&this.config[_fe6].editor);},getCellEditor:function(_fe8,_fe9){return this.config[_fe8].editor;},setEditable:function(col,_feb){this.config[col].editable=_feb;},isHidden:function(_fec){return this.config[_fec].hidden;},isFixed:function(_fed){return this.config[_fed].fixed;},isResizable:function(_fee){return this.config[_fee].resizable!==false;},setHidden:function(_fef,_ff0){this.config[_fef].hidden=_ff0;this.totalWidth=null;this.fireHiddenChange(_fef,_ff0);},setEditor:function(col,_ff2){this.config[col].editor=_ff2;}});YAHOO.ext.grid.DefaultColumnModel.sortTypes={none:function(s){return s;},asUCString:function(s){return String(s).toUpperCase();},asDate:function(s){if(s instanceof Date){return s.getTime();}return Date.parse(String(s));},asFloat:function(s){var val=parseFloat(String(s).replace(/,/g,""));if(isNaN(val)){val=0;}return val;},asInt:function(s){var val=parseInt(String(s).replace(/,/g,""));if(isNaN(val)){val=0;}return val;}};YAHOO.ext.grid.DefaultColumnModel.defaultRenderer=function(_ffa){if(typeof _ffa=="string"&&_ffa.length<1){return "&#160;";}return _ffa;};YAHOO.ext.grid.Grid=function(_ffb,_ffc,_ffd,_ffe){this.container=YAHOO.ext.Element.get(_ffb);this.container.update("");this.container.setStyle("overflow","hidden");this.id=this.container.id;this.rows=[];this.rowCount=0;this.fieldId=null;var _fff=_ffc;this.dataModel=_fff;this.colModel=_ffd;this.selModel=_ffe;this.activeEditor=null;this.editingCell=null;this.minColumnWidth=25;this.autoSizeColumns=false;this.autoSizeHeaders=false;this.monitorWindowResize=true;this.maxRowsToMeasure=0;this.trackMouseOver=false;this.enableDragDrop=false;this.stripeRows=true;this.autoHeight=false;this.autoWidth=false;this.view=null;this.allowTextSelectionPattern=/INPUT|TEXTAREA|SELECT/i;if(typeof _ffc=="object"&&!_ffc.getRowCount){YAHOO.ext.util.Config.apply(this,_ffc);}this.setValueDelegate=this.setCellValue.createDelegate(this);this.events={"click":true,"dblclick":true,"mousedown":true,"mouseup":true,"mouseover":true,"mouseout":true,"keypress":true,"keydown":true,"cellclick":true,"celldblclick":true,"rowclick":true,"rowdblclick":true,"headerclick":true,"rowcontextmenu":true,"headercontextmenu":true,"beforeedit":true,"afteredit":true,"bodyscroll":true,"columnresize":true,"startdrag":true,"enddrag":true,"dragdrop":true,"dragover":true,"dragenter":true,"dragout":true};};YAHOO.ext.grid.Grid.prototype={render:function(){if((!this.container.dom.offsetHeight||this.container.dom.offsetHeight<20)||this.container.getStyle("height")=="auto"){this.autoHeight=true;}if((!this.container.dom.offsetWidth||this.container.dom.offsetWidth<20)){this.autoWidth=true;}if(!this.view){if(this.dataModel.isPaged()){this.view=new YAHOO.ext.grid.PagedGridView();}else{this.view=new YAHOO.ext.grid.GridView();}}this.view.init(this);this.el=getEl(this.view.render(),true);var c=this.container;c.mon("click",this.onClick,this,true);c.mon("dblclick",this.onDblClick,this,true);c.mon("contextmenu",this.onContextMenu,this,true);c.mon("selectstart",this.cancelTextSelection,this,true);c.mon("mousedown",this.cancelTextSelection,this,true);c.mon("mousedown",this.onMouseDown,this,true);c.mon("mouseup",this.onMouseUp,this,true);if(this.trackMouseOver){this.el.mon("mouseover",this.onMouseOver,this,true);this.el.mon("mouseout",this.onMouseOut,this,true);}c.mon("keypress",this.onKeyPress,this,true);c.mon("keydown",this.onKeyDown,this,true);this.init();return this;},init:function(){this.rows=this.el.dom.rows;if(!this.disableSelection){if(!this.selModel){this.selModel=new YAHOO.ext.grid.DefaultSelectionModel(this);}this.selModel.init(this);this.selModel.onSelectionChange.subscribe(this.updateField,this,true);}else{this.selModel=new YAHOO.ext.grid.DisableSelectionModel(this);this.selModel.init(this);}if(this.enableDragDrop){this.dd=new YAHOO.ext.grid.GridDD(this,this.container.dom);}},reset:function(_1001){this.destroy(false,true);YAHOO.ext.util.Config.apply(this,_1001);return this;},destroy:function(_1002,_1003){var c=this.container;c.removeAllListeners();this.view.destroy();YAHOO.ext.EventManager.removeResizeListener(this.view.onWindowResize,this.view);this.view=null;this.colModel.purgeListeners();if(!_1003){this.purgeListeners();}c.update("");if(_1002===true){c.remove();}},setDataModel:function(dm,_1006){this.view.unplugDataModel(this.dataModel);this.dataModel=dm;this.view.plugDataModel(dm);if(_1006){dm.fireEvent("datachanged");}},onMouseDown:function(e){this.fireEvent("mousedown",e);},onMouseUp:function(e){this.fireEvent("mouseup",e);},onMouseOver:function(e){this.fireEvent("mouseover",e);},onMouseOut:function(e){this.fireEvent("mouseout",e);},onKeyPress:function(e){this.fireEvent("keypress",e);},onKeyDown:function(e){this.fireEvent("keydown",e);},fireEvent:YAHOO.ext.util.Observable.prototype.fireEvent,on:YAHOO.ext.util.Observable.prototype.on,addListener:YAHOO.ext.util.Observable.prototype.addListener,delayedListener:YAHOO.ext.util.Observable.prototype.delayedListener,removeListener:YAHOO.ext.util.Observable.prototype.removeListener,purgeListeners:YAHOO.ext.util.Observable.prototype.purgeListeners,bufferedListener:YAHOO.ext.util.Observable.prototype.bufferedListener,onClick:function(e){this.fireEvent("click",e);var _100e=e.getTarget();var row=this.getRowFromChild(_100e);var cell=this.getCellFromChild(_100e);var _1011=this.getHeaderFromChild(_100e);if(row){this.fireEvent("rowclick",this,row.rowIndex,e);}if(cell){this.fireEvent("cellclick",this,row.rowIndex,cell.columnIndex,e);}if(_1011){this.fireEvent("headerclick",this,_1011.columnIndex,e);}},onContextMenu:function(e){var _1013=e.getTarget();var row=this.getRowFromChild(_1013);var _1015=this.getHeaderFromChild(_1013);if(row){this.fireEvent("rowcontextmenu",this,row.rowIndex,e);}if(_1015){this.fireEvent("headercontextmenu",this,_1015.columnIndex,e);}e.preventDefault();},onDblClick:function(e){this.fireEvent("dblclick",e);var _1017=e.getTarget();var row=this.getRowFromChild(_1017);var cell=this.getCellFromChild(_1017);if(row){this.fireEvent("rowdblclick",this,row.rowIndex,e);}if(cell){this.fireEvent("celldblclick",this,row.rowIndex,cell.columnIndex,e);}},startEditing:function(_101a,_101b){var row=this.rows[_101a];var cell=row.childNodes[_101b];this.stopEditing();setTimeout(this.doEdit.createDelegate(this,[row,cell]),10);},stopEditing:function(){if(this.activeEditor){this.activeEditor.stopEditing();}},doEdit:function(row,cell){if(!row||!cell){return;}var cm=this.colModel;var dm=this.dataModel;var _1022=cell.columnIndex;var _1023=row.rowIndex;if(cm.isCellEditable(_1022,_1023)){var ed=cm.getCellEditor(_1022,_1023);if(ed){if(this.activeEditor){this.activeEditor.stopEditing();}this.fireEvent("beforeedit",this,_1023,_1022);this.activeEditor=ed;this.editingCell=cell;this.view.ensureVisible(row,true);try{cell.focus();}catch(e){}ed.init(this,this.el.dom.parentNode,this.setValueDelegate);var value=dm.getValueAt(_1023,cm.getDataIndex(_1022));setTimeout(ed.startEditing.createDelegate(ed,[value,row,cell]),1);}}},setCellValue:function(value,_1027,_1028){this.dataModel.setValueAt(value,_1027,this.colModel.getDataIndex(_1028));this.fireEvent("afteredit",this,_1027,_1028);},cancelTextSelection:function(e){var _102a=e.getTarget();if(_102a&&_102a!=this.el.dom.parentNode&&!this.allowTextSelectionPattern.test(_102a.tagName)){e.preventDefault();}},autoSize:function(){this.view.updateWrapHeight();this.view.adjustForScroll();},scrollTo:function(row){if(typeof row=="number"){row=this.rows[row];}this.view.ensureVisible(row,true);},getEditingCell:function(){return this.editingCell;},bindToField:function(_102c){this.fieldId=_102c;this.readField();},updateField:function(){if(this.fieldId){var field=YAHOO.util.Dom.get(this.fieldId);field.value=this.getSelectedRowIds().join(",");}},readField:function(){if(this.fieldId){var field=YAHOO.util.Dom.get(this.fieldId);var _102f=field.value.split(",");var rows=this.getRowsById(_102f);this.selModel.selectRows(rows,false);}},getRow:function(index){return this.rows[index];},getRowsById:function(id){var dm=this.dataModel;if(!(id instanceof Array)){for(var i=0;i<this.rows.length;i++){if(dm.getRowId(i)==id){return this.rows[i];}}return null;}var found=[];var re="^(?:";for(var i=0;i<id.length;i++){re+=id[i];if(i!=id.length-1){re+="|";}}var regex=new RegExp(re+")$");for(var i=0;i<this.rows.length;i++){if(regex.test(dm.getRowId(i))){found.push(this.rows[i]);}}return found;},getRowAfter:function(row){return this.getSibling("next",row);},getRowBefore:function(row){return this.getSibling("previous",row);},getCellAfter:function(cell,_103d){var next=this.getSibling("next",cell);if(next&&!_103d&&this.colModel.isHidden(next.columnIndex)){return this.getCellAfter(next);}return next;},getCellBefore:function(cell,_1040){var prev=this.getSibling("previous",cell);if(prev&&!_1040&&this.colModel.isHidden(prev.columnIndex)){return this.getCellBefore(prev);}return prev;},getLastCell:function(row,_1043){var cell=this.getElement("previous",row.lastChild);if(cell&&!_1043&&this.colModel.isHidden(cell.columnIndex)){return this.getCellBefore(cell);}return cell;},getFirstCell:function(row,_1046){var cell=this.getElement("next",row.firstChild);if(cell&&!_1046&&this.colModel.isHidden(cell.columnIndex)){return this.getCellAfter(cell);}return cell;},getSibling:function(type,node){if(!node){return null;}type+="Sibling";var n=node[type];while(n&&n.nodeType!=1){n=n[type];}return n;},getElement:function(_104b,node){if(!node||node.nodeType==1){return node;}else{return this.getSibling(_104b,node);}},getElementFromChild:function(_104d,_104e){if(!_104d||(YAHOO.util.Dom.hasClass(_104d,_104e))){return _104d;}var p=_104d.parentNode;var b=document.body;while(p&&p!=b){if(YAHOO.util.Dom.hasClass(p,_104e)){return p;}p=p.parentNode;}return null;},getRowFromChild:function(_1051){return this.getElementFromChild(_1051,"ygrid-row");},getCellFromChild:function(_1052){return this.getElementFromChild(_1052,"ygrid-col");},getHeaderFromChild:function(_1053){return this.getElementFromChild(_1053,"ygrid-hd");},getSelectedRows:function(){return this.selModel.getSelectedRows();},getSelectedRow:function(){if(this.selModel.hasSelection()){return this.selModel.getSelectedRows()[0];}return null;},getSelectedRowIndexes:function(){var a=[];var rows=this.selModel.getSelectedRows();for(var i=0;i<rows.length;i++){a[i]=rows[i].rowIndex;}return a;},getSelectedRowIndex:function(){if(this.selModel.hasSelection()){return this.selModel.getSelectedRows()[0].rowIndex;}return -1;},getSelectedRowId:function(){if(this.selModel.hasSelection()){return this.selModel.getSelectedRowIds()[0];}return null;},getSelectedRowIds:function(){return this.selModel.getSelectedRowIds();},clearSelections:function(){this.selModel.clearSelections();},selectAll:function(){this.selModel.selectAll();},getSelectionCount:function(){return this.selModel.getCount();},hasSelection:function(){return this.selModel.hasSelection();},getSelectionModel:function(){if(!this.selModel){this.selModel=new DefaultSelectionModel();}return this.selModel;},getDataModel:function(){return this.dataModel;},getColumnModel:function(){return this.colModel;},getView:function(){return this.view;},getDragDropText:function(){return this.ddText.replace("%0",this.selModel.getCount());}};YAHOO.ext.grid.Grid.prototype.ddText="%0 selected row(s)";YAHOO.ext.grid.GridView=function(){this.grid=null;this.lastFocusedRow=null;this.onScroll=new YAHOO.util.CustomEvent("onscroll");this.adjustScrollTask=new YAHOO.ext.util.DelayedTask(this._adjustForScroll,this);this.ensureVisibleTask=new YAHOO.ext.util.DelayedTask();};YAHOO.ext.grid.GridView.prototype={init:function(grid){this.grid=grid;},fireScroll:function(_1058,_1059){this.onScroll.fireDirect(this.grid,_1058,_1059);},getColumnRenderers:function(){var _105a=[];var cm=this.grid.colModel;var _105c=cm.getColumnCount();for(var i=0;i<_105c;i++){_105a.push(cm.getRenderer(i));}return _105a;},buildIndexMap:function(){var _105e={};var _105f={};var cm=this.grid.colModel;for(var i=0,len=cm.getColumnCount();i<len;i++){var di=cm.getDataIndex(i);_105e[i]=di;_105f[di]=i;}return {"colToData":_105e,"dataToCol":_105f};},getDataIndexes:function(){if(!this.indexMap){this.indexMap=this.buildIndexMap();}return this.indexMap.colToData;},getColumnIndexByDataIndex:function(_1063){if(!this.indexMap){this.indexMap=this.buildIndexMap();}return this.indexMap.dataToCol[_1063];},updateHeaders:function(){var _1064=this.grid.colModel;var _1065=this.headers;var _1066=_1064.getColumnCount();for(var i=0;i<_1066;i++){_1065[i].textNode.innerHTML=_1064.getColumnHeader(i);}},adjustForScroll:function(_1068){if(!_1068){this.adjustScrollTask.delay(50);}else{this._adjustForScroll();}},getCellAtPoint:function(x,y){var _106b=null;var _106c=null;var xy=YAHOO.util.Dom.getXY(this.wrap);x=(x-xy[0])+this.wrap.scrollLeft;y=(y-xy[1])+this.wrap.scrollTop;var _106e=this.grid.colModel;var pos=0;var _1070=_106e.getColumnCount();for(var i=0;i<_1070;i++){if(_106e.isHidden(i)){continue;}var width=_106e.getColumnWidth(i);if(x>=pos&&x<pos+width){_106b=i;break;}pos+=width;}if(_106b!=null){_106c=(y==0?0:Math.floor(y/this.getRowHeight()));if(_106c>=this.grid.dataModel.getRowCount()){return null;}return [_106b,_106c];}return null;},_adjustForScroll:function(){this.forceScrollUpdate();if(this.scrollbarMode==YAHOO.ext.grid.GridView.SCROLLBARS_OVERLAP){var _1073=0;if(this.wrap.clientWidth&&this.wrap.clientWidth!==0){_1073=this.wrap.offsetWidth-this.wrap.clientWidth;}this.hwrap.setWidth(this.wrap.offsetWidth-_1073);}else{this.hwrap.setWidth(this.wrap.offsetWidth);}this.bwrap.setWidth(Math.max(this.grid.colModel.getTotalWidth(),this.wrap.clientWidth));},focusRow:function(row){if(typeof row=="number"){row=this.getBodyTable().childNodes[row];}if(!row){return;}var left=this.wrap.scrollLeft;try{row.childNodes.item(0).hideFocus=true;row.childNodes.item(0).focus();}catch(e){}this.ensureVisible(row);this.wrap.scrollLeft=left;this.handleScroll();this.lastFocusedRow=row;},ensureVisible:function(row,_1077){if(!_1077){this.ensureVisibleTask.delay(50,this._ensureVisible,this,[row]);}else{this._ensureVisible(row);}},_ensureVisible:function(row){if(typeof row=="number"){row=this.getBodyTable().childNodes[row];}if(!row){return;}var left=this.wrap.scrollLeft;var _107a=parseInt(row.offsetTop,10);var _107b=_107a+row.offsetHeight;var _107c=parseInt(this.wrap.scrollTop,10);var _107d=_107c+this.wrap.clientHeight;if(_107a<_107c){this.wrap.scrollTop=_107a;}else{if(_107b>_107d){this.wrap.scrollTop=_107b-this.wrap.clientHeight;}}this.wrap.scrollLeft=left;this.handleScroll();},updateColumns:function(){this.grid.stopEditing();var _107e=this.grid.colModel;var hcols=this.headers;var _1080=_107e.getColumnCount();var pos=0;var _1082=_107e.getTotalWidth();for(var i=0;i<_1080;i++){if(_107e.isHidden(i)){continue;}var width=_107e.getColumnWidth(i);hcols[i].style.width=width+"px";hcols[i].style.left=pos+"px";hcols[i].split.style.left=(pos+width-3)+"px";this.setCSSWidth(i,width,pos);pos+=width;}this.lastWidth=_1082;if(this.grid.autoWidth){this.grid.container.setWidth(_1082+this.grid.container.getBorderWidth("lr"));this.grid.autoSize();}this.bwrap.setWidth(Math.max(_1082,this.wrap.clientWidth));if(!YAHOO.ext.util.Browser.isIE){this.wrap.scrollLeft=this.hwrap.dom.scrollLeft;}this.syncScroll();this.forceScrollUpdate();if(this.grid.autoHeight){this.autoHeight();this.updateWrapHeight();}},setCSSWidth:function(_1085,width,pos){var _1088=["#"+this.grid.id+" .ygrid-col-"+_1085,".ygrid-col-"+_1085];YAHOO.ext.util.CSS.updateRule(_1088,"width",width+"px");if(typeof pos=="number"){YAHOO.ext.util.CSS.updateRule(_1088,"left",pos+"px");}},setCSSStyle:function(_1089,name,value){var _108c=["#"+this.grid.id+" .ygrid-col-"+_1089,".ygrid-col-"+_1089];YAHOO.ext.util.CSS.updateRule(_108c,name,value);},handleHiddenChange:function(_108d,_108e,_108f){if(_108f){this.hideColumn(_108e);}else{this.unhideColumn(_108e);}this.updateColumns();},hideColumn:function(_1090){var _1091=["#"+this.grid.id+" .ygrid-col-"+_1090,".ygrid-col-"+_1090];YAHOO.ext.util.CSS.updateRule(_1091,"position","absolute");YAHOO.ext.util.CSS.updateRule(_1091,"visibility","hidden");this.headers[_1090].style.display="none";this.headers[_1090].split.style.display="none";},unhideColumn:function(_1092){var _1093=["#"+this.grid.id+" .ygrid-col-"+_1092,".ygrid-col-"+_1092];YAHOO.ext.util.CSS.updateRule(_1093,"position","");YAHOO.ext.util.CSS.updateRule(_1093,"visibility","visible");this.headers[_1092].style.display="";this.headers[_1092].split.style.display="";},getBodyTable:function(){return this.bwrap.dom;},updateRowIndexes:function(_1094,_1095){var _1096=this.grid.stripeRows;var bt=this.getBodyTable();var nodes=bt.childNodes;_1094=_1094||0;_1095=_1095||nodes.length-1;var re=/^(?:ygrid-row ygrid-row-alt|ygrid-row)/;for(var _109a=_1094;_109a<=_1095;_109a++){var node=nodes[_109a];if(_1096&&(_109a+1)%2==0){node.className=node.className.replace(re,"ygrid-row ygrid-row-alt");}else{node.className=node.className.replace(re,"ygrid-row");}node.rowIndex=_109a;nodes[_109a].style.top=(_109a*this.rowHeight)+"px";}},insertRows:function(_109c,_109d,_109e){this.updateBodyHeight();this.adjustForScroll(true);var _109f=this.getColumnRenderers();var _10a0=this.getDataIndexes();var _10a1=this.grid.colModel.getColumnCount();var _10a2=null;var bt=this.getBodyTable();if(_109d<bt.childNodes.length){_10a2=bt.childNodes[_109d];}for(var _10a4=_109d;_10a4<=_109e;_10a4++){var row=document.createElement("span");row.className="ygrid-row";row.style.top=(_10a4*this.rowHeight)+"px";this.renderRow(_109c,row,_10a4,_10a1,_109f,_10a0);if(_10a2){bt.insertBefore(row,_10a2);}else{bt.appendChild(row);}}this.updateRowIndexes(_109d);this.adjustForScroll(true);},renderRow:function(_10a6,row,_10a8,_10a9,_10aa,_10ab){for(var _10ac=0;_10ac<_10a9;_10ac++){var td=document.createElement("span");td.className="ygrid-col ygrid-col-"+_10ac+(_10ac==_10a9-1?" ygrid-col-last":"");td.columnIndex=_10ac;td.tabIndex=0;var span=document.createElement("span");span.className="ygrid-cell-text";td.appendChild(span);var val=_10aa[_10ac](_10a6.getValueAt(_10a8,_10ab[_10ac]),_10a8,_10ac,td);if(typeof val=="undefined"||val===""){val="&#160;";}span.innerHTML=val;row.appendChild(td);}},deleteRows:function(_10b0,_10b1,_10b2){this.updateBodyHeight();this.grid.selModel.deselectRange(_10b1,_10b2);var bt=this.getBodyTable();var rows=[];for(var _10b5=_10b1;_10b5<=_10b2;_10b5++){rows.push(bt.childNodes[_10b5]);}for(var i=0;i<rows.length;i++){bt.removeChild(rows[i]);rows[i]=null;}rows=null;this.updateRowIndexes(_10b1);this.adjustForScroll();},updateRows:function(_10b7,_10b8,_10b9){var bt=this.getBodyTable();var _10bb=this.getDataIndexes();var _10bc=this.getColumnRenderers();var _10bd=this.grid.colModel.getColumnCount();for(var _10be=_10b8;_10be<=_10b9;_10be++){var row=bt.rows[_10be];var cells=row.childNodes;for(var _10c1=0;_10c1<_10bd;_10c1++){var td=cells[_10c1];var val=_10bc[_10c1](_10b7.getValueAt(_10be,_10bb[_10c1]),_10be,_10c1,td);if(typeof val=="undefined"||val===""){val="&#160;";}td.firstChild.innerHTML=val;}}},handleSort:function(_10c4,_10c5,_10c6,_10c7){this.grid.selModel.syncSelectionsToIds();if(!_10c7){this.updateRows(_10c4,0,_10c4.getRowCount()-1);}this.updateHeaderSortState();if(this.lastFocusedRow){this.focusRow(this.lastFocusedRow);}},syncScroll:function(){this.hwrap.dom.scrollLeft=this.wrap.scrollLeft;},handleScroll:function(){this.syncScroll();this.fireScroll(this.wrap.scrollLeft,this.wrap.scrollTop);this.grid.fireEvent("bodyscroll",this.wrap.scrollLeft,this.wrap.scrollTop);},getRowHeight:function(){if(!this.rowHeight){var rule=YAHOO.ext.util.CSS.getRule(["#"+this.grid.id+" .ygrid-row",".ygrid-row"]);if(rule&&rule.style.height){this.rowHeight=parseInt(rule.style.height,10);}else{this.rowHeight=21;}}return this.rowHeight;},renderRows:function(_10c9){this.grid.stopEditing();if(this.grid.selModel){this.grid.selModel.clearSelections();}var bt=this.getBodyTable();bt.innerHTML="";this.rowHeight=this.getRowHeight();this.insertRows(_10c9,0,_10c9.getRowCount()-1);},updateCell:function(_10cb,_10cc,_10cd){var _10ce=this.getColumnIndexByDataIndex(_10cd);if(typeof _10ce=="undefined"){return;}var bt=this.getBodyTable();var row=bt.childNodes[_10cc];var cell=row.childNodes[_10ce];var _10d2=this.grid.colModel.getRenderer(_10ce);var val=_10d2(_10cb.getValueAt(_10cc,_10cd),_10cc,_10ce,cell);if(typeof val=="undefined"||val===""){val="&#160;";}cell.firstChild.innerHTML=val;},calcColumnWidth:function(_10d4,_10d5){var _10d6=0;var bt=this.getBodyTable();var rows=bt.childNodes;var _10d9=Math.min(_10d5||rows.length,rows.length);if(this.grid.autoSizeHeaders){var h=this.headers[_10d4];var _10db=h.style.width;h.style.width=this.grid.minColumnWidth+"px";_10d6=Math.max(_10d6,h.scrollWidth);h.style.width=_10db;}for(var i=0;i<_10d9;i++){var cell=rows[i].childNodes[_10d4].firstChild;_10d6=Math.max(_10d6,cell.scrollWidth);}return _10d6+5;},autoSizeColumn:function(_10de,_10df){if(_10df){this.setCSSWidth(_10de,this.grid.minColumnWidth);}var _10e0=this.calcColumnWidth(_10de);this.grid.colModel.setColumnWidth(_10de,Math.max(this.grid.minColumnWidth,_10e0));this.grid.fireEvent("columnresize",_10de,_10e0);},autoSizeColumns:function(){var _10e1=this.grid.colModel;var _10e2=_10e1.getColumnCount();var wrap=this.wrap;for(var i=0;i<_10e2;i++){this.setCSSWidth(i,this.grid.minColumnWidth);_10e1.setColumnWidth(i,this.calcColumnWidth(i,this.grid.maxRowsToMeasure),true);}if(_10e1.getTotalWidth()<wrap.clientWidth){var diff=Math.floor((wrap.clientWidth-_10e1.getTotalWidth())/_10e2);for(var i=0;i<_10e2;i++){_10e1.setColumnWidth(i,_10e1.getColumnWidth(i)+diff,true);}}this.updateColumns();},fitColumns:function(){var cm=this.grid.colModel;var _10e8=cm.getColumnCount();var cols=[];var width=0;var i,w;for(i=0;i<_10e8;i++){if(!cm.isHidden(i)&&!cm.isFixed(i)){w=cm.getColumnWidth(i);cols.push(i);cols.push(w);width+=w;}}var frac=(this.wrap.clientWidth-cm.getTotalWidth())/width;while(cols.length){w=cols.pop();i=cols.pop();cm.setColumnWidth(i,Math.floor(w+w*frac),true);}this.updateColumns();},onWindowResize:function(){if(this.grid.monitorWindowResize){this.adjustForScroll();this.updateWrapHeight();this.adjustForScroll();}},updateWrapHeight:function(){this.grid.container.beginMeasure();this.autoHeight();var box=this.grid.container.getSize(true);this.wrapEl.setHeight(box.height-this.footerHeight-parseInt(this.wrap.offsetTop,10));this.pwrap.setSize(box.width,box.height);this.grid.container.endMeasure();},forceScrollUpdate:function(){var wrap=this.wrapEl;wrap.setWidth(wrap.getWidth(true));setTimeout(function(){wrap.setWidth("");},1);},updateHeaderSortState:function(){var state=this.grid.dataModel.getSortState();if(!state||typeof state.column=="undefined"){return;}var _10f0=this.getColumnIndexByDataIndex(state.column);var _10f1=state.direction;for(var i=0,len=this.headers.length;i<len;i++){var h=this.headers[i];if(i!=_10f0){h.sortDesc.style.display="none";h.sortAsc.style.display="none";}else{h.sortDesc.style.display=_10f1=="DESC"?"block":"none";h.sortAsc.style.display=_10f1=="ASC"?"block":"none";}}},unplugDataModel:function(dm){dm.removeListener("cellupdated",this.updateCell,this);dm.removeListener("datachanged",this.renderRows,this);dm.removeListener("rowsdeleted",this.deleteRows,this);dm.removeListener("rowsinserted",this.insertRows,this);dm.removeListener("rowsupdated",this.updateRows,this);dm.removeListener("rowssorted",this.handleSort,this);},plugDataModel:function(dm){dm.on("cellupdated",this.updateCell,this,true);dm.on("datachanged",this.renderRows,this,true);dm.on("rowsdeleted",this.deleteRows,this,true);dm.on("rowsinserted",this.insertRows,this,true);dm.on("rowsupdated",this.updateRows,this,true);dm.on("rowssorted",this.handleSort,this,true);},destroy:function(){this.unplugDataModel(this.grid.dataModel);var sp=this.splitters;if(sp){for(var i in sp){if(sp[i]&&typeof sp[i]!="function"){sp[i].destroy(true);}}}},render:function(){var grid=this.grid;var _10f9=grid.container.dom;var _10fa=grid.dataModel;this.plugDataModel(_10fa);var _10fb=grid.colModel;_10fb.onWidthChange.subscribe(this.updateColumns,this,true);_10fb.onHeaderChange.subscribe(this.updateHeaders,this,true);_10fb.onHiddenChange.subscribe(this.handleHiddenChange,this,true);if(grid.monitorWindowResize===true){YAHOO.ext.EventManager.onWindowResize(this.onWindowResize,this,true);}var _10fc=this.autoSizeColumn.createDelegate(this);var _10fd=_10fb.getColumnCount();var dh=YAHOO.ext.DomHelper;this.pwrap=dh.append(_10f9,{tag:"div",cls:"ygrid-positioner",style:"position:relative;width:100%;height:100%;left:0;top:0;overflow:hidden;"},true);var pos=this.pwrap.dom;var wrap=dh.append(pos,{tag:"div",cls:"ygrid-wrap"});this.wrap=wrap;this.wrapEl=getEl(wrap,true);YAHOO.ext.EventManager.on(wrap,"scroll",this.handleScroll,this,true);var hwrap=dh.append(pos,{tag:"div",cls:"ygrid-wrap-headers"});this.hwrap=getEl(hwrap,true);var bwrap=dh.append(wrap,{tag:"div",cls:"ygrid-wrap-body",id:_10f9.id+"-body"});this.bwrap=getEl(bwrap,true);this.bwrap.setWidth(_10fb.getTotalWidth());bwrap.rows=bwrap.childNodes;this.footerHeight=0;var foot=this.appendFooter(this.pwrap.dom);if(foot){this.footer=getEl(foot,true);this.footerHeight=this.footer.getHeight();}this.updateWrapHeight();var hrow=dh.append(hwrap,{tag:"span",cls:"ygrid-hrow"});this.hrow=hrow;if(!YAHOO.ext.util.Browser.isGecko){var _1105=document.createElement("iframe");_1105.className="ygrid-hrow-frame";_1105.frameBorder=0;_1105.src=YAHOO.ext.SSL_SECURE_URL;hwrap.appendChild(_1105);}this.headerCtrl=new YAHOO.ext.grid.HeaderController(this.grid);this.headers=[];this.cols=[];this.splitters=[];var _1106=dh.createTemplate({tag:"span",cls:"ygrid-hd ygrid-header-{0}",children:[{tag:"span",cls:"ygrid-hd-body",html:"<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" title=\"{2}\">"+"<tbody><tr><td><span>{1}</span></td>"+"<td><span class=\"sort-desc\"></span><span class=\"sort-asc\"></span></td>"+"</tr></tbody></table>"}]});_1106.compile();for(var i=0;i<_10fd;i++){var hd=_1106.append(hrow,[i,_10fb.getColumnHeader(i),_10fb.getColumnTooltip(i)||""]);var spans=hd.getElementsByTagName("span");hd.textNode=spans[1];hd.sortDesc=spans[2];hd.sortAsc=spans[3];hd.columnIndex=i;this.headers.push(hd);if(_10fb.isSortable(i)){this.headerCtrl.register(hd);}var split=dh.append(hrow,{tag:"span",cls:"ygrid-hd-split"});hd.split=split;if(_10fb.isResizable(i)&&!_10fb.isFixed(i)){YAHOO.util.Event.on(split,"dblclick",_10fc.createCallback(i+0,true));var sb=new YAHOO.ext.SplitBar(split,hd,null,YAHOO.ext.SplitBar.LEFT);sb.columnIndex=i;sb.minSize=grid.minColumnWidth;sb.onMoved.subscribe(this.onColumnSplitterMoved,this,true);YAHOO.util.Dom.addClass(sb.proxy,"ygrid-column-sizer");YAHOO.util.Dom.setStyle(sb.proxy,"background-color","");sb.dd._resizeProxy=function(){var el=this.getDragEl();YAHOO.util.Dom.setStyle(el,"height",(hwrap.clientHeight+wrap.clientHeight-2)+"px");};this.splitters[i]=sb;}else{split.style.cursor="default";}}if(grid.autoSizeColumns){this.renderRows(_10fa);this.autoSizeColumns();}else{this.updateColumns();this.renderRows(_10fa);}for(var i=0;i<_10fd;i++){if(_10fb.isHidden(i)){this.hideColumn(i);}}this.updateHeaderSortState();return this.bwrap;},onColumnSplitterMoved:function(_110e,_110f){this.grid.colModel.setColumnWidth(_110e.columnIndex,_110f);this.grid.fireEvent("columnresize",_110e.columnIndex,_110f);},appendFooter:function(_1110){return null;},autoHeight:function(){if(this.grid.autoHeight){var h=this.getBodyHeight();var c=this.grid.container;var total=h+(parseInt(this.wrap.offsetTop,10)||0)+this.footerHeight+c.getBorderWidth("tb")+c.getPadding("tb")+(this.wrap.offsetHeight-this.wrap.clientHeight);c.setHeight(total);}},getBodyHeight:function(){return this.grid.dataModel.getRowCount()*this.getRowHeight();},updateBodyHeight:function(){this.getBodyTable().style.height=this.getBodyHeight()+"px";if(this.grid.autoHeight){this.autoHeight();this.updateWrapHeight();}}};YAHOO.ext.grid.GridView.SCROLLBARS_UNDER=0;YAHOO.ext.grid.GridView.SCROLLBARS_OVERLAP=1;YAHOO.ext.grid.GridView.prototype.scrollbarMode=YAHOO.ext.grid.GridView.SCROLLBARS_UNDER;YAHOO.ext.grid.GridView.prototype.fitColumnsToContainer=YAHOO.ext.grid.GridView.prototype.fitColumns;YAHOO.ext.grid.HeaderController=function(grid){this.grid=grid;this.headers=[];};YAHOO.ext.grid.HeaderController.prototype={register:function(_1115){this.headers.push(_1115);YAHOO.ext.EventManager.on(_1115,"selectstart",this.cancelTextSelection,this,true);YAHOO.ext.EventManager.on(_1115,"mousedown",this.cancelTextSelection,this,true);YAHOO.ext.EventManager.on(_1115,"mouseover",this.headerOver,this,true);YAHOO.ext.EventManager.on(_1115,"mouseout",this.headerOut,this,true);YAHOO.ext.EventManager.on(_1115,"click",this.headerClick,this,true);},headerClick:function(e){var grid=this.grid,cm=grid.colModel,dm=grid.dataModel;grid.stopEditing();var _1118=grid.getHeaderFromChild(e.getTarget());var state=dm.getSortState();var _111a=_1118.sortDir||"ASC";if(typeof state.column!="undefined"&&grid.getView().getColumnIndexByDataIndex(state.column)==_1118.columnIndex){_111a=(state.direction=="ASC"?"DESC":"ASC");}_1118.sortDir=_111a;dm.sort(cm,cm.getDataIndex(_1118.columnIndex),_111a);},headerOver:function(e){var _111c=this.grid.getHeaderFromChild(e.getTarget());YAHOO.util.Dom.addClass(_111c,"ygrid-hd-over");},headerOut:function(e){var _111e=this.grid.getHeaderFromChild(e.getTarget());YAHOO.util.Dom.removeClass(_111e,"ygrid-hd-over");},cancelTextSelection:function(e){e.preventDefault();}};YAHOO.ext.grid.DefaultSelectionModel=function(){this.selectedRows=[];this.selectedRowIds=[];this.lastSelectedRow=null;this.onRowSelect=new YAHOO.util.CustomEvent("SelectionTable.rowSelected");this.onSelectionChange=new YAHOO.util.CustomEvent("SelectionTable.selectionChanged");this.events={"selectionchange":this.onSelectionChange,"rowselect":this.onRowSelect};this.locked=false;};YAHOO.ext.grid.DefaultSelectionModel.prototype={init:function(grid){this.grid=grid;this.initEvents();},lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isLocked:function(){return this.locked;},initEvents:function(){if(this.grid.trackMouseOver){this.grid.addListener("mouseover",this.handleOver,this,true);this.grid.addListener("mouseout",this.handleOut,this,true);}this.grid.addListener("rowclick",this.rowClick,this,true);this.grid.addListener("keydown",this.keyDown,this,true);},fireEvent:YAHOO.ext.util.Observable.prototype.fireEvent,on:YAHOO.ext.util.Observable.prototype.on,addListener:YAHOO.ext.util.Observable.prototype.addListener,delayedListener:YAHOO.ext.util.Observable.prototype.delayedListener,removeListener:YAHOO.ext.util.Observable.prototype.removeListener,purgeListeners:YAHOO.ext.util.Observable.prototype.purgeListeners,bufferedListener:YAHOO.ext.util.Observable.prototype.bufferedListener,syncSelectionsToIds:function(){if(this.getCount()>0){var ids=this.selectedRowIds.concat();this.clearSelections();this.selectRowsById(ids,true);}},selectRowsById:function(id,_1123){var rows=this.grid.getRowsById(id);if(!(rows instanceof Array)){this.selectRow(rows,_1123);return;}this.selectRows(rows,_1123);},getCount:function(){return this.selectedRows.length;},selectFirstRow:function(){for(var j=0;j<this.grid.rows.length;j++){if(this.isSelectable(this.grid.rows[j])){this.focusRow(this.grid.rows[j]);this.setRowState(this.grid.rows[j],true);return;}}},selectNext:function(_1126){if(this.lastSelectedRow){for(var j=(this.lastSelectedRow.rowIndex+1);j<this.grid.rows.length;j++){var row=this.grid.rows[j];if(this.isSelectable(row)){this.focusRow(row);this.setRowState(row,true,_1126);return;}}}},selectPrevious:function(_1129){if(this.lastSelectedRow){for(var j=(this.lastSelectedRow.rowIndex-1);j>=0;j--){var row=this.grid.rows[j];if(this.isSelectable(row)){this.focusRow(row);this.setRowState(row,true,_1129);return;}}}},getSelectedRows:function(){return this.selectedRows;},getSelectedRowIds:function(){return this.selectedRowIds;},clearSelections:function(){if(this.isLocked()){return;}var _112c=this.selectedRows.concat();for(var j=0;j<_112c.length;j++){this.setRowState(_112c[j],false);}this.selectedRows=[];this.selectedRowIds=[];},selectAll:function(){if(this.isLocked()){return;}this.selectedRows=[];this.selectedRowIds=[];for(var j=0,len=this.grid.rows.length;j<len;j++){this.setRowState(this.grid.rows[j],true,true);}},hasSelection:function(){return this.selectedRows.length>0;},isSelected:function(row){return row&&(row.selected===true||row.getAttribute("selected")=="true");},isSelectable:function(row){return row&&row.getAttribute("selectable")!="false";},rowClick:function(grid,_1132,e){if(this.isLocked()){return;}var row=grid.getRow(_1132);if(this.isSelectable(row)){if(e.shiftKey&&this.lastSelectedRow){var _1135=this.lastSelectedRow.rowIndex;this.selectRange(this.lastSelectedRow,row,e.ctrlKey);this.lastSelectedRow=this.grid.el.dom.rows[_1135];}else{this.focusRow(row);var _1136=e.ctrlKey?!this.isSelected(row):true;this.setRowState(row,_1136,e.hasModifier());}}},focusRow:function(row){this.grid.view.focusRow(row);},selectRow:function(row,_1139){this.setRowState(this.getRow(row),true,_1139);},selectRows:function(rows,_113b){if(!_113b){this.clearSelections();}for(var i=0;i<rows.length;i++){this.selectRow(rows[i],true);}},deselectRow:function(row){this.setRowState(this.getRow(row),false);},getRow:function(row){if(typeof row=="number"){row=this.grid.rows[row];}return row;},selectRange:function(_113f,_1140,_1141){_113f=this.getRow(_113f);_1140=this.getRow(_1140);this.setRangeState(_113f,_1140,true,_1141);},deselectRange:function(_1142,_1143){_1142=this.getRow(_1142);_1143=this.getRow(_1143);this.setRangeState(_1142,_1143,false,true);},setRowStateFromChild:function(_1144,_1145,_1146){var row=this.grid.getRowFromChild(_1144);this.setRowState(row,_1145,_1146);},setRangeState:function(_1148,_1149,_114a,_114b){if(this.isLocked()){return;}if(!_114b){this.clearSelections();}var _114c=_1148;while(_114c.rowIndex!=_1149.rowIndex){this.setRowState(_114c,_114a,true);_114c=(_1148.rowIndex<_1149.rowIndex?this.grid.getRowAfter(_114c):this.grid.getRowBefore(_114c));}this.setRowState(_1149,_114a,true);},setRowState:function(row,_114e,_114f){if(this.isLocked()){return;}if(this.isSelectable(row)){if(_114e){if(!_114f){this.clearSelections();}this.setRowClass(row,"selected");row.selected=true;this.selectedRows.push(row);this.selectedRowIds.push(this.grid.dataModel.getRowId(row.rowIndex));this.lastSelectedRow=row;}else{this.setRowClass(row,"");row.selected=false;this._removeSelected(row);}this.fireEvent("rowselect",this,row,_114e);this.fireEvent("selectionchange",this,this.selectedRows,this.selectedRowIds);}},handleOver:function(e){var row=this.grid.getRowFromChild(e.getTarget());if(this.isSelectable(row)&&!this.isSelected(row)){this.setRowClass(row,"over");}},handleOut:function(e){var row=this.grid.getRowFromChild(e.getTarget());if(this.isSelectable(row)&&!this.isSelected(row)){this.setRowClass(row,"");}},keyDown:function(e){if(e.browserEvent.keyCode==e.DOWN){this.selectNext(e.shiftKey);e.preventDefault();}else{if(e.browserEvent.keyCode==e.UP){this.selectPrevious(e.shiftKey);e.preventDefault();}}},setRowClass:function(row,_1156){if(this.isSelectable(row)){if(_1156=="selected"){YAHOO.util.Dom.removeClass(row,"ygrid-row-over");YAHOO.util.Dom.addClass(row,"ygrid-row-selected");}else{if(_1156=="over"){YAHOO.util.Dom.removeClass(row,"ygrid-row-selected");YAHOO.util.Dom.addClass(row,"ygrid-row-over");}else{if(_1156==""){YAHOO.util.Dom.removeClass(row,"ygrid-row-selected");YAHOO.util.Dom.removeClass(row,"ygrid-row-over");}}}}},_removeSelected:function(row){var sr=this.selectedRows;for(var i=0;i<sr.length;i++){if(sr[i]===row){this.selectedRows.splice(i,1);this.selectedRowIds.splice(i,1);return;}}}};YAHOO.ext.grid.SingleSelectionModel=function(){YAHOO.ext.grid.SingleSelectionModel.superclass.constructor.call(this);};YAHOO.extendX(YAHOO.ext.grid.SingleSelectionModel,YAHOO.ext.grid.DefaultSelectionModel);YAHOO.ext.grid.SingleSelectionModel.prototype.setRowState=function(row,_115b){YAHOO.ext.grid.SingleSelectionModel.superclass.setRowState.call(this,row,_115b,false);};YAHOO.ext.grid.DisableSelectionModel=function(){YAHOO.ext.grid.DisableSelectionModel.superclass.constructor.call(this);};YAHOO.extendX(YAHOO.ext.grid.DisableSelectionModel,YAHOO.ext.grid.DefaultSelectionModel);YAHOO.ext.grid.DisableSelectionModel.prototype.initEvents=function(){};YAHOO.ext.grid.AbstractDataModel=function(){this.onCellUpdated=new YAHOO.util.CustomEvent("onCellUpdated");this.onTableDataChanged=new YAHOO.util.CustomEvent("onTableDataChanged");this.onRowsDeleted=new YAHOO.util.CustomEvent("onRowsDeleted");this.onRowsInserted=new YAHOO.util.CustomEvent("onRowsInserted");this.onRowsUpdated=new YAHOO.util.CustomEvent("onRowsUpdated");this.onRowsSorted=new YAHOO.util.CustomEvent("onRowsSorted");this.events={"cellupdated":this.onCellUpdated,"datachanged":this.onTableDataChanged,"rowsdeleted":this.onRowsDeleted,"rowsinserted":this.onRowsInserted,"rowsupdated":this.onRowsUpdated,"rowssorted":this.onRowsSorted};};YAHOO.ext.grid.AbstractDataModel.prototype={fireEvent:YAHOO.ext.util.Observable.prototype.fireEvent,on:YAHOO.ext.util.Observable.prototype.on,addListener:YAHOO.ext.util.Observable.prototype.addListener,delayedListener:YAHOO.ext.util.Observable.prototype.delayedListener,removeListener:YAHOO.ext.util.Observable.prototype.removeListener,purgeListeners:YAHOO.ext.util.Observable.prototype.purgeListeners,bufferedListener:YAHOO.ext.util.Observable.prototype.bufferedListener,fireCellUpdated:function(row,col){this.onCellUpdated.fireDirect(this,row,col);},fireTableDataChanged:function(){this.onTableDataChanged.fireDirect(this);},fireRowsDeleted:function(_115e,_115f){this.onRowsDeleted.fireDirect(this,_115e,_115f);},fireRowsInserted:function(_1160,_1161){this.onRowsInserted.fireDirect(this,_1160,_1161);},fireRowsUpdated:function(_1162,_1163){this.onRowsUpdated.fireDirect(this,_1162,_1163);},fireRowsSorted:function(_1164,_1165,_1166){this.onRowsSorted.fireDirect(this,_1164,_1165,_1166);},sort:function(_1167,_1168,_1169,_116a){},getSortState:function(){return {column:this.sortColumn,direction:this.sortDir};},getRowCount:function(){},getTotalRowCount:function(){return this.getRowCount();},getRowId:function(_116b){},getValueAt:function(_116c,_116d){},setValueAt:function(value,_116f,_1170){},isPaged:function(){return false;}};YAHOO.ext.grid.DefaultDataModel=function(data){YAHOO.ext.grid.DefaultDataModel.superclass.constructor.call(this);this.data=data;};YAHOO.extendX(YAHOO.ext.grid.DefaultDataModel,YAHOO.ext.grid.AbstractDataModel,{getRowCount:function(){return this.data.length;},getRowId:function(_1172){return this.data[_1172][0];},getRow:function(_1173){return this.data[_1173];},getRows:function(_1174){var data=this.data;var r=[];for(var i=0;i<_1174.length;i++){r.push(data[_1174[i]]);}return r;},getValueAt:function(_1178,_1179){return this.data[_1178][_1179];},setValueAt:function(value,_117b,_117c){this.data[_117b][_117c]=value;this.fireCellUpdated(_117b,_117c);},removeRows:function(_117d,_117e){_117e=_117e||_117d;this.data.splice(_117d,_117e-_117d+1);this.fireRowsDeleted(_117d,_117e);},removeRow:function(index){this.data.splice(index,1);this.fireRowsDeleted(index,index);},removeAll:function(){var count=this.getRowCount();if(count>0){this.removeRows(0,count-1);}},query:function(spec,_1182){var d=this.data;var r=[];for(var i=0;i<d.length;i++){var row=d[i];var _1187=true;for(var col in spec){if(!_1187){continue;}var _1189=spec[col];switch(typeof _1189){case "string":case "number":case "boolean":if(row[col]!=_1189){_1187=false;}break;case "function":if(!_1189(row[col],row)){_1187=false;}break;case "object":if(_1189 instanceof RegExp){if(String(row[col]).search(_1189)===-1){_1187=false;}}break;}}if(_1187&&!_1182){r.push(i);}else{if(!_1187&&_1182){r.push(i);}}}return r;},filter:function(query){var _118b=this.query(query,true);var data=this.data;for(var i=0;i<_118b.length;i++){data[_118b[i]]._deleted=true;}for(var i=0;i<data.length;i++){while(data[i]&&data[i]._deleted===true){this.removeRow(i);}}return _118b.length;},addRow:function(_118f){this.data.push(_118f);var _1190=this.data.length-1;this.fireRowsInserted(_1190,_1190);this.applySort();return _1190;},addRows:function(_1191){this.data=this.data.concat(_1191);var _1192=this.data.length-_1191.length;this.fireRowsInserted(_1192,_1192+_1191.length-1);this.applySort();},insertRow:function(index,_1194){this.data.splice(index,0,_1194);this.fireRowsInserted(index,index);this.applySort();return index;},insertRows:function(index,_1196){var args=_1196.concat();args.splice(0,0,index,0);this.data.splice.apply(this.data,args);this.fireRowsInserted(index,index+_1196.length-1);this.applySort();},applySort:function(_1198){if(typeof this.sortColumn!="undefined"){this.sort(this.sortInfo,this.sortColumn,this.sortDir,_1198);}},setDefaultSort:function(_1199,_119a,_119b){this.sortInfo=_1199;this.sortColumn=_119a;this.sortDir=_119b;},sort:function(_119c,_119d,_119e,_119f){this.sortInfo=_119c;this.sortColumn=_119d;this.sortDir=_119e;var dsc=(_119e&&_119e.toUpperCase()=="DESC");var _11a1=null;if(_119c!=null){if(typeof _119c=="function"){_11a1=_119c;}else{if(typeof _119c=="object"){_11a1=_119c.getSortType(_119d);}}}var fn=function(cells,_11a4){var v1=_11a1?_11a1(cells[_119d],cells):cells[_119d];var v2=_11a1?_11a1(_11a4[_119d],_11a4):_11a4[_119d];if(v1<v2){return dsc?+1:-1;}if(v1>v2){return dsc?-1:+1;}return 0;};this.data.sort(fn);if(!_119f){this.fireRowsSorted(_119d,_119e);}},each:function(fn,scope){var d=this.data;for(var i=0,len=d.length;i<len;i++){if(fn.call(scope||window,d[i],i)===false){break;}}}});if(YAHOO.ext.grid.DefaultColumnModel){YAHOO.ext.grid.DefaultDataModel.sortTypes=YAHOO.ext.grid.DefaultColumnModel.sortTypes;}YAHOO.ext.grid.LoadableDataModel=function(_11ab){YAHOO.ext.grid.LoadableDataModel.superclass.constructor.call(this,[]);this.onLoad=new YAHOO.util.CustomEvent("load");this.onLoadException=new YAHOO.util.CustomEvent("loadException");this.events["load"]=this.onLoad;this.events["beforeload"]=new YAHOO.util.CustomEvent("beforeload");this.events["loadexception"]=this.onLoadException;this.dataType=_11ab;this.preprocessors=[];this.postprocessors=[];this.loadedPage=1;this.remoteSort=false;this.pageSize=0;this.pageUrl=null;this.baseParams={};this.paramMap={"page":"page","pageSize":"pageSize","sortColumn":"sortColumn","sortDir":"sortDir"};};YAHOO.extendX(YAHOO.ext.grid.LoadableDataModel,YAHOO.ext.grid.DefaultDataModel,{setLoadedPage:function(_11ac,_11ad){this.loadedPage=_11ac;if(typeof _11ad=="function"){_11ad();}},isPaged:function(){return this.pageSize>0;},getTotalRowCount:function(){return this.totalCount||this.getRowCount();},getPageSize:function(){return this.pageSize;},getTotalPages:function(){if(this.getPageSize()==0||this.getTotalRowCount()==0){return 1;}return Math.ceil(this.getTotalRowCount()/this.getPageSize());},initPaging:function(url,_11af,_11b0){this.pageUrl=url;this.pageSize=_11af;this.remoteSort=true;if(_11b0){this.baseParams=_11b0;}},createParams:function(_11b1,_11b2,_11b3){var _11b4={},map=this.paramMap;for(var key in this.baseParams){if(typeof this.baseParams[key]!="function"){_11b4[key]=this.baseParams[key];}}_11b4[map["page"]]=_11b1;_11b4[map["pageSize"]]=this.getPageSize();_11b4[map["sortColumn"]]=(typeof _11b2=="undefined"?"":_11b2);_11b4[map["sortDir"]]=_11b3||"";return _11b4;},loadPage:function(_11b6,_11b7,_11b8){var sort=this.getSortState();var _11ba=this.createParams(_11b6,sort.column,sort.direction);this.load(this.pageUrl,_11ba,this.setLoadedPage.createDelegate(this,[_11b6,_11b7]),_11b8?(_11b6-1)*this.pageSize:null);},applySort:function(_11bb){if(!this.remoteSort){YAHOO.ext.grid.LoadableDataModel.superclass.applySort.apply(this,arguments);}else{if(!_11bb){var sort=this.getSortState();if(sort.column){this.fireRowsSorted(sort.column,sort.direction,true);}}}},resetPaging:function(){this.loadedPage=1;},sort:function(_11bd,_11be,_11bf,_11c0){if(!this.remoteSort){YAHOO.ext.grid.LoadableDataModel.superclass.sort.apply(this,arguments);}else{this.sortInfo=_11bd;this.sortColumn=_11be;this.sortDir=_11bf;var _11c1=this.createParams(this.loadedPage,_11be,_11bf);this.load(this.pageUrl,_11c1,this.fireRowsSorted.createDelegate(this,[_11be,_11bf,true]));}},load:function(url,_11c3,_11c4,_11c5){this.fireEvent("beforeload",this);if(_11c3&&typeof _11c3!="string"){var buf=[];for(var key in _11c3){if(typeof _11c3[key]!="function"){buf.push(encodeURIComponent(key),"=",encodeURIComponent(_11c3[key]),"&");}}delete buf[buf.length-1];_11c3=buf.join("");}var cb={success:this.processResponse,failure:this.processException,scope:this,argument:{callback:_11c4,insertIndex:_11c5}};var _11c9=_11c3?"POST":"GET";this.transId=YAHOO.util.Connect.asyncRequest(_11c9,url,cb,_11c3);},processResponse:function(_11ca){var cb=_11ca.argument.callback;var _11cc=(typeof _11ca.argument.insertIndex=="number");var _11cd=_11ca.argument.insertIndex;switch(this.dataType){case YAHOO.ext.grid.LoadableDataModel.XML:this.loadData(_11ca.responseXML,cb,_11cc,_11cd);break;case YAHOO.ext.grid.LoadableDataModel.JSON:var rtext=_11ca.responseText;try{while(rtext.substring(0,1)==" "){rtext=rtext.substring(1,rtext.length);}if(rtext.indexOf("{")<0){throw "Invalid JSON response";}if(rtext.indexOf("{}")===0){this.loadData({},_11ca.argument.callback);return;}var _11cf=eval("("+rtext+")");if(!_11cf){throw "Error evaling JSON response";}this.loadData(_11cf,cb,_11cc,_11cd);}catch(e){this.fireLoadException(e,_11ca);if(typeof cb=="function"){cb(this,false);}}break;case YAHOO.ext.grid.LoadableDataModel.TEXT:this.loadData(_11ca.responseText,cb,_11cc,_11cd);break;}},processException:function(_11d0){this.fireLoadException(null,_11d0);if(typeof _11d0.argument.callback=="function"){_11d0.argument.callback(this,false);}},fireLoadException:function(e,_11d2){this.onLoadException.fireDirect(this,e,_11d2);},fireLoadEvent:function(){this.fireEvent("load",this.loadedPage,this.getTotalPages());},addPreprocessor:function(_11d3,fn){this.preprocessors[_11d3]=fn;},getPreprocessor:function(_11d5){return this.preprocessors[_11d5];},removePreprocessor:function(_11d6){this.preprocessors[_11d6]=null;},addPostprocessor:function(_11d7,fn){this.postprocessors[_11d7]=fn;},getPostprocessor:function(_11d9){return this.postprocessors[_11d9];},removePostprocessor:function(_11da){this.postprocessors[_11da]=null;},loadData:function(data,_11dc,_11dd,_11de){}});YAHOO.ext.grid.LoadableDataModel.XML="xml";YAHOO.ext.grid.LoadableDataModel.JSON="json";YAHOO.ext.grid.LoadableDataModel.TEXT="text";YAHOO.ext.util.CSS=new function(){var rules=null;var _11e0=function(_11e1){var _11e2=function(prop){var test=/(-[a-z])/i.exec(prop);return prop.replace(RegExp.$1,RegExp.$1.substr(1).toUpperCase());};while(_11e1.indexOf("-")>-1){_11e1=_11e2(_11e1);}return _11e1;};this.getRules=function(_11e5){if(rules==null||_11e5){rules={};var ds=document.styleSheets;for(var i=0,len=ds.length;i<len;i++){try{var ss=ds[i];var _11e9=ss.cssRules||ss.rules;for(var j=_11e9.length-1;j>=0;--j){rules[_11e9[j].selectorText]=_11e9[j];}}catch(e){}}}return rules;};this.getRule=function(_11eb,_11ec){var rs=this.getRules(_11ec);if(!(_11eb instanceof Array)){return rs[_11eb];}for(var i=0;i<_11eb.length;i++){if(rs[_11eb[i]]){return rs[_11eb[i]];}}return null;};this.updateRule=function(_11ef,_11f0,value){if(!(_11ef instanceof Array)){var rule=this.getRule(_11ef);if(rule){rule.style[_11e0(_11f0)]=value;return true;}}else{for(var i=0;i<_11ef.length;i++){if(this.updateRule(_11ef[i],_11f0,value)){return true;}}}return false;};this.apply=function(el,_11f5){if(!(_11f5 instanceof Array)){var rule=this.getRule(_11f5);if(rule){var s=rule.style;for(var key in s){if(typeof s[key]!="function"){if(s[key]&&String(s[key]).indexOf(":")<0&&s[key]!="false"){try{el.style[key]=s[key];}catch(e){}}}}return true;}}else{for(var i=0;i<_11f5.length;i++){if(this.apply(el,_11f5[i])){return true;}}}return false;};this.applyFirst=function(el,id,_11fc){var _11fd=["#"+id+" "+_11fc,_11fc];return this.apply(el,_11fd);};this.revert=function(el,_11ff){if(!(_11ff instanceof Array)){var rule=this.getRule(_11ff);if(rule){for(key in rule.style){if(rule.style[key]&&String(rule.style[key]).indexOf(":")<0&&rule.style[key]!="false"){try{el.style[key]="";}catch(e){}}}return true;}}else{for(var i=0;i<_11ff.length;i++){if(this.revert(el,_11ff[i])){return true;}}}return false;};this.revertFirst=function(el,id,_1204){var _1205=["#"+id+" "+_1204,_1204];return this.revert(el,_1205);};}();var jive={};jive.spank={};jive.spank.chat={};var spank={loadComponent:function(type){if(type==null||type==""){return null;}var _1207=spank._createComponent(type);var _1208=spank._loadAttributes(type);switch(type){case "chat":return new jive.spank.chat.ChatWindow(_1207.id,_1208);case "roster":return new jive.spank.roster.RosterWindow(_1207.id,_1208);default:return null;}},_loadAttributes:function(_1209){if(!spank.conf||!spank.conf[_1209]){return {};}return spank.conf[_1209];},_createComponent:function(type){var elm=document.createElement("div");elm.id=YAHOO.util.Dom.generateId();document.getElementsByTagName("body")[0].appendChild(elm);return elm;}};jive.spank.Window=function(id,title,_120e){this.bodyId=YAHOO.util.Dom.generateId();jive.spank.chat.Template.dialog.append(id,{windowTitle:title,bodyId:this.bodyId});this.dialog=new YAHOO.ext.LayoutDialog(id,_120e);this.dialog.addKeyListener(27,this.dialog.hide,this.dialog);this.tabs={};this.id=id;};YAHOO.extend(jive.spank.Window,YAHOO.ext.util.Observable,{isUpdating:false,beginUpdate:function(){if(!this.isUpdating){this.isUpdating=true;this.dialog.beginUpdate();}},endUpdate:function(){if(this.isUpdating){this.isUpdating=false;this.dialog.endUpdate();}},show:function(){this.dialog.show();},hide:function(){this.dialog.hide();},isVisible:function(){return this.dialog.isVisible();},destroy:function(){this.hide();this.dialog.destroy(true);delete this.dialog;}});jive.spank.chat.ChatWindow=function(id,_1210){var width=_1210["width"]?_1210["width"]:520;var _1212=_1210["height"]?_1210["height"]:450;var x=_1210["x"]?_1210["x"]:(YAHOO.util.Dom.getViewportWidth()/2)-260;var y=_1210["y"]?_1210["y"]:(YAHOO.util.Dom.getViewportHeight()/2)-225;var _1215=_1210["resizable"]!="false";var _1216=_1210["draggable"]!="false";var _1217=_1210["closable"]!="false";var _1218=_1210["blinktab"]=="true";var _1219=_1210["constrained"]!="false";if(_1218){this.notificationInterval={};}var _121a={modal:false,constraintoviewport:_1219,width:width,height:_1212,shadow:false,proxyDrag:true,resizable:_1215,draggable:_1216,minWidth:300,minHeight:300,x:x,y:y,closable:_1217};if(_1210["bottomPane"]){_121a=$H(_121a).merge({south:{autoScroll:false,initialSize:30},east:{split:true,initialSize:105,minSize:50,maxSize:200,autoScroll:true,collapsible:true},center:{autoScroll:false,autoTabs:false}});}else{_121a=$H(_121a).merge({north:{autoScroll:false,initialSize:90},east:{split:true,initialSize:105,minSize:50,maxSize:200,autoScroll:true,collapsible:true},center:{autoScroll:true,closeOnTab:true,closeontab:true,alwaysShowTabs:true,autoTabs:false}});}jive.spank.chat.ChatWindow.superclass.constructor.call(this,id,"Chat",_121a);this.events={"input":true,"message":true,"nickcomplete":true,"mucdblclicked":true,"tabclosed":true,"mucinvitation":true,"changenameinmuc":true,"refreshmuclist":true,"createmuc":true};var _121b=this.dialog.getLayout();_121b.regions["center"].addListener("panelremoved",function(){if(_121b.regions["center"].tabs.items.length==0){this.dialog.hide();}}.bind(this));this.dialog.addListener("hide",function(){if(this.destroyed){return;}this.destroyed=true;this.removeAllTabs();this.dialog.destroy(true);this.dialog.proxy.remove();}.bind(this));this.newMessages={};this._wrappedFns={};};YAHOO.extend(jive.spank.chat.ChatWindow,jive.spank.Window,{addTab:function(_121c){this.dialog.beginUpdate();if(typeof _121c=="string"){var _121d=_121c;_121c={name:_121d,jid:_121d};}var tabId="jive-tab-"+_121c.jid;jive.spank.chat.Template.tab.append(this.bodyId,{tabId:tabId});var _121f=this.dialog.getLayout();var _1220=new YAHOO.ext.BorderLayout(tabId+"-layout",jive.spank.chat.ChatWindow.tabConfObject);_1220.add("north",new YAHOO.ext.ContentPanel(tabId+"-toppane"));jive.spank.chat.Template.chat_toppane.append(tabId+"-toppane",{tabId:tabId});_1220.regions["north"].hide();_1220.add("center",new YAHOO.ext.ContentPanel(tabId+"-history"));_1220=this._layoutTextarea(_1220,tabId,_121c.jid.toString());_121f.add("center",new YAHOO.ext.NestedLayoutPanel(_1220,{title:_121c.name,closable:true}));var _1221=this.getTabByJID(_121c.jid);var _1222=getEl(tabId+"-text");this.tabs[_121c.jid]={type:"chat",tab:this.getTabByJID(_121c.jid),contact:_121c};var _1223=function(_1224){this.clearNotification(_1224.jid);this.dialog.setTitle(_1224.name);this._scrollMessageHistory(getEl("jive-tab-"+_1224.jid+"-history"));_1222.dom.focus();}.bind(this,_121c);_1221.addListener("activate",_1223);_1221.addListener("close",function(){YAHOO.ext.EventManager.removeListener("blur",_1222,this._wrappedFns[tabId].pop());YAHOO.ext.EventManager.removeListener("focus",_1222,this._wrappedFns[tabId].pop());YAHOO.ext.EventManager.removeListener("keypress",_1222,this._wrappedFns[tabId].pop());this.fireEvent("tabclosed",_121c,this.tabs[_121c.jid]);delete this._wrappedFns[tabId];delete this.tabs[_121c.jid];}.bind(this));var _1225=function(_1226){this.clearNotification(_1226.jid);}.bind(this,_121c);_1221.el.mon("click",_1225);getEl(getEl(tabId+"-history").dom.parentNode.id).mon("click",_1225);if(_121c.addListener){var _1227=function(_1228,_1229){_1221.textEl.replaceClass("jive-status-"+_1228,"jive-status-"+_1229);};_121c.addListener("status",_1227);_1221.addListener("close",function(){_121c.removeListener("statusChanged",_1227);});}_1221.textEl.addClass("jive-status-"+(_121c.status?_121c.status:"unavailable"));this.dialog.endUpdate();_1223();return true;},preAddMUCChooser:function(){var tabId="jive-tab-mucchooser";if(this.dialog.layout.regions["center"].panels.items[tabId+"-spinner"]){delete this.dialog.layout.regions["center"].panels.items[tabId+"-spinner"];}jive.spank.chat.Template.spinnertab.append(this.bodyId,{tabId:tabId,text:"Loading..."});var _122b=this.dialog.getLayout();this.dialog.beginUpdate();_122b.add("center",new YAHOO.ext.ContentPanel(tabId+"-spinner",{title:"Choose a Conference"}));this.dialog.endUpdate();var _122c=this.getTabs().items[tabId+"-spinner"];_122c.textEl.addClass("jive-muc");var self=this;_122c.addListener("close",function(){delete self.dialog.layout.regions["center"].panels.items[tabId+"-spinner"];});this.tabs["mucchooser"]={type:"muc-spinner",tab:_122c};},addChooseMUCTab:function(_122e){this.dialog.beginUpdate();if(this.tabs["mucchooser"]){this.getTabs().removeTab("jive-tab-mucchooser-spinner");delete this.dialog.layout.regions["center"].panels.items["jive-tab-mucchooser-spinner"];delete this.tabs["mucchooser"];}var tabId=YAHOO.util.Dom.generateId();jive.spank.chat.Template.mucchooser.append(this.bodyId,{tabId:tabId});var _1230=this._buildMUCChooserGrid(_122e,tabId);var _1231=this.dialog.getLayout();var _1232=new YAHOO.ext.BorderLayout(tabId+"-layout",jive.spank.chat.ChatWindow.chooseMUCConfObject);_1232.add("north",new YAHOO.ext.ContentPanel(tabId+"-toppane"));jive.spank.chat.Template.muc_chooser_top.append(tabId+"-toppane",{tabId:tabId});getEl(tabId+"-createconf").addListener("click",this.fireEvent.createDelegate(this,["createmuc",this]));getEl(tabId+"-refresh").addListener("click",this.fireEvent.createDelegate(this,["refreshmuclist",this]));_1232.add("center",new YAHOO.ext.GridPanel(_1230));_1231.add("center",new YAHOO.ext.NestedLayoutPanel(_1232,{title:"Choose a Conference",closable:true}));var _1233=getEl(tabId+"-roomgrid").getParentByClass("yui-ext-tabitembody").id;var _1234=this.getTabs().items[_1233];_1234.textEl.addClass("jive-muc");var self=this;var _1236=function(){self.dialog.setTitle("Choose a Conference");};_1234.addListener("activate",_1236);var _1237=function(){self.dialog.layout.regions["north"].hide();};_1234.addListener("deactivate",_1237);_1234.addListener("close",_1237);this.tabs["muc-chooser-"+tabId]={type:"muc-chooser",tab:_1234};this.dialog.endUpdate();getEl(tabId+"-confcontrols").fitToParent();_1236();},_buildMUCChooserGrid:function(_1238,tabId){var _123a={fields:["name","muc#roominfo_subject","muc#roominfo_occupants"]};var _123b=new YAHOO.ext.grid.SpankJSONDataModel(_123a);var _123c=function(value){if(value.values){return value.values[0];}else{return value;}};_123b.addPreprocessor(1,_123c);_123b.addPreprocessor(2,_123c);_123b.loadData(_1238);var _123e=[{header:"Name",width:240,sortable:true},{header:"Subject",width:160,sortable:true},{header:"Occupants",width:70,sortable:true}];var _123f=new YAHOO.ext.grid.DefaultColumnModel(_123e);var _1240=new YAHOO.ext.grid.Grid(tabId+"-roomgrid",{dataModel:_123b,colModel:_123f,selModel:new YAHOO.ext.grid.SingleSelectionModel(),monitorWindowResize:false,stripeRows:false});_1240.render();var self=this;_1240.addListener("rowdblclick",function(grid,_1243,evt){var _1245=evt.findTarget("ylayout-nested-layout").id;var name=grid.getDataModel().getRow(_1243)[0];var jid=grid.getSelectedRowId();self.fireEvent("mucdblclicked",self,jid,name,_1245);});return _1240;},preAddMUC:function(_1248,_1249){var tabId="jive-tab-"+_1248.jid;if(this.dialog.layout.regions["center"].panels.items["jive-tab-"+_1248.jid+"-spinner"]){delete this.dialog.layout.regions["center"].panels.items["jive-tab-"+_1248.jid+"-spinner"];}jive.spank.chat.Template.spinnertab.append(this.bodyId,{tabId:tabId,text:"Joining \""+_1248.name+"\"..."});if(_1249){this.getTabs().removeTab(_1249);}var _124b=this.dialog.getLayout();this.dialog.beginUpdate();_124b.add("center",new YAHOO.ext.ContentPanel(tabId+"-spinner",{title:_1248.name}));this.dialog.endUpdate();var _124c=this.getTabs().items["jive-tab-"+_1248.jid+"-spinner"];_124c.textEl.addClass("jive-muc");var self=this;_124c.addListener("close",function(){delete self.dialog.layout.regions["center"].panels.items["jive-tab-"+_1248.jid+"-spinner"];});this.tabs[_1248.jid]={type:"muc-spinner",tab:_124c};},removeMUCSpinner:function(jid){if(this.tabs[jid]&&this.tabs[jid].type=="muc-spinner"){this.dialog.beginUpdate();delete this.dialog.layout.regions["center"].panels.items["jive-tab-"+jid+"-spinner"];this.getTabs().removeTab(this.tabs[jid].tab.id);delete this.tabs[jid];if(this.dialog.layout.regions["center"].tabs.items.length==0){this.dialog.hide();}else{this.dialog.endUpdate();}}},addMUC:function(_124f,_1250,_1251){var tabId="jive-tab-"+_124f.jid;this.dialog.beginUpdate();if(this.tabs[_124f.jid]&&this.tabs[_124f.jid].type=="muc-spinner"){var tabid=this.tabs[_124f.jid].tab.id;this.getTabs().removeTab(this.tabs[_124f.jid].tab.id);}jive.spank.chat.Template.muctab.append(this.bodyId,{tabId:tabId});var _1254=this.dialog.getLayout();var _1255=new YAHOO.ext.BorderLayout(tabId+"-layout",jive.spank.chat.ChatWindow.mucConfObject);var _1256=new YAHOO.ext.BorderLayout(tabId+"-sidebarlayout",jive.spank.chat.ChatWindow.mucSidebarConfObject);var topic=new YAHOO.ext.ContentPanel(tabId+"-controls");_1255.add("north",topic);var _1258=new YAHOO.ext.ContentPanel(tabId+"-history");_1255.add("center",_1258);_1255=this._layoutTextarea(_1255,tabId,_124f.jid.toString());var _1259=new YAHOO.ext.ContentPanel(tabId+"-occupants");_1256.add("center",_1259);var _125a=new YAHOO.ext.NestedLayoutPanel(_1256);_1254.add("east",_125a);var main=new YAHOO.ext.NestedLayoutPanel(_1255,{title:_124f.name,closable:true});_1254.add("center",main);topic.getEl().dom.parentNode.className+=" jive-topic";_1258.getEl().dom.parentNode.className+=" jive-chat";_1259.getEl().dom.parentNode.parentNode.className+=" jive-contact-list";main.getEl().dom.parentNode.className+=" jive-main";_125a.getEl().dom.parentNode.className+=" jive-sidebar";var self=this;var _125d=this.getTabByJID(_124f.jid);var _125e=getEl(tabId+"-text");_125e.dom.parentNode.className+=" jive-message-field";var _125f=function(){self.clearNotification(_124f.jid);self.dialog.setTitle("<h1>"+_124f.name+"</h1>");self._scrollMessageHistory(getEl(tabId+"-history"));_125e.dom.focus();};_125d.addListener("activate",_125f);if(!this.dialog.getLayout().regions["south"]){_125d.addListener("close",function(){YAHOO.ext.EventManager.removeListener("blur",_125e,self._wrappedFns[tabId].pop());YAHOO.ext.EventManager.removeListener("focus",_125e,self._wrappedFns[tabId].pop());YAHOO.ext.EventManager.removeListener("keypress",_125e,self._wrappedFns[tabId].pop());self.fireEvent("tabclosed",_124f,self.tabs[_124f.jid]);var _1260=getEl(_124f.jid+"-");if(_1260){_1260.remove();}delete self._wrappedFns[tabId];delete self.tabs[_124f.jid];});_125d.textEl.addClass("jive-muc");}else{jive.spank.chat.Template.muc_subject.append(tabId+"-controls",{jid:_124f.jid});this.tabId=tabId;this.dialog.getLayout().regions["center"].panels.items[0].id=tabId;}var _1261=function(){self.clearNotification(_124f.jid);};_125d.el.addListener("click",_1261);getEl(getEl(tabId+"-history").dom.parentNode.id).addListener("click",_1261);if(_1251){this._doMucControls(tabId,_124f,_1251);}jive.spank.chat.Template.roster.append(tabId+"-occupants",{rosterId:tabId+"-roster",groups:""});_125d.roster=new jive.spank.roster.Roster(tabId+"-roster");var _1262={"Participants":(_124f.occupants?_124f.occupants:{})};_125d.roster.setRoster(_1262);_125d.roster.render();_125d.roster.sortGroups();_125d.roster._enableBehaviors(false);getEl(tabId+"-text").dom.focus();this.dialog.endUpdate();_125f();return this.tabs[_124f.jid]={type:"muc-room",tab:_125d,roster:_125d.roster,participants:_125d.roster.groups["Participants"],room:_124f};},_layoutTextarea:function(_1263,tabId,_1265){_1263.add("south",new YAHOO.ext.ContentPanel(tabId+"-text"));var _1266=getEl(tabId+"-text");var _1267=function(_1268){_1268.fitToParent();}.bind(this,_1266);_1263.delayedListener("regionresized",_1267,100);this.dialog.addListener("resize",_1267);window.setTimeout(_1267,1000);this._wrappedFns[tabId]=[];this._wrappedFns[tabId].push(_1266.mon("keypress",function(evt){if(evt.getKey()==13&&!evt.shiftKey&&this.getMessage()!=""){this.fireEvent("message",_1265,this.getMessage());window.setTimeout(function(){_1266.dom.value="";},10);evt.preventDefault();}else{if(evt.getKey()==9){this.fireEvent("nickcomplete",_1265,this.getMessage(),_1266);evt.preventDefault();}this.fireEvent("input",_1265);}}.bind(this)));this._wrappedFns[tabId].push(_1266.mon("focus",function(){var jid=this.getActiveTabJID();this.clearNotification(jid);jive.spank.chat.ChatWindow.focusedJID=jid;}.bind(this)));this._wrappedFns[tabId].push(_1266.mon("blur",function(){jive.spank.chat.ChatWindow.focusedJID="";}));return _1263;},_doMucControls:function(tabId,_126c,_126d){jive.spank.chat.Template.muc_controls.append(tabId+"-controls",{jid:_126c.jid});jive.spank.chat.Template.mucinvitemenu.append(document.body,{jid:_126c.jid});var elm=getEl(_126c.jid+"-container");elm.hide();var _126f=new jive.spank.AutoComplete(_126c.jid+"-autocomp",_126c.jid+"-autocomp-menu",new YAHOO.widget.DS_JSFunction(_126d.contactsForAutocomp.bind(_126d)),{typeAhead:true,autoHighlight:true,minQueryLength:0,maxResultsDisplayed:20});_126f.formatResult=function(_1270,_1271){return "<div class='roster-contact-"+_1270[2]+"'>"+_1270[0]+"</div>";};var jid=_126c.jid;var self=this;_126f.dataReturnEvent.subscribe(function(type,args){if(args[2][0][0]!=args[1]){self.invitee=args[1];}else{self.invitee=args[2][0][1];}});_126f.itemSelectEvent.subscribe(function(type,args){self.fireEvent("mucinvitation",self,args[2][1].jid,jid);getEl(jid+"-autocomp").dom.blur();});getEl(jid+"-control").mon("click",function(){self.invitee="";var entry=elm.getChildrenByTagName("input")[0];entry.setWidth(elm.getWidth()-2);entry.dom.value="";elm.alignTo(this,"bl");elm.show();elm.setStyle("z-index",self.dialog.lastZIndex+1);entry.dom.focus();_126f._populateList("",_126d.contactsForAutocomp(),_126f);elm.repaint();});getEl(jid+"-autocomp").mon("keypress",function(evt){if(evt.getKey()==13){evt.stopEvent();getEl(jid+"-container").hide();getEl("jive-tab-"+self.getActiveTabJID()+"-text").dom.focus();}});getEl(jid+"-autocomp").addListener("blur",function(){window.setTimeout("getEl('"+jid+"-container').hide();",200);getEl("jive-tab-"+self.getActiveTabJID()+"-text").dom.focus();});getEl(jid+"-changenick").addListener("click",function(){var _127a=self.dialog.getLayout().getRegion("south")?{x:self.dialog.el.getX()+125,y:self.dialog.el.getY()+140}:null;self.showChangeNick(_126c,_127a);});},showMUCPassword:function(_127b,_127c,_127d){_127c=$H(_127c).merge({title:"Enter the password for '"+_127b.name+"'",width:285,height:105});var _127e=new jive.spank.chat.Dialog(this,jive.spank.chat.Template.mucpassword,_127c);_127e.dialog.show();var self=this;var _1280=false;var _1281=function(){var _1282=$F(_127e.id+"-passwd");_127d(_1282);_1280=true;_127e.dialog.hide();};_127e.dialog.addListener("hide",function(){if(!_1280){_127d(null);}});getEl(_127e.id+"-passwd").mon("keypress",_1281.createInterceptor(function(evt){return evt.getKey()==13;}));getEl(_127e.id+"-sendsecret").addListener("click",_1281);getEl(_127e.id+"-passwd").dom.focus();},addMessage:function(jid,from,_1286,_1287){var _1288=getEl("jive-tab-"+jid+"-history");if(_1286.body){var _1289="";if(_1286.time){_1289="offline";}else{var _128a=new Date();_1286.time=_128a.toLocaleTimeString();}var type=(_1286.isLocal?"user":"contact");var body=jive.spank.chat.Filter.applyAll(_1286.body);var _128d=jive.spank.chat.Template.message.append(_1288.id,{from:from,message:body,type:type,time:_1286.time,msgclass:_1289});}else{_1288.dom.appendChild(_1286.el);_1286.callback(this);}this._scrollMessageHistory(_1288);var _128e=jive.spank.chat.ChatWindow.focusedJID;if(_128e!=jid){this.addNotification(jid);}},addStatusMessage:function(jid,_1290){var _1291=getEl("jive-tab-"+jid+"-history");var _1292=jive.spank.chat.Template.statusMessage.append(_1291.id,{message:_1290});this._scrollMessageHistory(_1291);},_scrollMessageHistory:function(_1293){_1293.dom.parentNode.scrollTop=_1293.getHeight()-_1293.dom.parentNode.clientHeight;},addNotification:function(jid){var _1295=this.getTabByJID(jid);if(typeof this.newMessages[jid]=="undefined"){this.newMessages[jid]=1;}else{this.newMessages[jid]++;}if(_1295&&_1295.textEl){_1295.textEl.addClass("jive-notify");}if(this.notificationInterval&&!this.notificationInterval[jid]){var _1296=this.bodyId;this.notificationInterval=window.setInterval(function(){getEls("#"+_1296+" span.jive-notify").toggleClass("flashNotify");},1000);}else{getEls("#"+this.bodyId+" span.jive-notify").addClass("flashNotify");}jive.spank.notifier.doTitleNotify();if(_1295&&_1295.text){if(/ \(\d+\)$/.test(_1295.text)){_1295.setText(_1295.text.replace(/ \(\d+\)$/,""));}_1295.setText(_1295.text+" ("+this.newMessages[jid]+")");}},clearNotification:function(jid){var _1298=this.getTabByJID(jid);if(_1298&&_1298.textEl){_1298.textEl.removeClass("jive-notify").removeClass("flashNotify");_1298.setText(_1298.text.replace(/ \(\d+\)$/,""));}delete this.newMessages[jid];if(this.notificationInterval&&this.notificationInterval[jid]&&this.newMessages.properties&&this.newMessages.properties.length==0){window.clearInterval(this.notificationInterval[jid]);this.notificationInterval[jid]=null;}jive.spank.notifier.doTitleNotify();},clearAllNotifications:function(){var _1299=getEls("#"+this.bodyId+" span.jive-notify");_1299.removeClass("jive-notify");window.clearInterval(this.notificationInterval);this.notificationInterval=null;_1299.removeClass("flashNotify");this.newMessages={};jive.spank.notifier.doTitleNotify();},getMessage:function(){var _129a=this.getTabs()?this.getTabs().active:this._tabIfSingleTab();var _129b=_129a.id.split("-");_129b[3]="text";var _129c=_129b.join("-");return getEl(_129c).dom.value;},getActiveTabJID:function(){var _129d=this.getTabs()?this.getTabs().active:this._tabIfSingleTab();return _129d.id.split("-")[2];},getTabJID:function(id){var _129f=this.getTabs()?this.getTabs().getTab(id):this._tabIfSingleTab();return _129f.id.split("-")[2];},getTabs:function(){var _12a0=this.dialog.getLayout().regions;return _12a0["center"].getTabs();},getTabByJID:function(jid){var guys=this.getTabs();if(guys!=null){var tabb=guys.items["jive-tab-"+jid+"-layout"];return (typeof tabb=="undefined")?null:tabb;}else{return this._tabIfSingleTab();}},_tabIfSingleTab:function(){return this.dialog.getLayout().regions["center"].panels.items[0];},removeAllTabs:function(){var tabs=this.getTabs();if(!tabs){return;}for(var i=tabs.getCount()-1;i>=0;i--){tabs.getTab(i).closeClick();}delete this.tabs;this.tabs={};},destroy:function(){this.clearAllNotifications();jive.spank.chat.ChatWindow.superclass.destroy.call(this);delete this.tabs;},hide:function(){this.clearAllNotifications();jive.spank.chat.ChatWindow.superclass.hide.call(this);},getContactTab:function(_12a6,focus){if(typeof _12a6=="string"){var jid=_12a6;_12a6={name:jid,jid:jid};}var _12a9=this.getTabs();var convo;if(_12a9){convo=_12a9.getTab("jive-tab-"+_12a6.jid+"-layout");}if(typeof convo=="undefined"){this.addTab(_12a6);}if(focus){this.focusContactTab(_12a6);}},focusContactTab:function(_12ab){var _12ac=this.getTabs();_12ac.activate("jive-tab-"+_12ab.jid+"-layout");var _12ad=getEl("jive-tab-"+_12ab.jid+"-text");_12ad.dom.focus();},prepUserPane:function(){var _12ae=this.dialog.getLayout().getRegion("east").getPanel(0).getLayout();jive.spank.chat.Template.userpane.append(this.bodyId+"-toppane",{id:this.bodyId});this.dialog.beginUpdate();var _12af=new YAHOO.ext.ContentPanel(this.bodyId+"-toppane");_12ae.add("north",_12af);_12af.getEl().dom.parentNode.className+=" jive-user-controls";this.dialog.endUpdate();},finalizeUserPane:function(uname){jive.spank.chat.Template.userpane_loggedin.append(this.bodyId+"-message",{id:this.bodyId,uname:uname});var _12b1=function(evt){if(evt.keyCode==13){var _12b3=this.tabId.split("-")[2];var room=this.tabs[_12b3].room;this.fireEvent("changenameinmuc",this,room.jid,getEl(this.bodyId+"-uname").dom.value);}};getEl(this.bodyId+"-uname").addListener("keydown",_12b1.bind(this));},setSubject:function(_12b5,_12b6){var _12b7=getEl((this.tabId?this.tabId:"jive-tab-"+_12b6)+"-subject");if(_12b7&&_12b7.dom){_12b7.dom.innerHTML=_12b5;}}});jive.spank.chat.ChatWindow.getWindow=function(_12b8){return jive.spank.chat.ChatWindow.currentWindow[_12b8];};jive.spank.chat.ChatWindow.createWindow=function(){var _12b9=spank.loadComponent("chat");jive.spank.chat.ChatWindow.currentWindow[_12b9.id]=_12b9;_12b9.dialog.addListener("hide",function(){delete jive.spank.chat.ChatWindow.currentWindow[_12b9.id];});return _12b9;};jive.spank.chat.ChatWindow.destroyWindow=function(_12ba){if(jive.spank.chat.ChatWindow.currentWindow[_12ba]){jive.spank.chat.ChatWindow.currentWindow[_12ba].hide();delete jive.spank.chat.ChatWindow.currentWindow[_12ba];}};jive.spank.chat.ChatWindow.tabConfObject={north:{initialSize:72},south:{split:true,initialSize:50,minSize:50,maxSize:200,autoScroll:false,collapsible:true},center:{autoScroll:true}};jive.spank.chat.ChatWindow.chooseMUCConfObject={north:{initialSize:50},center:{autoScroll:true}};jive.spank.chat.ChatWindow.mucSidebarConfObject={north:{initialSize:38,margins:{top:0,left:0,right:0,bottom:10}},center:{initialSize:50,minSize:50,maxSize:200,autoScroll:true,collapsible:true}};jive.spank.chat.ChatWindow.mucConfObject={north:{initialSize:38,margins:{top:0,left:0,right:0,bottom:10}},center:{autoScroll:true},south:{split:true,initialSize:50,minSize:50,maxSize:200,autoScroll:false,collapsible:true}};jive.spank.chat.ChatWindow.currentWindow={};jive.spank.chat.ChatWindow.focusedJID="";jive.spank.roster={};jive.spank.roster.RosterWindow=function(id,_12bc){var width=_12bc["width"]?_12bc["width"]:310;var _12be=_12bc["height"]?_12bc["height"]:YAHOO.util.Dom.getViewportHeight()-40;var x=_12bc["x"]?_12bc["x"]:YAHOO.util.Dom.getViewportWidth()-330;var y=_12bc["y"]?_12bc["y"]:20;var _12c1=_12bc["resizable"]!="false";var _12c2=_12bc["draggable"]!="false";var _12c3=_12bc["closable"]!="false";this.roster=null;this.groups=null;this.controls={};this.controlCount=0;var conf={modal:false,width:width,height:_12be,resizable:_12c1,draggable:_12c2,proxyDrag:true,shadow:false,minWidth:200,minHeight:150,x:x,y:y,closable:_12c3,shim:false,north:{initialSize:50,autoScroll:false},center:{closeOnTab:true,alwaysShowTabs:false,autoTabs:true}};this.events={"changestatus":true,"setstatusmsgrequest":true,"addcontact":true,"acceptsubscription":true,"denysubscription":true,"renamecontact":true,"renamegroup":true,"removecontact":true,"removegroup":true,"close":true};jive.spank.roster.RosterWindow.superclass.constructor.call(this,id,"Spark Web",conf);var _12c5=this.dialog.getLayout();this.dialog.beginUpdate();_12c5.add("north",new YAHOO.ext.ContentPanel(this.bodyId+"-toppane"));this.dialog.endUpdate();this.dialog.close.removeAllListeners();this.dialog.close.addListener("click",function(){if(confirm("Are you sure you want to close the connection?\n('OK' to logout, 'Cancel' to stay connected.)")){this.dialog.hide();this.fireEvent("close",this);}}.bind(this));this._prepContextMenus();};YAHOO.extend(jive.spank.roster.RosterWindow,jive.spank.Window,{needsUpdate:false,addTab:function(title){var tabId=YAHOO.util.Dom.generateId();jive.spank.chat.Template.rostertab.append(this.bodyId,{tabId:tabId});var _12c8=this.dialog.getLayout();this.dialog.beginUpdate();var _12c9=new YAHOO.ext.BorderLayout(tabId+"-layout",{north:{split:false,initialSize:28,autoScroll:false},center:{autoScroll:true}});_12c9.add("center",new YAHOO.ext.ContentPanel(tabId+"-resources"));jive.spank.chat.Template.roster.append(tabId+"-resources",{rosterId:"jive-roster",groups:""});_12c9.add("north",new YAHOO.ext.ContentPanel(tabId+"-user"));jive.spank.chat.Template.control_panel.append(tabId+"-user",{tabId:tabId});this.controlPanel=_12c9.regions["north"];this.controlPanel.hide();_12c8.add("center",new YAHOO.ext.NestedLayoutPanel(_12c9,{title:title}));this.dialog.endUpdate();this.tabs[title]=tabId;},_prepUserStatusPanel:function(_12ca,_12cb){var elm=getEl(this.bodyId+"-toppane");jive.spank.chat.Template.status_panel.append(elm.id,{bodyId:this.bodyId,username:_12ca,status:_12cb,statusName:_12cb.toLowerCase()});var _12cd=new YAHOO.widget.Menu("jive-statusmenu");_12cd.addItems([[{text:"Free to Chat"},{text:"Available"},{text:"On The Road"},{text:"Away"},{text:"On Phone"},{text:"Do Not Disturb"}],[{text:"Set status message...",disabled:true}]]);_12cd.render(document.body);var self=this;var _12cf=function(_12d0,_12d1,_12d2){this.fireEvent("changestatus",this,_12d2);};var _12d3=function(){self.fireEvent("setstatusmsgrequest",self);};var _12d4;var _12d5=["chat","available","onroad","away","onphone","dnd"];for(var i=0;i<6;i++){_12d4=_12cd.getItem(i);_12d4.element.className+=" roster-contact-"+_12d5[i];_12d4.clickEvent.subscribe(_12cf,_12d5[i],self);}getEl(this.bodyId+"-statusmenu-ctrl").addListener("click",function(){getEl(_12cd.element).alignTo(this,"bl");_12cd.element.style.zIndex=self.dialog.lastZIndex+1;_12cd.show();});var _12d7=function(){_12cd.hide();};this.dialog.header.addListener("click",_12d7);for(var _12d8 in jive.spank.chat.ChatWindow.currentWindow){jive.spank.chat.ChatWindow.currentWindow[_12d8].dialog.header.addListener("click",_12d7);}},_prepContextMenus:function(){if(!getEl("contact-conmenu")){this.addMenuDiv("contact-conmenu");}this.contactMenu=new YAHOO.widget.Menu("contact-conmenu",{lazyLoad:true});if(this.contactMenu.getItemGroups().length==0){this.contactMenu.addItems([{text:"Start Chat"},{text:"Rename Contact"},{text:"Remove Contact"}]);this.contactMenu.render(document.body);}var self=this;var _12da=function(type,args){self.contactMenu.clickedContact.group._roster.fireEvent("contactdblclicked",self.contactMenu.clickedContact.group._roster,self.contactMenu.clickedContact);};this.contactMenu.getItem(0).clickEvent.subscribe(_12da);this.contactMenu.getItem(1).clickEvent.subscribe(this.showRename.createDelegate(this,[self.contactMenu.clickedContact]),this);this.contactMenu.getItem(2).clickEvent.subscribe(this.showRemove.createDelegate(this,[self.contactMenu.clickedContact]),this);if(!getEl("group-conmenu")){this.addMenuDiv("group-conmenu");}this.groupMenu=new YAHOO.widget.Menu("group-conmenu",{lazyLoad:true});if(this.groupMenu.getItemGroups().length==0){this.groupMenu.addItems([{text:"Rename Group"},{text:"Remove Group"}]);}this.groupMenu.render(document.body);this.groupMenu.getItem(0).clickEvent.subscribe(this.showGroupRename.bind(this,this.fetchClickedGroup.bind(this)));this.groupMenu.getItem(1).clickEvent.subscribe(this.showGroupRemove.bind(this,this.fetchClickedGroup.bind(this)));},setUserInfo:function(user,_12de){var _12df;if(arguments.length>1){_12df=user;}else{_12df=user.name;_12de=(user.status?user.status:user.mode);}this.dialog.setTitle("Spark Web - "+_12df);this._prepUserStatusPanel(_12df,_12de);},addGroup:function(_12e0,_12e1){this.roster.addGroup(_12e0,_12e1);},addControl:function(_12e2,_12e3){this.controls[_12e2]=jive.spank.chat.Control.add(this.tabs["Contacts"]+"-controls",_12e2,_12e3);this.controlCount++;if(!this.controlPanel.isVisible()){this.controlPanel.show();}return this.controls[_12e2];},removeControl:function(_12e4){if(this.controls[_12e4]){this.controls[_12e4].remove();delete this.controls[_12e4];}this.controlCount--;},setRoster:function(_12e5){if(_12e5==null){_12e5=this.fakeRosterStruct;}this.roster=new jive.spank.roster.Roster("jive-roster",true);this.groups=this.roster.groups;this.roster.setRoster(_12e5);this.render();this.roster.addListener("offlinemoved",function(){if(!this.isUpdating){this.render(true);}else{this.needsUpdate=true;}},this,1);},getSelectedUser:function(){return this.roster.getSelectedUser();},getContactFromID:function(idStr){var parts=idStr.split("-");var cJid=parts.slice(2,parts.length-1).join("");return jive.spank.roster.Contact.find(this,cJid,parts[parts.length-1]);},render:function(_12e9){var tabId=this.tabs["Contacts"];this.roster.render();this.needsUpdate=false;this.dialog.addListener("show",this.finishDisplay,this,true);if(_12e9){this.finishDisplay();}},finishDisplay:function(){this.roster.sortGroups();this.roster.renderOffline();this.roster._enableBehaviors();this.enableContextMenus();},enableContextMenus:function(){getEls("ul#jive-roster ul.group-list li").mon("contextmenu",function(evt){evt.stopEvent();var _12ec=evt.getTarget();if(_12ec.tagName.toLowerCase()!="li"){_12ec=_12ec.parentNode;}this.contactMenu.clickedContact=this.getContactFromID(_12ec.id);var _12ed=_12ec.id;getEls("ul.jive-roster ul.group-list li").removeClass("selected");document.getElementById(_12ed).className+=" selected";getEl(this.contactMenu.element).moveTo(evt.getPageX(),evt.getPageY());this.contactMenu.element.style.zIndex=this.dialog.lastZIndex+1;this.contactMenu.show();},this,true);getEls("ul#jive-roster span.group-isonline em").mon("contextmenu",function(evt){evt.stopEvent();var _12ef=evt.getTarget();this.groupMenu.clickedGroup=this.groups[_12ef.innerHTML];getEl(this.groupMenu.element).moveTo(evt.getPageX(),evt.getPageY());this.groupMenu.element.style.zIndex=this.dialog.lastZIndex+1;this.groupMenu.show();},this,true);try{getEls("li#group-Offline_Group-jive-roster span.group-label em").mon("contextmenu",function(evt){evt.stopEvent();});}catch(error){}},addContact:function(_12f1,_12f2,group){this.roster.addContact(_12f1,_12f2,group);this.render(true);},removeContact:function(jid){this.roster.removeContact(jid);},changeUserStatus:function(_12f5,_12f6){var menu=getEl(this.bodyId+"-statusmenu-ctrl");var _12f8={chat:"Free to Chat",available:"Available",onroad:"On Road",away:"Away",onphone:"On Phone",dnd:"Do Not Disturb"};menu.dom.className=menu.dom.className.replace(/roster-contact-([^ ]*)/,"roster-contact-"+_12f5);menu.getChildrenByTagName("span")[0].dom.innerHTML=(_12f6!=null?_12f6:_12f8[_12f5]);},changeContactStatus:function(jid,_12fa,_12fb){this.roster.changeContactStatus(jid,_12fa,_12fb);},getContactStatus:function(jid){return this.roster.getContactStatus(jid);},showAddGroup:function(){var self=this;var addg=new jive.spank.chat.Dialog(self,jive.spank.chat.Template.add_group,{title:"Add Group",width:280,height:140,yOffset:125});addg.dialog.show();getEl(addg.id+"-creategroup").addListener("click",function(){self.fireEvent("addgroup",self,$F(addg.id+"-addgroupname"));addg.dialog.hide();});},showAddContact:function(){var self=this;var addc=new jive.spank.chat.Dialog(self,jive.spank.chat.Template.add_contact,{title:"Add Contact",width:280,height:155});addc.dialog.show();this._autocompGroups(addc,"-addcontact-group");$(addc.id+"-addusername").focus();getEl(addc.id+"-createcontact").addListener("click",function(){self.fireEvent("addcontact",self,$F(addc.id+"-addusername"),$F(addc.id+"-addnickname"),$F(addc.id+"-addcontact-group"));addc.dialog.hide();});},showSubscriptionRequest:function(_1301,_1302){var self=this;var subr=new jive.spank.chat.Dialog(self,jive.spank.chat.Template.sub_request,{title:"Allow "+(_1302!=""?_1302:_1301)+" to add you?",width:440,height:220,templateKeys:{jid:_1301,nick:_1302}});subr.dialog.show();this._autocompGroups(subr,"-subrequest-group");getEl(subr.id+"-add").addListener("click",function(){getEls("#"+subr.id+" label").toggleClass("disabled");getEl(subr.id+"-jid").toggleClass("disabled");getEl(subr.id+"-nick").dom.disabled=getEl(subr.id+"-subrequest-group").dom.disabled=!getEl(subr.id+"-add").dom.checked;});getEl(subr.id+"-acceptsubrequest").addListener("click",function(){self.fireEvent("acceptsubscription",self,$F(subr.id+"-add"),_1301,$F(subr.id+"-nick"),$F(subr.id+"-subrequest-group"));subr.dialog.hide();});getEl(subr.id+"-denysubrequest").addListener("click",function(){self.fireEvent("denysubscription",self,$F(subr.id+"-add"),_1301,$F(subr.id+"-nick"),$F(subr.id+"-subrequest-group"));subr.dialog.hide();});},showRename:function(_1305){if(_1305==null){_1305=this.contactMenu.clickedContact;}var _1306=new jive.spank.chat.Dialog(self,jive.spank.chat.Template.rename,{title:"Renaming '"+_1305.name+"'",width:250,height:115,templateKeys:{nick:_1305.name}});_1306.dialog.show();var self=this;var _1308=function(){var _1309=(typeof _1305.jid!="undefined")?"renamecontact":"renamegroup";self.fireEvent(_1309,self,_1305,$F(_1306.id+"-name"));getEl(_1306.id+"-rename").removeAllListeners();_1306.dialog.hide();};getEl(_1306.id+"-name").mon("keypress",_1308.createInterceptor(function(evt){return evt.getKey()==13;}));getEl(_1306.id+"-rename").addListener("click",_1308);},showRemove:function(_130b){this.fireEvent("removecontact",this,this.contactMenu.clickedContact.jid.toString());},showGroupRename:function(_130c){var _130d=_130c();this.showRename(_130d);},fetchClickedGroup:function(){return this.groupMenu.clickedGroup;},showGroupRemove:function(_130e){var _130f=_130e();var _1310=new jive.spank.chat.Dialog(this,jive.spank.chat.Template.remove_group,{title:"Removing '"+_130f.name+"'",width:250,height:100,templateKeys:{name:_130f.name}});_1310.dialog.show();var self=this;var _1312=function(){self.fireEvent("removegroup",self,_130f);getEl(_1310.id+"-remove").removeAllListeners();_1310.dialog.hide();};getEl(_1310.id+"-remove").addListener("click",_1312);},_autocompGroups:function(dlog,_1314){var _1315=dlog.id+_1314;var _1316=_1315+"-menu";var self=this;if(getEl(_1316)==null){var _1318=self.addMenuDiv(_1316);_1318.className="groups-ac";}var _1319=function(query){var _131b=[];for(var g in self.roster.groups){_131b.push(g);}return self._prepareAutocompArray(_131b,query);};var _131d=new jive.spank.FlatAutoComplete(_1315,_1316,new YAHOO.widget.DS_JSFunction(_1319),{typeAhead:true,minQueryLength:0});_131d.formatResult=function(_131e,_131f){return _131e;};_131d.dataReturnEvent.subscribe(function(type,args){if(args[2].length==0){_131d.setBody("<div class='empty'>(No matches, will create new)</div>");}var thelm=getEl(_1316);thelm.alignTo(getEl(_1315),"bl");thelm.dom.style.zIndex=dlog.dialog.lastZIndex+1;thelm.show();});getEl(_1315).addListener("blur",function(){getEl(_1316).hide();});getEls("#"+_1316+" li").mon("mousedown",function(evt){getEl(_1315).dom.value=evt.getTarget().innerHTML;});dlog.dialog.addListener("beforehide",function(){_131d.formatResult=Prototype.emptyFunction;_1319=Prototype.emptyFunction;getEl(_1316).removeAllListeners();getEl(_1315).removeAllListeners();_131d.dataReturnEvent.unsubscribeAll();getEls("#"+_1316+" li").removeAllListeners();getEl(_1316).remove();});return _131d;},contactsForAutocomp:function(query){var _1325=this.roster;var _1326=[];for(var g in _1325.groups){_1325.groups[g].contacts.each(function(ctact){_1326.push([ctact.name,ctact.jid,ctact.status]);});}return this._prepareAutocompArray(_1326,query);},_prepareAutocompArray:function(_1329,query){var _132b=typeof _1329[0]!="string";if(_132b&&_1329.length==0){return _1329;}_1329=_1329.sortBy(function(_132c){if(_132b){return _132c[0].toLowerCase();}else{return _132c.toLowerCase();}});if(_1329.length<2||!query||query==""){return _1329;}else{var _132d=_1329.partition(function(_132e){return (_132b?_132e[0].indexOf(query)==0:_132e.indexOf(query)==0);});return _132d[0].concat(_132d[1]);}},addMenuDiv:function(divId){var _1330=document.createElement("div");_1330.id=divId;_1330.style.visibility="hidden";document.body.appendChild(_1330);return _1330;},endUpdate:function(){if(this.needsUpdate){this.render(true);}jive.spank.roster.RosterWindow.superclass.endUpdate.call(this);},destroy:function(){jive.spank.roster.RosterWindow.superclass.destroy.call(this);}});jive.spank.chat.Dialog=function(_1331,_1332,_1333){this.parentWindow=_1331;var elm=document.createElement("div");this.id=elm.id=YAHOO.util.Dom.generateId();document.body.appendChild(elm);var _1335=!_1333.constrained;jive.spank.chat.Dialog.superclass.constructor.call(this,elm.id,{title:_1333.title,modal:_1333.modal,constraintoviewport:_1335,width:_1333.width,height:_1333.height,shadow:true,proxyDrag:true,resizable:false,draggable:true,x:_1333.x?_1333.x:(YAHOO.util.Dom.getViewportWidth()/2)-(_1333.width/2),y:_1333.y?_1333.y:(YAHOO.util.Dom.getViewportHeight()/2)-(_1333.height/2),closable:true});this.dialog=this;if(_1333.templateKeys){var _1336=_1333.templateKeys;_1336.id=this.id;_1332.append(this.body.dom,_1336);}else{_1332.append(this.body.dom,{id:this.id});}getEls("#"+this.id+" .jive-closedialog").addListener("click",this.hide.bind(this));this.addListener("hide",this.destroy.bind(this));};YAHOO.extend(jive.spank.chat.Dialog,YAHOO.ext.BasicDialog,{destroy:function(){jive.spank.chat.Dialog.superclass.destroy(this,true);this.proxy.remove();this.shadow.remove();if(this.mask){this.mask.remove();}this.purgeListeners();}});jive.spank.dialog={};jive.spank.dialog.StartChat=function(_1337){var _1338=new jive.spank.chat.Dialog(this,jive.spank.chat.Template.start_chat,{title:"Start a chat",width:250,height:105});_1338.dialog.show();var _1339=function(){var _133a=$F(_1338.id+"-jid");if(_133a.replace(/^\s+|\s+$/g,"")!=""){_1337(this,{jid:_133a});getEl(_1338.id+"-startbtn").removeAllListeners();_1338.dialog.hide();}else{$(_1338.id).focus();}};$(_1338.id+"-jid").focus();getEl(_1338.id+"-startbtn").addListener("click",_1339);};jive.spank.dialog.CreateConference=function(_133b,_133c){if(!_133c){_133c={};}_133c=$H(_133c).merge(this._configuration);jive.spank.dialog.CreateConference.superclass.constructor.call(this,_133b,jive.spank.chat.Template.muccreation,_133c);this.events=$H(this.events).merge({"muccreated":true});this.addListener("hide",this.onHide.bind(this));getEl(this.id+"-private").addListener("click",this._privateCheckboxListener.bind(this));getEl(this.id+"-createroom").addListener("click",this._createRoomListener.bind(this));};YAHOO.extend(jive.spank.dialog.CreateConference,jive.spank.chat.Dialog,{_configuration:{title:"Create a Conference",width:285,height:285},_createRoomListener:function(){var _133d=getEl(this.id+"-private");var _133e=$F(this.id+"-roompw");var _133f=$F(this.id+"-roomconfirm");if(_133d.dom.checked&&_133e!=_133f){alert("Sorry, your password and confirmation don't match.");$(this.id+"-roompw").select();return false;}this.fireEvent("muccreated",this,this.getValues());},_privateCheckboxListener:function(){getEls("#"+this.id+" .fieldset label").toggleClass("disabled");getEl(this.id+"-roompw").dom.disabled=getEl(this.id+"-roomconfirm").dom.disabled=!getEl(this.id+"-private").dom.checked;},focus:function(){getEl(this.id+"-roomname").dom.focus();},getValues:function(){return {name:$F(this.id+"-roomname"),topic:$F(this.id+"-roomtopic"),isPermanent:$(this.id+"-permanent").checked,isPrivate:$(this.id+"-private").checked,password:$F(this.id+"-roompw"),confirmPassowrd:$F(this.id+"-roomconfirm")};},onHide:function(){getEl(this.id+"-private").removeAllListeners();getEl(this.id+"-createroom").removeAllListeners();}});jive.spank.dialog.CreateAccount=function(_1340){this.dialog=new jive.spank.chat.Dialog(null,jive.spank.chat.Template.create_account,{title:"Creating an account",width:250,height:180,modal:true});var _1341=this.dialog;this.nameField=getEl(_1341.id+"-name");this.passwordField=getEl(_1341.id+"-passwd");this.createButton=getEl(_1341.id+"-submit");this.verifyCallback=_1340;getEl(_1341.id+"-confirm").mon("keypress",this._doSubmit.createInterceptor(function(evt){return evt.getKey()==13;}));getEl(_1341.id+"-submit").addListener("click",this._doSubmit.bind(this));this.nameField.mon("keypress",function(){this.dom.style.backgroundColor="#fff";}.bind(this.nameField));this.passwordField.mon("keypress",function(){this.dom.style.backgroundColor="#fff";}.bind(this.passwordField));this.nameField.dom.focus();_1341.dialog.show();};jive.spank.dialog.CreateAccount.prototype={_doSubmit:function(){var _1343=this.dialog;var error=$(_1343.id+"-error");$(_1343.id+"-name").style.backgroundColor="#fff";$(_1343.id+"-passwd").style.backgroundColor="#fff";if($F(_1343.id+"-name")==""){$(_1343.id+"-name").style.backgroundColor="#f00";$(_1343.id+"-name").select();return false;}if($F(_1343.id+"-passwd")==""){$(_1343.id+"-passwd").style.backgroundColor="#f00";$(_1343.id+"-passwd").select();return false;}if($F(_1343.id+"-passwd")!=$F(_1343.id+"-confirm")){$(_1343.id+"-passwd").style.backgroundColor="#f00";$(_1343.id+"-passwd").select();return false;}this.createButton.dom.disabled=true;this.createButton.hide();jive.spank.Spinner.show({x:this.createButton.getX()-10,y:this.createButton.getY()});this.verifyCallback({username:$F(_1343.id+"-name"),password:$F(_1343.id+"-passwd")});},verify:function(_1345){var _1346=this.dialog;if(verify){if(verify.name){$(_1346.id+"-name").style.backgroundColor="#f00";$(_1346.id+"-name").select();return;}if(verify.password){$(_1346.id+"-passwd").style.backgroundColor="#f00";$(_1346.id+"-passwd").select();return;}}getEl(_1346.id+"-confirm").removeAllListeners();getEl(_1346.id+"-submit").removeAllListeners();this.nameField.removeAllListeners();this.passwordField.removeAllListeners();this.dialog.hide();}};jive.spank.roster.Roster=function(id,_1348){this.el=getEl(id);this.groups={};this.closedgroups=[];this.events={"contactdblclicked":true,"offlinemoved":true};if(_1348){this.offlines="";this._wrappedClick=null;}};YAHOO.extend(jive.spank.roster.Roster,YAHOO.ext.util.Observable,{addGroup:function(_1349,_134a){if(this.groups[_1349]){return this.groups[_1349];}this.groups[_1349]=new jive.spank.roster.RosterGroup(this,_1349,_134a);this.el.insertHtml("beforeEnd",this.groups[_1349].render(false));this.groups[_1349]._enableBehaviors();return this.groups[_1349];},addContact:function(_134b,_134c,_134d){var group=this.addGroup(_134c,_134d);group.addContact(_134b);},removeContact:function(jid){var _1350=this.findContact(jid);var grp=_1350.group;_1350.remove();if(grp.contacts.length==0){grp.remove();}},setRoster:function(_1352){var _1353;for(groupName in _1352){_1353=_1352[groupName];this.groups[groupName]=new jive.spank.roster.RosterGroup(this,groupName,_1353);}},render:function(){var _1354="";var _1355=typeof this.offlines!="undefined";this._logClosedGroups();for(var g in this.groups){_1354+=this.groups[g].render(_1355);}this.el.dom.innerHTML=_1354;return this;},getSelectedUser:function(){var _1357=$$("ul#"+this.id+" ul.group-list li.selected")[0];var _1358=_1357.id.split("-");var _1359=_1358[3];var _135a=_1358[2];return this.findContact(_135a,_1359);},findContact:function(jid,_135c){if(_135c){_135c=_135c.replace(/[^0-9A-Za-z]/,"_");}for(var _135d in this.groups){if(_135c&&_135d.replace(/[^0-9A-Za-z]/,"_")!=_135c){continue;}var _135e=this.groups[_135d].contacts.find(function(_135f){return _135f.jid==jid;});if(_135e){return _135e;}}return null;},changeContactStatus:function(jid,_1361,_1362){var _1363=this.findContact(jid);if(_1363){_1363.changeStatus(_1361,_1362);}},getContactStatus:function(jid){var _1365=this.findContact(jid);if(_1365){return _1365.status;}},renderOffline:function(){var _1366=this.groups;var _1367="";for(var _1368 in _1366){this.groups[_1368].contacts.each(function(_1369){if(_1369.status=="unavailable"){_1367+=_1369.render();}});}if((_1367==""||this.offlines!="")&&getEl("group-"+this.offlines)){getEl("group-"+this.offlines).remove();}else{this.offlines="Offline_Group-"+this.el.id;}if(_1367!=""){this.el.insertHtml("beforeEnd",jive.spank.chat.Template.roster_group.applyTemplate({id:this.offlines,renderClosed:"open",online:"",groupName:"Offline Group",users:_1367}));var _136a=getEl("group-label-"+this.offlines);_136a.unselectable();this._wrappedClick=_136a.getChildrenByTagName("em")[0].mon("click",jive.spank.roster.RosterGroup.toggleGroupVisListener);jive.spank.roster.RosterGroup.sortContactHTML(this.offlines);}},sortGroups:function(){var prent=this.el;if(prent&&prent.dom!=null){var lines=prent.getChildrenByClassName("group");var _136d=lines.sortBy(function(line){return line.id.split("-")[1].toLowerCase();});_136d.each(function(line){line.appendTo(prent.dom);});}for(var g in this.groups){this.groups[g].sort();}},_logClosedGroups:function(){this.closedgroups=[];var _1371=this.el.getChildrenByClassName("closed");for(var i=0;i<_1371.length;i++){if(_1371[i].firstChild){this.closedgroups.push(_1371[i].firstChild.innerHTML);}}},_enableBehaviors:function(_1373){for(var g in this.groups){this.groups[g]._enableBehaviors(_1373);}}});jive.spank.roster.RosterGroup=function(_1375,name,_1377){this.name=name;this.cleanName=name.replace(/[^A-Za-z0-9]/,"_");this.contacts=[];if(_1377){this._rebuildContacts(_1377);}this._roster=_1375;this.id=this.cleanName+"-"+this._roster.el.id;this._wrappedClick=null;};jive.spank.roster.RosterGroup.prototype={_rebuildContacts:function(json){for(var uname in json){this.contacts.push(new jive.spank.roster.Contact(json[uname],this));}},addContact:function(_137a){var _137b=new jive.spank.roster.Contact(_137a,this);this.contacts.push(_137b);var _137c="group-list-"+this.id;if(typeof this._roster.offlines!="undefined"&&_137b.status=="unavailable"){_137c="group-list-"+this._roster.offlines;}jive.spank.chat.Template.contact.append(_137c,{id:_137b.id,status:_137b.status,username:_137b.name});this.contacts[this.contacts.length-1]._enableBehaviors();},removeContact:function(jid){var _137e=this.getContactByJID(jid);if(_137e){_137e.remove();}},contactIndexByJid:function(jid){for(var u=this.contacts.length-1;u>=0;u--){if(this.contacts[u].jid==jid){return u;}}return -1;},getContactByJID:function(jid){var index=this.contactIndexByJid(jid);if(index>=0){return this.contacts[index];}else{return null;}},render:function(_1383){var _1384="open";var _1385=this._roster.closedgroups.indexOf(this.name)!=-1;if(_1385){_1384="closed";}var body=this._getMembersHtml(_1383);if(body==""&&_1383){return "";}return jive.spank.chat.Template.roster_group.applyTemplate({id:this.id,renderClosed:_1384,online:"group-isonline",groupName:this.name,users:body});},sort:function(){jive.spank.roster.RosterGroup.sortContactHTML(this.id);},remove:function(){var elm=getEl("group-"+this.id);YAHOO.ext.EventManager.removeListener(elm,"click",this._wrappedClick);this._wrappedClick=null;elm.remove();delete this._roster.groups[this.name];},_getMembersHtml:function(_1388){var _1389="";for(var u=0;u<this.contacts.length;u++){if(!_1388||this.contacts[u].status!="unavailable"){_1389+=this.contacts[u].render();}}return _1389;},_enableBehaviors:function(_138b){if(_138b==null){_138b=true;}var _138c=getEl("group-label-"+this.id);if(_138c&&_138c.dom){_138c.unselectable();var _138d=_138c.getChildrenByTagName("em")[0];_138d.unselectable();if(_138b){this._wrappedClick=_138d.mon("click",jive.spank.roster.RosterGroup.toggleGroupVisListener);}}for(u=this.contacts.length-1;u>=0;u--){this.contacts[u]._enableBehaviors();}}};jive.spank.roster.RosterGroup.toggleGroupVisListener=function(evt){var elm=evt.getTarget().parentNode;var count=elm.parentNode.childNodes.length;var _1391;for(var i=count-1;i>=0;i--){if(elm.parentNode.childNodes[i].nodeName=="UL"){_1391=elm.parentNode.childNodes[i];break;}}if(_1391!=null){var _1393=(_1391.style.display=="none")?"block":"none";for(var j=_1391.childNodes.length-1;i>=0;i--){if(_1391.childNodes[j].nodeName=="LI"){_1391.childNodes[j].style.display=_1393;}}_1391.style.display=_1393;elm=getEl(elm);elm.removeClass(_1393=="block"?"closed":"open");elm.addClass(_1393=="block"?"open":"closed");}};jive.spank.roster.RosterGroup.sortContactHTML=function(id){var prent=getEl("group-list-"+id);if(prent&&prent.dom!=null){var lines=prent.getChildrenByTagName("li");var _1398=lines.sortBy(function(line){return line.dom.innerHTML;});_1398.each(function(line){line.appendTo(prent.dom);});}};jive.spank.roster.Contact=function(_139b,_139c){this.jid=(typeof _139b!="string"&&_139b.getJID)?_139b.getJID():"fake"+Math.random()+"@jivesoftware.com";this.name=(_139b.getName&&_139b.getName()?_139b.getName():this.jid);this.status=typeof _139b!="string"&&_139b.status?_139b.status:_139b.isSubscriptionPending&&_139b.isSubscriptionPending()?"pending":"unavailable";this.group=_139c;this.id="roster-contact-"+this.jid+"-"+this.group.cleanName;this.currentMessage="";this._wrappedClick=null;this._wrappedDblClick=null;this.events={"status":true,"offlinemoved":true};};YAHOO.extend(jive.spank.roster.Contact,YAHOO.ext.util.Observable,{remove:function(){var elm=getEl(this.id);YAHOO.ext.EventManager.removeListener(elm,"click",this._wrappedClick);this._wrappedClick=null;YAHOO.ext.EventManager.removeListener(elm,"dblclick",this._wrappedDblClick);this._wrappedDblClick=null;YAHOO.ext.EventManager.removeListener(elm,"mouseover",this._wrappedMouseOver);delete this._wrappedMouseOver;YAHOO.ext.EventManager.removeListener(elm,"mouseout",this._wrappedMouseOut);delete this._wrappedMouseOut;elm.remove();this.group.contacts.splice(this.group.contactIndexByJid(this.jid),1);delete this.group;},changeStatus:function(_139e,_139f){_139e=_139e.toLowerCase();getEl(this.id).replaceClass("roster-contact-"+this.status,"roster-contact-"+_139e);var _13a0=(this.status?this.status:"unavailable");var _13a1=this.status;this.status=_139e;if(_13a1=="unavailable"||_139e=="unavailable"){this.group._roster.fireEvent("offlinemoved");}this.fireEvent("status",_13a0,_139e);this._changeStatusMsg(_139f);return _13a0;},render:function(){return jive.spank.chat.Template.contact.applyTemplate({id:this.id,username:this.name,status:this.status,message:this.currentMessage});},_changeStatusMsg:function(msg){this.currentMessage=(!msg||msg.strip()==""?"":"- "+msg);var _13a3=getEl(this.id+"-msg");_13a3.dom.innerHTML=this.currentMessage;},_enableBehaviors:function(){var elm=getEl(this.id);if(elm){elm.unselectable();this._wrappedClick=elm.mon("click",function(evt){var _13a6=getEl(evt.getTarget());var _13a7=_13a6.dom.id;getEls("ul.jive-roster ul.group-list li").removeClass("selected");document.getElementById(_13a7).className+=" selected";});var self=this;this._wrappedDblClick=elm.mon("dblclick",function(evt){evt.stopEvent();self.group._roster.fireEvent("contactdblclicked",self.group._roster,self);});this._wrappedMouseOver=elm.addManagedListener("mouseover",function(evt){var _13ab=getEl(evt.getTarget());var _13ac=_13ab.dom.id;document.getElementById(_13ac).className+=" hover";});this._wrappedMouseOut=elm.addManagedListener("mouseout",function(evt){elm.removeClass("hover");});}}});jive.spank.roster.Contact.find=function(_13ae,jid,_13b0){var _13b1=_13ae.groups;for(var _13b2 in _13b1){if(_13b0&&_13b2.replace(/[^0-9A-Za-z]/,"_")!=_13b0){continue;}var _13b3=_13b1[_13b2].contacts.find(function(_13b4){return _13b4.jid==jid;});if(_13b3){return _13b3;}}return null;};jive.spank.chat.Control=function(_13b5,title,elm){elm.id=elm.id||YAHOO.util.Dom.generateId();this.el=getEl(elm.id);this.el.appendTo(_13b5);this.el.setDisplayed("inline").unselectable();this.events={"click":true,"dblclick":true,"mouseover":true,"mouseout":true,"mousedown":true,"mouseup":true,"mousemove":true};this._wrappedListeners={};var self=this;this._wrappedListeners["click"]=this.el.addManagedListener("click",function(evt){self.fireEvent("click",evt);});this._wrappedListeners["dblclick"]=this.el.addManagedListener("dblclick",function(evt){self.fireEvent("dblclick",evt);});this._wrappedListeners["mouseover"]=this.el.addManagedListener("mouseover",function(evt){self.fireEvent("mouseover",evt);});this._wrappedListeners["mouseout"]=this.el.addManagedListener("mouseout",function(evt){self.fireEvent("mouseout",evt);});this._wrappedListeners["mousedown"]=this.el.addManagedListener("mousedown",function(evt){self.fireEvent("mousedown",evt);});this._wrappedListeners["mouseup"]=this.el.addManagedListener("mouseup",function(evt){self.fireEvent("mouseup",evt);});this._wrappedListeners["mousemove"]=this.el.addManagedListener("mousemove",function(evt){self.fireEvent("mousemove",evt);});this.title=title;this.panel=_13b5;};YAHOO.extend(jive.spank.chat.Control,YAHOO.ext.util.Observable,{fireEvent:function(){if(!this.el.hasClass("jive-disabled")){jive.spank.chat.Control.superclass.fireEvent.call(this,arguments[0],self,arguments[1]);}},remove:function(){this.purgeListeners();for(var _13c0 in this.events){YAHOO.ext.EventManager.removeListener(_13c0,this.el,this._wrappedListeners[_13c0]);}this._wrappedListeners=null;this.el.remove();},enable:function(){this.el.removeClass("jive-disabled");},disable:function(){this.el.addClass("jive-disabled");},toggleEnabled:function(){this.el.toggleClass("jive-disabled");}});jive.spank.chat.Control.add=function(_13c1,_13c2,_13c3){var body=document.getElementsByTagName("body")[0];if(typeof _13c3!="function"&&_13c3.elmId!=null){var _13c5=$(_13c3.elmId);var elm=_13c5.cloneNode(true);elm.id="jivectrl-"+_13c5.id;elm.style.display="none";body.appendChild(elm);}else{if(typeof _13c3!="function"&&_13c3.imgSrc!=null){var elm=document.createElement("a");elm.appendChild(document.createElement("img"));var elmId=elm.id=YAHOO.util.Dom.generateId();elm.className="imgbtn";elm.firstChild.setAttribute("src",_13c3.imgSrc);if(_13c3.tooltip){elm.setAttribute("title",_13c3.tooltip);}elm.setAttribute("href","#");body.appendChild(elm);}else{var _13c9="autobtn";var elmId=YAHOO.util.Dom.generateId();if(typeof _13c3!="function"&&_13c3.className!=null){_13c9=_13c3.className;}jive.spank.chat.Template.control_btn.append(body,{id:elmId,cls:_13c9,text:_13c2});}}if(typeof _13c3!="function"&&_13c3.tooltip){elm.setAttribute("title",_13c3.tooltip);}var _13cb=new jive.spank.chat.Control(getEl(_13c1),_13c2,elm);if(typeof _13c3=="function"){_13cb.addListener("click",_13c3);}else{for(var _13cc in _13c3.events){_13cb.addListener(_13cc,_13c3.events[_13cc]);}}return _13cb;};jive.spank.chat.CustomMessage=function(type,_13ce){var _13cf=new YAHOO.ext.DomHelper.Template(this.finishers[type].template.join(""));this.callback=this.finishers[type].callback;this.destroy=this.finishers[type].destroy;this.events=this.finishers[type].events;_13ce.id=_13ce.id||YAHOO.util.Dom.generateId();this.el=document.createElement("div");this.el.innerHTML=_13cf.applyTemplate(_13ce);this.el.id=_13ce.id;this.config=_13ce;};YAHOO.extend(jive.spank.chat.CustomMessage,YAHOO.ext.util.Observable,{finishers:{mucinvitation:{events:{"accepted":true,"declined":true},callback:function(_13d0){var theId=this.el.id;var _13d2=getEl(theId+"-room").dom.innerHTML;var _13d3=getEl(theId+"-inviter").dom.innerHTML;getEl(theId+"-join").addListener("click",function(){this.fireEvent("accepted",_13d0,this.config);getEl(theId+"-message").dom.innerHTML="You accepted "+_13d3+"'s invitation to \""+_13d2+"\".";this.destroy();}.bind(this));getEl(theId+"-decline").addListener("click",function(){this.fireEvent("declined",_13d0,this.config);getEl(theId+"-message").dom.innerHTML="You declined "+_13d3+"'s invitation to \""+_13d2+"\".";this.destroy();}.bind(this));},destroy:function(){var theId=this.el.id;getEl(theId+"-join").removeAllListeners();getEl(theId+"-decline").removeAllListeners();getEl(theId+"-controls").remove();this.purgeListeners();delete this.config;},template:["<div class=\"jive-mucinvite\">","<p id=\"{id}-message\"><span id=\"{id}-inviter\">{name}</span> has invited you to","join the conference \"<span id=\"{id}-room\">{chatname}</span>\".</p>","<div id=\"{id}-controls\"><a id=\"{id}-join\" href=\"#\">Accept</a>","<a id=\"{id}-decline\" href=\"#\">Decline</a></div>","<span id=\"{id}-jid\" style=\"display: none;\">{jid}</span>","</div>"]}}});jive.spank.AutoComplete=function(_13d5,_13d6,_13d7,_13d8){jive.spank.AutoComplete.superclass.constructor.call(this,_13d5,_13d6,_13d7,_13d8);};YAHOO.extend(jive.spank.AutoComplete,YAHOO.widget.AutoComplete);jive.spank.AutoComplete.prototype._populateList=function(query,_13da,self){self.autoHighlight=(_13da[0][0].indexOf(query)==0);jive.spank.AutoComplete.superclass._populateList.call(this,query,_13da,self);};jive.spank.FlatAutoComplete=function(_13dc,_13dd,_13de,_13df){jive.spank.FlatAutoComplete.superclass.constructor.call(this,_13dc,_13dd,_13de,_13df);};YAHOO.extend(jive.spank.FlatAutoComplete,YAHOO.widget.AutoComplete);jive.spank.FlatAutoComplete.prototype._populateList=function(query,_13e1,self){self.autoHighlight=(_13e1[0]&&_13e1[0].indexOf(query)==0);jive.spank.AutoComplete.superclass._populateList.call(this,query,_13e1,self);};jive.spank.FlatAutoComplete.prototype._updateValue=function(item){item._sResultKey=item._oResultData;jive.spank.AutoComplete.superclass._updateValue.call(this,item);};jive.spank.Spinner={show:function(_13e4){if(_13e4==null){_13e4={};}if(!this.isShowing){var x=_13e4.x||(YAHOO.util.Dom.getViewportWidth()/2)-60;var y=_13e4.y||(YAHOO.util.Dom.getViewportHeight()/2)-20;var text=_13e4.text||"Loading...";this.template.append(document.body,{text:text});var theEl=getEl("jive-spinner");if(_13e4.el&&_13e4.position){theEl.alignTo(_13e4.el,_13e4.position);}else{theEl.moveTo(x,y);}theEl.setStyle("z-index",20000);theEl.show();this.isShowing=true;}},isShowing:false,hide:function(){if(this.isShowing){getEl("jive-spinner").remove();this.isShowing=false;}},template:new YAHOO.ext.DomHelper.Template("<div style=\"visibility: hidden;\" id=\"jive-spinner\">"+"<img src=\"resources/images/progress.gif\" alt=\"\" />{text}</div>")};jive.spank.chat.Filter=function(name,_13ea,_13eb){this.filterPattern=_13ea;this.filterReplacement=_13eb;this.name=name;};jive.spank.chat.Filter.prototype.apply=function(_13ec){return _13ec.replace(this.filterPattern,this.filterReplacement);};jive.spank.chat.Filter.applyAll=function(_13ed){jive.spank.chat.Filter.registeredFilters.each(function(_13ee){_13ed=_13ee.apply(_13ed);});return _13ed;};jive.spank.chat.Filter.add=function(name,_13f0,_13f1){jive.spank.chat.Filter.registeredFilters.push(new jive.spank.chat.Filter(name,_13f0,_13f1));};jive.spank.chat.Filter.remove=function(_13f2){jive.spank.chat.Filter.registeredFilters.each(function(ftr,i){if(ftr.name==_13f2){delete jive.spank.chat.Filter.registeredFilters[i];throw $break;}});};jive.spank.chat.Filter.unregisterAll=function(){for(var t=jive.spank.chat.Filter.registeredFilters.length-1;t>=0;t--){delete jive.spank.chat.Filter.registeredFilters[t];}};jive.spank.chat.Filter.registeredFilters=[];jive.spank.notifier={};jive.spank.notifier.origTitle=null;jive.spank.notifier.titleMsg="";jive.spank.notifier.titleInterval=null;jive.spank.notifier.countNewMsgs=function(){var _13f6;var _13f7="";var _13f8=0;for(var _13f9 in jive.spank.chat.ChatWindow.currentWindow){_13f6=jive.spank.chat.ChatWindow.currentWindow[_13f9];for(var _13fa in _13f6.newMessages){_13f8+=_13f6.newMessages[_13fa];}}return _13f8;};jive.spank.notifier.doTitleNotify=function(_13fb){var ct=jive.spank.notifier.countNewMsgs();if(jive.spank.notifier.titleInterval){window.clearTimeout(jive.spank.notifier.titleInterval);jive.spank.notifier.titleInterval=null;}if(ct<=0){if(jive.spank.notifier.origTitle!=null){document.title=jive.spank.notifier.origTitle;jive.spank.notifier.origTitle=null;}return null;}else{jive.spank.notifier.titleMsg="* "+ct+" new chat message"+(ct>1?"s":"");}if(jive.spank.notifier.origTitle==null){jive.spank.notifier.origTitle=document.title;}jive.spank.notifier.titleInterval=window.setTimeout(jive.spank.notifier.rotateTitle,2000);};jive.spank.notifier.rotateTitle=function(){document.title=(document.title==jive.spank.notifier.titleMsg)?jive.spank.notifier.origTitle:jive.spank.notifier.titleMsg;jive.spank.notifier.titleInterval=window.setTimeout(jive.spank.notifier.rotateTitle,2000);};jive.spank.chat.Template={add_contact:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody addcontact\">","<table width=\"100%\" cellpadding=\"2\" cellspacing=\"0\" border=\"0\">","<tr><td width=\"35%\">","<label for=\"{id}-addusername\">Username:</label>","</td><td width=\"65%\">","<input type=\"text\" id=\"{id}-addusername\" value=\"\" />","</td></tr>","<tr><td><label for=\"{id}-addnickname\">Nickname:</label>","</td><td><input type=\"text\" id=\"{id}-addnickname\" value=\"\" /></td></tr>","<tr><td><label for=\"{id}-addcontact-group\">Group:</label></td><td>","<input type=\"text\" id=\"{id}-addcontact-group\" value=\"\" />","</td></tr>","<tr><td colspan=\"2\" align=\"center\" class=\"masterctrl\">","<input type=\"button\" class=\"btn createcontact\" id=\"{id}-createcontact\" value=\"Add\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-closeaddcontact\" value=\"Cancel\" />","</td></tr></table>","</div>"].join("")),add_group:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\">","<table width=\"100%\" cellpadding=\"2\" cellspacing=\"0\" border=\"0\">","<tr><td width=\"25%\" rowspan=\"2\">","</td><td width=\"75%\">","Enter new group name:<br/>","<input type=\"text\" id=\"{id}-addgroupname\" value=\"\" />","</td></tr>","<tr><td>","<input type=\"button\" class=\"btn creategroup\" id=\"{id}-creategroup\" value=\"Add\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-closeaddgroup\" value=\"Cancel\" />","</td></tr></table>","</div>"].join("")),chat_toppane:new YAHOO.ext.DomHelper.Template("<div id=\"{bodyId}-topchat\" class=\"jive-chat-toppane\">"+"<p class=\"avatar\"><img id=\"{bodyId}-avatar\" src=\"../images/sparkweb-avatar.png\" height=\"48\" width=\"48\" alt=\"\" /></p>"+"<h4></h4>"+"<p id=\"{bodyId}-time\">Time: <span></span></p>"+"<div id=\"{bodyId}-controls\" class=\"jive-ctrlbar-topchat\"></div>"+"</div>"),contact:new YAHOO.ext.DomHelper.Template("<li id=\"{id}\" class=\"roster-contact-{status}\">{username} <span id=\"{id}-msg\" class=\"msg\">{message}</span></li>"),control_btn:new YAHOO.ext.DomHelper.Template("<a href=\"#\" class=\"jive-control-btn {cls}\" id=\"{id}\">{text}</a>"),control_panel:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-controls\" class=\"jive-ctrlbar\"></div>"),create_account:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\">","<table border=\"0\" cellpadding=\"0\" cellspacing=\"4\"><tr>","<td><div class=\"{id}-name-label\">Username:</div></td>","<td><input type=\"text\" id=\"{id}-name\" /></td></tr>","<td><div class=\"{id}-passwd-label\">Password:</div></td>","<td><input type=\"password\" id=\"{id}-passwd\" /></td></tr>","<td><div class=\"{id}-confirm-label\">Confirm Password:</div></td>","<td><input type=\"password\" id=\"{id}-confirm\" /></td></tr>","</table>","<p align=\"center\"><input type=\"button\" class=\"btn\" id=\"{id}-submit\" value=\"Submit\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-cancel\" value=\"Cancel\" /></p>","</div>"].join("")),dialog:new YAHOO.ext.DomHelper.Template("<div class=\"ydlg-hd\"><h1>{windowTitle}</h1></div>"+"<div id=\"{bodyId}\" class=\"ydlg-bd\">"+"<div id=\"{bodyId}-toppane\" class=\"ydlg-bd jive-toppane\"></div>"+"</div>"),message:new YAHOO.ext.DomHelper.Template("<div class=\"{type}-message {msgclass}\"><span class=\"meta\"><em>({time})</em>"+"&nbsp;{from}: </span><span class=\"message-content\">{message}</span></div>"),muc_chooser_top:new YAHOO.ext.DomHelper.Template("<div class=\"dhead chooseconf\">Create or join a conference room</div>"+"<div id=\"{tabId}-confcontrols\" class=\"dbody chooseconf\">"+"<div id=\"{tabId}-createconf\" class=\"jive-invite-control\">Create a Conference</div>"+"<div id=\"{tabId}-refresh\" class=\"jive-invite-control\">Refresh List</div>"+"</div>"),muc_controls:new YAHOO.ext.DomHelper.Template("<p>Subject: <span id=\"jive-tab-{jid}-subject\"></span></p>"+"<div class=\"muc-ctrl-frame\">"+"<div id=\"{jid}-changenick\" class=\"jive-invite-control\">Change nickname</div>"+"<div id=\"{jid}-control\" class=\"jive-invite-control\">Invite contact "+"<img align=\"absmiddle\" src=\"resources/images/menutri.gif\" height=\"4\" width=\"7\" alt=\"\" /></div>"+"</div>"),muc_subject:new YAHOO.ext.DomHelper.Template("<p>Subject: <span id=\"jive-tab-{jid}-subject\"></span></p>"),mucchooser:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-layout\" class=\"ylayout-inactive-content\">"+"<div id=\"{tabId}-toppane\" class=\"ydlg-bd jive-toppane\"></div>"+"<div id=\"{tabId}-roomgrid\"></div>"+"</div>"),muccreation:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\">","<table border=\"0\" cellpadding=\"0\" cellspacing=\"4\"><tr>","<td><label for=\"{id}-roomname\">Room Name:</label></td>","<td><input type=\"text\" id=\"{id}-roomname\" /></td></tr>","<tr><td><label for=\"{id}-roomtopic\">Room Topic:</label></td>","<td><input type=\"text\" id=\"{id}-roomtopic\" /></td></tr>","<tr><td colspan=\"2\"><input type=\"checkbox\" id=\"{id}-permanent\" />","<label for=\"{id}-permanent\"> Make permanent</label></td></tr></table>","<div class=\"fieldset\">","<p class=\"legend\"><span><input type=\"checkbox\" id=\"{id}-private\" />"," Make private</span></p>","<table border=\"0\" cellpadding=\"0\" cellspacing=\"4\"><tr>","<td><label for=\"{id}-roompw\" class=\"disabled\">Password:</label></td>","<td><input type=\"password\" id=\"{id}-roompw\" disabled=\"disabled\" /></td></tr>","<td><label for=\"{id}-roomconfirm\" class=\"disabled\">Confirm Password:</label></td>","<td><input type=\"password\" id=\"{id}-roomconfirm\" disabled=\"disabled\" /></td></tr>","</table></div>","<p align=\"center\"><input type=\"button\" class=\"btn\" id=\"{id}-createroom\" value=\"Create\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-cancel\" value=\"Cancel\" /></p>","</div>"].join("")),mucinvitemenu:new YAHOO.ext.DomHelper.Template("<div id=\"{jid}-container\" class=\"jive-invite-menu\">"+"<input id=\"{jid}-autocomp\" type=\"text\">"+"<div id=\"{jid}-autocomp-menu\"></div>"+"</div>"),mucpassword:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\">","<p align=\"center\">Enter password:</p>","<p align=\"center\"><input type=\"password\" class=\"btn\" id=\"{id}-passwd\" value=\"\" /></p>","<p align=\"center\"><input type=\"button\" class=\"btn\" id=\"{id}-sendsecret\" value=\"Join\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-cancel\" value=\"Cancel\" /></p>","</div>"].join("")),muctab:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-layout\" class=\"ylayout-inactive-content ydlg-tab\">"+"<div id=\"{tabId}-controls\" class=\"jive-muc-ctrl\"></div>"+"<div id=\"{tabId}-history\" class=\"jive-history\"></div>"+"<div id=\"{tabId}-sidebarlayout\" class=\"ylayout-inactive-content ydlg-tab\">"+"<div id=\"{tabId}-sidebar-header\" class=\"jive-muc-sidebar-header\"></div>"+"<div id=\"{tabId}-occupants\" class=\"jive-muc-occupants\"></div>"+"<div id=\"{tabId}-userstatus\" class=\"jive-muc-status\"></div>"+"</div>"+"<textarea id=\"{tabId}-text\" class=\"jive-tab-message\"></textarea>"+"</div>"),remove_group:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\">","<p align=\"center\">Are you sure you want to remove '{name}'?</p>","<p align=\"center\"><input type=\"button\" class=\"btn\" id=\"{id}-remove\" value=\"Yes\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-cancel\" value=\"No\" /></p>","</div>"].join("")),rename:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\">","<div style=\"text-align: center; padding: 8px;\">Rename to: ","<input type=\"text\" id=\"{id}-name\" value=\"\" /></div>","<div style=\"text-align: center;\">","<input type=\"button\" class=\"btn\" id=\"{id}-rename\" value=\"OK\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-close\" value=\"Cancel\" />","</div>","</div>"].join("")),roster:new YAHOO.ext.DomHelper.Template("<ul id=\"{rosterId}\" class=\"jive-roster\">{groups}</ul>"),roster_group:new YAHOO.ext.DomHelper.Template("<li id=\"group-{id}\" class=\"group\">"+"<span id=\"group-label-{id}\" class=\"group-label {online} {renderClosed}\"><em>{groupName}</em></span>"+"<ul id=\"group-list-{id}\" class=\"group-list\">{users}</ul>"+"</li>"),rostertab:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-layout\" class=\"ylayout-inactive-content\">"+"<div id=\"{tabId}-user\" class=\"jive-controlpanel\"></div>"+"<div id=\"{tabId}-resources\"></div>"+"</div>"),spinnertab:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-spinner\" class=\"ylayout-inactive-content ydlg-tab jive-spinnertab\">"+"<div id=\"jive-spinner\"><img src=\"resources/images/progress.gif\" alt=\"\" />{text}</div>"+"</div>"),start_chat:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\" style=\"text-align: center;\">","<p>Enter an address:</p>","<p><input type=\"text\" id=\"{id}-jid\" /></p>","<p style=\"margin-top: 4px;\"><input type=\"button\" class=\"btn\" id=\"{id}-startbtn\" value=\"Start Chat\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-cancel\" value=\"Cancel\" /></p>","</div>"].join("")),statusMessage:new YAHOO.ext.DomHelper.Template("<div class=\"status-message\">{message}</div>"),status_panel:new YAHOO.ext.DomHelper.Template("<div class=\"jive-userstatus\">"+"<p class=\"avatar\"><img id=\"{bodyId}-avatar\" src=\"../images/sparkweb-avatar.png\" height=\"48\" width=\"48\" alt=\"\" /></p>"+"<h4>{username}</h4>"+"<p id=\"{bodyId}-status\" class=\"jive-mystatus\">"+"<a href=\"#\" id=\"{bodyId}-statusmenu-ctrl\" class=\"roster-contact-{statusName}\"><span>{status}</span></a></p>"+"</div>"),sub_request:new YAHOO.ext.DomHelper.Template(["<div class=\"dhead\">{nick} ({jid}) wants to add you as a contact.</div>","<div class=\"dbody fieldset\">","<p class=\"legend\"><span><input type=\"checkbox\" id=\"{id}-add\" checked=\"checked\" />"," Add user to your contacts too</span></p>","<table width=\"100%\" cellpadding=\"2\" cellspacing=\"0\" border=\"0\">","<tr><td width=\"35%\">","<label for=\"addusername\">Username:</label>","</td><td id=\"{id}-jid\" width=\"65%\">{jid}</td></tr>","<tr><td><label for=\"{id}-nick\">Nickname:</label>","</td><td><input type=\"text\" id=\"{id}-nick\" value=\"{nick}\" /></td></tr>","<tr><td><label for=\"{id}-subrequest-group\">Group:</label></td><td>","<input type=\"text\" id=\"{id}-subrequest-group\" value=\"\" />","</td></tr></table></div>","<p align=\"center\">","<input type=\"button\" class=\"btn subrequest\" id=\"{id}-acceptsubrequest\" value=\"Allow\" />","<input type=\"button\" class=\"btn subrequest\" id=\"{id}-denysubrequest\" value=\"Deny\" />","</p>"].join("")),tab:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-layout\" class=\"ylayout-inactive-content ydlg-tab\">"+"<div id=\"{tabId}-toppane\" class=\"ydlg-bd jive-toppane\"></div>"+"<div id=\"{tabId}-history\" class=\"jive-history\"></div>"+"<textarea id=\"{tabId}-text\" class=\"jive-tab-message\"></textarea>"+"</div>"),userpane:new YAHOO.ext.DomHelper.Template("<span id=\"{id}-message\">{message}</span>"),userpane_loggedin:new YAHOO.ext.DomHelper.Template("<input type=\"text\" id=\"{id}-uname\" value=\"{uname}\"></input>"),userpane_changebtn:new YAHOO.ext.DomHelper.Template("<a id=\"{id}-changenickbtn\" href=\"javascript:void(0);\">Change Nickname</a>"),userstatus:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-layout\" class=\"ylayout-inactive-content ydlg-tab\">"+"<div id=\"{tabId}-toppane\" class=\"ydlg-bd jive-toppane\"></div>"+"<div id=\"{tabId}-history\" class=\"jive-history\"></div>"+"<textarea id=\"{tabId}-text\" class=\"jive-tab-message\"></textarea>"+"</div>")};YAHOO.ext.grid.SpankJSONDataModel=function(_13fd){YAHOO.ext.grid.SpankJSONDataModel.superclass.constructor.call(this,YAHOO.ext.grid.LoadableDataModel.JSON);this.schema=_13fd;};YAHOO.extendX(YAHOO.ext.grid.SpankJSONDataModel,YAHOO.ext.grid.LoadableDataModel,{loadData:function(data,_13ff,_1400){var _1401=this.schema.id;var _1402=this.schema.fields;try{if(this.schema.totalProperty){var v=parseInt(eval("data."+this.schema.totalProperty),10);if(!isNaN(v)){this.totalCount=v;}}var _1404=[];if(this.schema.root){var root=eval("data."+this.schema.root);}else{var root=data;}for(var i in root){var node=root[i];var _1409=[];_1409.node=node;_1409.id=(typeof node[_1401]!="undefined"&&node[_1401]!==""?node[_1401]:String(i));for(var j=0;j<_1402.length;j++){var val=node[_1402[j]];if(typeof val=="undefined"){val="";}if(this.preprocessors[j]){val=this.preprocessors[j](val);}_1409.push(val);}_1404.push(_1409);}if(_1400!==true){this.removeAll();}this.addRows(_1404);if(typeof _13ff=="function"){_13ff(this,true);}this.fireLoadEvent();}catch(e){this.fireLoadException(e,null);if(typeof _13ff=="function"){_13ff(this,false);}}},getRowId:function(_140c){return this.data[_140c].id;}});YAHOO.ext.Element.prototype.getParentByClass=function(_140d,_140e){if(_140e){_140e=_140e.toLowerCase();}function isMatch(el){if(!el){return false;}if(_140d&&!YAHOO.util.Dom.hasClass(el,_140d)){return false;}return !(_140e&&el.tagName.toLowerCase()!=_140e);}var t=this.dom;if(!t||isMatch(t)){return t;}var p=t.parentNode;var b=document.body;while(p&&p!=b){if(isMatch(p)){return p;}p=p.parentNode;}return null;};YAHOO.ext.Element.prototype.setSelectable=function(which){this.dom.unselectable=which?"off":"on";if(!which){this.applyStyles("-moz-user-select:none;-khtml-user-select:none;");}else{this.applyStyles("-moz-user-select:normal;-khtml-user-select:auto;");}return this;};org.jive.spank.control={doConnect:function(_1414,_1415,_1416){var _1417=getEl("connect");_1417.dom.disabled=true;_1417.hide();jive.spank.Spinner.show({x:_1417.getX()-10,y:_1417.getY()});window.connection=new XMPPConnection("/http-bind/",_1416,new org.jive.spank.control.ConnectionListener(_1414,_1415));connection.connect();},doLogout:function(){var _1418=new XMPP.Presence();_1418.setType("unavailable");connection.logout(_1418);},onUnload:function(event){if(typeof window.rosterWindow=="undefined"){return;}var _141a=confirm("Leaving this page will disconnect you from Sparkweb, are you sure?");if(_141a){org.jive.spank.control.doLogout();}else{event.stopEvent();}},doRegistration:function(){window.accountDialog=new jive.spank.dialog.CreateAccount(doRegistrationValidation);},doRegistrationValidation:function(_141b){},windows:{}};org.jive.spank.control.ConnectionListener=function(_141c,_141d){this.usernameField=_141c;this.passwordField=_141d;};org.jive.spank.control.ConnectionListener.prototype={connectionSuccessful:function(_141e){window.chatManager=new org.jive.spank.chat.Manager(_141e);window.chatSessionListener=new org.jive.spank.chat.ChatSessionListener(chatSessionCreated,chatSessionClosed);chatManager.addChatSessionListener(chatSessionListener);window.muc=new org.jive.spank.muc.Manager(_141e,chatManager);console.debug("Connection successfully established.");var _141f=$F(this.usernameField);var _1420=$F(this.passwordField);_141e.login(_141f,_1420,null);},connectionFailed:function(){this.authenticationFailed();},connectionClosed:function(_1421,error){destroyAllChatWindows();if(window.rosterWindow){window.rosterWindow.destroy();window.rosterWindow=undefined;}window.presenceManager=undefined;window.rosterManager=undefined;window.conferenceServers=undefined;window.mucControl=undefined;window.connection=undefined;window.chatManager=undefined;window.contactMonitor=undefined;window.mucManager=undefined;window.muc=undefined;$("jive-loginBox").style.visibility="";$("jive-webTop").style.display="";$("loginText").innerHTML="";var _1423=getEl("connect");_1423.dom.disabled=false;_1423.show();$(this.usernameField).value="";$(this.passwordField).value="";if(error){alert("Your connection to the server has closed.");}jive.spank.Spinner.hide();},authenticationSuccessful:function(_1424){$("loginText").innerHTML="Login successful!";window.contactMonitor=new org.jive.spank.control.ContactMonitor();window.presenceManager=new org.jive.spank.presence.Manager(_1424,null,"manual");window.presenceManager.addPresenceListener(contactMonitor.handlePresence.bind(contactMonitor));window.rosterManager=new org.jive.spank.roster.Manager(_1424,doRoster,presenceManager);window.mucManager=new org.jive.spank.control.MucManager(muc);window.conferenceServers=new Array();muc.getConferenceServers(function(_1425){window.mucControl.enable();conferenceServers.push(_1425);});org.jive.spank.x.chatstate.getManager(chatManager).addStateListener(contactMonitor.handleState.bind(contactMonitor));},authenticationFailed:function(_1426,error){$("loginText").innerHTML="Login failure. :(";var _1428=getEl("connect");_1428.dom.disabled=false;_1428.show();delete connection;jive.spank.Spinner.hide();},packetsReceived:function(){if(typeof window.rosterWindow!="undefined"){rosterWindow.beginUpdate();}},packetsProcessed:function(){if(typeof window.rosterWindow!="undefined"){rosterWindow.endUpdate();}}};org.jive.spank.control.ContactMonitor=function(){};org.jive.spank.control.ContactMonitor.prototype={handlePresence:function(_1429){var _142a;if(_1429.getType()=="subscribe"){this.handleSubscription(_1429.getFrom());return;}else{_142a=this.getMode(_1429);}var jid=_1429.getFrom().toBareJID();var _142c=rosterWindow.getContactStatus(jid);if(_142c&&_142c=="composing"){return;}rosterWindow.changeContactStatus(jid,_142a.mode,_142a.status);},handleState:function(jid,state,isMUC){var _1430=chatManager.getSession(jid);var _1431;if(_1430){_1431=_1430.getJIDString();}else{if(isMUC){_1431=jid.toString();}else{_1431=jid.toBareJID();}}var _1432=getContact(_1431);if(!_1432||!_1432.changeStatus){return;}if(state=="composing"){_1432.changeStatus(state);}else{var _1433=this.getMode(getContactPresence(jid));_1432.changeStatus(_1433.mode,_1433.status);}},handleAddContact:function(_1434,jid,nick,group){rosterManager.addEntry(new XMPP.JID(jid),nick,new Array(group));},handleRemoveContact:function(_1438,jid){rosterManager.removeEntry(new XMPP.JID(jid));},onAdded:function(_143a){for(var i=0;i<_143a.length;i++){var _143c=_143a[i];this.addContact(_143c);}},addContact:function(_143d){var _143e=_143d.getGroups();var jid=_143d.getJID().toString();var _1440=presenceManager.getPresence(_143d.getJID());var _1441;if(_1440){_1441=this.getMode(_1440).mode;}else{_1441="pending";}var _1442={getJID:function(){return jid;},getName:function(){return (_143d.getName()?_143d.getName():_143d.getJID().toString());},status:_1441};rosterWindow.addContact(_1442,(_143e[0]?_143e[0]:"Unfiled"));},onUpdated:function(_1443){for(var i=0;i<_1443.length;i++){var _1445=_1443[i];rosterWindow.removeContact(_1445.getJID().toString());this.addContact(_1445);}},onRemoved:function(_1446){for(var i=0;i<_1446.length;i++){var _1448=_1446[i];rosterWindow.removeContact(_1448.getJID().toString());}},getMode:function(_1449){var mode;var _144b;if(!_1449){return {mode:"unavailable",status:null};}switch(_1449.getType()){case "available":mode=_1449.getMode();if(!mode){mode="available";}_144b=_1449.getStatus();break;default:mode="unavailable";break;}return {mode:mode,status:_144b};},handleSubscription:function(from){if(!rosterManager._users[from.toBareJID()]){rosterWindow.showSubscriptionRequest(from.toString(),from.getNode());}else{this.handleAcceptSubscription(null,false,from.toBareJID());}},handleAcceptSubscription:function(_144d,_144e,jid,nick,group){var _1452=new XMPP.Presence(new XMPP.JID(jid));_1452.setType("subscribed");connection.sendPacket(_1452);if(_144e){this.handleAddContact(_144d,jid,nick,group);}},handleDenySubscription:function(_1453,_1454,jid,nick,group){var _1458=new XMPP.Presence(new XMPP.JID(jid));_1458.setType("unsubscribed");connection.sendPacket(_1458);}};org.jive.spank.control.MucManager=function(muc){this.muc=muc;this.muc.addInvitationsListener(this.handleInvitation.bind(this));};org.jive.spank.control.MucManager.prototype={handleInvitation:function(_145a){var jid=new XMPP.JID(_145a["from"]);var _145c=chatManager.getSession(jid);if(!_145c){_145c=chatManager.createSession(jid);}var _145d=getContact(_145c.getJIDString());var _145e=new jive.spank.chat.CustomMessage("mucinvitation",{contactJID:jid,name:_145d.name,chatname:_145a["room"],jid:""});_145e.addListener("accepted",this.handleInvitationAccept.bind(this));_145e.addListener("declined",this.handleInvitationDecline.bind(this));addMessage(_145d.jid,_145d.name,_145e);},handleInvitationAccept:function(_145f,_1460){joinMUC(_145f,_1460.chatname.toString(),new XMPP.JID(_1460.chatname.toString()).getNode());},handleInvitationDecline:function(_1461,_1462){this.muc.declineInvitation(_1462.contactJID,_1462.chatname);},handleNameChange:function(_1463,_1464,_1465){var room=this.muc.getRoom(new XMPP.JID(_1464));room.changeNickname(_1465);}};var rosterWindow;function doRoster(_1467){rosterWindow=spank.loadComponent("roster");rosterWindow.addTab("Contacts");rosterWindow.setRoster(_1467.getRoster());rosterWindow.roster.addListener("contactdblclicked",doOpenContact);rosterWindow.setUserInfo(connection.username,"Available");doEmoticons();rosterWindow.addControl("addcontact",{events:{click:function(){rosterWindow.showAddContact(rosterWindow);}},imgSrc:"resources/images/addcontact_16x16.png",tooltip:"Add Contact"});window.mucControl=rosterWindow.addControl("muc",{events:{click:handleMUCChooser},imgSrc:"resources/images/conference_16x16.png",tooltip:"Conferences"});window.mucControl.disable();rosterWindow.addControl("startchat",{events:{click:org.jive.spank.control.actions.StartChat},imgSrc:"resources/images/chat_16x16.gif",tooltip:"Start Chat"});rosterWindow.addListener("changestatus",function(_1468,mode,_146a){var _146b=new XMPP.Presence();_146b.setMode(mode);_146b.setStatus(_146a);presenceManager.sendPresence(_146b);_1468.changeUserStatus(mode,_146a);});rosterWindow.addListener("addcontact",contactMonitor.handleAddContact.bind(contactMonitor));rosterWindow.addListener("acceptsubscription",contactMonitor.handleAcceptSubscription.bind(contactMonitor));rosterWindow.addListener("denysubscription",contactMonitor.handleDenySubscription.bind(contactMonitor));rosterWindow.addListener("removecontact",contactMonitor.handleRemoveContact.bind(contactMonitor));rosterWindow.addListener("close",org.jive.spank.control.doLogout);rosterWindow.show();$("jive-loginBox").style.visibility="hidden";$("jive-webTop").style.display="block";rosterManager.addRosterListener(contactMonitor);jive.spank.Spinner.hide();}org.jive.spank.control.actions={StartChat:function(){jive.spank.dialog.StartChat(doOpenContact);},createConferenceWindow:function(_146c){var _146d=new jive.spank.dialog.CreateConference(_146c);_146d.show();_146d.focus();_146d.addListener("muccreated",org.jive.spank.control.actions.createConference.createCallback(_146d));},createConference:function(_146e){var _146f=_146e.getValues();var _1470={};if(_146f.isPrivate){_1470["muc#roomconfig_passwordprotectedroom"]="true";_1470["muc#roomconfig_roomsecret"]=_146f.password;}_1470["muc#roomconfig_roomname"]=_146f.name;if(_146f.isPermanent){_1470["muc#roomconfig_persistentroom"]="true";}if(_146f.topic&&_146f.topic!=""){_1470["muc#roomconfig_roomdesc"]=_146f.topic;}var _1471=new XMPP.JID(_146f.name+"@"+conferenceServers[0].toString());var name=_146f.name;var room=muc.createRoom(_1471);var _1474={onSuccess:function(){var tab=getChatWindow("chattest").addMUC({jid:_1471,name:name},null,rosterWindow);var _1476=room.getOccupants();for(var i=0;i<_1476.length;i++){mucOccupantHandler(_1476[i]);}tab.roster.addListener("contactdblclicked",doOpenContact);}};var nick=connection.username;room.create(nick,_1470,_1474,mucMessageHandler,mucOccupantHandler);_146e.hide();}};function getChatWindow(id){var _147a;if(org.jive.spank.control.windows[id]){_147a=jive.spank.chat.ChatWindow.getWindow(org.jive.spank.control.windows[id]);}if(!_147a){_147a=jive.spank.chat.ChatWindow.createWindow();org.jive.spank.control.windows[id]=_147a.id;initializeChatWindow(_147a);}if(!_147a.isVisible()){_147a.show();}return _147a;}function destroyAllChatWindows(){for(var id in org.jive.spank.control.windows){jive.spank.chat.ChatWindow.destroyWindow(org.jive.spank.control.windows[id]);}delete org.jive.spank.control.windows;org.jive.spank.control.windows={};if(typeof inputMonitor!="undefined"){inputMonitor.destroy();delete inputMonitor;}}function initializeChatWindow(_147c){_147c.addListener("message",handleMessage);_147c.addListener("mucdblclicked",joinMUC);_147c.addListener("tabclosed",handleTabClosed);_147c.addListener("mucinvitation",handleMUCInvite);_147c.addListener("changenameinmuc",mucManager.handleNameChange.bind(mucManager));_147c.addListener("createmuc",org.jive.spank.control.actions.createConferenceWindow);if(window.inputMonitor){window.inputMonitor.destroy();}window.inputMonitor=new org.jive.spank.control.InputMonitor();inputMonitor.init();_147c.addListener("input",inputMonitor.handleUserInput.bind(inputMonitor));}function doOpenContact(_147d,_147e){var jid;if(!(_147e.jid instanceof XMPP.JID)){jid=new XMPP.JID(_147e.jid);}else{jid=_147e.jid;}var _1480=chatManager.getSession(jid);if(!_1480){_1480=chatManager.createSession(jid);}_147e.jid=_1480.getJIDString();var _1481=getChatWindow("chattest");_1481.getContactTab(_147e,true);}function chatSessionCreated(_1482,_1483){console.debug("Chat session created.");_1483.addListener(chatListener);var _1484=getContact(_1483.getJIDString());var _1485=getChatWindow("chattest");_1485.getContactTab(_1484);org.jive.spank.x.chatstate.getManager(chatManager).setCurrentState("active",_1483.getJID());}function getContact(jid){var bare=new XMPP.JID(jid).getBareJID();var _1488;if(muc.getRoom(bare)){var _1489=getChatWindow("chattest").tabs[bare].roster;_1488=_1489.findContact(jid);}else{_1488=jive.spank.roster.Contact.find(rosterWindow.roster,jid);}if(!_1488){jid=new XMPP.JID(jid);_1488={jid:jid.toString(),name:jid.getNode(),status:"unavailable"};}return _1488;}function getContactPresence(jid){var room=muc.getRoom(jid.getBareJID());var _148c;if(room){_148c=room.presenceManager;}else{_148c=presenceManager;}return _148c.getPresence(jid);}function handleMessage(jid,_148e){jid=new XMPP.JID(jid);var type=getChatWindow("chattest").tabs[jid.toString()].type;var _1490;if(type=="chat"){var _1491=chatManager.getSession(jid);if(!_1491){_1491=chatManager.createSession(jid);}var _1492=org.jive.spank.x.chatstate.getManager(chatManager).setCurrentState("active",_1491.getJID());_1491.sendMessage(_148e,_1492);_1490=connection.username;}else{if(type=="muc-room"){var room=muc.getRoom(jid);var _1494=org.jive.spank.x.chatstate.getManager(chatManager).setCurrentState("active",jid);room.sendMessage(_148e,_1494);_1490=room.nickname;}}addMessage(jid,_1490,_148e,true);}org.jive.spank.control.InputMonitor=function(){this.composingTimeout=3000;this.inputState={};};org.jive.spank.control.InputMonitor.prototype={init:function(){this.inputMonitor=new PeriodicalExecuter(this.monitorFunction.bind(this),2);},monitorFunction:function(){var time=new Date().getTime();for(var _1496 in this.inputState){var input=this.inputState[_1496];if(input.state=="composing"&&(time-input.lastInput)>=this.composingTimeout){delete this.inputState[_1496];this.updateState(_1496,"active");}}},handleUserInput:function(jid){if(this.inputState[jid]&&this.inputState[jid].state=="composing"){this.inputState[jid].lastInput=new Date().getTime();return;}if(!this.inputState[jid]){this.inputState[jid]={};}this.inputState[jid].state="composing";this.inputState[jid].lastInput=new Date().getTime();this.updateState(jid,"composing");},updateState:function(jid,_149a){console.debug("%s sent to %s",_149a,jid);jid=new XMPP.JID(jid);var _149b=chatManager.getSession(jid);var room;if(_149b){jid=_149b.getJID();}else{room=muc.getRoom(jid);}var _149d=org.jive.spank.x.chatstate.getManager(chatManager).setCurrentState(_149a,jid,null,room!=null);if(_149d){connection.sendPacket(_149d);}},destroy:function(){this.inputMonitor.stop();this.inputState={};}};function addMessage(jid,name,msg,_14a1,time){getChatWindow("chattest").getContactTab({jid:jid,name:name});var _14a3=msg;if(typeof msg=="string"){_14a3={body:msg,isLocal:_14a1,time:time};}getChatWindow("chattest").addMessage(jid,name,_14a3);}function handleMUCChooser(){var _14a4=muc;getChatWindow("chattest").preAddMUCChooser();_14a4.retrieveRooms(conferenceServers[0],function(_14a5){_14a4.retrieveRoomsInfo(_14a5,roomInfo);});}function roomInfo(_14a6){getChatWindow("chattest").addChooseMUCTab(_14a6);}function joinMUC(_14a7,_14a8,name,_14aa,_14ab,_14ac){var _14ad=new XMPP.JID(_14a8);if(muc.getRoom(_14ad)&&muc.getRoom(_14ad).isJoined){getChatWindow("chattest").getTabByJID(_14a8).activate();return;}if(!_14ac){_14a7.preAddMUC({name:name,jid:_14a8},_14aa);}var room=muc.createRoom(_14ad);if(!name){name=_14ad.getNode();}var _14af={onSuccess:function(){var tab=getChatWindow("chattest").addMUC({jid:_14a8,name:name},_14aa,rosterWindow);var _14b1=room.getOccupants();for(var i=0;i<_14b1.length;i++){mucOccupantHandler(_14b1[i]);}tab.roster.addListener("contactdblclicked",doOpenContact);},onError:function(_14b3){if(_14b3.getError()=="401"){getChatWindow("chattest").showMUCPassword({jid:_14a8,name:name},null,function(_14b4){if(!_14b4){getChatWindow("chattest").removeMUCSpinner(_14a8);}else{joinMUC(_14a7,_14a8,name,_14aa,_14b4,true);}});return;}_14a7.removeMUCSpinner(_14a8);}};var nick=connection.username;room.join(nick,_14ab,_14af,mucMessageHandler,mucOccupantHandler);}var mucMessageHandler={messageReceived:function(_14b6){var from=_14b6.getFrom();var room=from.toBareJID();var nick=from.getResource();var body=_14b6.getBody();var _14bb=connection.username==nick;var time=_14b6.getExtension("x","jabber:x:delay");if((time||!_14bb)&&body){if(time){time=new XMPP.DelayInformation(time).getDate().toLocaleTimeString();}if(nick){addMessage(room,nick,body.body,_14bb,time);}else{getChatWindow("chattest").addStatusMessage(room,body.body);}}},invitationDeclined:function(_14bd){var jid=_14bd.from;var _14bf=getContact(jid);var name=jid;if(_14bf){name=_14bf.name;}getChatWindow("chattest").addStatusMessage(_14bd.room.toString(),name+" has declined the invitation to join the room.");},subjectUpdated:function(room,_14c2,_14c3){getChatWindow("chattest").setSubject(_14c3,room.jid.toString());}};function mucOccupantHandler(_14c4){var room=_14c4.getRoom();var _14c6=muc.getRoom(new XMPP.JID(room));if(!_14c6||!_14c6.isJoined){return;}var jid=_14c4.presence.getFrom();var tab=getChatWindow("chattest").tabs[room];if(!tab){return;}var _14c9=tab.participants;if(!_14c9){return;}var _14ca=_14c9.getContactByJID(jid.toString());var mode;var _14cc;switch(_14c4.presence.getType()){case "available":mode=_14c4.presence.getMode();if(!mode){mode="available";}_14cc=_14c4.presence.getStatus();break;default:mode="unavailable";break;}if(!_14ca&&mode!="unavailable"){_14ca=_14c9.addContact({jid:jid,getJID:function(){return this.jid.toString();},status:mode,getName:function(){return _14c4.getNick();}});getChatWindow("chattest").addStatusMessage(room,_14c4.getNick()+" has joined the room.");}else{if(_14ca&&mode=="unavailable"){_14ca.changeStatus(mode);_14c9.removeContact(jid.toString());getChatWindow("chattest").addStatusMessage(room,_14c4.getNick()+" has left the room.");}else{if(_14ca){_14ca.changeStatus(mode);}}}}function handleTabClosed(_14cd,tab){switch(tab.type){case "muc-room":muc.getRoom(_14cd.jid).leave();break;case "chat":var _14cf=chatManager.getSession(new XMPP.JID(_14cd.jid.toString()));if(_14cf){chatManager.closeChatSession(_14cf);}break;}}function handleMUCInvite(_14d0,_14d1,_14d2){muc.getRoom(_14d2).invite(new XMPP.JID(_14d1));var _14d3=getContact(_14d1);var _14d4=_14d3.name+" has been invited to join the room.";_14d0.addStatusMessage(_14d2,_14d4);}function chatSessionClosed(_14d5,_14d6){console.debug("Chat session closed.");}var chatListener={messageRecieved:function(_14d7,_14d8){if(!_14d8.getBody()||_14d8.getBody().body==""){return;}var name=getChatWindow("chattest").tabs[_14d7.getJIDString()].contact.name;addMessage(_14d7.getJIDString(),name,_14d8.getBody().body);}};function doEmoticons(){var _14da=[["angry",/&gt;:o|&gt;:-o|&gt;:O|&gt;:-O/g],["confused",/\?:\|/g],["cool",/B-\)|8-\)/g],["cry",/:\'\(/g],["devil",/\]:\)/g],["grin",/:-D|:D/g],["happy",/:-\)|:\)/g],["laugh",/:\^0/g],["love",/:x/g],["mischief",/;\\/g],["sad",/:-\(|:\(/g],["silly",/:-p|:-P|:P|:p/g],["wink",/;-\)|;\)/g]];_14da.each(function(_14db){jive.spank.chat.Filter.add(_14db[0],_14db[1],"<img src=\"resources/images/emoticons/"+_14db[0]+".gif\" alt=\"\" />");});jive.spank.chat.Filter.add("uri",/\b(\w+?:\/\/[^\s+\"\<\>]+)/ig,"<a href=\"$1\" target=\"_blank\">$1</a>");jive.spank.chat.Filter.add("webaddress",/(\s|^)(www\.[^\s+\"\<\>]+)/ig,"<a href=\"http://$2\" target=\"_blank\">$2</a>");}jive_groupchat_config_defaults={width:575,height:450,x:15,y:15,constrained:"false",draggable:"false",resizable:"true",closable:"true",bottomPane:"false"};function jive_configureGroupChat(){if(!window.jive_groupchat_config){window.jive_groupchat_config={};}for(var key in jive_groupchat_config_defaults){if(!jive_groupchat_config[key]){jive_groupchat_config[key]=jive_groupchat_config_defaults[key];}}}jive_configureGroupChat();MessageHandler={subjectUpdated:function(room,_14de,_14df){window.controller.chatWindow.setSubject(_14df,room.jid.toString());},messageReceived:function(_14e0){var from=_14e0.getFrom();var room=from.toBareJID();var nick=from.getResource();var _14e4=_14e0.getBody();var local=window.controller.nickname.toLowerCase()==nick;var t=_14e0.getExtension("x","jabber:x:delay");if((t||!local)&&_14e4){if(t){t=new XMPP.DelayInformation(t).getDate().toLocaleTimeString();}window.controller.chatWindow.addMessage(room,nick,_14e4,local,t);}}};controller={chatWindow:null,conf:null,connection:null,connectionSuccessful:function(conn){this.connection=conn;conn.login();window.onbeforeunload=conn.disconnect;},connectionFailed:function(_14e8,error){alert("Error: "+error);},authenticationSuccessful:function(conn){this.chatWindow=new jive.spank.chat.ChatWindow("groupchat",jive_groupchat_config);this.chatManager=new org.jive.spank.chat.Manager(conn,"igniterealtime.org",false);this.mucManager=new org.jive.spank.muc.Manager(conn,this.chatManager);this.joinChat();},joinChat:function(){this.conf=this.mucManager.createRoom(new XMPP.JID("test@conference.igniterealtime.org"));this.nickname="User"+Math.floor(Math.random()*500);this.conf.join(this.nickname,"",this,MessageHandler,this.occupantListener);},authenticationFailed:function(_14eb,error){alert("Authentication failed: "+error);},connectionClosed:function(_14ed,error){},occupantListener:function(_14ef){var room=_14ef.getRoom();var _14f1=window.controller.mucManager.getRoom(new XMPP.JID(room));if(!_14f1||!_14f1.isJoined){return;}var jid=_14ef.presence.getFrom();var tab=window.controller.chatWindow.tabs[room];if(!tab){return;}var _14f4=tab.participants;if(!_14f4){return;}var _14f5=_14f4.getContactByJID(jid.toString());var mode;var _14f7;switch(_14ef.presence.getType()){case "available":mode=_14ef.presence.getMode();if(!mode){mode="available";}_14f7=_14ef.presence.getStatus();break;default:mode="unavailable";break;}if(!_14f5&&mode!="unavailable"){_14f5=_14f4.addContact({jid:jid,getJID:function(){return this.jid.toString();},status:mode,getName:function(){return _14ef.getNick();}});window.controller.chatWindow.addStatusMessage(room,_14ef.getNick()+" has joined the room.");}else{if(_14f5&&mode=="unavailable"){_14f5.changeStatus(mode);_14f4.removeContact(jid.toString());window.controller.chatWindow.addStatusMessage(room,_14ef.getNick()+" has left the room.");}else{if(_14f5){_14f5.changeStatus(mode);}}}},sendMessage:function(_14f8,value){this.completionState={index:0,completed:null,original:null};var jid=new XMPP.JID(this.nickname);this.conf.sendMessage(value,org.jive.spank.x.chatstate.getManager(this.chatManager).setCurrentState("active",jid));this.chatWindow.addMessage(window.controller.conf.jid,this.nickname,{body:value,isLocal:true},true);},completionState:{index:0,completed:null,original:null},completeNick:function(jid,_14fc,_14fd){jid=new XMPP.JID(jid);var room=this.mucManager.getRoom(jid);var _14ff=room.getOccupants();var nick;var state=this.completionState;var _1502=0;if(state.original==null||state.completed!=_14fc){state.original=_14fc;}for(var i=state.index;i<_14ff.length&&_1502<_14ff.length;i++){_1502++;state.index=i+1;nick=_14ff[i].getNick();if(state.index>=_14ff.length){state.index=0;i=0;}if(nick.indexOf(state.original)==0&&state.original.length<nick.length){state.completed=nick;_14fd.dom.value=nick;_14fd.dom.selectionStart=state.original.length;_14fd.dom.selectionEnd=_14fd.dom.value.length;return;}}},handleNameChange:function(_1504,_1505,_1506){this.nickname=_1506;this.conf.changeNickname(_1506);},onSuccess:function(_1507){var _1508=window.controller.chatWindow;var room=window.controller.conf;_1508.addMUC({name:room.nickname,jid:room.jid});var _150a=room.getOccupants();for(var i=0;i<_150a.length;i++){window.controller.occupantListener(_150a[i]);}_1508.prepUserPane();_1508.show();_1508.finalizeUserPane(this.nickname);_1508.setSubject("");getEl(_1508.tabId+"-layout").dom.parentNode.style.position="absolute";_1508.addListener("message",this.sendMessage.bind(this));_1508.addListener("nickcomplete",this.completeNick.bind(this));_1508.addListener("changenameinmuc",this.handleNameChange.bind(this));_1508.dialog.addListener("beforeshow",this.joinChat,window.controller,true);_1508.dialog.addListener("beforehide",this.conf.leave.bind(this.conf));}};var toggleTheme=function(){getEl(document.body,true).toggleClass("jivetheme-muc");};YAHOO.ext.EventManager.onDocumentReady(function(){window.connection=new XMPPConnection("/http-bind/","igniterealtime.org",controller);connection.connect();toggleTheme();});