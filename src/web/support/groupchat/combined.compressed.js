function Sarissa(){}Sarissa.PARSED_OK="Document contains no parsing errors";Sarissa.PARSED_EMPTY="Document is empty";Sarissa.PARSED_UNKNOWN_ERROR="Not well-formed or other error";var _sarissa_iNsCounter=0;var _SARISSA_IEPREFIX4XSLPARAM="";var _SARISSA_HAS_DOM_IMPLEMENTATION=document.implementation&&true;var _SARISSA_HAS_DOM_CREATE_DOCUMENT=_SARISSA_HAS_DOM_IMPLEMENTATION&&document.implementation.createDocument;var _SARISSA_HAS_DOM_FEATURE=_SARISSA_HAS_DOM_IMPLEMENTATION&&document.implementation.hasFeature;var _SARISSA_IS_MOZ=_SARISSA_HAS_DOM_CREATE_DOCUMENT&&_SARISSA_HAS_DOM_FEATURE;var _SARISSA_IS_SAFARI=(navigator.userAgent&&navigator.vendor&&(navigator.userAgent.toLowerCase().indexOf("applewebkit")!=-1||navigator.vendor.indexOf("Apple")!=-1));var _SARISSA_IS_IE=document.all&&window.ActiveXObject&&navigator.userAgent.toLowerCase().indexOf("msie")>-1&&navigator.userAgent.toLowerCase().indexOf("opera")==-1;if(!window.Node||!Node.ELEMENT_NODE){Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};}if(typeof XMLDocument=="undefined"&&typeof Document!="undefined"){XMLDocument=Document;}if(_SARISSA_IS_IE){_SARISSA_IEPREFIX4XSLPARAM="xsl:";var _SARISSA_DOM_PROGID="";var _SARISSA_XMLHTTP_PROGID="";var _SARISSA_DOM_XMLWRITER="";Sarissa.pickRecentProgID=function(_1){var _2=false;for(var i=0;i<_1.length&&!_2;i++){try{var _4=new ActiveXObject(_1[i]);o2Store=_1[i];_2=true;}catch(objException){}}if(!_2){throw "Could not retreive a valid progID of Class: "+_1[_1.length-1]+". (original exception: "+e+")";}_1=null;return o2Store;};_SARISSA_DOM_PROGID=null;_SARISSA_THREADEDDOM_PROGID=null;_SARISSA_XSLTEMPLATE_PROGID=null;_SARISSA_XMLHTTP_PROGID=null;if(!window.XMLHttpRequest){XMLHttpRequest=function(){if(!_SARISSA_XMLHTTP_PROGID){_SARISSA_XMLHTTP_PROGID=Sarissa.pickRecentProgID(["Msxml2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"]);}return new ActiveXObject(_SARISSA_XMLHTTP_PROGID);};}Sarissa.getDomDocument=function(_5,_6){if(!_SARISSA_DOM_PROGID){_SARISSA_DOM_PROGID=Sarissa.pickRecentProgID(["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"]);}var _7=new ActiveXObject(_SARISSA_DOM_PROGID);if(_6){var _8="";if(_5){if(_6.indexOf(":")>1){_8=_6.substring(0,_6.indexOf(":"));_6=_6.substring(_6.indexOf(":")+1);}else{_8="a"+(_sarissa_iNsCounter++);}}if(_5){_7.loadXML("<"+_8+":"+_6+" xmlns:"+_8+"=\""+_5+"\""+" />");}else{_7.loadXML("<"+_6+" />");}}return _7;};Sarissa.getParseErrorText=function(_9){var _a=Sarissa.PARSED_OK;if(_9.parseError.errorCode!=0){_a="XML Parsing Error: "+_9.parseError.reason+"\nLocation: "+_9.parseError.url+"\nLine Number "+_9.parseError.line+", Column "+_9.parseError.linepos+":\n"+_9.parseError.srcText+"\n";for(var i=0;i<_9.parseError.linepos;i++){_a+="-";}_a+="^\n";}else{if(_9.documentElement==null){_a=Sarissa.PARSED_EMPTY;}}return _a;};Sarissa.setXpathNamespaces=function(_c,_d){_c.setProperty("SelectionLanguage","XPath");_c.setProperty("SelectionNamespaces",_d);};XSLTProcessor=function(){if(!_SARISSA_XSLTEMPLATE_PROGID){_SARISSA_XSLTEMPLATE_PROGID=Sarissa.pickRecentProgID(["Msxml2.XSLTemplate.6.0","MSXML2.XSLTemplate.3.0"]);}this.template=new ActiveXObject(_SARISSA_XSLTEMPLATE_PROGID);this.processor=null;};XSLTProcessor.prototype.importStylesheet=function(_e){if(!_SARISSA_THREADEDDOM_PROGID){_SARISSA_THREADEDDOM_PROGID=Sarissa.pickRecentProgID(["MSXML2.FreeThreadedDOMDocument.6.0","MSXML2.FreeThreadedDOMDocument.3.0"]);}_e.setProperty("SelectionLanguage","XPath");_e.setProperty("SelectionNamespaces","xmlns:xsl='http://www.w3.org/1999/XSL/Transform'");var _f=new ActiveXObject(_SARISSA_THREADEDDOM_PROGID);if(_e.url&&_e.selectSingleNode("//xsl:*[local-name() = 'import' or local-name() = 'include']")!=null){_f.async=false;if(_SARISSA_THREADEDDOM_PROGID=="MSXML2.FreeThreadedDOMDocument.6.0"){_f.setProperty("AllowDocumentFunction",true);_f.resolveExternals=true;}_f.load(_e.url);}else{_f.loadXML(_e.xml);}_f.setProperty("SelectionNamespaces","xmlns:xsl='http://www.w3.org/1999/XSL/Transform'");var _10=_f.selectSingleNode("//xsl:output");this.outputMethod=_10?_10.getAttribute("method"):"html";this.template.stylesheet=_f;this.processor=this.template.createProcessor();this.paramsSet=new Array();};XSLTProcessor.prototype.transformToDocument=function(_11){if(_SARISSA_THREADEDDOM_PROGID){this.processor.input=_11;var _12=new ActiveXObject(_SARISSA_DOM_PROGID);this.processor.output=_12;this.processor.transform();return _12;}else{if(!_SARISSA_DOM_XMLWRITER){_SARISSA_DOM_XMLWRITER=Sarissa.pickRecentProgID(["Msxml2.MXXMLWriter.6.0","Msxml2.MXXMLWriter.3.0","MSXML2.MXXMLWriter","MSXML.MXXMLWriter","Microsoft.XMLDOM"]);}this.processor.input=_11;var _13=new ActiveXObject(_SARISSA_DOM_XMLWRITER);this.processor.output=_13;this.processor.transform();var _14=new ActiveXObject(_SARISSA_DOM_PROGID);_14.loadXML(_13.output+"");return _14;}};XSLTProcessor.prototype.transformToFragment=function(_15,_16){this.processor.input=_15;this.processor.transform();var s=this.processor.output;var f=_16.createDocumentFragment();if(this.outputMethod=="text"){f.appendChild(_16.createTextNode(s));}else{if(_16.body&&_16.body.innerHTML){var _19=_16.createElement("div");_19.innerHTML=s;while(_19.hasChildNodes()){f.appendChild(_19.firstChild);}}else{var _1a=new ActiveXObject(_SARISSA_DOM_PROGID);if(s.substring(0,5)=="<?xml"){s=s.substring(s.indexOf("?>")+2);}var xml="".concat("<my>",s,"</my>");_1a.loadXML(xml);var _1c=_1a.documentElement;while(_1c.hasChildNodes()){f.appendChild(_1c.firstChild);}}}return f;};XSLTProcessor.prototype.setParameter=function(_1d,_1e,_1f){if(_1d){this.processor.addParameter(_1e,_1f,_1d);}else{this.processor.addParameter(_1e,_1f);}if(!this.paramsSet[""+_1d]){this.paramsSet[""+_1d]=new Array();}this.paramsSet[""+_1d][_1e]=_1f;};XSLTProcessor.prototype.getParameter=function(_20,_21){_20=_20||"";if(this.paramsSet[_20]&&this.paramsSet[_20][_21]){return this.paramsSet[_20][_21];}else{return null;}};XSLTProcessor.prototype.clearParameters=function(){for(var _22 in this.paramsSet){for(var _23 in this.paramsSet[_22]){if(_22){this.processor.addParameter(_23,null,_22);}else{this.processor.addParameter(_23,null);}}}this.paramsSet=new Array();};}else{if(_SARISSA_HAS_DOM_CREATE_DOCUMENT){Sarissa.__handleLoad__=function(_24){Sarissa.__setReadyState__(_24,4);};_sarissa_XMLDocument_onload=function(){Sarissa.__handleLoad__(this);};Sarissa.__setReadyState__=function(_25,_26){_25.readyState=_26;_25.readystate=_26;if(_25.onreadystatechange!=null&&typeof _25.onreadystatechange=="function"){_25.onreadystatechange();}};Sarissa.getDomDocument=function(_27,_28){var _29=document.implementation.createDocument(_27?_27:null,_28?_28:null,null);if(!_29.onreadystatechange){_29.onreadystatechange=null;}if(!_29.readyState){_29.readyState=0;}_29.addEventListener("load",_sarissa_XMLDocument_onload,false);return _29;};if(window.XMLDocument){}else{if(_SARISSA_HAS_DOM_FEATURE&&window.Document&&!Document.prototype.load&&document.implementation.hasFeature("LS","3.0")){Sarissa.getDomDocument=function(_2a,_2b){var _2c=document.implementation.createDocument(_2a?_2a:null,_2b?_2b:null,null);return _2c;};}else{Sarissa.getDomDocument=function(_2d,_2e){var _2f=document.implementation.createDocument(_2d?_2d:null,_2e?_2e:null,null);if(_2f&&(_2d||_2e)&&!_2f.documentElement){_2f.appendChild(_2f.createElementNS(_2d,_2e));}return _2f;};}}}}if(!window.DOMParser){if(_SARISSA_IS_SAFARI){DOMParser=function(){};DOMParser.prototype.parseFromString=function(_30,_31){var _32=new XMLHttpRequest();_32.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(_30),false);_32.send(null);return _32.responseXML;};}else{if(Sarissa.getDomDocument&&Sarissa.getDomDocument()&&Sarissa.getDomDocument(null,"bar").xml){DOMParser=function(){};DOMParser.prototype.parseFromString=function(_33,_34){var doc=Sarissa.getDomDocument();doc.loadXML(_33);return doc;};}}}if((typeof (document.importNode)=="undefined")&&_SARISSA_IS_IE){try{document.importNode=function(_36,_37){var tmp;if(_36.nodeName=="tbody"||_36.nodeName=="tr"){tmp=document.createElement("table");}else{if(_36.nodeName=="td"){tmp=document.createElement("tr");}else{if(_36.nodeName=="option"){tmp=document.createElement("select");}else{tmp=document.createElement("div");}}}if(_37){tmp.innerHTML=_36.xml?_36.xml:_36.outerHTML;}else{tmp.innerHTML=_36.xml?_36.cloneNode(false).xml:_36.cloneNode(false).outerHTML;}return tmp.getElementsByTagName("*")[0];};}catch(e){}}if(!Sarissa.getParseErrorText){Sarissa.getParseErrorText=function(_39){var _3a=Sarissa.PARSED_OK;if(!_39.documentElement){_3a=Sarissa.PARSED_EMPTY;}else{if(_39.documentElement.tagName=="parsererror"){_3a=_39.documentElement.firstChild.data;_3a+="\n"+_39.documentElement.firstChild.nextSibling.firstChild.data;}else{if(_39.getElementsByTagName("parsererror").length>0){var _3b=_39.getElementsByTagName("parsererror")[0];_3a=Sarissa.getText(_3b,true)+"\n";}else{if(_39.parseError&&_39.parseError.errorCode!=0){_3a=Sarissa.PARSED_UNKNOWN_ERROR;}}}}return _3a;};}Sarissa.getText=function(_3c,_3d){var s="";var _3f=_3c.childNodes;for(var i=0;i<_3f.length;i++){var _41=_3f[i];var _42=_41.nodeType;if(_42==Node.TEXT_NODE||_42==Node.CDATA_SECTION_NODE){s+=_41.data;}else{if(_3d==true&&(_42==Node.ELEMENT_NODE||_42==Node.DOCUMENT_NODE||_42==Node.DOCUMENT_FRAGMENT_NODE)){s+=Sarissa.getText(_41,true);}}}return s;};if(!window.XMLSerializer&&Sarissa.getDomDocument&&Sarissa.getDomDocument("","foo",null).xml){XMLSerializer=function(){};XMLSerializer.prototype.serializeToString=function(_43){return _43.xml;};}Sarissa.stripTags=function(s){return s.replace(/<[^>]+>/g,"");};Sarissa.clearChildNodes=function(_45){while(_45.firstChild){_45.removeChild(_45.firstChild);}};Sarissa.copyChildNodes=function(_46,_47,_48){if((!_46)||(!_47)){throw "Both source and destination nodes must be provided";}if(!_48){Sarissa.clearChildNodes(_47);}var _49=_47.nodeType==Node.DOCUMENT_NODE?_47:_47.ownerDocument;var _4a=_46.childNodes;if(typeof (_49.importNode)!="undefined"){for(var i=0;i<_4a.length;i++){_47.appendChild(_49.importNode(_4a[i],true));}}else{for(var i=0;i<_4a.length;i++){_47.appendChild(_4a[i].cloneNode(true));}}};Sarissa.moveChildNodes=function(_4d,_4e,_4f){if((!_4d)||(!_4e)){throw "Both source and destination nodes must be provided";}if(!_4f){Sarissa.clearChildNodes(_4e);}var _50=_4d.childNodes;if(_4d.ownerDocument==_4e.ownerDocument){while(_4d.firstChild){_4e.appendChild(_4d.firstChild);}}else{var _51=_4e.nodeType==Node.DOCUMENT_NODE?_4e:_4e.ownerDocument;if(typeof (_51.importNode)!="undefined"){for(var i=0;i<_50.length;i++){_4e.appendChild(_51.importNode(_50[i],true));}}else{for(var i=0;i<_50.length;i++){_4e.appendChild(_50[i].cloneNode(true));}}Sarissa.clearChildNodes(_4d);}};Sarissa.xmlize=function(_54,_55,_56){_56=_56?_56:"";var s=_56+"<"+_55+">";var _58=false;if(!(_54 instanceof Object)||_54 instanceof Number||_54 instanceof String||_54 instanceof Boolean||_54 instanceof Date){s+=Sarissa.escape(""+_54);_58=true;}else{s+="\n";var _59="";var _5a=_54 instanceof Array;for(var _5b in _54){s+=Sarissa.xmlize(_54[_5b],(_5a?"array-item key=\""+_5b+"\"":_5b),_56+"   ");}s+=_56;}return s+=(_55.indexOf(" ")!=-1?"</array-item>\n":"</"+_55+">\n");};Sarissa.escape=function(_5c){return _5c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");};Sarissa.unescape=function(_5d){return _5d.replace(/&apos;/g,"'").replace(/&quot;/g,"\"").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");};function getAllChildren(e){return e.all?e.all:e.getElementsByTagName("*");}document.getElementsBySelector=function(_5f){if(!document.getElementsByTagName){return new Array();}var _60=_5f.split(" ");var _61=new Array(document);for(var i=0;i<_60.length;i++){token=_60[i].replace(/^\s+/,"").replace(/\s+$/,"");if(token.indexOf("#")>-1){var _63=token.split("#");var _64=_63[0];var id=_63[1];var _66=document.getElementById(id);if(_64&&_66.nodeName.toLowerCase()!=_64){return new Array();}_61=new Array(_66);continue;}if(token.indexOf(".")>-1){var _67=token.split(".");var _68=_67[0];var _69=_67[1];if(!_68){_68="*";}var _6a=new Array;var _6b=0;for(var h=0;h<_61.length;h++){var _6d;if(_68=="*"){_6d=getAllChildren(_61[h]);}else{_6d=_61[h].getElementsByTagName(_68);}for(var j=0;j<_6d.length;j++){_6a[_6b++]=_6d[j];}}_61=new Array;var _6f=0;for(var k=0;k<_6a.length;k++){if(_6a[k].className&&_6a[k].className.match(new RegExp("\\b"+_69+"\\b"))){_61[_6f++]=_6a[k];}}continue;}if(token.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var _71=RegExp.$1;var _72=RegExp.$2;var _73=RegExp.$3;var _74=RegExp.$4;if(!_71){_71="*";}var _75=new Array;var _76=0;for(var h=0;h<_61.length;h++){var _78;if(_71=="*"){_78=getAllChildren(_61[h]);}else{_78=_61[h].getElementsByTagName(_71);}for(var j=0;j<_78.length;j++){_75[_76++]=_78[j];}}_61=new Array;var _7a=0;var _7b;switch(_73){case "=":_7b=function(e){return (e.getAttribute(_72)==_74);};break;case "~":_7b=function(e){return (e.getAttribute(_72).match(new RegExp("\\b"+_74+"\\b")));};break;case "|":_7b=function(e){return (e.getAttribute(_72).match(new RegExp("^"+_74+"-?")));};break;case "^":_7b=function(e){return (e.getAttribute(_72).indexOf(_74)==0);};break;case "$":_7b=function(e){return (e.getAttribute(_72).lastIndexOf(_74)==e.getAttribute(_72).length-_74.length);};break;case "*":_7b=function(e){return (e.getAttribute(_72).indexOf(_74)>-1);};break;default:_7b=function(e){return e.getAttribute(_72);};}_61=new Array;var _83=0;for(var k=0;k<_75.length;k++){if(_7b(_75[k])){_61[_83++]=_75[k];}}continue;}_71=token;var _85=new Array;var _86=0;for(var h=0;h<_61.length;h++){var _88=_61[h].getElementsByTagName(_71);for(var j=0;j<_88.length;j++){_85[_86++]=_88[j];}}_61=_85;}return _61;};var Prototype={Version:"1.5.0",BrowserFeatures:{XPath:!!document.evaluate},ScriptFragment:"(?:<script.*?>)((\n|\r|.)*?)(?:</script>)",emptyFunction:function(){},K:function(x){return x;}};var Class={create:function(){return function(){this.initialize.apply(this,arguments);};}};var Abstract=new Object();Object.extend=function(_8b,_8c){for(var _8d in _8c){_8b[_8d]=_8c[_8d];}return _8b;};Object.extend(Object,{inspect:function(_8e){try{if(_8e===undefined){return "undefined";}if(_8e===null){return "null";}return _8e.inspect?_8e.inspect():_8e.toString();}catch(e){if(e instanceof RangeError){return "...";}throw e;}},keys:function(_8f){var _90=[];for(var _91 in _8f){_90.push(_91);}return _90;},values:function(_92){var _93=[];for(var _94 in _92){_93.push(_92[_94]);}return _93;},clone:function(_95){return Object.extend({},_95);}});Function.prototype.bind=function(){var _96=this,args=$A(arguments),object=args.shift();return function(){return _96.apply(object,args.concat($A(arguments)));};};Function.prototype.bindAsEventListener=function(_97){var _98=this,args=$A(arguments),_97=args.shift();return function(_99){return _98.apply(_97,[(_99||window.event)].concat(args).concat($A(arguments)));};};Object.extend(Number.prototype,{toColorPart:function(){var _9a=this.toString(16);if(this<16){return "0"+_9a;}return _9a;},succ:function(){return this+1;},times:function(_9b){$R(0,this,true).each(_9b);return this;}});var Try={these:function(){var _9c;for(var i=0,length=arguments.length;i<length;i++){var _9e=arguments[i];try{_9c=_9e();break;}catch(e){}}return _9c;}};var PeriodicalExecuter=Class.create();PeriodicalExecuter.prototype={initialize:function(_9f,_a0){this.callback=_9f;this.frequency=_a0;this.currentlyExecuting=false;this.registerCallback();},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1000);},stop:function(){if(!this.timer){return;}clearInterval(this.timer);this.timer=null;},onTimerEvent:function(){if(!this.currentlyExecuting){try{this.currentlyExecuting=true;this.callback(this);}finally{this.currentlyExecuting=false;}}}};String.interpret=function(_a1){return _a1==null?"":String(_a1);};Object.extend(String.prototype,{gsub:function(_a2,_a3){var _a4="",source=this,match;_a3=arguments.callee.prepareReplacement(_a3);while(source.length>0){if(match=source.match(_a2)){_a4+=source.slice(0,match.index);_a4+=String.interpret(_a3(match));source=source.slice(match.index+match[0].length);}else{_a4+=source,source="";}}return _a4;},sub:function(_a5,_a6,_a7){_a6=this.gsub.prepareReplacement(_a6);_a7=_a7===undefined?1:_a7;return this.gsub(_a5,function(_a8){if(--_a7<0){return _a8[0];}return _a6(_a8);});},scan:function(_a9,_aa){this.gsub(_a9,_aa);return this;},truncate:function(_ab,_ac){_ab=_ab||30;_ac=_ac===undefined?"...":_ac;return this.length>_ab?this.slice(0,_ab-_ac.length)+_ac:this;},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"");},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"");},stripScripts:function(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"");},extractScripts:function(){var _ad=new RegExp(Prototype.ScriptFragment,"img");var _ae=new RegExp(Prototype.ScriptFragment,"im");return (this.match(_ad)||[]).map(function(_af){return (_af.match(_ae)||["",""])[1];});},evalScripts:function(){return this.extractScripts().map(function(_b0){return eval(_b0);});},escapeHTML:function(){var div=document.createElement("div");var _b2=document.createTextNode(this);div.appendChild(_b2);return div.innerHTML;},unescapeHTML:function(){var div=document.createElement("div");div.innerHTML=this.stripTags();return div.childNodes[0]?(div.childNodes.length>1?$A(div.childNodes).inject("",function(_b4,_b5){return _b4+_b5.nodeValue;}):div.childNodes[0].nodeValue):"";},toQueryParams:function(_b6){var _b7=this.strip().match(/([^?#]*)(#.*)?$/);if(!_b7){return {};}return _b7[1].split(_b6||"&").inject({},function(_b8,_b9){if((_b9=_b9.split("="))[0]){var _ba=decodeURIComponent(_b9[0]);var _bb=_b9[1]?decodeURIComponent(_b9[1]):undefined;if(_b8[_ba]!==undefined){if(_b8[_ba].constructor!=Array){_b8[_ba]=[_b8[_ba]];}if(_bb){_b8[_ba].push(_bb);}}else{_b8[_ba]=_bb;}}return _b8;});},toArray:function(){return this.split("");},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1);},camelize:function(){var _bc=this.split("-"),len=_bc.length;if(len==1){return _bc[0];}var _bd=this.charAt(0)=="-"?_bc[0].charAt(0).toUpperCase()+_bc[0].substring(1):_bc[0];for(var i=1;i<len;i++){_bd+=_bc[i].charAt(0).toUpperCase()+_bc[i].substring(1);}return _bd;},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase();},underscore:function(){return this.gsub(/::/,"/").gsub(/([A-Z]+)([A-Z][a-z])/,"#{1}_#{2}").gsub(/([a-z\d])([A-Z])/,"#{1}_#{2}").gsub(/-/,"_").toLowerCase();},dasherize:function(){return this.gsub(/_/,"-");},inspect:function(_bf){var _c0=this.replace(/\\/g,"\\\\");if(_bf){return "\""+_c0.replace(/"/g,"\\\"")+"\"";}else{return "'"+_c0.replace(/'/g,"\\'")+"'";}}});String.prototype.gsub.prepareReplacement=function(_c1){if(typeof _c1=="function"){return _c1;}var _c2=new Template(_c1);return function(_c3){return _c2.evaluate(_c3);};};String.prototype.parseQuery=String.prototype.toQueryParams;var Template=Class.create();Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;Template.prototype={initialize:function(_c4,_c5){this.template=_c4.toString();this.pattern=_c5||Template.Pattern;},evaluate:function(_c6){return this.template.gsub(this.pattern,function(_c7){var _c8=_c7[1];if(_c8=="\\"){return _c7[2];}return _c8+String.interpret(_c6[_c7[3]]);});}};var $break=new Object();var $continue=new Object();var Enumerable={each:function(_c9){var _ca=0;try{this._each(function(_cb){try{_c9(_cb,_ca++);}catch(e){if(e!=$continue){throw e;}}});}catch(e){if(e!=$break){throw e;}}return this;},eachSlice:function(_cc,_cd){var _ce=-_cc,slices=[],array=this.toArray();while((_ce+=_cc)<array.length){slices.push(array.slice(_ce,_ce+_cc));}return slices.map(_cd);},all:function(_cf){var _d0=true;this.each(function(_d1,_d2){_d0=_d0&&!!(_cf||Prototype.K)(_d1,_d2);if(!_d0){throw $break;}});return _d0;},any:function(_d3){var _d4=false;this.each(function(_d5,_d6){if(_d4=!!(_d3||Prototype.K)(_d5,_d6)){throw $break;}});return _d4;},collect:function(_d7){var _d8=[];this.each(function(_d9,_da){_d8.push((_d7||Prototype.K)(_d9,_da));});return _d8;},detect:function(_db){var _dc;this.each(function(_dd,_de){if(_db(_dd,_de)){_dc=_dd;throw $break;}});return _dc;},findAll:function(_df){var _e0=[];this.each(function(_e1,_e2){if(_df(_e1,_e2)){_e0.push(_e1);}});return _e0;},grep:function(_e3,_e4){var _e5=[];this.each(function(_e6,_e7){var _e8=_e6.toString();if(_e8.match(_e3)){_e5.push((_e4||Prototype.K)(_e6,_e7));}});return _e5;},include:function(_e9){var _ea=false;this.each(function(_eb){if(_eb==_e9){_ea=true;throw $break;}});return _ea;},inGroupsOf:function(_ec,_ed){_ed=_ed===undefined?null:_ed;return this.eachSlice(_ec,function(_ee){while(_ee.length<_ec){_ee.push(_ed);}return _ee;});},inject:function(_ef,_f0){this.each(function(_f1,_f2){_ef=_f0(_ef,_f1,_f2);});return _ef;},invoke:function(_f3){var _f4=$A(arguments).slice(1);return this.map(function(_f5){return _f5[_f3].apply(_f5,_f4);});},max:function(_f6){var _f7;this.each(function(_f8,_f9){_f8=(_f6||Prototype.K)(_f8,_f9);if(_f7==undefined||_f8>=_f7){_f7=_f8;}});return _f7;},min:function(_fa){var _fb;this.each(function(_fc,_fd){_fc=(_fa||Prototype.K)(_fc,_fd);if(_fb==undefined||_fc<_fb){_fb=_fc;}});return _fb;},partition:function(_fe){var _ff=[],falses=[];this.each(function(_100,_101){((_fe||Prototype.K)(_100,_101)?_ff:falses).push(_100);});return [_ff,falses];},pluck:function(_102){var _103=[];this.each(function(_104,_105){_103.push(_104[_102]);});return _103;},reject:function(_106){var _107=[];this.each(function(_108,_109){if(!_106(_108,_109)){_107.push(_108);}});return _107;},sortBy:function(_10a){return this.map(function(_10b,_10c){return {value:_10b,criteria:_10a(_10b,_10c)};}).sort(function(left,_10e){var a=left.criteria,b=_10e.criteria;return a<b?-1:a>b?1:0;}).pluck("value");},toArray:function(){return this.map();},zip:function(){var _110=Prototype.K,args=$A(arguments);if(typeof args.last()=="function"){_110=args.pop();}var _111=[this].concat(args).map($A);return this.map(function(_112,_113){return _110(_111.pluck(_113));});},size:function(){return this.toArray().length;},inspect:function(){return "#<Enumerable:"+this.toArray().inspect()+">";}};Object.extend(Enumerable,{map:Enumerable.collect,find:Enumerable.detect,select:Enumerable.findAll,member:Enumerable.include,entries:Enumerable.toArray});var $A=Array.from=function(_114){if(!_114){return [];}if(_114.toArray){return _114.toArray();}else{var _115=[];for(var i=0,length=_114.length;i<length;i++){_115.push(_114[i]);}return _115;}};Object.extend(Array.prototype,Enumerable);if(!Array.prototype._reverse){Array.prototype._reverse=Array.prototype.reverse;}Object.extend(Array.prototype,{_each:function(_117){for(var i=0,length=this.length;i<length;i++){_117(this[i]);}},clear:function(){this.length=0;return this;},first:function(){return this[0];},last:function(){return this[this.length-1];},compact:function(){return this.select(function(_119){return _119!=null;});},flatten:function(){return this.inject([],function(_11a,_11b){return _11a.concat(_11b&&_11b.constructor==Array?_11b.flatten():[_11b]);});},without:function(){var _11c=$A(arguments);return this.select(function(_11d){return !_11c.include(_11d);});},indexOf:function(_11e){for(var i=0,length=this.length;i<length;i++){if(this[i]==_11e){return i;}}return -1;},reverse:function(_120){return (_120!==false?this:this.toArray())._reverse();},reduce:function(){return this.length>1?this:this[0];},uniq:function(){return this.inject([],function(_121,_122){return _121.include(_122)?_121:_121.concat([_122]);});},clone:function(){return [].concat(this);},size:function(){return this.length;},inspect:function(){return "["+this.map(Object.inspect).join(", ")+"]";}});Array.prototype.toArray=Array.prototype.clone;function $w(_123){_123=_123.strip();return _123?_123.split(/\s+/):[];}if(window.opera){Array.prototype.concat=function(){var _124=[];for(var i=0,length=this.length;i<length;i++){_124.push(this[i]);}for(var i=0,length=arguments.length;i<length;i++){if(arguments[i].constructor==Array){for(var j=0,arrayLength=arguments[i].length;j<arrayLength;j++){_124.push(arguments[i][j]);}}else{_124.push(arguments[i]);}}return _124;};}var Hash=function(obj){Object.extend(this,obj||{});};Object.extend(Hash,{toQueryString:function(obj){var _12a=[];this.prototype._each.call(obj,function(pair){if(!pair.key){return;}if(pair.value&&pair.value.constructor==Array){var _12c=pair.value.compact();if(_12c.length<2){pair.value=_12c.reduce();}else{key=encodeURIComponent(pair.key);_12c.each(function(_12d){_12d=_12d!=undefined?encodeURIComponent(_12d):"";_12a.push(key+"="+encodeURIComponent(_12d));});return;}}if(pair.value==undefined){pair[1]="";}_12a.push(pair.map(encodeURIComponent).join("="));});return _12a.join("&");}});Object.extend(Hash.prototype,Enumerable);Object.extend(Hash.prototype,{_each:function(_12e){for(var key in this){var _130=this[key];if(_130&&_130==Hash.prototype[key]){continue;}var pair=[key,_130];pair.key=key;pair.value=_130;_12e(pair);}},keys:function(){return this.pluck("key");},values:function(){return this.pluck("value");},merge:function(hash){return $H(hash).inject(this,function(_133,pair){_133[pair.key]=pair.value;return _133;});},remove:function(){var _135;for(var i=0,length=arguments.length;i<length;i++){var _137=this[arguments[i]];if(_137!==undefined){if(_135===undefined){_135=_137;}else{if(_135.constructor!=Array){_135=[_135];}_135.push(_137);}}delete this[arguments[i]];}return _135;},toQueryString:function(){return Hash.toQueryString(this);},inspect:function(){return "#<Hash:{"+this.map(function(pair){return pair.map(Object.inspect).join(": ");}).join(", ")+"}>";}});function $H(_139){if(_139&&_139.constructor==Hash){return _139;}return new Hash(_139);}ObjectRange=Class.create();Object.extend(ObjectRange.prototype,Enumerable);Object.extend(ObjectRange.prototype,{initialize:function(_13a,end,_13c){this.start=_13a;this.end=end;this.exclusive=_13c;},_each:function(_13d){var _13e=this.start;while(this.include(_13e)){_13d(_13e);_13e=_13e.succ();}},include:function(_13f){if(_13f<this.start){return false;}if(this.exclusive){return _13f<this.end;}return _13f<=this.end;}});var $R=function(_140,end,_142){return new ObjectRange(_140,end,_142);};var Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest();},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");})||false;},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(_143){this.responders._each(_143);},register:function(_144){if(!this.include(_144)){this.responders.push(_144);}},unregister:function(_145){this.responders=this.responders.without(_145);},dispatch:function(_146,_147,_148,json){this.each(function(_14a){if(typeof _14a[_146]=="function"){try{_14a[_146].apply(_14a,[_147,_148,json]);}catch(e){}}});}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++;},onComplete:function(){Ajax.activeRequestCount--;}});Ajax.Base=function(){};Ajax.Base.prototype={setOptions:function(_14b){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:""};Object.extend(this.options,_14b||{});this.options.method=this.options.method.toLowerCase();if(typeof this.options.parameters=="string"){this.options.parameters=this.options.parameters.toQueryParams();}}};Ajax.Request=Class.create();Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];Ajax.Request.prototype=Object.extend(new Ajax.Base(),{_complete:false,initialize:function(url,_14d){this.transport=Ajax.getTransport();this.setOptions(_14d);this.request(url);},request:function(url){this.url=url;this.method=this.options.method;var _14f=this.options.parameters;if(!["get","post"].include(this.method)){_14f["_method"]=this.method;this.method="post";}_14f=Hash.toQueryString(_14f);if(_14f&&/Konqueror|Safari|KHTML/.test(navigator.userAgent)){_14f+="&_=";}if(this.method=="get"&&_14f){this.url+=(this.url.indexOf("?")>-1?"&":"?")+_14f;}try{Ajax.Responders.dispatch("onCreate",this,this.transport);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);if(this.options.asynchronous){setTimeout(function(){this.respondToReadyState(1);}.bind(this),10);}this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();var body=this.method=="post"?(this.options.postBody||_14f):null;this.transport.send(body);if(!this.options.asynchronous&&this.transport.overrideMimeType){this.onStateChange();}}catch(e){this.dispatchException(e);}},onStateChange:function(){var _151=this.transport.readyState;if(_151>1&&!((_151==4)&&this._complete)){this.respondToReadyState(this.transport.readyState);}},setRequestHeaders:function(){var _152={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,"Accept":"text/javascript, text/html, application/xml, text/xml, */*"};if(this.method=="post"){_152["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:"");if(this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005){_152["Connection"]="close";}}if(typeof this.options.requestHeaders=="object"){var _153=this.options.requestHeaders;if(typeof _153.push=="function"){for(var i=0,length=_153.length;i<length;i+=2){_152[_153[i]]=_153[i+1];}}else{$H(_153).each(function(pair){_152[pair.key]=pair.value;});}}for(var name in _152){this.transport.setRequestHeader(name,_152[name]);}},success:function(){return !this.transport.status||(this.transport.status>=200&&this.transport.status<300);},respondToReadyState:function(_157){var _158=Ajax.Request.Events[_157];var _159=this.transport,json=this.evalJSON();if(_158=="Complete"){try{this._complete=true;(this.options["on"+this.transport.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(_159,json);}catch(e){this.dispatchException(e);}if((this.getHeader("Content-type")||"text/javascript").strip().match(/^(text|application)\/(x-)?(java|ecma)script(;.*)?$/i)){this.evalResponse();}}try{(this.options["on"+_158]||Prototype.emptyFunction)(_159,json);Ajax.Responders.dispatch("on"+_158,this,_159,json);}catch(e){this.dispatchException(e);}if(_158=="Complete"){this.transport.onreadystatechange=Prototype.emptyFunction;}},getHeader:function(name){try{return this.transport.getResponseHeader(name);}catch(e){return null;}},evalJSON:function(){try{var json=this.getHeader("X-JSON");return json?eval("("+json+")"):null;}catch(e){return null;}},evalResponse:function(){try{return eval(this.transport.responseText);}catch(e){this.dispatchException(e);}},dispatchException:function(_15c){(this.options.onException||Prototype.emptyFunction)(this,_15c);Ajax.Responders.dispatch("onException",this,_15c);}});Ajax.Updater=Class.create();Object.extend(Object.extend(Ajax.Updater.prototype,Ajax.Request.prototype),{initialize:function(_15d,url,_15f){this.container={success:(_15d.success||_15d),failure:(_15d.failure||(_15d.success?null:_15d))};this.transport=Ajax.getTransport();this.setOptions(_15f);var _160=this.options.onComplete||Prototype.emptyFunction;this.options.onComplete=(function(_161,_162){this.updateContent();_160(_161,_162);}).bind(this);this.request(url);},updateContent:function(){var _163=this.container[this.success()?"success":"failure"];var _164=this.transport.responseText;if(!this.options.evalScripts){_164=_164.stripScripts();}if(_163=$(_163)){if(this.options.insertion){new this.options.insertion(_163,_164);}else{_163.update(_164);}}if(this.success()){if(this.onComplete){setTimeout(this.onComplete.bind(this),10);}}}});Ajax.PeriodicalUpdater=Class.create();Ajax.PeriodicalUpdater.prototype=Object.extend(new Ajax.Base(),{initialize:function(_165,url,_167){this.setOptions(_167);this.onComplete=this.options.onComplete;this.frequency=(this.options.frequency||2);this.decay=(this.options.decay||1);this.updater={};this.container=_165;this.url=url;this.start();},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent();},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments);},updateComplete:function(_168){if(this.options.decay){this.decay=(_168.responseText==this.lastText?this.decay*this.options.decay:1);this.lastText=_168.responseText;}this.timer=setTimeout(this.onTimerEvent.bind(this),this.decay*this.frequency*1000);},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options);}});function $(_169){if(arguments.length>1){for(var i=0,elements=[],length=arguments.length;i<length;i++){elements.push($(arguments[i]));}return elements;}if(typeof _169=="string"){_169=document.getElementById(_169);}return Element.extend(_169);}if(Prototype.BrowserFeatures.XPath){document._getElementsByXPath=function(_16b,_16c){var _16d=[];var _16e=document.evaluate(_16b,$(_16c)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(var i=0,length=_16e.snapshotLength;i<length;i++){_16d.push(_16e.snapshotItem(i));}return _16d;};}document.getElementsByClassName=function(_170,_171){if(Prototype.BrowserFeatures.XPath){var q=".//*[contains(concat(' ', @class, ' '), ' "+_170+" ')]";return document._getElementsByXPath(q,_171);}else{var _173=($(_171)||document.body).getElementsByTagName("*");var _174=[],child;for(var i=0,length=_173.length;i<length;i++){child=_173[i];if(Element.hasClassName(child,_170)){_174.push(Element.extend(child));}}return _174;}};if(!window.Element){var Element=new Object();}Element.extend=function(_176){if(!_176||_nativeExtensions||_176.nodeType==3){return _176;}if(!_176._extended&&_176.tagName&&_176!=window){var _177=Object.clone(Element.Methods),cache=Element.extend.cache;if(_176.tagName=="FORM"){Object.extend(_177,Form.Methods);}if(["INPUT","TEXTAREA","SELECT"].include(_176.tagName)){Object.extend(_177,Form.Element.Methods);}Object.extend(_177,Element.Methods.Simulated);for(var _178 in _177){var _179=_177[_178];if(typeof _179=="function"&&!(_178 in _176)){_176[_178]=cache.findOrStore(_179);}}}_176._extended=true;return _176;};Element.extend.cache={findOrStore:function(_17a){return this[_17a]=this[_17a]||function(){return _17a.apply(null,[this].concat($A(arguments)));};}};Element.Methods={visible:function(_17b){return $(_17b).style.display!="none";},toggle:function(_17c){_17c=$(_17c);Element[Element.visible(_17c)?"hide":"show"](_17c);return _17c;},hide:function(_17d){$(_17d).style.display="none";return _17d;},show:function(_17e){$(_17e).style.display="";return _17e;},remove:function(_17f){_17f=$(_17f);_17f.parentNode.removeChild(_17f);return _17f;},update:function(_180,html){html=typeof html=="undefined"?"":html.toString();$(_180).innerHTML=html.stripScripts();setTimeout(function(){html.evalScripts();},10);return _180;},replace:function(_182,html){_182=$(_182);html=typeof html=="undefined"?"":html.toString();if(_182.outerHTML){_182.outerHTML=html.stripScripts();}else{var _184=_182.ownerDocument.createRange();_184.selectNodeContents(_182);_182.parentNode.replaceChild(_184.createContextualFragment(html.stripScripts()),_182);}setTimeout(function(){html.evalScripts();},10);return _182;},inspect:function(_185){_185=$(_185);var _186="<"+_185.tagName.toLowerCase();$H({"id":"id","className":"class"}).each(function(pair){var _188=pair.first(),attribute=pair.last();var _189=(_185[_188]||"").toString();if(_189){_186+=" "+attribute+"="+_189.inspect(true);}});return _186+">";},recursivelyCollect:function(_18a,_18b){_18a=$(_18a);var _18c=[];while(_18a=_18a[_18b]){if(_18a.nodeType==1){_18c.push(Element.extend(_18a));}}return _18c;},ancestors:function(_18d){return $(_18d).recursivelyCollect("parentNode");},descendants:function(_18e){return $A($(_18e).getElementsByTagName("*"));},immediateDescendants:function(_18f){if(!(_18f=$(_18f).firstChild)){return [];}while(_18f&&_18f.nodeType!=1){_18f=_18f.nextSibling;}if(_18f){return [_18f].concat($(_18f).nextSiblings());}return [];},previousSiblings:function(_190){return $(_190).recursivelyCollect("previousSibling");},nextSiblings:function(_191){return $(_191).recursivelyCollect("nextSibling");},siblings:function(_192){_192=$(_192);return _192.previousSiblings().reverse().concat(_192.nextSiblings());},match:function(_193,_194){if(typeof _194=="string"){_194=new Selector(_194);}return _194.match($(_193));},up:function(_195,_196,_197){return Selector.findElement($(_195).ancestors(),_196,_197);},down:function(_198,_199,_19a){return Selector.findElement($(_198).descendants(),_199,_19a);},previous:function(_19b,_19c,_19d){return Selector.findElement($(_19b).previousSiblings(),_19c,_19d);},next:function(_19e,_19f,_1a0){return Selector.findElement($(_19e).nextSiblings(),_19f,_1a0);},getElementsBySelector:function(){var args=$A(arguments),element=$(args.shift());return Selector.findChildElements(element,args);},getElementsByClassName:function(_1a2,_1a3){return document.getElementsByClassName(_1a3,_1a2);},readAttribute:function(_1a4,name){_1a4=$(_1a4);if(document.all&&!window.opera){var t=Element._attributeTranslations;if(t.values[name]){return t.values[name](_1a4,name);}if(t.names[name]){name=t.names[name];}var _1a7=_1a4.attributes[name];if(_1a7){return _1a7.nodeValue;}}return _1a4.getAttribute(name);},getHeight:function(_1a8){return $(_1a8).getDimensions().height;},getWidth:function(_1a9){return $(_1a9).getDimensions().width;},classNames:function(_1aa){return new Element.ClassNames(_1aa);},hasClassName:function(_1ab,_1ac){if(!(_1ab=$(_1ab))){return;}var _1ad=_1ab.className;if(_1ad.length==0){return false;}if(_1ad==_1ac||_1ad.match(new RegExp("(^|\\s)"+_1ac+"(\\s|$)"))){return true;}return false;},addClassName:function(_1ae,_1af){if(!(_1ae=$(_1ae))){return;}Element.classNames(_1ae).add(_1af);return _1ae;},removeClassName:function(_1b0,_1b1){if(!(_1b0=$(_1b0))){return;}Element.classNames(_1b0).remove(_1b1);return _1b0;},toggleClassName:function(_1b2,_1b3){if(!(_1b2=$(_1b2))){return;}Element.classNames(_1b2)[_1b2.hasClassName(_1b3)?"remove":"add"](_1b3);return _1b2;},observe:function(){Event.observe.apply(Event,arguments);return $A(arguments).first();},stopObserving:function(){Event.stopObserving.apply(Event,arguments);return $A(arguments).first();},cleanWhitespace:function(_1b4){_1b4=$(_1b4);var node=_1b4.firstChild;while(node){var _1b6=node.nextSibling;if(node.nodeType==3&&!/\S/.test(node.nodeValue)){_1b4.removeChild(node);}node=_1b6;}return _1b4;},empty:function(_1b7){return $(_1b7).innerHTML.match(/^\s*$/);},descendantOf:function(_1b8,_1b9){_1b8=$(_1b8),_1b9=$(_1b9);while(_1b8=_1b8.parentNode){if(_1b8==_1b9){return true;}}return false;},scrollTo:function(_1ba){_1ba=$(_1ba);var pos=Position.cumulativeOffset(_1ba);window.scrollTo(pos[0],pos[1]);return _1ba;},getStyle:function(_1bc,_1bd){_1bc=$(_1bc);if(["float","cssFloat"].include(_1bd)){_1bd=(typeof _1bc.style.styleFloat!="undefined"?"styleFloat":"cssFloat");}_1bd=_1bd.camelize();var _1be=_1bc.style[_1bd];if(!_1be){if(document.defaultView&&document.defaultView.getComputedStyle){var css=document.defaultView.getComputedStyle(_1bc,null);_1be=css?css[_1bd]:null;}else{if(_1bc.currentStyle){_1be=_1bc.currentStyle[_1bd];}}}if((_1be=="auto")&&["width","height"].include(_1bd)&&(_1bc.getStyle("display")!="none")){_1be=_1bc["offset"+_1bd.capitalize()]+"px";}if(window.opera&&["left","top","right","bottom"].include(_1bd)){if(Element.getStyle(_1bc,"position")=="static"){_1be="auto";}}if(_1bd=="opacity"){if(_1be){return parseFloat(_1be);}if(_1be=(_1bc.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/)){if(_1be[1]){return parseFloat(_1be[1])/100;}}return 1;}return _1be=="auto"?null:_1be;},setStyle:function(_1c0,_1c1){_1c0=$(_1c0);for(var name in _1c1){var _1c3=_1c1[name];if(name=="opacity"){if(_1c3==1){_1c3=(/Gecko/.test(navigator.userAgent)&&!/Konqueror|Safari|KHTML/.test(navigator.userAgent))?0.999999:1;if(/MSIE/.test(navigator.userAgent)&&!window.opera){_1c0.style.filter=_1c0.getStyle("filter").replace(/alpha\([^\)]*\)/gi,"");}}else{if(_1c3==""){if(/MSIE/.test(navigator.userAgent)&&!window.opera){_1c0.style.filter=_1c0.getStyle("filter").replace(/alpha\([^\)]*\)/gi,"");}}else{if(_1c3<0.00001){_1c3=0;}if(/MSIE/.test(navigator.userAgent)&&!window.opera){_1c0.style.filter=_1c0.getStyle("filter").replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+_1c3*100+")";}}}}else{if(["float","cssFloat"].include(name)){name=(typeof _1c0.style.styleFloat!="undefined")?"styleFloat":"cssFloat";}}_1c0.style[name.camelize()]=_1c3;}return _1c0;},getDimensions:function(_1c4){_1c4=$(_1c4);var _1c5=$(_1c4).getStyle("display");if(_1c5!="none"&&_1c5!=null){return {width:_1c4.offsetWidth,height:_1c4.offsetHeight};}var els=_1c4.style;var _1c7=els.visibility;var _1c8=els.position;var _1c9=els.display;els.visibility="hidden";els.position="absolute";els.display="block";var _1ca=_1c4.clientWidth;var _1cb=_1c4.clientHeight;els.display=_1c9;els.position=_1c8;els.visibility=_1c7;return {width:_1ca,height:_1cb};},makePositioned:function(_1cc){_1cc=$(_1cc);var pos=Element.getStyle(_1cc,"position");if(pos=="static"||!pos){_1cc._madePositioned=true;_1cc.style.position="relative";if(window.opera){_1cc.style.top=0;_1cc.style.left=0;}}return _1cc;},undoPositioned:function(_1ce){_1ce=$(_1ce);if(_1ce._madePositioned){_1ce._madePositioned=undefined;_1ce.style.position=_1ce.style.top=_1ce.style.left=_1ce.style.bottom=_1ce.style.right="";}return _1ce;},makeClipping:function(_1cf){_1cf=$(_1cf);if(_1cf._overflow){return _1cf;}_1cf._overflow=_1cf.style.overflow||"auto";if((Element.getStyle(_1cf,"overflow")||"visible")!="hidden"){_1cf.style.overflow="hidden";}return _1cf;},undoClipping:function(_1d0){_1d0=$(_1d0);if(!_1d0._overflow){return _1d0;}_1d0.style.overflow=_1d0._overflow=="auto"?"":_1d0._overflow;_1d0._overflow=null;return _1d0;}};Object.extend(Element.Methods,{childOf:Element.Methods.descendantOf});Element._attributeTranslations={};Element._attributeTranslations.names={colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",datetime:"dateTime",accesskey:"accessKey",tabindex:"tabIndex",enctype:"encType",maxlength:"maxLength",readonly:"readOnly",longdesc:"longDesc"};Element._attributeTranslations.values={_getAttr:function(_1d1,_1d2){return _1d1.getAttribute(_1d2,2);},_flag:function(_1d3,_1d4){return $(_1d3).hasAttribute(_1d4)?_1d4:null;},style:function(_1d5){return _1d5.style.cssText.toLowerCase();},title:function(_1d6){var node=_1d6.getAttributeNode("title");return node.specified?node.nodeValue:null;}};Object.extend(Element._attributeTranslations.values,{href:Element._attributeTranslations.values._getAttr,src:Element._attributeTranslations.values._getAttr,disabled:Element._attributeTranslations.values._flag,checked:Element._attributeTranslations.values._flag,readonly:Element._attributeTranslations.values._flag,multiple:Element._attributeTranslations.values._flag});Element.Methods.Simulated={hasAttribute:function(_1d8,_1d9){var t=Element._attributeTranslations;_1d9=t.names[_1d9]||_1d9;return $(_1d8).getAttributeNode(_1d9).specified;}};if(document.all&&!window.opera){Element.Methods.update=function(_1db,html){_1db=$(_1db);html=typeof html=="undefined"?"":html.toString();var _1dd=_1db.tagName.toUpperCase();if(["THEAD","TBODY","TR","TD"].include(_1dd)){var div=document.createElement("div");switch(_1dd){case "THEAD":case "TBODY":div.innerHTML="<table><tbody>"+html.stripScripts()+"</tbody></table>";depth=2;break;case "TR":div.innerHTML="<table><tbody><tr>"+html.stripScripts()+"</tr></tbody></table>";depth=3;break;case "TD":div.innerHTML="<table><tbody><tr><td>"+html.stripScripts()+"</td></tr></tbody></table>";depth=4;}$A(_1db.childNodes).each(function(node){_1db.removeChild(node);});depth.times(function(){div=div.firstChild;});$A(div.childNodes).each(function(node){_1db.appendChild(node);});}else{_1db.innerHTML=html.stripScripts();}setTimeout(function(){html.evalScripts();},10);return _1db;};}Object.extend(Element,Element.Methods);var _nativeExtensions=false;if(/Konqueror|Safari|KHTML/.test(navigator.userAgent)){["","Form","Input","TextArea","Select"].each(function(tag){var _1e2="HTML"+tag+"Element";if(window[_1e2]){return;}var _1e3=window[_1e2]={};_1e3.prototype=document.createElement(tag?tag.toLowerCase():"div").__proto__;});}Element.addMethods=function(_1e4){Object.extend(Element.Methods,_1e4||{});function copy(_1e5,_1e6,_1e7){_1e7=_1e7||false;var _1e8=Element.extend.cache;for(var _1e9 in _1e5){var _1ea=_1e5[_1e9];if(!_1e7||!(_1e9 in _1e6)){_1e6[_1e9]=_1e8.findOrStore(_1ea);}}}if(typeof HTMLElement!="undefined"){copy(Element.Methods,HTMLElement.prototype);copy(Element.Methods.Simulated,HTMLElement.prototype,true);copy(Form.Methods,HTMLFormElement.prototype);[HTMLInputElement,HTMLTextAreaElement,HTMLSelectElement].each(function(_1eb){copy(Form.Element.Methods,_1eb.prototype);});_nativeExtensions=true;}};var Toggle=new Object();Toggle.display=Element.toggle;Abstract.Insertion=function(_1ec){this.adjacency=_1ec;};Abstract.Insertion.prototype={initialize:function(_1ed,_1ee){this.element=$(_1ed);this.content=_1ee.stripScripts();if(this.adjacency&&this.element.insertAdjacentHTML){try{this.element.insertAdjacentHTML(this.adjacency,this.content);}catch(e){var _1ef=this.element.tagName.toUpperCase();if(["TBODY","TR"].include(_1ef)){this.insertContent(this.contentFromAnonymousTable());}else{throw e;}}}else{this.range=this.element.ownerDocument.createRange();if(this.initializeRange){this.initializeRange();}this.insertContent([this.range.createContextualFragment(this.content)]);}setTimeout(function(){_1ee.evalScripts();},10);},contentFromAnonymousTable:function(){var div=document.createElement("div");div.innerHTML="<table><tbody>"+this.content+"</tbody></table>";return $A(div.childNodes[0].childNodes[0].childNodes);}};var Insertion=new Object();Insertion.Before=Class.create();Insertion.Before.prototype=Object.extend(new Abstract.Insertion("beforeBegin"),{initializeRange:function(){this.range.setStartBefore(this.element);},insertContent:function(_1f1){_1f1.each((function(_1f2){this.element.parentNode.insertBefore(_1f2,this.element);}).bind(this));}});Insertion.Top=Class.create();Insertion.Top.prototype=Object.extend(new Abstract.Insertion("afterBegin"),{initializeRange:function(){this.range.selectNodeContents(this.element);this.range.collapse(true);},insertContent:function(_1f3){_1f3.reverse(false).each((function(_1f4){this.element.insertBefore(_1f4,this.element.firstChild);}).bind(this));}});Insertion.Bottom=Class.create();Insertion.Bottom.prototype=Object.extend(new Abstract.Insertion("beforeEnd"),{initializeRange:function(){this.range.selectNodeContents(this.element);this.range.collapse(this.element);},insertContent:function(_1f5){_1f5.each((function(_1f6){this.element.appendChild(_1f6);}).bind(this));}});Insertion.After=Class.create();Insertion.After.prototype=Object.extend(new Abstract.Insertion("afterEnd"),{initializeRange:function(){this.range.setStartAfter(this.element);},insertContent:function(_1f7){_1f7.each((function(_1f8){this.element.parentNode.insertBefore(_1f8,this.element.nextSibling);}).bind(this));}});Element.ClassNames=Class.create();Element.ClassNames.prototype={initialize:function(_1f9){this.element=$(_1f9);},_each:function(_1fa){this.element.className.split(/\s+/).select(function(name){return name.length>0;})._each(_1fa);},set:function(_1fc){this.element.className=_1fc;},add:function(_1fd){if(this.include(_1fd)){return;}this.set($A(this).concat(_1fd).join(" "));},remove:function(_1fe){if(!this.include(_1fe)){return;}this.set($A(this).without(_1fe).join(" "));},toString:function(){return $A(this).join(" ");}};Object.extend(Element.ClassNames.prototype,Enumerable);var Selector=Class.create();Selector.prototype={initialize:function(_1ff){this.params={classNames:[]};this.expression=_1ff.toString().strip();this.parseExpression();this.compileMatcher();},parseExpression:function(){function abort(_200){throw "Parse error in selector: "+_200;}if(this.expression==""){abort("empty expression");}var _201=this.params,expr=this.expression,match,modifier,clause,rest;while(match=expr.match(/^(.*)\[([a-z0-9_:-]+?)(?:([~\|!]?=)(?:"([^"]*)"|([^\]\s]*)))?\]$/i)){_201.attributes=_201.attributes||[];_201.attributes.push({name:match[2],operator:match[3],value:match[4]||match[5]||""});expr=match[1];}if(expr=="*"){return this.params.wildcard=true;}while(match=expr.match(/^([^a-z0-9_-])?([a-z0-9_-]+)(.*)/i)){modifier=match[1],clause=match[2],rest=match[3];switch(modifier){case "#":_201.id=clause;break;case ".":_201.classNames.push(clause);break;case "":case undefined:_201.tagName=clause.toUpperCase();break;default:abort(expr.inspect());}expr=rest;}if(expr.length>0){abort(expr.inspect());}},buildMatchExpression:function(){var _202=this.params,conditions=[],clause;if(_202.wildcard){conditions.push("true");}if(clause=_202.id){conditions.push("element.readAttribute(\"id\") == "+clause.inspect());}if(clause=_202.tagName){conditions.push("element.tagName.toUpperCase() == "+clause.inspect());}if((clause=_202.classNames).length>0){for(var i=0,length=clause.length;i<length;i++){conditions.push("element.hasClassName("+clause[i].inspect()+")");}}if(clause=_202.attributes){clause.each(function(_204){var _205="element.readAttribute("+_204.name.inspect()+")";var _206=function(_207){return _205+" && "+_205+".split("+_207.inspect()+")";};switch(_204.operator){case "=":conditions.push(_205+" == "+_204.value.inspect());break;case "~=":conditions.push(_206(" ")+".include("+_204.value.inspect()+")");break;case "|=":conditions.push(_206("-")+".first().toUpperCase() == "+_204.value.toUpperCase().inspect());break;case "!=":conditions.push(_205+" != "+_204.value.inspect());break;case "":case undefined:conditions.push("element.hasAttribute("+_204.name.inspect()+")");break;default:throw "Unknown operator "+_204.operator+" in selector";}});}return conditions.join(" && ");},compileMatcher:function(){this.match=new Function("element","if (!element.tagName) return false;       element = $(element);       return "+this.buildMatchExpression());},findElements:function(_208){var _209;if(_209=$(this.params.id)){if(this.match(_209)){if(!_208||Element.childOf(_209,_208)){return [_209];}}}_208=(_208||document).getElementsByTagName(this.params.tagName||"*");var _20a=[];for(var i=0,length=_208.length;i<length;i++){if(this.match(_209=_208[i])){_20a.push(Element.extend(_209));}}return _20a;},toString:function(){return this.expression;}};Object.extend(Selector,{matchElements:function(_20c,_20d){var _20e=new Selector(_20d);return _20c.select(_20e.match.bind(_20e)).map(Element.extend);},findElement:function(_20f,_210,_211){if(typeof _210=="number"){_211=_210,_210=false;}return Selector.matchElements(_20f,_210||"*")[_211||0];},findChildElements:function(_212,_213){return _213.map(function(_214){return _214.match(/[^\s"]+(?:"[^"]*"[^\s"]+)*/g).inject([null],function(_215,expr){var _217=new Selector(expr);return _215.inject([],function(_218,_219){return _218.concat(_217.findElements(_219||_212));});});}).flatten();}});function $$(){return Selector.findChildElements(document,$A(arguments));}var Form={reset:function(form){$(form).reset();return form;},serializeElements:function(_21b,_21c){var data=_21b.inject({},function(_21e,_21f){if(!_21f.disabled&&_21f.name){var key=_21f.name,value=$(_21f).getValue();if(value!=undefined){if(_21e[key]){if(_21e[key].constructor!=Array){_21e[key]=[_21e[key]];}_21e[key].push(value);}else{_21e[key]=value;}}}return _21e;});return _21c?data:Hash.toQueryString(data);}};Form.Methods={serialize:function(form,_222){return Form.serializeElements(Form.getElements(form),_222);},getElements:function(form){return $A($(form).getElementsByTagName("*")).inject([],function(_224,_225){if(Form.Element.Serializers[_225.tagName.toLowerCase()]){_224.push(Element.extend(_225));}return _224;});},getInputs:function(form,_227,name){form=$(form);var _229=form.getElementsByTagName("input");if(!_227&&!name){return $A(_229).map(Element.extend);}for(var i=0,matchingInputs=[],length=_229.length;i<length;i++){var _22b=_229[i];if((_227&&_22b.type!=_227)||(name&&_22b.name!=name)){continue;}matchingInputs.push(Element.extend(_22b));}return matchingInputs;},disable:function(form){form=$(form);form.getElements().each(function(_22d){_22d.blur();_22d.disabled="true";});return form;},enable:function(form){form=$(form);form.getElements().each(function(_22f){_22f.disabled="";});return form;},findFirstElement:function(form){return $(form).getElements().find(function(_231){return _231.type!="hidden"&&!_231.disabled&&["input","select","textarea"].include(_231.tagName.toLowerCase());});},focusFirstElement:function(form){form=$(form);form.findFirstElement().activate();return form;}};Object.extend(Form,Form.Methods);Form.Element={focus:function(_233){$(_233).focus();return _233;},select:function(_234){$(_234).select();return _234;}};Form.Element.Methods={serialize:function(_235){_235=$(_235);if(!_235.disabled&&_235.name){var _236=_235.getValue();if(_236!=undefined){var pair={};pair[_235.name]=_236;return Hash.toQueryString(pair);}}return "";},getValue:function(_238){_238=$(_238);var _239=_238.tagName.toLowerCase();return Form.Element.Serializers[_239](_238);},clear:function(_23a){$(_23a).value="";return _23a;},present:function(_23b){return $(_23b).value!="";},activate:function(_23c){_23c=$(_23c);_23c.focus();if(_23c.select&&(_23c.tagName.toLowerCase()!="input"||!["button","reset","submit"].include(_23c.type))){_23c.select();}return _23c;},disable:function(_23d){_23d=$(_23d);_23d.disabled=true;return _23d;},enable:function(_23e){_23e=$(_23e);_23e.blur();_23e.disabled=false;return _23e;}};Object.extend(Form.Element,Form.Element.Methods);var Field=Form.Element;var $F=Form.Element.getValue;Form.Element.Serializers={input:function(_23f){switch(_23f.type.toLowerCase()){case "checkbox":case "radio":return Form.Element.Serializers.inputSelector(_23f);default:return Form.Element.Serializers.textarea(_23f);}},inputSelector:function(_240){return _240.checked?_240.value:null;},textarea:function(_241){return _241.value;},select:function(_242){return this[_242.type=="select-one"?"selectOne":"selectMany"](_242);},selectOne:function(_243){var _244=_243.selectedIndex;return _244>=0?this.optionValue(_243.options[_244]):null;},selectMany:function(_245){var _246,length=_245.length;if(!length){return null;}for(var i=0,_246=[];i<length;i++){var opt=_245.options[i];if(opt.selected){_246.push(this.optionValue(opt));}}return _246;},optionValue:function(opt){return Element.extend(opt).hasAttribute("value")?opt.value:opt.text;}};Abstract.TimedObserver=function(){};Abstract.TimedObserver.prototype={initialize:function(_24a,_24b,_24c){this.frequency=_24b;this.element=$(_24a);this.callback=_24c;this.lastValue=this.getValue();this.registerCallback();},registerCallback:function(){setInterval(this.onTimerEvent.bind(this),this.frequency*1000);},onTimerEvent:function(){var _24d=this.getValue();var _24e=("string"==typeof this.lastValue&&"string"==typeof _24d?this.lastValue!=_24d:String(this.lastValue)!=String(_24d));if(_24e){this.callback(this.element,_24d);this.lastValue=_24d;}}};Form.Element.Observer=Class.create();Form.Element.Observer.prototype=Object.extend(new Abstract.TimedObserver(),{getValue:function(){return Form.Element.getValue(this.element);}});Form.Observer=Class.create();Form.Observer.prototype=Object.extend(new Abstract.TimedObserver(),{getValue:function(){return Form.serialize(this.element);}});Abstract.EventObserver=function(){};Abstract.EventObserver.prototype={initialize:function(_24f,_250){this.element=$(_24f);this.callback=_250;this.lastValue=this.getValue();if(this.element.tagName.toLowerCase()=="form"){this.registerFormCallbacks();}else{this.registerCallback(this.element);}},onElementEvent:function(){var _251=this.getValue();if(this.lastValue!=_251){this.callback(this.element,_251);this.lastValue=_251;}},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback.bind(this));},registerCallback:function(_252){if(_252.type){switch(_252.type.toLowerCase()){case "checkbox":case "radio":Event.observe(_252,"click",this.onElementEvent.bind(this));break;default:Event.observe(_252,"change",this.onElementEvent.bind(this));break;}}}};Form.Element.EventObserver=Class.create();Form.Element.EventObserver.prototype=Object.extend(new Abstract.EventObserver(),{getValue:function(){return Form.Element.getValue(this.element);}});Form.EventObserver=Class.create();Form.EventObserver.prototype=Object.extend(new Abstract.EventObserver(),{getValue:function(){return Form.serialize(this.element);}});if(!window.Event){var Event=new Object();}Object.extend(Event,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,element:function(_253){return _253.target||_253.srcElement;},isLeftClick:function(_254){return (((_254.which)&&(_254.which==1))||((_254.button)&&(_254.button==1)));},pointerX:function(_255){return _255.pageX||(_255.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft));},pointerY:function(_256){return _256.pageY||(_256.clientY+(document.documentElement.scrollTop||document.body.scrollTop));},stop:function(_257){if(_257.preventDefault){_257.preventDefault();_257.stopPropagation();}else{_257.returnValue=false;_257.cancelBubble=true;}},findElement:function(_258,_259){var _25a=Event.element(_258);while(_25a.parentNode&&(!_25a.tagName||(_25a.tagName.toUpperCase()!=_259.toUpperCase()))){_25a=_25a.parentNode;}return _25a;},observers:false,_observeAndCache:function(_25b,name,_25d,_25e){if(!this.observers){this.observers=[];}if(_25b.addEventListener){this.observers.push([_25b,name,_25d,_25e]);_25b.addEventListener(name,_25d,_25e);}else{if(_25b.attachEvent){this.observers.push([_25b,name,_25d,_25e]);_25b.attachEvent("on"+name,_25d);}}},unloadCache:function(){if(!Event.observers){return;}for(var i=0,length=Event.observers.length;i<length;i++){Event.stopObserving.apply(this,Event.observers[i]);Event.observers[i][0]=null;}Event.observers=false;},observe:function(_260,name,_262,_263){_260=$(_260);_263=_263||false;if(name=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||_260.attachEvent)){name="keydown";}Event._observeAndCache(_260,name,_262,_263);},stopObserving:function(_264,name,_266,_267){_264=$(_264);_267=_267||false;if(name=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||_264.detachEvent)){name="keydown";}if(_264.removeEventListener){_264.removeEventListener(name,_266,_267);}else{if(_264.detachEvent){try{_264.detachEvent("on"+name,_266);}catch(e){}}}}});if(navigator.appVersion.match(/\bMSIE\b/)){Event.observe(window,"unload",Event.unloadCache,false);}var Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;},realOffset:function(_268){var _269=0,valueL=0;do{_269+=_268.scrollTop||0;valueL+=_268.scrollLeft||0;_268=_268.parentNode;}while(_268);return [valueL,_269];},cumulativeOffset:function(_26a){var _26b=0,valueL=0;do{_26b+=_26a.offsetTop||0;valueL+=_26a.offsetLeft||0;_26a=_26a.offsetParent;}while(_26a);return [valueL,_26b];},positionedOffset:function(_26c){var _26d=0,valueL=0;do{_26d+=_26c.offsetTop||0;valueL+=_26c.offsetLeft||0;_26c=_26c.offsetParent;if(_26c){if(_26c.tagName=="BODY"){break;}var p=Element.getStyle(_26c,"position");if(p=="relative"||p=="absolute"){break;}}}while(_26c);return [valueL,_26d];},offsetParent:function(_26f){if(_26f.offsetParent){return _26f.offsetParent;}if(_26f==document.body){return _26f;}while((_26f=_26f.parentNode)&&_26f!=document.body){if(Element.getStyle(_26f,"position")!="static"){return _26f;}}return document.body;},within:function(_270,x,y){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(_270,x,y);}this.xcomp=x;this.ycomp=y;this.offset=this.cumulativeOffset(_270);return (y>=this.offset[1]&&y<this.offset[1]+_270.offsetHeight&&x>=this.offset[0]&&x<this.offset[0]+_270.offsetWidth);},withinIncludingScrolloffsets:function(_273,x,y){var _276=this.realOffset(_273);this.xcomp=x+_276[0]-this.deltaX;this.ycomp=y+_276[1]-this.deltaY;this.offset=this.cumulativeOffset(_273);return (this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+_273.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+_273.offsetWidth);},overlap:function(mode,_278){if(!mode){return 0;}if(mode=="vertical"){return ((this.offset[1]+_278.offsetHeight)-this.ycomp)/_278.offsetHeight;}if(mode=="horizontal"){return ((this.offset[0]+_278.offsetWidth)-this.xcomp)/_278.offsetWidth;}},page:function(_279){var _27a=0,valueL=0;var _27b=_279;do{_27a+=_27b.offsetTop||0;valueL+=_27b.offsetLeft||0;if(_27b.offsetParent==document.body){if(Element.getStyle(_27b,"position")=="absolute"){break;}}}while(_27b=_27b.offsetParent);_27b=_279;do{if(!window.opera||_27b.tagName=="BODY"){_27a-=_27b.scrollTop||0;valueL-=_27b.scrollLeft||0;}}while(_27b=_27b.parentNode);return [valueL,_27a];},clone:function(_27c,_27d){var _27e=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},arguments[2]||{});_27c=$(_27c);var p=Position.page(_27c);_27d=$(_27d);var _280=[0,0];var _281=null;if(Element.getStyle(_27d,"position")=="absolute"){_281=Position.offsetParent(_27d);_280=Position.page(_281);}if(_281==document.body){_280[0]-=document.body.offsetLeft;_280[1]-=document.body.offsetTop;}if(_27e.setLeft){_27d.style.left=(p[0]-_280[0]+_27e.offsetLeft)+"px";}if(_27e.setTop){_27d.style.top=(p[1]-_280[1]+_27e.offsetTop)+"px";}if(_27e.setWidth){_27d.style.width=_27c.offsetWidth+"px";}if(_27e.setHeight){_27d.style.height=_27c.offsetHeight+"px";}},absolutize:function(_282){_282=$(_282);if(_282.style.position=="absolute"){return;}Position.prepare();var _283=Position.positionedOffset(_282);var top=_283[1];var left=_283[0];var _286=_282.clientWidth;var _287=_282.clientHeight;_282._originalLeft=left-parseFloat(_282.style.left||0);_282._originalTop=top-parseFloat(_282.style.top||0);_282._originalWidth=_282.style.width;_282._originalHeight=_282.style.height;_282.style.position="absolute";_282.style.top=top+"px";_282.style.left=left+"px";_282.style.width=_286+"px";_282.style.height=_287+"px";},relativize:function(_288){_288=$(_288);if(_288.style.position=="relative"){return;}Position.prepare();_288.style.position="relative";var top=parseFloat(_288.style.top||0)-(_288._originalTop||0);var left=parseFloat(_288.style.left||0)-(_288._originalLeft||0);_288.style.top=top+"px";_288.style.left=left+"px";_288.style.height=_288._originalHeight;_288.style.width=_288._originalWidth;}};if(/Konqueror|Safari|KHTML/.test(navigator.userAgent)){Position.cumulativeOffset=function(_28b){var _28c=0,valueL=0;do{_28c+=_28b.offsetTop||0;valueL+=_28b.offsetLeft||0;if(_28b.offsetParent==document.body){if(Element.getStyle(_28b,"position")=="absolute"){break;}}_28b=_28b.offsetParent;}while(_28b);return [valueL,_28c];};}Element.addMethods();if(typeof YAHOO=="undefined"){var YAHOO={};}YAHOO.namespace=function(){var a=arguments,o=null,i,j,d;for(i=0;i<a.length;i=i+1){d=a[i].split(".");o=YAHOO;for(j=(d[0]=="YAHOO")?1:0;j<d.length;j=j+1){o[d[j]]=o[d[j]]||{};o=o[d[j]];}}return o;};YAHOO.log=function(msg,cat,src){var l=YAHOO.widget.Logger;if(l&&l.log){return l.log(msg,cat,src);}else{return false;}};YAHOO.init=function(){this.namespace("util","widget","example");if(typeof YAHOO_config!="undefined"){var l=YAHOO_config.listener,ls=YAHOO.env.listeners,unique=true,i;if(l){for(i=0;i<ls.length;i=i+1){if(ls[i]==l){unique=false;break;}}if(unique){ls.push(l);}}}};YAHOO.register=function(name,_294,data){var mods=YAHOO.env.modules;if(!mods[name]){mods[name]={versions:[],builds:[]};}var m=mods[name],v=data.version,b=data.build,ls=YAHOO.env.listeners;m.name=name;m.version=v;m.build=b;m.versions.push(v);m.builds.push(b);m.mainClass=_294;for(var i=0;i<ls.length;i=i+1){ls[i](m);}if(_294){_294.VERSION=v;_294.BUILD=b;}else{YAHOO.log("mainClass is undefined for module "+name,"warn");}};YAHOO.env=YAHOO.env||{modules:[],listeners:[],getVersion:function(name){return YAHOO.env.modules[name]||null;}};YAHOO.lang={isArray:function(obj){if(obj.constructor&&obj.constructor.toString().indexOf("Array")>-1){return true;}else{return YAHOO.lang.isObject(obj)&&obj.constructor==Array;}},isBoolean:function(obj){return typeof obj=="boolean";},isFunction:function(obj){return typeof obj=="function";},isNull:function(obj){return obj===null;},isNumber:function(obj){return typeof obj=="number"&&isFinite(obj);},isObject:function(obj){return typeof obj=="object"||YAHOO.lang.isFunction(obj);},isString:function(obj){return typeof obj=="string";},isUndefined:function(obj){return typeof obj=="undefined";},hasOwnProperty:function(obj,prop){if(Object.prototype.hasOwnProperty){return obj.hasOwnProperty(prop);}return !YAHOO.lang.isUndefined(obj[prop])&&obj.constructor.prototype[prop]!==obj[prop];},extend:function(subc,_2a5,_2a6){var F=function(){};F.prototype=_2a5.prototype;subc.prototype=new F();subc.prototype.constructor=subc;subc.superclass=_2a5.prototype;if(_2a5.prototype.constructor==Object.prototype.constructor){_2a5.prototype.constructor=_2a5;}if(_2a6){for(var i in _2a6){subc.prototype[i]=_2a6[i];}}},augment:function(r,s){var rp=r.prototype,sp=s.prototype,a=arguments,i,p;if(a[2]){for(i=2;i<a.length;i=i+1){rp[a[i]]=sp[a[i]];}}else{for(p in sp){if(!rp[p]){rp[p]=sp[p];}}}}};YAHOO.init();YAHOO.util.Lang=YAHOO.lang;YAHOO.augment=YAHOO.lang.augment;YAHOO.extend=YAHOO.lang.extend;YAHOO.register("yahoo",YAHOO,{version:"2.2.0",build:"127"});function XMPPConnection(_2ac,_2ad,_2ae){this.binding=_2ac;this.domain=_2ad;this.isConnected=false;this.isAuthenticated=false;this._packetFilters=new Array();this._outgoingPacketFilters=new Array();this._packetQueue=new Array();this._connectionListeners=new Array();this._packetHandler=this._createPacketHandler();this.addConnectionListener(_2ae);util.HTTP.reset();}XMPPConnection.prototype={addConnectionListener:function(_2af){if(!_2af){return;}this._connectionListeners.push(_2af);},removeConnectionListener:function(_2b0){if(!_2b0){return;}var _2b1=this._connectionListeners.indexOf(_2b0);if(_2b1>=0){this._connectionListeners.splice(_2b1,1);}},_fireEvent:function(_2b2,_2b3){var self=this;this._connectionListeners.each(function(_2b5){if(_2b5[_2b2]){try{_2b5[_2b2](self,_2b3);}catch(_2b3){console.error("Error processing listener: %s",_2b3);}}});},connect:function(){var _2b6=this;var _2b7=function(_2b8,_2b9,_2ba,_2bb){var _2bc={xmlns:"http://jabber.org/protocol/httpbind",hold:_2b8,rid:_2b9,secure:_2ba,wait:_2bb};return util.XML.element("body","",_2bc);};this._rid=Math.floor(Math.random()*1000000);var _2bd=_2b7(1,this._rid,true,10);console.debug("Initial request: %s",_2bd);var _2be=function(_2bf){var _2c0=_2bf.responseXML.documentElement;console.debug("Intial response: %x",_2c0);_2b6.isConnected=true;_2b6.authentication=_2b6._configureConnection(_2c0);_2b6._fireEvent("connectionSuccessful");};var _2c1=function(_2c2,_2c3){console.error("Connection to the server failed: "+_2c3);this._fireEvent("connectionFailed");}.bind(this);var _2c4=util.HTTP.doRequest(this.binding,_2bd,_2be,_2c1,_2c1);},logout:function(_2c5){if(this.loggedOut){return;}if(this._timer){this._timer.cancel();}var _2c6={xmlns:"http://jabber.org/protocol/httpbind",rid:this._getNextRID(),sid:this._sid,type:"terminate"};var _2c7=util.XML.element("body",(_2c5?_2c5.toXML():""),_2c6);this.loggedOut=true;util.HTTP.doRequest(this.binding,_2c7,this.destroy.bind(this),this.destroy.bind(this),this.destroy.bind(this));},destroy:function(_2c8){if(!this.isConnected){return;}this.isConnected=false;this.isAuthenticated=false;delete this.authentication;delete this.username;delete this.password;delete this._sid;delete this._pollingInterval;delete this._wait;delete this._inactivity;this._packetHandler=Prototype.emptyFunction;if(this._timer){this._timer.cancel();}this._packetFilters.clear();this._outgoingPacketFilters.clear();this._packetQueue.clear();if(!this.loggedOut&&!_2c8){_2c8=new Error("connection lost");}this._fireEvent("connectionClosed",(!this.loggedOut?_2c8:null));this._connectionListeners.clear();},login:function(_2c9,_2ca,_2cb){if(!this.authentication.auth["anonymous"]&&(!_2c9||_2c9=="")){throw new Error("Username must be provided to login.");}if(!this.authentication.auth["anonymous"]&&(!_2ca||_2ca=="")){throw new Error("Password must be provided to login.");}this.username=_2c9;this.password=_2ca;this.resource=(!_2cb?"spank":_2cb);var auth;if(!_2c9){auth=this.authentication.auth["anonymous"];}else{auth=this.authentication.auth["plain"];}this._handleAuthentication(auth,0);},_handleAuthentication:function(_2cd,step){var _2cf=this;var _2d0=function(_2d1){var _2d2=_2d1.responseXML.documentElement;var _2d3=_2d2.firstChild;var _2d4;if(_2d3){_2d4=_2cd[step].handleResponse(_2d2.firstChild);}else{_2cf._handleAuthentication(_2cd,step);return;}if(_2d4.authComplete){if(_2d4.authSuccess){_2cf._bindConnection();}else{_2cf._fireEvent("authenticationFailed");}}else{_2cf._handleAuthentication(_2d4,step++);}};if(step!=this.lastStep){this.lastStep=step;util.HTTP.doRequest(this.binding,_2cd[step].createRequest(this),_2d0);}else{this._handlePing(_2d0);}},_configureConnection:function(_2d5){this._sid=_2d5.getAttribute("sid");this._pollingInterval=_2d5.getAttribute("polling");this._wait=_2d5.getAttribute("wait");this._inactivity=_2d5.getAttribute("inactivity");this.isConnected=true;var _2d6=_2d5.firstChild;var _2d7={};for(var i=0;i<_2d6.childNodes.length;i++){var _2d9=_2d6.childNodes[i];if(_2d9.tagName=="mechanisms"){_2d7.auth=this._configureAuthMechanisms(_2d9);}else{if(_2d9.tagName=="bind"){_2d7.bind=true;}else{if(_2d9.tagName=="session"){_2d7.session=true;}}}}return _2d7;},_configureAuthMechanisms:function(_2da){var _2db={};for(var i=0;i<_2da.childNodes.length;i++){var _2dd=_2da.childNodes[i];if(_2dd.firstChild.nodeValue=="PLAIN"){_2db["plain"]=SASLAuth.plainAuth;}else{if(_2dd.firstChild.nodeValue=="ANONYMOUS"){_2db["anonymous"]=SASLAuth.anonymous;}}}if(!_2db){_2db=function(){return false;};}return _2db;},_getNextRID:function(){return ++this._rid;},_createRequest:function(_2de){var _2df={xmlns:"http://jabber.org/protocol/httpbind",rid:this._getNextRID(),sid:this._sid};return util.XML.element("body",_2de,_2df);},_bindConnection:function(){var _2e0=new XMPP.IQ("set");_2e0.setXMLNS("jabber:client");var bind=_2e0.addExtension("bind","urn:ietf:params:xml:ns:xmpp-bind");bind.appendChild(_2e0.doc.createElement("resource")).appendChild(_2e0.doc.createTextNode(this.resource));console.debug("Bind the connection! %x",_2e0.doc.documentElement);var _2e2=this;var _2e3=function(_2e4){var bind=_2e4.getExtension("bind");console.debug("Bind Response: %x",bind);var jid=bind.firstChild;_2e2._jid=jid.firstChild.nodeValue;_2e2._establishSession();};var id=_2e0.getID();var _2e8=new org.jive.spank.PacketFilter(_2e3,function(_2e9){return _2e9.getID()==id;});this.sendPacket(_2e0,_2e8);},_establishSession:function(){var _2ea=new XMPP.IQ("set");_2ea.setXMLNS("jabber:client");_2ea.addExtension("session","urn:ietf:params:xml:ns:xmpp-session");console.debug("Establishing session: %x",_2ea.doc.documentElement);var _2eb=this;var _2ec=function(_2ed){_2eb.isAuthenticated=true;_2eb._fireEvent("authenticationSuccessful");};var id=_2ea.getID();var _2ef=new org.jive.spank.PacketFilter(_2ec,function(_2f0){return _2f0.getID()==id;});this.sendPacket(_2ea,_2ef);},sendPacket:function(_2f1,_2f2){if(!_2f1||!(typeof _2f1=="object"&&_2f1 instanceof XMPP.Packet)){return;}if(this._timer){this._timer.cancel();delete this._timer;}if(_2f2){this.addPacketFilter(_2f2,true);}if(this._shouldQueuePacket()){this._queuePacket(_2f1);return;}var _2f3=new Array();_2f3.push(_2f1);this._sendPackets(_2f3);},_sendPackets:function(_2f4){if(!this.isConnected){return;}var _2f5=new Array();for(var i=0;i<_2f4.length;i++){this._handlePacket(this._outgoingPacketFilters.slice(),_2f4[i]);_2f5.push(_2f4[i].toXML());}util.HTTP.doRequest(this.binding,this._createRequest(_2f5.join("")),this._packetHandler,connection._createFailureHandler(),connection._createExceptionHandler());},_createFailureHandler:function(){var self=this;return function(_2f8,_2f9){console.error("Request failure: %s",_2f9);self.destroy(_2f9);};},_createExceptionHandler:function(){var self=this;return function(_2fb,_2fc){console.error("Request exception: %s",_2fc);self.destroy(_2fc);};},_createPacketHandler:function(){var _2fd=this;return function(_2fe){var _2ff=_2fe.responseXML.documentElement;var _300=_2ff.childNodes;var len=_300.length;_2fd._fireEvent("packetsReceived");for(var i=0;i<len;i++){var _303=_300.item(i).cloneNode(true);var _304=_303.tagName;var _305;if(_304=="iq"){_305=new XMPP.IQ(null,null,null,_303);}else{if(_304=="presence"){_305=new XMPP.Presence(null,null,_303);}else{if(_304=="message"){_305=new XMPP.Message(null,null,null,_303);}else{console.error("Server returned unknown packet, tossing: %x",_303);continue;}}}_2fd._handlePacket(_2fd._packetFilters.slice(),_305);}_2fd._fireEvent("packetsProcessed");if(_2fd._packetQueue.length>0){_2fd._sendPackets(_2fd._packetQueue.compact());_2fd._packetQueue.clear();}else{_2fd._handlePing();}};},addPacketFilter:function(_306,_307){if(!_306||!(_306 instanceof org.jive.spank.PacketFilter)){throw Error("PacketFilter must be an instance of PacketFilter");}_306.removeOnExecution=_307;this._packetFilters.push(_306);},removePacketFilter:function(_308){if(!_308){return;}var _309=this._packetFilters.indexOf(_308);if(_309>=0){this._packetFilters.splice(_309,1);}},addOutgoingPacketFilter:function(_30a){if(!_30a||!(_30a instanceof org.jive.spank.PacketFilter)){throw Error("PacketFilter must be an instance of PacketFilter");}this._outgoingPacketFilters.push(_30a);},_handlePacket:function(_30b,_30c){for(var i=_30b.length-1;i>=0;i--){try{if(_30b[i].accept(_30c)&&_30b[i].removeOnExecution){this.removePacketFilter(_30b[i]);}}catch(e){console.error("Error processing packet: %s",e.message);if(_30b[i].removeOnExecution){this.removePacketFilter(_30b[i]);}}}},_handlePing:function(_30e){if(this._timer){this._timer.cancel();delete this._timer;}if(util.HTTP.requestCount<=0){this._timer=new TimeoutExecutor(this._pingServer(_30e),2*this._pollingInterval);}},_pingServer:function(_30f){if(!this.isConnected){return;}var _310=this;if(!_30f){_30f=this._packetHandler;}return function(){util.HTTP.doRequest(_310.binding,_310._createRequest(),_30f,_310._createFailureHandler(),_310._createExceptionHandler());};},_shouldQueuePacket:function(){return util.HTTP.requestCount>=util.HTTP.maxConcurrentRequests||this._packetQueue.size>0;},_queuePacket:function(_311){this._packetQueue.push(_311);}};var SASLAuth={plainAuth:[{createRequest:function(_312){var _313=_312.username+"@"+_312.domain;_313+="\x00";_313+=_312.username;_313+="\x00";_313+=_312.password;_313=util.base64.encode(_313);var _314={mechanism:"PLAIN",xmlns:"urn:ietf:params:xml:ns:xmpp-sasl"};var _315=util.XML.element("auth",_313,_314);var _316=_312._createRequest(_315);console.debug("Plain auth request: %s",_316);return _316;},handleResponse:function(_317){var _318=_317.tagName=="success";return {authComplete:true,authSuccess:_318};}}],anonymous:[{createRequest:function(_319){var _31a={mechanism:"ANONYMOUS",xmlns:"urn:ietf:params:xml:ns:xmpp-sasl"};var _31b=util.XML.element("auth",null,_31a);var _31c=_319._createRequest(_31b);console.debug("Plain auth request: %s",_31c);return _31c;},handleResponse:function(_31d){var _31e=_31d.tagName=="success";return {authComplete:true,authSuccess:_31e};}}]};var TimeoutExecutor=Class.create();TimeoutExecutor.prototype={initialize:function(_31f,_320){this.callback=_31f;this.timeout=_320;this.currentlyExecuting=false;this.registerCallback();},registerCallback:function(){this.timeoutID=setTimeout(this.onTimerEvent.bind(this),this.timeout*1000);},onTimerEvent:function(){try{this.currentlyExecuting=true;if(this.callback&&this.callback instanceof Function){this.callback();}}finally{this.currentlyExecuting=false;delete this.timeoutID;}},cancel:function(){if(!this.currentlyExecuting&&this.timeoutID){clearTimeout(this.timeoutID);delete this.timeoutID;}},reset:function(){if(!this.currentlyExecuting&&this.timeoutID){clearTimeout(this.timeoutID);delete this.timeoutID;this.registerCallback();}}};var org={};org.jive={};org.jive.spank={};org.jive.spank.chat={};org.jive.spank.chat.Manager=function(_321,_322,_323){if(!_321||!(_321 instanceof XMPPConnection)){throw Error("connection required for ChatManager.");}this.getConnection=function(){return _321;};this.servers={};if(_322){this.servers[_322]=false;}var self=this;_321.addConnectionListener({connectionClosed:function(){self.destroy();}});this.packetFilter=new org.jive.spank.PacketFilter(this._createMessageHandler(),this._createMessageFilter());_321.addPacketFilter(this.packetFilter);this._chatSessions=new Array();this._chatSessionListeners=new Array();this._baseID=util.StringUtil.randomString(5);this._threadID=1;this.shouldUseThreads=_323;this.presenceFilter=new org.jive.spank.PacketFilter(this._presenceHandler.bind(this),function(_325){return _325.getPacketType()=="presence"&&_325.getType()=="unavailable";});_321.addPacketFilter(this.presenceFilter);};org.jive.spank.chat.Manager.prototype={_createMessageHandler:function(){var _326=this;return function(_327){_326._handleMessage(_327);};},_createMessageFilter:function(){return function(_328){return _328.getPacketType()=="message"&&_328.getType()=="chat"&&_328.getBody();};},_presenceHandler:function(_329){var _32a=this._chatSessions.find(function(_32b){return _32b.sessionMatches(_329.getFrom(),null,true);});if(!_32a||this.servers[_329.getFrom().getDomain()]){return;}var _32c=_32a.getJID().getBareJID();_32a.getJID=function(){return _32c;};},_handleMessage:function(_32d){console.debug("Handling message: %s",_32d.getID());var _32e=this._chatSessions.find(function(_32f){return _32f.sessionMatches(_32d.getFrom(),_32d.getThread());});if(!_32e){_32e=this.createSession(_32d.getFrom(),(this.shouldUseThreads?_32d.getThread():null));}_32e._handleMessage(_32d);},addChatSessionListener:function(_330){this._chatSessionListeners.push(_330);},removeChatSessionListener:function(_331){if(!_331){return;}var _332=this._chatSessionListeners.indexOf(_331);if(_332>=0){this._chatSessionListeners.splice(_332,1);}},closeChatSession:function(_333){if(!_333){return;}var _334=this._chatSessions.indexOf(_333);if(_334<0){return;}this._chatSessions.splice(_334,1);delete _333._messageListeners;this._fireChatSessionClosed(_333);},_fireNewChatSessionCreated:function(_335){var _336=this;this._chatSessionListeners.each(function(_337){if(_337.created){_337.created(_336,_335);}});},_fireChatSessionClosed:function(_338){var _339=this;this._chatSessionListeners.each(function(_33a){if(_33a.closed){_33a.closed(_339,_338);}});},getSession:function(jid,_33c){return this._chatSessions.find(function(_33d){return _33d.sessionMatches(jid,_33c);});},createSession:function(jid,_33f){if(!jid){throw new Error("JID must be specified.");}if(!_33f&&this.shouldUseThreads){_33f=this._createThreadID();}var _340=new org.jive.spank.chat.Session(this,jid,_33f);this._chatSessions.push(_340);this._fireNewChatSessionCreated(_340);return _340;},registerDomain:function(_341,_342){this.servers[_341]=_342;},_createThreadID:function(){return this._baseID+this._threadID++;},destroy:function(){for(var i=0;i<this._chatSessions.length;i++){this.closeChatSession(this._chatSessions[i]);}this._chatSessions.clear();this._chatSessionListeners.clear();delete this._chatSessionListeners;this.getConnection=Prototype.emptyFunction;}};org.jive.spank.chat.Session=function(_344,jid,_346){this.getJID=function(){return jid;};this.getThread=function(){return _346;};this.getManager=function(){return _344;};this._messageListeners=new Array();};org.jive.spank.chat.Session.prototype={getJIDString:function(){if(this.getManager().servers[this.getJID().getDomain()]){return this.getJID().toString();}else{return this.getJID().toBareJID();}},sessionMatches:function(jid,_348,_349){var _34a;if(this.getManager().servers[jid.getDomain()]||_349){_34a=jid.toString()==this.getJID().toString();}else{_34a=jid.toBareJID()==this.getJID().toBareJID();}if(this.getManager().shouldUseThreads&&_348){return _34a&&this.getThread()==_348;}else{return _34a;}},addListener:function(_34b){if(!_34b){return;}this._messageListeners.push(_34b);},_handleMessage:function(_34c){var _34d=this;var jid=_34c.getFrom();this.getJID=function(){return jid;};this._messageListeners.each(function(_34f){if(_34f.messageRecieved){_34f.messageRecieved(_34d,_34c);}});},sendMessage:function(_350,_351){if(!_351){_351=new XMPP.Message("chat",this.getManager().getConnection()._jid,this.getJID());}else{_351.setTo(this.getJID());_351.setType("chat");_351.setBody(_350);}_351.setBody(_350);_351.setThread(this.getThread());this.getManager().getConnection().sendPacket(_351);}};org.jive.spank.chat.ChatSessionListener=function(_352,_353){this.created=_352;this.closed=_353;};org.jive.spank.presence={};org.jive.spank.presence.Manager=function(_354,jid,_356){if(!_354||!(_354 instanceof XMPPConnection)){throw Error("Connection required for the presence manager.");}this.getConnection=function(){return _354;};var self=this;_354.addConnectionListener({connectionClosed:function(){self.destroy();}});if(!jid){this._presencePacketFilter=new org.jive.spank.PacketFilter(this._createPresencePacketHandler(),function(_358){return _358.getPacketType()=="presence";});}else{this._presencePacketFilter=new org.jive.spank.PacketFilter(this._createPresencePacketHandler(),function(_359){return _359.getPacketType()=="presence"&&_359.getFrom().toBareJID()==jid.toBareJID();});}_354.addPacketFilter(this._presencePacketFilter);this._presenceListeners=new Array();this._presence={};this._jid=jid;this.mode=_356;};org.jive.spank.presence.Manager.prototype={sendPresence:function(_35a){if(!_35a){_35a=new XMPP.Presence();}if(!_35a.getTo()&&this._jid){_35a.setTo(this._jid.toString());}this.getCurrentPresence=function(){return _35a;};this.getConnection().sendPacket(_35a);},setSubscriptionMode:function(mode){this.mode=mode;},addPresenceListener:function(_35c){if(!_35c||!(_35c instanceof Function)){throw Error("Presence listener must be function");}this._presenceListeners.push(_35c);},getHighestResource:function(jid){var _35e=jid.toBareJID();if(!this._presence[_35e]){return null;}var _35f;for(var _360 in this._presence[_35e].resources){var _361=this._presence[_35e].resources[_360];if(!_35f||_361.getPriority()>=_35f.getPriority){_35f=_361;}}return _35f;},getPresence:function(jid){if(!jid.getResource()){return this.getHighestResource(jid);}var _363=jid.toBareJID();if(!this._presence[_363]){return null;}else{return this._presence[_363].resources[jid.getResource()];}},_createPresencePacketHandler:function(){var _364=this;return function(_365){_364._handlePresencePacket(_365);};},_handlePresencePacket:function(_366){var type=_366.getType();if(type=="available"||type=="unavailable"){var jid=_366.getFrom();var _369=jid.toBareJID();if(!this._presence[_369]&&type=="available"){this._presence[_369]={};this._presence[_369].resources={};}else{if(!this._presence[_369]){return;}}var _36a=jid.getResource();if(type=="available"){this._presence[jid.toBareJID()].resources[_36a]=_366;}else{delete this._presence[jid.toBareJID()].resources[_36a];}}else{if((_366.getType()=="subscribe"||_366.getType()=="unsubscribe")&&(this.mode=="accept"||this.mode=="reject")){var _36b=new XMPP.Presence(_366.getFrom());_36b.setType((this.mode=="accept"&&_366.getType()!="unsubscribe"?"subscribed":"unsubscribed"));this.getConnection().sendPacket(_36b);}}if(!this._presenceListeners){return;}this._presenceListeners.each(function(_36c){_36c(_366);});},destroy:function(){delete this._presence;if(this.getConnection()){this.getConnection().removePacketFilter(this._presencePacketFilter);}this.getConnection=Prototype.emptyFunction;delete this._presenceListeners;}};org.jive.spank.roster={};org.jive.spank.roster.Manager=function(_36d,_36e,_36f){if(!_36d||!(_36d instanceof XMPPConnection)){throw Error("Connection required for the roster manager.");}var self=this;_36d.addConnectionListener({connectionClosed:function(){self.destroy();}});this.getConnection=function(){return _36d;};this.rosterPacketFilter=new org.jive.spank.PacketFilter(this._rosterPacketHandler(),this._createRosterPacketFilter);_36d.addPacketFilter(this.rosterPacketFilter);if(!_36f){_36f=new org.jive.spank.presence.Manager(_36d);}this.onLoadCallback=_36e;var _371=new org.jive.spank.roster.Packet();this._initialRequestID=_371.getID();_36d.sendPacket(_371);this.rosterListeners=new Array();};org.jive.spank.roster.Manager.prototype={getRoster:function(){return this._roster;},_rosterPacketHandler:function(){var _372=this;return function(_373){_372._handleRosterPacket(new org.jive.spank.roster.Packet(null,null,null,_373.rootNode.cloneNode(true)));};},_createRosterPacketFilter:function(_374){var _375=_374.getExtension("query");return _375!=null&&_375.namespaceURI=="jabber:iq:roster";},_handleRosterPacket:function(_376){console.debug("Roster packet recieved %s",_376.getID());if(_376.getID()==this._initialRequestID){this._handleInitialResponse(_376);}else{if(_376.getType()=="set"){this._handleRosterAdd(_376,true);}}},_handleInitialResponse:function(_377){this._roster={};this._users={};this._handleRosterAdd(_377,false);if(this.onLoadCallback&&this.onLoadCallback instanceof Function){this.onLoadCallback(this);this.onLoadCallback=Prototype.emptyFunction;}presenceManager.sendPresence();},_handleRosterAdd:function(_378,_379){var _37a=_378.getItems();var _37b=this._roster;var _37c=this._users;var _37d=new Array();var _37e=new Array();var _37f=new Array();_37a.each(function(item){var jid=item.getJID().toBareJID();if(item.getSubscription()=="remove"||(item.getSubscription()=="none"&&!item.isSubscriptionPending())){item=_37c[jid];if(!item){return;}delete _37c[jid];if(_37b["unfiled"]&&_37b["unfiled"][item.getName()]){delete _37b["unfiled"][item.getJID().toString()];}var _382=item.getGroups();for(var i=0;i<_382.length;i++){var _384=_382[i];if(!_37b[_384]){continue;}delete _37b[_384][item.getJID().toString()];}_37e.push(item);return;}var _385=false;var _386=false;var _387;if(_37c[jid]){_387=_37c[jid];var _388=_387.getGroups();var _389=item.getGroups();for(var i=0;i<_388.length;i++){var _38b=_389[i];if(_389.indexOf(_388[i])<0&&_37b[_38b]){if(!_385){_385=true;_37f.push(item);}delete _37b[_38b][_387.getJID().toString()];}}}else{_386=true;_37d.push(item);}if(!_385&&!_386&&(_387.getName()!=item.getName()||_387.getSubscription()!=item.getSubscription())){_385=true;_37f.push(item);}_37c[jid]=item;var _38c=item.getGroups();for(var i=0;i<_38c.length;i++){var _38e=_38c[i];if(!_37b[_38e]){_37b[_38e]={};}if(!_37b[_38e][item.getJID().toString()]&&!_385&&!_386){_385=true;_37f.push(item);}_37b[_38e][item.getJID().toString()]=item;}if(_38c.length==0){if(!_37b["unfiled"]){_37b["unfiled"]={};}if(!_37b["unfiled"][item.getJID().toString()]&&!_385&&!_386){_385=true;_37f.push(item);}_37b["unfiled"][item.getJID().toString()]=item;}});if(_379){this._fireRosterUpdates(_37d,_37f,_37e);}},_fireRosterUpdates:function(_38f,_390,_391){this.rosterListeners.each(function(_392){if(_38f.length>0&&_392.onAdded){_392.onAdded(_38f);}if(_390.length>0&&_392.onUpdated){_392.onUpdated(_390);}if(_391.length>0&&_392.onRemoved){_392.onRemoved(_391);}});},addEntry:function(jid,name,_395){var _396=new org.jive.spank.roster.Packet("set");var item=_396.addItem(jid,name);if(_395){item.addGroups(_395);}console.debug("adding contact: %x",_396.doc.documentElement);this.getConnection().sendPacket(_396);var _398=new XMPP.Presence(jid);_398.setType("subscribe");this.getConnection().sendPacket(_398);},removeEntry:function(jid){var _39a=new org.jive.spank.roster.Packet("set");var item=_39a.addItem(jid);item.setSubscription("remove");console.debug("removing roster entry: %x",_39a.doc.documentElement);this.getConnection().sendPacket(_39a);},addRosterListener:function(_39c){this.rosterListeners.push(_39c);},removeRosterListener:function(_39d){if(!_39d){return;}var _39e=this.rosterListeners.indexOf(_39d);if(_39e>=0){this.rosterListeners.splice(_39e,1);}},destroy:function(){this.rosterListeners.clear();this.getConnection=Prototype.emptyFunction;delete this._roster;delete this._users;delete this._handleRosterAdd;this.onLoadCallback=Prototype.emptyFunction;delete this._initialRequestID;}};org.jive.spank.disco={_connections:new Array(),getManager:function(_39f){var sid=_39f._sid;if(org.jive.spank.disco._connections[sid]==null){org.jive.spank.disco._connections[sid]=new org.jive.spank.disco.Manager(_39f);_39f.addConnectionListener({connectionClosed:function(){delete org.jive.spank.disco._connections[sid];}});}return org.jive.spank.disco._connections[sid];}};org.jive.spank.disco.Manager=function(_3a1){this._connection=_3a1;var self=this;this.features=new Array();this.infoCache={};var _3a3=new org.jive.spank.PacketFilter(function(_3a4){self._handleDiscoResquest(_3a4);},function(_3a5){return _3a5.getPacketType()=="iq"&&_3a5.getType()=="get"&&_3a5.getQuery()&&_3a5.getQuery().getAttribute("xmlns")=="http://jabber.org/protocol/disco#info";});_3a1.addPacketFilter(_3a3);_3a1.addConnectionListener({connectionClosed:function(){self.destroy();}});};org.jive.spank.disco.Manager.prototype={getCategory:function(jid,_3a7){var _3a8=this.infoCache[jid.toString()];if(!_3a8||_3a7){this.discoverInfo(null,jid);return null;}if(_3a8.getType()!="result"){return null;}var _3a9=_3a8.getExtension("query");var info=_3a9.childNodes;for(var i=0;i<info.length;i++){if(info[i].tagName=="identity"){return info[i].getAttribute("category");}}return null;},hasFeature:function(jid,_3ad,_3ae){var _3af=this.infoCache[jid.toString()];if(!_3af||_3ae){this.discoverInfo(null,jid);return false;}if(_3af.getType()!="result"){return false;}var _3b0=_3af.getExtension("query");var info=_3b0.childNodes;for(var i=0;i<info.length;i++){if(info[i].tagName=="feature"){if(info[i].getAttribute("var")==_3ad){return true;}}}return false;},discoverInfo:function(_3b3,jid,node){var _3b6=new XMPP.IQ("get",this._connection._jid,jid.toString());var id=_3b6.getID();var _3b8=_3b6.setQuery("http://jabber.org/protocol/disco#info");if(node){_3b8.setAttribute("node",node);}var self=this;this._connection.sendPacket(_3b6,new org.jive.spank.PacketFilter(function(_3ba){self.infoCache[jid.toString()]=_3ba;if(_3b3){_3b3(_3ba);}},function(_3bb){return _3bb.getID()==id;}));},discoverItems:function(_3bc,jid,node){if(!_3bc){return;}var _3bf=new XMPP.IQ("get",this._connection._jid,jid.toString());var id=_3bf.getID();var _3c1=_3bf.setQuery("http://jabber.org/protocol/disco#items");if(node){_3c1.setAttribute("node",node);}this._connection.sendPacket(_3bf,new org.jive.spank.PacketFilter(_3bc,function(_3c2){return _3c2.getID()==id;}));},addFeature:function(_3c3){this.features.push(_3c3);},removeFeature:function(_3c4){var _3c5=this.features.indexOf(_3c4);if(_3c5>=0){this.features.splice(_3c5,1);}},_handleDiscoResquest:function(get){var _3c7=new XMPP.IQ("result",this._connection._jid,get.getFrom());_3c7.setID(get.getID());var _3c8=_3c7.setQuery("http://jabber.org/protocol/disco#info");var _3c9=_3c8.appendChild(_3c7.doc.createElement("identity"));_3c9.setAttribute("category","client");_3c9.setAttribute("name","spank");_3c9.setAttribute("type","web");for(var i=0;i<this.features.length;i++){var _3cb=this.features[i];var _3cc=_3c8.appendChild(_3c7.doc.createElement("feature"));_3cc.setAttribute("var",_3cb);}this._connection.sendPacket(_3c7);},destroy:function(){this.infoCache={};var _3cd=org.jive.spank.disco._connections.indexOf(this);if(_3cd>=0){org.jive.spank.disco._connections.splice(_3cd,1);}}};org.jive.spank.muc={};org.jive.spank.muc.Manager=function(_3ce,_3cf){this._connection=_3ce;var self=this;_3ce.addConnectionListener({connectionClosed:function(){self.destroy();}});this.invitationListeners=new Array();this.rooms=new Array();this.chatManager=_3cf;org.jive.spank.disco.getManager(_3ce).addFeature("http://jabber.org/protocol/muc");};org.jive.spank.muc.Manager.prototype={getConferenceServers:function(_3d1,_3d2){if(!_3d2){_3d2=new XMPP.JID(this._connection.domain);}var _3d3=function(_3d4){var _3d5=_3d4.getExtension("query");var _3d6=_3d5.childNodes;for(var i=0;i<_3d6.length;i++){var info=_3d6[i];if(info.tagName=="feature"){if(info.getAttribute("var")=="http://jabber.org/protocol/muc"){_3d1(_3d4.getFrom());return;}}}};var _3d9=function(_3da){var _3db=_3da.getExtension("query");var _3dc=_3db.childNodes;var _3dd={};for(var i=0;i<_3dc.length;i++){var jid=_3dc[i].getAttribute("jid");if(!jid){continue;}org.jive.spank.disco.getManager(this._connection).discoverInfo(_3d3,new XMPP.JID(jid));}}.bind(this);org.jive.spank.disco.getManager(this._connection).discoverItems(_3d9,_3d2);},retrieveRooms:function(_3e0,_3e1){if(!_3e0||!_3e1){return;}var _3e2=function(_3e3){var _3e4=_3e3.getExtension("query");var _3e5=_3e4.childNodes;var _3e6={};for(var i=0;i<_3e5.length;i++){var jid=_3e5[i].getAttribute("jid");if(!jid){continue;}var name=_3e5[i].getAttribute("name");_3e6[jid]={name:name};}_3e1(_3e6);};org.jive.spank.disco.getManager(this._connection).discoverItems(_3e2,_3e0);},retrieveRoomsInfo:function(_3ea,_3eb){if(!_3ea||!_3eb){return;}var _3ec=0;var _3ed=function(_3ee){var jid=_3ee.getFrom().toString();var _3f0=_3ee.getExtension("query");var info=_3f0.childNodes;var room=_3ea[jid];if(room){for(var i=0;i<info.length;i++){if(info[i].tagName=="feature"){}else{if(info[i].tagName=="x"){var _3f4=new XMPP.XData(null,info[i]);var _3f5=_3f4.getFields();for(var _3f6 in _3f5){_3ea[jid][_3f6]={};for(var _3f7 in _3f5[_3f6]){_3ea[jid][_3f6][_3f7]=_3f5[_3f6][_3f7];}}}}}}if(--_3ec<=0){_3eb(_3ea);}};for(var room in _3ea){_3ec++;org.jive.spank.disco.getManager(this._connection).discoverInfo(_3ed,room);}},createRoom:function(_3f9){this.chatManager.registerDomain(_3f9.getDomain(),true);return new org.jive.spank.muc.Room(this,_3f9);},getRoom:function(_3fa){return this.rooms.detect(function(_3fb,_3fc){return _3fb.jid.toString()==_3fa.toString();});},_addRoom:function(room){this.rooms.push(room);},_removeRoom:function(room){if(!room){return;}var _3ff=this.rooms.indexOf(room);if(_3ff>=0){this.rooms.splice(_3ff,1);}},addInvitationsListener:function(_400){if(!(_400 instanceof Function)){throw Error("invitation listener must be a function.");}var _401=this.invitationListeners;if(this.invitationListeners.length<=0){this.invitationFilter=new org.jive.spank.PacketFilter(function(_402){var _403=new org.jive.spank.muc.User(null,null,_402.rootNode.cloneNode(true));var _404=_403.getInvite();if(_404){_401.each(function(_405){_405(_404);});}},function(_406){if(_406.getPacketType()!="message"){return false;}var ex=_406.getExtension("x");if(!ex){return false;}return ex.getAttribute("xmlns")=="http://jabber.org/protocol/muc#user";});this._connection.addPacketFilter(this.invitationFilter);}this.invitationListeners.push(_400);},removeInvitationsListener:function(_408){if(!_408||!(_408 instanceof Function)){throw Error("listeners must be a function");}var _409=this.invitationListeners.indexOf(_408);if(_409>=0){this.invitationListeners.splice(_409,1);}if(this.invitationListeners.size()<=0&&this.invitationFilter){this._connection.removePacketFilter(this.invitationFilter);delete this.invitationFilter;}},declineInvitation:function(from,room,_40c){if(!room||!from){throw Error("Cannot decline invitation, invitiation missing information");}var _40d=new org.jive.spank.muc.User(room);_40d.setDecline(from,_40c);this._connection.sendPacket(_40d);},destroy:function(){for(var i=0;i<this.rooms.length;i++){this.rooms[i].leave(true);}this.rooms.clear();this.invitationListeners.clear();}};org.jive.spank.muc.Room=function(_40f,_410){this.manager=_40f;this.connection=_40f._connection;this.jid=_410;this.presenceListeners=new Array();this.messageListeners=new Array();this.isJoined=false;};org.jive.spank.muc.Room.prototype={join:function(_411,_412,_413,_414,_415){var _416=this.jid;var _417=new XMPP.Presence(_416.toString()+"/"+_411);var _418=_417.addExtension("x","http://jabber.org/protocol/muc");if(_412){var _419=_418.appendChild(_417.doc.createElement("password"));_419.appendChild(_417.doc.createTextNode(_412));}this._initPresenceManager(_411,_415);if(_414){this._initMessageListener(_414);}var _41a;if(_413&&(_413.onSuccess||_413.onError)){var room=this;_41a=new org.jive.spank.PacketFilter(function(_41c){if(_41c.getError()&&_413.onError){this.presenceManager.destroy();this.presenceManager=undefined;this.connection.removePacketFilter(this.messageFilter);_413.onError(_41c);}else{if(!_41c.getError()&&_413.onSuccess){this.manager._addRoom(this);this.nickname=_411;room.occupantJid=new XMPP.JID(_416.toString()+"/"+_411);room.isJoined=true;this.presenceManager._handlePresencePacket(_41c);_413.onSuccess(new org.jive.spank.muc.Occupant(_41c));}}_413=Prototype.emptyFunction;}.bind(this),function(_41d){return _41d.getFrom().toString()==_417.getTo().toString();});}this.connection.sendPacket(_417,_41a);},create:function(_41e,_41f,_420,_421,_422){var _423={};if(_420.onSuccess){_423.onSuccess=this._createSuccess.bind(this,_420.onSuccess,_41f,_421,_422);}this.join(_41e,null,_423);},_createSuccess:function(_424,_425,_426,_427,_428){var _429=function(_42a,_42b,_42c,_42d,_42e,room,_430){var _431=_430.getAnswerForm();for(var _432 in _42b){_431.setAnswer(_432,[_42b[_432]]);}this.sendConfigurationForm(_431);this.addOccupantListener(_42e);this._initMessageListener(_42d);_42c(_42a);_42c=Prototype.emptyFunction;};this.getConfigurationForm(_429.bind(this,_428,_425,_424,_426,_427));},leave:function(_433){this.isJoined=false;this.connection.removePacketFilter(this.messageFilter);delete this.connection;try{var _434=new XMPP.Presence();_434.setType("unavailable");this.presenceManager.sendPresence(_434);}catch(error){}this.presenceManager.destroy();this.presenceManager=undefined;if(!_433){this.manager._removeRoom(this);}},_initPresenceManager:function(_435,_436){this.presenceManager=new org.jive.spank.presence.Manager(this.connection,new XMPP.JID(this.jid.toString()+"/"+_435));if(_436){this.addOccupantListener(_436);}},addOccupantListener:function(_437){var _438=function(_439){if(!_439.getError()){_437(new org.jive.spank.muc.Occupant(_439));}};this.presenceManager.addPresenceListener(_438);},getOccupants:function(){var _43a=new Array();var _43b=this.presenceManager._presence[this.jid];if(!_43b){return _43a;}var _43c=_43b.resources;for(var _43d in _43c){var _43e=_43c[_43d];if(_43e.getType!="unavailable"){_43a.push(new org.jive.spank.muc.Occupant(_43e));}}return _43a;},getOccupant:function(nick){var _440=this.jid+"/"+nick;var _441=this.presenceManager._presence[this.jid].resources[nick];if(_441==null||_441.getType()=="unavailable"){return null;}else{return new org.jive.spank.muc.Occupant(_441);}},_initMessageListener:function(_442){var room=this;this.messageFilter=new org.jive.spank.PacketFilter(function(_444){room.messageListeners.each(function(_445){var _446=false;if(_444.getSubject()&&_445.subjectUpdated){_445.subjectUpdated(room,_444.getFrom(),_444.getSubject());_446=true;}var ex=_444.getExtension("x");if(ex){var _448=ex.getAttribute("xmlns")=="http://jabber.org/protocol/muc#user";if(_448&&_445.invitationDeclined){var user=new org.jive.spank.muc.User(null,null,_444.rootNode);var _44a=user.getDecline();if(_44a){_445.invitationDeclined(_44a);_446=true;}}}if(_445.messageReceived&&!_446){_445.messageReceived(_444);}});},function(_44b){return _44b.getFrom().toBareJID()==room.jid.toBareJID()&&_44b.getPacketType()=="message"&&(_44b.getType()=="groupchat"||_44b.getType()=="normal");});this.connection.addPacketFilter(this.messageFilter);if(_442){this.messageListeners.push(_442);}},sendMessage:function(_44c,_44d){if(!_44d){_44d=new XMPP.Message("groupchat",this.connection,this.jid);}else{_44d.setType("groupchat");_44d.setFrom(this.jid);}_44d.setBody(_44c);this.connection.sendPacket(_44d);},addMessageListener:function(_44e){if(!_44e){throw Error("listeners cannot be null");}this.messageListeners.push(_44e);},removeMessageListener:function(_44f){if(!_44f){throw Error("listeners must be a function");}var _450=this.messageListeners.indexOf(_44f);if(_450>=0){this.messageListeners.splice(_450,1);}},setSubject:function(_451){var _452=new XMPP.Message(this.jid);var ex=_452.addExtension("subject");ex.appendChild(_452.doc.createTextNode(_451));this.connection.sendPacket(_452);},invite:function(jid,_455){var _456=new org.jive.spank.muc.User(this.jid);_456.setInvite(jid,_455);this.connection.sendPacket(_456);},changeNickname:function(_457){if(!this.isJoined){throw Error("Cannot change nickname if not in room.");}var _458=new XMPP.Presence();_458.setTo(new XMPP.JID(this.jid.toBareJID()+"/"+_457));this.connection.sendPacket(_458);},getConfigurationForm:function(_459){var iq=new XMPP.IQ("get",this.jid,this.jid.getBareJID());iq.setQuery("http://jabber.org/protocol/muc#owner");var _45b=org.jive.spank.PacketFilter.filter.IDFilter(function(_45c){if(_45c.getExtension("x","jabber:x:data")){_459(this.jid.getBareJID(),new XMPP.XData(null,_45c.getExtension("x","jabber:x:data")));}}.bind(this),iq);this.connection.sendPacket(iq,_45b);},sendConfigurationForm:function(form,_45e){var iq=new XMPP.IQ("set",this.jid,this.jid.getBareJID());var _460=iq.setQuery("http://jabber.org/protocol/muc#owner");var _461=form.rootNode.cloneNode(true);iq.doc.importNode(_461,true);_460.appendChild(_461);var _462=_461.childNodes;for(var i=_462.length-1;i>=0;i--){if(!_462[i].hasChildNodes()){_461.removeChild(_462[i]);}}var _464;if(_45e){org.jive.spank.PacketFilter.filter.IDFilter(function(_465,jid){_45e(jid.getBareJID());}.bind(this),this.jid);}this.connection.sendPacket(iq,_464);}};org.jive.spank.muc.Occupant=function(_467){this.presence=_467;};org.jive.spank.muc.Occupant.prototype={getAffiliation:function(){var user=this.presence.getExtension("x");if(user==null){return null;}return user.firstChild.getAttribute("affiliation");},getRole:function(){var user=this.presence.getExtension("x");if(user==null){return null;}return user.firstChild.getAttribute("role");},getNick:function(){return this.presence.getFrom().getResource();},getRoom:function(){return this.presence.getFrom().toBareJID();}};org.jive.spank.PacketFilter=function(_46a,_46b){if(!_46a){throw Error("Callback must be specified");}this.getFilterTest=function(){return _46b;};this.getCallback=function(){return _46a;};};org.jive.spank.PacketFilter.prototype={accept:function(_46c){if(!_46c||!(_46c instanceof XMPP.Packet)){return;}var _46d=this.getFilterTest();var _46e=true;if(_46d){_46e=_46d(_46c);}if(_46e){var _46f=this.getCallback();_46f(_46c);}return _46e;}};org.jive.spank.PacketFilter.filter={IDFilter:function(_470,_471){return new org.jive.spank.PacketFilter(_470,function(_472,_473){return _473.getID()==_472.getID();}.bind(this,_471));}};org.jive.spank.x={};org.jive.spank.x.chatstate={_connections:new Array(),getManager:function(_474){if(org.jive.spank.x.chatstate._connections[_474.getConnection()._sid]==null){org.jive.spank.x.chatstate._connections[_474.getConnection()._sid]=new org.jive.spank.x.chatstate.Manager(_474);}return org.jive.spank.x.chatstate._connections[_474.getConnection()._sid];}};org.jive.spank.x.chatstate.Manager=function(_475){this._manager=_475;this._connection=_475.getConnection();this._lastState={};this._lastStateSent={};this._stateListeners=new Array();var self=this;this._connection.addPacketFilter(new org.jive.spank.PacketFilter(this._handleIncomingState.bind(this),function(_477){return _477.getPacketType()=="message"&&(_477.getType()=="chat"||_477.getType()=="groupchat")&&_477.getExtension(null,"http://jabber.org/protocol/chatstates")&&!_477.getExtension("x","jabber:x:delay");}));_475.getConnection().addConnectionListener({connectionClosed:function(){self.destroy();}});org.jive.spank.disco.getManager(_475.getConnection()).addFeature("http://jabber.org/protocol/chatstates");};org.jive.spank.x.chatstate.Manager.prototype={setCurrentState:function(_478,jid,_47a,_47b){var _47c=false;if(!_47a){_47a=new XMPP.Message((_47b?"groupchat":"chat"),null,jid);_47c=true;}if(!_47b&&!this.shouldSendState(jid)){if(_47c){return null;}else{return _47a;}}_478=(_478?_478:"active");_47a.addExtension(_478,"http://jabber.org/protocol/chatstates");this._lastStateSent[jid.toString()]=_478;return _47a;},shouldSendState:function(jid){if(this._lastState[jid.toString()]){return this._lastState[jid.toString()];}if(!jid.getResource()){return !this._lastStateSent[jid.toString()];}var _47e=org.jive.spank.disco.getManager(this._connection);var _47f=_47e.getCategory(jid);if(!_47f){return false;}else{if(_47f=="conference"){return true;}}return _47e.hasFeature(jid,"http://jabber.org/protocol/chatstates");},addStateListener:function(_480){if(_480&&_480 instanceof Function){this._stateListeners.push(_480);}},removeStateListener:function(_481){if(_481){var i=this._stateListeners.indexOf(_481);if(i>=0){this._stateListeners.splice(i,1);}}},_handleIncomingState:function(_483){var from=_483.getFrom().toString();var _485=_483.getExtension(null,"http://jabber.org/protocol/chatstates");this._lastState[from]=_485.tagName;for(var i=0;i<this._stateListeners.length;i++){this._stateListeners[i](_483.getFrom(),_485.tagName,_483.getType()=="groupchat");}},destroy:function(){}};var util={XML:{element:function(name,_488,_489){var _48a="";if(_489){_48a=this.formatAttributes(_489);}var xml;if(!_488){xml="<"+name+_48a+"/>";}else{xml="<"+name+_48a+">"+_488+"</"+name+">";}return xml;},formatAttributes:function(_48c){var _48d="";for(var attr in _48c){var _48f=_48c[attr];_48d+=" "+attr+"=\""+_48f+"\"";}return _48d;}},HTTP:{requestCount:0,maxConcurrentRequests:2,failureState:false,pendingRequests:new Array(),doRequest:function(url,_491,_492,_493,_494){if(this.failureState){throw Error("HTTP connection in failure state and must be reset.");}if(this.requestCount>=this.maxConcurrentRequests){this.pendingRequests.push({requestURL:url,requestBody:_491,requestCallback:_492,requestFailure:_493,requestException:_494});return;}var _495=this.pendingRequests;var _496=function(_497){util.HTTP.requestCount--;if(_495.length>0){var _498=_495.splice(0,1)[0];util.HTTP.doRequest(_498.requestURL,_498.requestBody,_498.requestCallback,_498.requestFailure,_498.requestException);}if(_492){_492(_497);}};var _499=function(_49a,_49b){util.HTTP.requestCount--;util.HTTP.failureState=true;if(!_493){return;}_495.splice(0,0,{requestURL:url,requestBody:_491,requestCallback:_492,requestFailure:_493,requestException:_494});_493(_49a,_49b);};var _49c=function(_49d,_49e){util.HTTP.requestCount--;util.HTTP.failureState=true;console.error("Request exception! "+_49e);if(!_494){return;}_495.splice(0,0,{requestURL:url,requestBody:_491,requestCallback:_492,requestFailure:_493,requestException:_494});_494(_49d,_49e);};this.requestCount++;var _49f;if(typeof Flash!="undefined"){_49f=new Flash.request();_49f.onload=_496;_49f.open("POST",url);_49f.send(_491);}else{_49f=new Ajax.Request(url,{method:"post",postBody:_491,onSuccess:_496,onException:_49c,onFailure:_499});}},reset:function(){this.failureState=false;this.pendingRequests=new Array();}},Integer:{randomInt:function(_4a0,_4a1,_4a2){_4a0=Math.floor(_4a0);_4a1=Math.floor(_4a1);return (Math.floor(_4a0+((_4a1-_4a0+1)*Math.random((_4a2!=null)?_4a2:0))));}},StringUtil:{randomString:function(len){var _4a4="";var _4a5=0;var _4a6="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var intI=0;intI<len;intI++){_4a5=util.Integer.randomInt(0,(_4a6.length-1),intI);_4a4+=_4a6.charAt(_4a5);}return _4a4;}}};var XMPP={};XMPP.Packet=function(){};XMPP.Packet.packetID=1;XMPP.Packet.prototype={idBase:util.StringUtil.randomString(5),_init:function(_4a8,from,to,_4ab){this.doc=Sarissa.getDomDocument();var _4ac=!_4ab;if(!_4ab){_4ab=this.doc.createElement(_4a8);}else{if(!_SARISSA_IS_IE){_4ab=this.doc.importNode(_4ab,true);}}this.doc.appendChild(_4ab);this.rootNode=this.doc.firstChild;if(_4ac){this.addAttributes({id:this._nextPacketID()});this.setFrom(from);this.setTo(to);}},getPacketType:function(){return this.rootNode.tagName;},getID:function(){return this.rootNode.getAttribute("id");},setID:function(id){this.rootNode.setAttribute("id",id);},_nextPacketID:function(){return this.idBase+"-"+XMPP.Packet.packetID++;},removeAttributes:function(_4ae){for(var i=0;i<_4ae.length;i++){this.rootNode.removeAttribute(_4ae[i]);}},addAttributes:function(_4b0){for(var attr in _4b0){this.rootNode.setAttribute(attr,_4b0[attr]);}},setFrom:function(_4b2){if(!_4b2||_4b2==""){this.removeAttributes($A("from"));}else{this.addAttributes({from:_4b2});}},getFrom:function(){if(this.from){return this.from;}var from=this.rootNode.getAttribute("from");if(!from){this.from=null;}else{this.from=new XMPP.JID(from);}return this.from;},setTo:function(_4b4){this.to=null;if(!_4b4||_4b4==""){this.removeAttributes($A("to"));}else{this.addAttributes({to:_4b4});}},getTo:function(){if(this.to){return this.to;}var to=this.rootNode.getAttribute("to");if(!to){this.to=null;}else{this.to=new XMPP.JID(to);}return this.to;},setXMLNS:function(_4b6){if(!_4b6||_4b6==""){this.removeAttributes($A("xmlns"));}else{this.addAttributes({xmlns:_4b6});}},toXML:function(){var xml=this.doc.xml?this.doc.xml:(new XMLSerializer()).serializeToString(this.doc);if(xml.indexOf("<?xml version=\"1.0\"?>")>=0){xml=xml.substr("<?xml version=\"1.0\"?>".length);}return xml;},addExtension:function(_4b8,_4b9){if(_4b9&&this.doc.createElementNS){this.extension=this.rootNode.appendChild(this.doc.createElementNS(_4b9,_4b8));}else{this.extension=this.rootNode.appendChild(this.doc.createElement(_4b8));}if(_4b9){this.extension.setAttribute("xmlns",_4b9);}return this.extension;},addTextExtension:function(_4ba,_4bb){var _4bc=this.addExtension(_4ba);_4bc.appendChild(this.doc.createTextNode(_4bb));},getExtension:function(_4bd,_4be){var _4bf=this.getExtensions(_4bd,_4be);if(!_4bf||_4bf.length<=0){return null;}else{return _4bf[0];}},getExtensions:function(_4c0,_4c1){if(!_4c0){_4c0="*";}var _4c2=this.rootNode.getElementsByTagName(_4c0);if(_4c2.length<=0){return new Array();}var _4c3=function(node){if(!_4c1||node.getAttribute("xmlns")==_4c1){return node;}else{return null;}};return $A(_4c2).collect(_4c3).toArray().compact();},removeExtension:function(_4c5){var _4c6=this.rootNode.childNodes;for(var i=0;i<_4c6.length;i++){if(_4c6[i].tagName==_4c5){return this.rootNode.removeChild(_4c6[i]);}}},getError:function(){var _4c8=this.getExtension("error");if(_4c8==null){return null;}else{return _4c8.getAttribute("code");}}};XMPP.IQ=function(_4c9,from,to,_4cc,init){if(init){return;}this._init("iq",from,to,_4cc);if(!_4cc){this.setType(_4c9);}};XMPP.IQ.prototype=Object.extend(new XMPP.Packet(),{setType:function(_4ce){if(!_4ce||_4ce==""){_4ce="get";}this.addAttributes({type:_4ce});},getType:function(){return this.rootNode.getAttribute("type");},setQuery:function(_4cf){return this.addExtension("query",_4cf);},getQuery:function(){return this.getExtension("query");}});XMPP.Registration=function(_4d0,to,_4d2){this._init("iq",null,to,_4d2);if(!_4d2){this.setType(_4d0);this.setQuery("jabber:iq:register");}};XMPP.Registration.prototype=Object.extend(new XMPP.IQ(null,null,null,null,true),{getInstructions:function(){var _4d3=this.getExtension("instructions");if(!_4d3){return null;}else{if(!_4d3.firstChild){return "";}}return _4d3.firstChild.nodeValue;},setAttributes:function(map){for(var attr in map){this.addTextExtension(attr,map[attr]);}}});XMPP.Presence=function(to,from,_4d8){this._init("presence",from,to,_4d8);};XMPP.Presence.prototype=Object.extend(new XMPP.Packet(),{setType:function(_4d9){if(!_4d9||_4d9==""||_4d9=="available"){this.removeAttributes($A("type"));}else{this.addAttributes({type:_4d9});}},getType:function(){var type=this.rootNode.getAttribute("type");return (type?type:"available");},setPriority:function(_4db){if(!_4db||!(_4db instanceof Number)){this.removeExtension("priority");}else{this.addTextExtension("priority",_4db);}},getPriority:function(){var _4dc=this.getExtension("priority");if(_4dc){return _4dc.firstChild.nodeValue;}else{return 0;}},setMode:function(mode){if(!mode||mode==""||mode=="available"){this.removeExtension("show");}else{this.addTextExtension("show",mode);}},getMode:function(){var show=this.getExtension("show");if(show){return show.firstChild.nodeValue;}else{return null;}},setStatus:function(_4df){if(!_4df||_4df==""){this.removeExtension("status");}else{this.addTextExtension("status",_4df);}},getStatus:function(){var _4e0=this.getExtension("status");if(_4e0&&_4e0.firstChild){return _4e0.firstChild.nodeValue;}else{return null;}}});XMPP.Message=function(_4e1,from,to,_4e4){if(!_4e1&&!from&&!to&&!_4e4){return;}this._init("message",from,to,_4e4);if(!_4e4){this.setType(_4e1);}};XMPP.Message.prototype=Object.extend(new XMPP.Packet(),{setType:function(_4e5){if(!_4e5||_4e5==""||_4e5=="normal"){this.removeAttributes($A("type"));}else{this.addAttributes({type:_4e5});}},getType:function(){var type=this.rootNode.getAttribute("type");if(!type){type="normal";}return type;},setSubject:function(_4e7){if(!_4e7||_4e7==""){this.removeExtension("subject");}else{this.addTextExtension("subject",_4e7);}},getSubject:function(){var _4e8=this.getExtension("subject");if(!_4e8){return null;}else{if(!_4e8.firstChild){return "";}}return _4e8.firstChild.nodeValue;},setBody:function(body){if(!body||body==""){this.removeExtension("body");}else{this.addTextExtension("body",body);}},getBody:function(){var body=this.getExtension("body");if(!body){return null;}return {body:body.firstChild.nodeValue,lang:body.getAttribute("lang")};},getBodies:function(){var _4eb=this.getExtensions("body");if(!body){return null;}return _4eb.collect(function(body){return {body:body.firstChild.nodeValue,lang:body.getAttribute("lang")};});},setThread:function(_4ed){if(!_4ed||_4ed==""){this.removeExtension("thread");}else{this.addTextExtension("thread",_4ed);}},getThread:function(){var _4ee=this.getExtension("thread");if(!_4ee){return null;}return _4ee.firstChild.nodeValue;}});org.jive.spank.roster.Packet=function(_4ef,from,to,_4f2){this._init("iq",from,to,_4f2);if(!_4f2){this.setType(_4ef);this.setQuery("jabber:iq:roster");}};org.jive.spank.roster.Packet.prototype=Object.extend(new XMPP.IQ(null,null,null,null,true),{getItems:function(){var _4f3=new Array();var _4f4=this.getExtension().childNodes;for(var i=0;i<_4f4.length;i++){if(_4f4[i].tagName!="item"){continue;}var item=new org.jive.spank.roster.Item(_4f4[i].cloneNode(true));_4f3.push(item);}return _4f3;},addItem:function(jid,name){var item=this.doc.createElement("item");this.getExtension().appendChild(item);item.setAttribute("jid",jid.toBareJID());if(name){item.setAttribute("name",name);}return new org.jive.spank.roster.Item(item);}});org.jive.spank.roster.Item=function(_4fa){this._element=_4fa;};org.jive.spank.roster.Item.prototype={getJID:function(){var attr=this._element.getAttribute("jid");if(!attr){return null;}else{return new XMPP.JID(attr);}},getName:function(){return this._element.getAttribute("name");},isSubscriptionPending:function(){return this._element.getAttribute("ask");},getSubscription:function(){return this._element.getAttribute("subscription");},setSubscription:function(_4fc){this._element.setAttribute("subscription",_4fc);},getGroups:function(){var _4fd=this._element.childNodes;var _4fe=new Array();for(var i=0;i<_4fd.length;i++){if(_4fd[i].tagName=="group"&&_4fd[i].firstChild){_4fe.push(_4fd[i].firstChild.nodeValue);}}return _4fe;},addGroups:function(_500){for(var i=0;i<_500.length;i++){var _502=this._element.appendChild(this._element.ownerDocument.createElement("group"));_502.appendChild(this._element.ownerDocument.createTextNode(_500[i]));}}};org.jive.spank.muc.User=function(to,from,_505){this._init("message",from,to,_505);if(!_505){this.addExtension("x","http://jabber.org/protocol/muc#user");}};org.jive.spank.muc.User.prototype=Object.extend(new XMPP.Message(),{setInvite:function(jid,_507){if(!jid||!(jid instanceof XMPP.JID)){throw Error("Inivte must contain invitee, provide a JID");}var _508=this.doc.createElement("invite");this.getExtension().appendChild(_508);_508.setAttribute("to",jid.toString());if(_507){var _509=this.doc.createElement("reason");_509.appendChild(this.doc.createTextNode(_507));_508.appendChild(_509);}},getInvite:function(){var ex=this.getExtension("x");if(!ex){return null;}var _50b=ex.childNodes;var _50c;for(var i=0;i<_50b.length;i++){var node=_50b[i];if(node.tagName=="invite"){_50c=node;break;}}if(!_50c){return null;}var _50f=_50c.firstChild;if(_50f){_50f=_50f.firstChild.nodeValue;}else{_50f=null;}var _510={};_510["room"]=this.getFrom();_510["from"]=_50c.getAttribute("from");if(_50f){_510["reason"]=_50f;}return _510;},setDecline:function(jid,_512){if(!jid||!(jid instanceof XMPP.JID)){throw Error("Invite must contain invitee, provide a JID");}var _513=this.doc.createElement("decline");this.getExtension().appendChild(_513);_513.setAttribute("to",jid.toString());if(_512){var _514=this.doc.createElement("reason");_514.appendChild(this.doc.createTextNode(_512));_513.appendChild(_514);}},getDecline:function(){var ex=this.getExtension("x");if(!ex){return null;}var _516=ex.childNodes;var _517;for(var i=0;i<_516.length;i++){var node=_516[i];if(node.tagName=="decline"){_517=node;break;}}if(!_517){return null;}var _51a=_517.firstChild;if(_51a){_51a=_51a.firstChild.nodeValue;}else{_51a=null;}var _51b={};_51b.room=this.getFrom();_51b.from=_517.getAttribute("from");if(_51a){_51b.reason=_51a;}return _51b;}});org.jive.spank.muc.Owner=function(_51c,to,from,_51f){this._init("iq",from,to,_51f);if(!_51f){this.setQuery("http://jabber.org/protocol/muc#owner");}};org.jive.spank.muc.Owner.prototype=Object.extend(new XMPP.IQ(null,null,null,null,true),{setDestroy:function(_520,jid){var _522=this.doc.createElement("destroy");this.getExtension().appendChild(_522);if(jid){_522.setAttribute("jid",jid.toString());}if(_520){var _523=this.doc.createElement("reason");_523.appendChild(this.doc.createTextNode(_520));_522.appendChild(_523);}},getDestroy:function(){var _524=this.getExtension().childNodes;var _525;for(var i=0;i<_524.length;i++){if(_524[i].tagName=="destroy"){_525=_524[i];break;}}if(_525){var jid=_525.getAttribute("jid");var _528;if(_525.firstChild){_528=_525.firstChild.firstChild.nodeValue;}return {jid:jid,reason:_528};}else{return null;}},addItem:function(_529,jid,nick,role,_52d,_52e){var item=this.doc.createElement("item");this.getExtension().appendChild(item);if(_529){item.setAttribute("affiliation",_529);}if(jid&&jid instanceof XMPP.JID){item.setAttribute("jid",jid.toString());}if(nick){item.setAttribute("nick",nick);}if(role){item.setAttribute("role",role);}if(_52d){var _530=this.doc.createElement("reason");_530.appendChild(this.doc.createTextNode(_52d));destroy.appendChild(_530);}if(_52e){var _531=this.doc.createElement("actor");_531.setAttribute("jid",_52e);destroy.appendChild(_531);}}});XMPP.JID=function(jid){this.jid=jid.toLowerCase();};XMPP.JID.prototype={toString:function(){return this.jid;},toBareJID:function(){if(!this.bareJID){var i=this.jid.indexOf("/");if(i<0){this.bareJID=this.jid;}else{this.bareJID=this.jid.slice(0,i);}}return this.bareJID;},getBareJID:function(){return new XMPP.JID(this.toBareJID());},getResource:function(){var i=this.jid.indexOf("/");if(i<0){return null;}else{return this.jid.slice(i+1);}},getNode:function(){var i=this.jid.indexOf("@");if(i<0){return null;}else{return this.jid.slice(0,i);}},getDomain:function(){var i=this.jid.indexOf("@");var j=this.jid.indexOf("/");if(i<0){return null;}else{if(j<0){return this.jid.slice(i+1);}else{return this.jid.slice(i+1,j);}}}};XMPP.PacketExtension=function(){};XMPP.PacketExtension.prototype={_init:function(_538,_539,_53a){this.doc=Sarissa.getDomDocument();var _53b=!_53a;if(!_53a){_53a=this.doc.createElementNS(_539,_538);}else{if(!_SARISSA_IS_IE){_53a=this.doc.importNode(_53a,true);}}this.doc.appendChild(_53a);this.rootNode=this.doc.firstChild;}};XMPP.XData=function(type,_53d){this._init("x","jabber:x:data",_53d);if(type){this.setType(type);}};XMPP.XData.prototype=Object.extend(new XMPP.PacketExtension(),{getType:function(){this.rootNode.getAttribute("type");},setType:function(type){if(!type){type="form";}this.rootNode.setAttribute("type",type);},getFields:function(){var _53f=this.rootNode.childNodes;var _540={};for(var i=0;i<_53f.length;i++){var _542=_53f[i];if(_542.tagName!="field"||_542.getAttribute("type")=="hidden"){continue;}var _543=_542.getAttribute("var");var _544=_542.getAttribute("label");var _545=new Array();var _546=_542.childNodes;for(var j=0;j<_546.length;j++){if(_546[j].tagName!="value"||!_546[j].firstChild){continue;}_545.push(_546[j].firstChild.nodeValue);}_540[_543]={fieldLabel:_544,values:_545};}return _540;},getAnswerForm:function(){var _548=new XMPP.XData("submit");var _549=$A(this.rootNode.childNodes);_549.each(function(_54a){if(_54a.tagName!="field"||!_54a.getAttribute("var")){return;}var _54b=_54a.getAttribute("type")=="hidden";var node=_548.doc.importNode(_54a.cloneNode(_54b),true);_548.rootNode.appendChild(node);});return _548;},setAnswer:function(_54d,_54e){var _54f=this.getField(_54d);if(!_54f){return;}_54e.each(function(_550){var _551=_54f.appendChild(this.doc.createElement("value"));_551.appendChild(this.doc.createTextNode(_550));}.bind(this));},getField:function(_552){return $A(this.rootNode.childNodes).detect(function(_553){return _553.getAttribute("var")==_552;});}});XMPP.DelayInformation=function(_554){this.element=_554;};XMPP.DelayInformation.prototype={getDate:function(){var _555=this.element.getAttribute("stamp");var date=new Date();var _557=_555.split("T");date.setUTCFullYear(_557[0].substr(0,4),_557[0].substr(4,2)-1,_557[0].substr(6,2));var time=_557[1].split(":");date.setUTCHours(time[0],time[1],time[2]);return date;}};util.base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(_559){var _55a="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;_559=util.base64._utf8_encode(_559);while(i<_559.length){chr1=_559.charCodeAt(i++);chr2=_559.charCodeAt(i++);chr3=_559.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else{if(isNaN(chr3)){enc4=64;}}_55a=_55a+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);}return _55a;},decode:function(_55d){var _55e="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;_55d=_55d.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<_55d.length){enc1=this._keyStr.indexOf(_55d.charAt(i++));enc2=this._keyStr.indexOf(_55d.charAt(i++));enc3=this._keyStr.indexOf(_55d.charAt(i++));enc4=this._keyStr.indexOf(_55d.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;_55e=_55e+String.fromCharCode(chr1);if(enc3!=64){_55e=_55e+String.fromCharCode(chr2);}if(enc4!=64){_55e=_55e+String.fromCharCode(chr3);}}_55e=util.base64._utf8_decode(_55e);return _55e;},_utf8_encode:function(_562){_562=_562.replace(/\r\n/g,"\n");var _563="";for(var n=0;n<_562.length;n++){var c=_562.charCodeAt(n);if(c<128){_563+=String.fromCharCode(c);}else{if((c>127)&&(c<2048)){_563+=String.fromCharCode((c>>6)|192);_563+=String.fromCharCode((c&63)|128);}else{_563+=String.fromCharCode((c>>12)|224);_563+=String.fromCharCode(((c>>6)&63)|128);_563+=String.fromCharCode((c&63)|128);}}}return _563;},_utf8_decode:function(_566){var _567="";var i=0;var c,c1,c2=0;while(i<_566.length){c=_566.charCodeAt(i);if(c<128){_567+=String.fromCharCode(c);i++;}else{if((c>191)&&(c<224)){c2=_566.charCodeAt(i+1);_567+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2;}else{c2=_566.charCodeAt(i+1);var c3=_566.charCodeAt(i+2);_567+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}}return _567;}};if(typeof console=="undefined"||!console.firebug){var console=new Object;console.trace=function(){};console.log=function(){};console.debug=function(_56b){if(typeof opera!="undefined"){opera.postError(_56b);}};console.info=function(){};console.warn=function(){};console.error=function(_56c){if(typeof opera!="undefined"){opera.postError(_56c);}};console.time=function(){};console.timeEnd=function(){};console.count=function(){};console.profile=function(){};console.profileEnd=function(){};}(function(){var Y=YAHOO.util,getStyle,setStyle,id_counter=0,propertyCache={};var ua=navigator.userAgent.toLowerCase(),isOpera=(ua.indexOf("opera")>-1),isSafari=(ua.indexOf("safari")>-1),isGecko=(!isOpera&&!isSafari&&ua.indexOf("gecko")>-1),isIE=(!isOpera&&ua.indexOf("msie")>-1);var _56f={HYPHEN:/(-[a-z])/i};var _570=function(_571){if(!_56f.HYPHEN.test(_571)){return _571;}if(propertyCache[_571]){return propertyCache[_571];}while(_56f.HYPHEN.exec(_571)){_571=_571.replace(RegExp.$1,RegExp.$1.substr(1).toUpperCase());}propertyCache[_571]=_571;return _571;};if(document.defaultView&&document.defaultView.getComputedStyle){getStyle=function(el,_573){var _574=null;var _575=document.defaultView.getComputedStyle(el,"");if(_575){_574=_575[_570(_573)];}return el.style[_573]||_574;};}else{if(document.documentElement.currentStyle&&isIE){getStyle=function(el,_577){switch(_570(_577)){case "opacity":var val=100;try{val=el.filters["DXImageTransform.Microsoft.Alpha"].opacity;}catch(e){try{val=el.filters("alpha").opacity;}catch(e){}}return val/100;break;default:var _579=el.currentStyle?el.currentStyle[_577]:null;return (el.style[_577]||_579);}};}else{getStyle=function(el,_57b){return el.style[_57b];};}}if(isIE){setStyle=function(el,_57d,val){switch(_57d){case "opacity":if(typeof el.style.filter=="string"){el.style.filter="alpha(opacity="+val*100+")";if(!el.currentStyle||!el.currentStyle.hasLayout){el.style.zoom=1;}}break;default:el.style[_57d]=val;}};}else{setStyle=function(el,_580,val){el.style[_580]=val;};}YAHOO.util.Dom={get:function(el){if(!el){return null;}if(typeof el!="string"&&!(el instanceof Array)){return el;}if(typeof el=="string"){return document.getElementById(el);}else{var _583=[];for(var i=0,len=el.length;i<len;++i){_583[_583.length]=Y.Dom.get(el[i]);}return _583;}return null;},getStyle:function(el,_586){_586=_570(_586);var f=function(_588){return getStyle(_588,_586);};return Y.Dom.batch(el,f,Y.Dom,true);},setStyle:function(el,_58a,val){_58a=_570(_58a);var f=function(_58d){setStyle(_58d,_58a,val);};Y.Dom.batch(el,f,Y.Dom,true);},getXY:function(el){var f=function(el){if(el.parentNode===null||el.offsetParent===null||this.getStyle(el,"display")=="none"){return false;}var _591=null;var pos=[];var box;if(el.getBoundingClientRect){box=el.getBoundingClientRect();var doc=document;if(!this.inDocument(el)&&parent.document!=document){doc=parent.document;if(!this.isAncestor(doc.documentElement,el)){return false;}}var _595=Math.max(doc.documentElement.scrollTop,doc.body.scrollTop);var _596=Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft);return [box.left+_596,box.top+_595];}else{pos=[el.offsetLeft,el.offsetTop];_591=el.offsetParent;if(_591!=el){while(_591){pos[0]+=_591.offsetLeft;pos[1]+=_591.offsetTop;_591=_591.offsetParent;}}if(isSafari&&this.getStyle(el,"position")=="absolute"){pos[0]-=document.body.offsetLeft;pos[1]-=document.body.offsetTop;}}if(el.parentNode){_591=el.parentNode;}else{_591=null;}while(_591&&_591.tagName.toUpperCase()!="BODY"&&_591.tagName.toUpperCase()!="HTML"){if(Y.Dom.getStyle(_591,"display")!="inline"){pos[0]-=_591.scrollLeft;pos[1]-=_591.scrollTop;}if(_591.parentNode){_591=_591.parentNode;}else{_591=null;}}return pos;};return Y.Dom.batch(el,f,Y.Dom,true);},getX:function(el){var f=function(el){return Y.Dom.getXY(el)[0];};return Y.Dom.batch(el,f,Y.Dom,true);},getY:function(el){var f=function(el){return Y.Dom.getXY(el)[1];};return Y.Dom.batch(el,f,Y.Dom,true);},setXY:function(el,pos,_59f){var f=function(el){var _5a2=this.getStyle(el,"position");if(_5a2=="static"){this.setStyle(el,"position","relative");_5a2="relative";}var _5a3=this.getXY(el);if(_5a3===false){return false;}var _5a4=[parseInt(this.getStyle(el,"left"),10),parseInt(this.getStyle(el,"top"),10)];if(isNaN(_5a4[0])){_5a4[0]=(_5a2=="relative")?0:el.offsetLeft;}if(isNaN(_5a4[1])){_5a4[1]=(_5a2=="relative")?0:el.offsetTop;}if(pos[0]!==null){el.style.left=pos[0]-_5a3[0]+_5a4[0]+"px";}if(pos[1]!==null){el.style.top=pos[1]-_5a3[1]+_5a4[1]+"px";}if(!_59f){var _5a5=this.getXY(el);if((pos[0]!==null&&_5a5[0]!=pos[0])||(pos[1]!==null&&_5a5[1]!=pos[1])){this.setXY(el,pos,true);}}};Y.Dom.batch(el,f,Y.Dom,true);},setX:function(el,x){Y.Dom.setXY(el,[x,null]);},setY:function(el,y){Y.Dom.setXY(el,[null,y]);},getRegion:function(el){var f=function(el){var _5ad=new Y.Region.getRegion(el);return _5ad;};return Y.Dom.batch(el,f,Y.Dom,true);},getClientWidth:function(){return Y.Dom.getViewportWidth();},getClientHeight:function(){return Y.Dom.getViewportHeight();},getElementsByClassName:function(_5ae,tag,root){var _5b1=function(el){return Y.Dom.hasClass(el,_5ae);};return Y.Dom.getElementsBy(_5b1,tag,root);},hasClass:function(el,_5b4){var re=new RegExp("(?:^|\\s+)"+_5b4+"(?:\\s+|$)");var f=function(el){return re.test(el["className"]);};return Y.Dom.batch(el,f,Y.Dom,true);},addClass:function(el,_5b9){var f=function(el){if(this.hasClass(el,_5b9)){return;}el["className"]=[el["className"],_5b9].join(" ");};Y.Dom.batch(el,f,Y.Dom,true);},removeClass:function(el,_5bd){var re=new RegExp("(?:^|\\s+)"+_5bd+"(?:\\s+|$)","g");var f=function(el){if(!this.hasClass(el,_5bd)){return;}var c=el["className"];el["className"]=c.replace(re," ");if(this.hasClass(el,_5bd)){this.removeClass(el,_5bd);}};Y.Dom.batch(el,f,Y.Dom,true);},replaceClass:function(el,_5c3,_5c4){if(_5c3===_5c4){return false;}var re=new RegExp("(?:^|\\s+)"+_5c3+"(?:\\s+|$)","g");var f=function(el){if(!this.hasClass(el,_5c3)){this.addClass(el,_5c4);return;}el["className"]=el["className"].replace(re," "+_5c4+" ");if(this.hasClass(el,_5c3)){this.replaceClass(el,_5c3,_5c4);}};Y.Dom.batch(el,f,Y.Dom,true);},generateId:function(el,_5c9){_5c9=_5c9||"yui-gen";el=el||{};var f=function(el){if(el){el=Y.Dom.get(el);}else{el={};}if(!el.id){el.id=_5c9+id_counter++;}return el.id;};return Y.Dom.batch(el,f,Y.Dom,true);},isAncestor:function(_5cc,_5cd){_5cc=Y.Dom.get(_5cc);if(!_5cc||!_5cd){return false;}var f=function(_5cf){if(_5cc.contains&&!isSafari){return _5cc.contains(_5cf);}else{if(_5cc.compareDocumentPosition){return !!(_5cc.compareDocumentPosition(_5cf)&16);}else{var _5d0=_5cf.parentNode;while(_5d0){if(_5d0==_5cc){return true;}else{if(!_5d0.tagName||_5d0.tagName.toUpperCase()=="HTML"){return false;}}_5d0=_5d0.parentNode;}return false;}}};return Y.Dom.batch(_5cd,f,Y.Dom,true);},inDocument:function(el){var f=function(el){return this.isAncestor(document.documentElement,el);};return Y.Dom.batch(el,f,Y.Dom,true);},getElementsBy:function(_5d4,tag,root){tag=tag||"*";var _5d7=[];if(root){root=Y.Dom.get(root);if(!root){return _5d7;}}else{root=document;}var _5d8=root.getElementsByTagName(tag);if(!_5d8.length&&(tag=="*"&&root.all)){_5d8=root.all;}for(var i=0,len=_5d8.length;i<len;++i){if(_5d4(_5d8[i])){_5d7[_5d7.length]=_5d8[i];}}return _5d7;},batch:function(el,_5db,o,_5dd){var id=el;el=Y.Dom.get(el);var _5df=(_5dd)?o:window;if(!el||el.tagName||!el.length){if(!el){return false;}return _5db.call(_5df,el,o);}var _5e0=[];for(var i=0,len=el.length;i<len;++i){if(!el[i]){id=el[i];}_5e0[_5e0.length]=_5db.call(_5df,el[i],o);}return _5e0;},getDocumentHeight:function(){var _5e2=(document.compatMode!="CSS1Compat")?document.body.scrollHeight:document.documentElement.scrollHeight;var h=Math.max(_5e2,Y.Dom.getViewportHeight());return h;},getDocumentWidth:function(){var _5e4=(document.compatMode!="CSS1Compat")?document.body.scrollWidth:document.documentElement.scrollWidth;var w=Math.max(_5e4,Y.Dom.getViewportWidth());return w;},getViewportHeight:function(){var _5e6=self.innerHeight;var mode=document.compatMode;if((mode||isIE)&&!isOpera){_5e6=(mode=="CSS1Compat")?document.documentElement.clientHeight:document.body.clientHeight;}return _5e6;},getViewportWidth:function(){var _5e8=self.innerWidth;var mode=document.compatMode;if(mode||isIE){_5e8=(mode=="CSS1Compat")?document.documentElement.clientWidth:document.body.clientWidth;}return _5e8;}};})();YAHOO.util.Region=function(t,r,b,l){this.top=t;this[1]=t;this.right=r;this.bottom=b;this.left=l;this[0]=l;};YAHOO.util.Region.prototype.contains=function(_5ee){return (_5ee.left>=this.left&&_5ee.right<=this.right&&_5ee.top>=this.top&&_5ee.bottom<=this.bottom);};YAHOO.util.Region.prototype.getArea=function(){return ((this.bottom-this.top)*(this.right-this.left));};YAHOO.util.Region.prototype.intersect=function(_5ef){var t=Math.max(this.top,_5ef.top);var r=Math.min(this.right,_5ef.right);var b=Math.min(this.bottom,_5ef.bottom);var l=Math.max(this.left,_5ef.left);if(b>=t&&r>=l){return new YAHOO.util.Region(t,r,b,l);}else{return null;}};YAHOO.util.Region.prototype.union=function(_5f4){var t=Math.min(this.top,_5f4.top);var r=Math.max(this.right,_5f4.right);var b=Math.max(this.bottom,_5f4.bottom);var l=Math.min(this.left,_5f4.left);return new YAHOO.util.Region(t,r,b,l);};YAHOO.util.Region.prototype.toString=function(){return ("Region {"+"top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+"}");};YAHOO.util.Region.getRegion=function(el){var p=YAHOO.util.Dom.getXY(el);var t=p[1];var r=p[0]+el.offsetWidth;var b=p[1]+el.offsetHeight;var l=p[0];return new YAHOO.util.Region(t,r,b,l);};YAHOO.util.Point=function(x,y){if(x instanceof Array){y=x[1];x=x[0];}this.x=this.right=this.left=this[0]=x;this.y=this.top=this.bottom=this[1]=y;};YAHOO.util.Point.prototype=new YAHOO.util.Region();YAHOO.register("dom",YAHOO.util.Dom,{version:"2.2.0",build:"127"});if(!YAHOO.util.Event){YAHOO.util.Event=function(){var _601=false;var _602=[];var _603=[];var _604=[];var _605=[];var _606=0;var _607=[];var _608=[];var _609=0;var _60a=null;return {POLL_RETRYS:200,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,OBJ:3,ADJ_SCOPE:4,isSafari:(/KHTML/gi).test(navigator.userAgent),webkit:function(){var v=navigator.userAgent.match(/AppleWebKit\/([^ ]*)/);if(v&&v[1]){return v[1];}return null;}(),isIE:(!this.webkit&&!navigator.userAgent.match(/opera/gi)&&navigator.userAgent.match(/msie/gi)),_interval:null,startInterval:function(){if(!this._interval){var self=this;var _60d=function(){self._tryPreloadAttach();};this._interval=setInterval(_60d,this.POLL_INTERVAL);}},onAvailable:function(p_id,p_fn,_610,_611){_607.push({id:p_id,fn:p_fn,obj:_610,override:_611,checkReady:false});_606=this.POLL_RETRYS;this.startInterval();},onContentReady:function(p_id,p_fn,_614,_615){_607.push({id:p_id,fn:p_fn,obj:_614,override:_615,checkReady:true});_606=this.POLL_RETRYS;this.startInterval();},addListener:function(el,_617,fn,obj,_61a){if(!fn||!fn.call){return false;}if(this._isValidCollection(el)){var ok=true;for(var i=0,len=el.length;i<len;++i){ok=this.on(el[i],_617,fn,obj,_61a)&&ok;}return ok;}else{if(typeof el=="string"){var oEl=this.getEl(el);if(oEl){el=oEl;}else{this.onAvailable(el,function(){YAHOO.util.Event.on(el,_617,fn,obj,_61a);});return true;}}}if(!el){return false;}if("unload"==_617&&obj!==this){_603[_603.length]=[el,_617,fn,obj,_61a];return true;}var _61e=el;if(_61a){if(_61a===true){_61e=obj;}else{_61e=_61a;}}var _61f=function(e){return fn.call(_61e,YAHOO.util.Event.getEvent(e),obj);};var li=[el,_617,fn,_61f,_61e];var _622=_602.length;_602[_622]=li;if(this.useLegacyEvent(el,_617)){var _623=this.getLegacyIndex(el,_617);if(_623==-1||el!=_604[_623][0]){_623=_604.length;_608[el.id+_617]=_623;_604[_623]=[el,_617,el["on"+_617]];_605[_623]=[];el["on"+_617]=function(e){YAHOO.util.Event.fireLegacyEvent(YAHOO.util.Event.getEvent(e),_623);};}_605[_623].push(li);}else{try{this._simpleAdd(el,_617,_61f,false);}catch(ex){this.lastError=ex;this.removeListener(el,_617,fn);return false;}}return true;},fireLegacyEvent:function(e,_626){var ok=true,le,lh,li,scope,ret;lh=_605[_626];for(var i=0,len=lh.length;i<len;++i){li=lh[i];if(li&&li[this.WFN]){scope=li[this.ADJ_SCOPE];ret=li[this.WFN].call(scope,e);ok=(ok&&ret);}}le=_604[_626];if(le&&le[2]){le[2](e);}return ok;},getLegacyIndex:function(el,_62a){var key=this.generateId(el)+_62a;if(typeof _608[key]=="undefined"){return -1;}else{return _608[key];}},useLegacyEvent:function(el,_62d){if(this.webkit&&("click"==_62d||"dblclick"==_62d)){var v=parseInt(this.webkit,10);if(!isNaN(v)&&v<418){return true;}}return false;},removeListener:function(el,_630,fn){var i,len;if(typeof el=="string"){el=this.getEl(el);}else{if(this._isValidCollection(el)){var ok=true;for(i=0,len=el.length;i<len;++i){ok=(this.removeListener(el[i],_630,fn)&&ok);}return ok;}}if(!fn||!fn.call){return this.purgeElement(el,false,_630);}if("unload"==_630){for(i=0,len=_603.length;i<len;i++){var li=_603[i];if(li&&li[0]==el&&li[1]==_630&&li[2]==fn){_603.splice(i,1);return true;}}return false;}var _635=null;var _636=arguments[3];if("undefined"==typeof _636){_636=this._getCacheIndex(el,_630,fn);}if(_636>=0){_635=_602[_636];}if(!el||!_635){return false;}if(this.useLegacyEvent(el,_630)){var _637=this.getLegacyIndex(el,_630);var _638=_605[_637];if(_638){for(i=0,len=_638.length;i<len;++i){li=_638[i];if(li&&li[this.EL]==el&&li[this.TYPE]==_630&&li[this.FN]==fn){_638.splice(i,1);break;}}}}else{try{this._simpleRemove(el,_630,_635[this.WFN],false);}catch(ex){this.lastError=ex;return false;}}delete _602[_636][this.WFN];delete _602[_636][this.FN];_602.splice(_636,1);return true;},getTarget:function(ev,_63a){var t=ev.target||ev.srcElement;return this.resolveTextNode(t);},resolveTextNode:function(node){if(node&&3==node.nodeType){return node.parentNode;}else{return node;}},getPageX:function(ev){var x=ev.pageX;if(!x&&0!==x){x=ev.clientX||0;if(this.isIE){x+=this._getScrollLeft();}}return x;},getPageY:function(ev){var y=ev.pageY;if(!y&&0!==y){y=ev.clientY||0;if(this.isIE){y+=this._getScrollTop();}}return y;},getXY:function(ev){return [this.getPageX(ev),this.getPageY(ev)];},getRelatedTarget:function(ev){var t=ev.relatedTarget;if(!t){if(ev.type=="mouseout"){t=ev.toElement;}else{if(ev.type=="mouseover"){t=ev.fromElement;}}}return this.resolveTextNode(t);},getTime:function(ev){if(!ev.time){var t=new Date().getTime();try{ev.time=t;}catch(ex){this.lastError=ex;return t;}}return ev.time;},stopEvent:function(ev){this.stopPropagation(ev);this.preventDefault(ev);},stopPropagation:function(ev){if(ev.stopPropagation){ev.stopPropagation();}else{ev.cancelBubble=true;}},preventDefault:function(ev){if(ev.preventDefault){ev.preventDefault();}else{ev.returnValue=false;}},getEvent:function(e){var ev=e||window.event;if(!ev){var c=this.getEvent.caller;while(c){ev=c.arguments[0];if(ev&&Event==ev.constructor){break;}c=c.caller;}}return ev;},getCharCode:function(ev){return ev.charCode||ev.keyCode||0;},_getCacheIndex:function(el,_64e,fn){for(var i=0,len=_602.length;i<len;++i){var li=_602[i];if(li&&li[this.FN]==fn&&li[this.EL]==el&&li[this.TYPE]==_64e){return i;}}return -1;},generateId:function(el){var id=el.id;if(!id){id="yuievtautoid-"+_609;++_609;el.id=id;}return id;},_isValidCollection:function(o){return (o&&o.length&&typeof o!="string"&&!o.tagName&&!o.alert&&typeof o[0]!="undefined");},elCache:{},getEl:function(id){return document.getElementById(id);},clearCache:function(){},_load:function(e){_601=true;var EU=YAHOO.util.Event;if(this.isIE){EU._simpleRemove(window,"load",EU._load);}},_tryPreloadAttach:function(){if(this.locked){return false;}this.locked=true;var _658=!_601;if(!_658){_658=(_606>0);}var _659=[];for(var i=0,len=_607.length;i<len;++i){var item=_607[i];if(item){var el=this.getEl(item.id);if(el){if(!item.checkReady||_601||el.nextSibling||(document&&document.body)){var _65d=el;if(item.override){if(item.override===true){_65d=item.obj;}else{_65d=item.override;}}item.fn.call(_65d,item.obj);_607[i]=null;}}else{_659.push(item);}}}_606=(_659.length===0)?0:_606-1;if(_658){this.startInterval();}else{clearInterval(this._interval);this._interval=null;}this.locked=false;return true;},purgeElement:function(el,_65f,_660){var _661=this.getListeners(el,_660);if(_661){for(var i=0,len=_661.length;i<len;++i){var l=_661[i];this.removeListener(el,l.type,l.fn);}}if(_65f&&el&&el.childNodes){for(i=0,len=el.childNodes.length;i<len;++i){this.purgeElement(el.childNodes[i],_65f,_660);}}},getListeners:function(el,_665){var _666=[],searchLists;if(!_665){searchLists=[_602,_603];}else{if(_665=="unload"){searchLists=[_603];}else{searchLists=[_602];}}for(var j=0;j<searchLists.length;++j){var _668=searchLists[j];if(_668&&_668.length>0){for(var i=0,len=_668.length;i<len;++i){var l=_668[i];if(l&&l[this.EL]===el&&(!_665||_665===l[this.TYPE])){_666.push({type:l[this.TYPE],fn:l[this.FN],obj:l[this.OBJ],adjust:l[this.ADJ_SCOPE],index:i});}}}}return (_666.length)?_666:null;},_unload:function(e){var EU=YAHOO.util.Event,i,j,l,len,index;for(i=0,len=_603.length;i<len;++i){l=_603[i];if(l){var _66d=window;if(l[EU.ADJ_SCOPE]){if(l[EU.ADJ_SCOPE]===true){_66d=l[EU.OBJ];}else{_66d=l[EU.ADJ_SCOPE];}}l[EU.FN].call(_66d,EU.getEvent(e),l[EU.OBJ]);_603[i]=null;l=null;_66d=null;}}_603=null;if(_602&&_602.length>0){j=_602.length;while(j){index=j-1;l=_602[index];if(l){EU.removeListener(l[EU.EL],l[EU.TYPE],l[EU.FN],index);}j=j-1;}l=null;EU.clearCache();}for(i=0,len=_604.length;i<len;++i){_604[i][0]=null;_604[i]=null;}_604=null;EU._simpleRemove(window,"unload",EU._unload);},_getScrollLeft:function(){return this._getScroll()[1];},_getScrollTop:function(){return this._getScroll()[0];},_getScroll:function(){var dd=document.documentElement,db=document.body;if(dd&&(dd.scrollTop||dd.scrollLeft)){return [dd.scrollTop,dd.scrollLeft];}else{if(db){return [db.scrollTop,db.scrollLeft];}else{return [0,0];}}},regCE:function(){},_simpleAdd:function(){if(window.addEventListener){return function(el,_670,fn,_672){el.addEventListener(_670,fn,(_672));};}else{if(window.attachEvent){return function(el,_674,fn,_676){el.attachEvent("on"+_674,fn);};}else{return function(){};}}}(),_simpleRemove:function(){if(window.removeEventListener){return function(el,_678,fn,_67a){el.removeEventListener(_678,fn,(_67a));};}else{if(window.detachEvent){return function(el,_67c,fn){el.detachEvent("on"+_67c,fn);};}else{return function(){};}}}()};}();(function(){var EU=YAHOO.util.Event;EU.on=EU.addListener;if(document&&document.body){EU._load();}else{EU._simpleAdd(window,"load",EU._load);}EU._simpleAdd(window,"unload",EU._unload);EU._tryPreloadAttach();})();}YAHOO.util.CustomEvent=function(type,_680,_681,_682){this.type=type;this.scope=_680||window;this.silent=_681;this.signature=_682||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent){}var _683="_YUICEOnSubscribe";if(type!==_683){this.subscribeEvent=new YAHOO.util.CustomEvent(_683,this,true);}};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(fn,obj,_686){if(this.subscribeEvent){this.subscribeEvent.fire(fn,obj,_686);}this.subscribers.push(new YAHOO.util.Subscriber(fn,obj,_686));},unsubscribe:function(fn,obj){if(!fn){return this.unsubscribeAll();}var _689=false;for(var i=0,len=this.subscribers.length;i<len;++i){var s=this.subscribers[i];if(s&&s.contains(fn,obj)){this._delete(i);_689=true;}}return _689;},fire:function(){var len=this.subscribers.length;if(!len&&this.silent){return true;}var args=[],ret=true,i;for(i=0;i<arguments.length;++i){args.push(arguments[i]);}var _68e=args.length;if(!this.silent){}for(i=0;i<len;++i){var s=this.subscribers[i];if(s){if(!this.silent){}var _690=s.getScope(this.scope);if(this.signature==YAHOO.util.CustomEvent.FLAT){var _691=null;if(args.length>0){_691=args[0];}ret=s.fn.call(_690,_691,s.obj);}else{ret=s.fn.call(_690,this.type,args,s.obj);}if(false===ret){if(!this.silent){}return false;}}}return true;},unsubscribeAll:function(){for(var i=0,len=this.subscribers.length;i<len;++i){this._delete(len-1-i);}return i;},_delete:function(_693){var s=this.subscribers[_693];if(s){delete s.fn;delete s.obj;}this.subscribers.splice(_693,1);},toString:function(){return "CustomEvent: "+"'"+this.type+"', "+"scope: "+this.scope;}};YAHOO.util.Subscriber=function(fn,obj,_697){this.fn=fn;this.obj=obj||null;this.override=_697;};YAHOO.util.Subscriber.prototype.getScope=function(_698){if(this.override){if(this.override===true){return this.obj;}else{return this.override;}}return _698;};YAHOO.util.Subscriber.prototype.contains=function(fn,obj){if(obj){return (this.fn==fn&&this.obj==obj);}else{return (this.fn==fn);}};YAHOO.util.Subscriber.prototype.toString=function(){return "Subscriber { obj: "+(this.obj||"")+", override: "+(this.override||"no")+" }";};YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(_69b,p_fn,_69d,_69e){this.__yui_events=this.__yui_events||{};var ce=this.__yui_events[_69b];if(ce){ce.subscribe(p_fn,_69d,_69e);}else{this.__yui_subscribers=this.__yui_subscribers||{};var subs=this.__yui_subscribers;if(!subs[_69b]){subs[_69b]=[];}subs[_69b].push({fn:p_fn,obj:_69d,override:_69e});}},unsubscribe:function(_6a1,p_fn,_6a3){this.__yui_events=this.__yui_events||{};var ce=this.__yui_events[_6a1];if(ce){return ce.unsubscribe(p_fn,_6a3);}else{return false;}},unsubscribeAll:function(_6a5){return this.unsubscribe(_6a5);},createEvent:function(_6a6,_6a7){this.__yui_events=this.__yui_events||{};var opts=_6a7||{};var _6a9=this.__yui_events;if(_6a9[_6a6]){}else{var _6aa=opts.scope||this;var _6ab=opts.silent||null;var ce=new YAHOO.util.CustomEvent(_6a6,_6aa,_6ab,YAHOO.util.CustomEvent.FLAT);_6a9[_6a6]=ce;if(opts.onSubscribeCallback){ce.subscribeEvent.subscribe(opts.onSubscribeCallback);}this.__yui_subscribers=this.__yui_subscribers||{};var qs=this.__yui_subscribers[_6a6];if(qs){for(var i=0;i<qs.length;++i){ce.subscribe(qs[i].fn,qs[i].obj,qs[i].override);}}}return _6a9[_6a6];},fireEvent:function(_6af,arg1,arg2,etc){this.__yui_events=this.__yui_events||{};var ce=this.__yui_events[_6af];if(ce){var args=[];for(var i=1;i<arguments.length;++i){args.push(arguments[i]);}return ce.fire.apply(ce,args);}else{return null;}},hasEvent:function(type){if(this.__yui_events){if(this.__yui_events[type]){return true;}}return false;}};YAHOO.util.KeyListener=function(_6b7,_6b8,_6b9,_6ba){if(!_6b7){}else{if(!_6b8){}else{if(!_6b9){}}}if(!_6ba){_6ba=YAHOO.util.KeyListener.KEYDOWN;}var _6bb=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(typeof _6b7=="string"){_6b7=document.getElementById(_6b7);}if(typeof _6b9=="function"){_6bb.subscribe(_6b9);}else{_6bb.subscribe(_6b9.fn,_6b9.scope,_6b9.correctScope);}function handleKeyPress(e,obj){if(!_6b8.shift){_6b8.shift=false;}if(!_6b8.alt){_6b8.alt=false;}if(!_6b8.ctrl){_6b8.ctrl=false;}if(e.shiftKey==_6b8.shift&&e.altKey==_6b8.alt&&e.ctrlKey==_6b8.ctrl){var _6be;var _6bf;if(_6b8.keys instanceof Array){for(var i=0;i<_6b8.keys.length;i++){_6be=_6b8.keys[i];if(_6be==e.charCode){_6bb.fire(e.charCode,e);break;}else{if(_6be==e.keyCode){_6bb.fire(e.keyCode,e);break;}}}}else{_6be=_6b8.keys;if(_6be==e.charCode){_6bb.fire(e.charCode,e);}else{if(_6be==e.keyCode){_6bb.fire(e.keyCode,e);}}}}}this.enable=function(){if(!this.enabled){YAHOO.util.Event.addListener(_6b7,_6ba,handleKeyPress);this.enabledEvent.fire(_6b8);}this.enabled=true;};this.disable=function(){if(this.enabled){YAHOO.util.Event.removeListener(_6b7,_6ba,handleKeyPress);this.disabledEvent.fire(_6b8);}this.enabled=false;};this.toString=function(){return "KeyListener ["+_6b8.keys+"] "+_6b7.tagName+(_6b7.id?"["+_6b7.id+"]":"");};};YAHOO.util.KeyListener.KEYDOWN="keydown";YAHOO.util.KeyListener.KEYUP="keyup";YAHOO.register("event",YAHOO.util.Event,{version:"2.2.0",build:"127"});YAHOO.util.Config=function(_6c1){if(_6c1){this.init(_6c1);}};YAHOO.util.Config.prototype={owner:null,queueInProgress:false,checkBoolean:function(val){if(typeof val=="boolean"){return true;}else{return false;}},checkNumber:function(val){if(isNaN(val)){return false;}else{return true;}}};YAHOO.util.Config.prototype.init=function(_6c4){this.owner=_6c4;this.configChangedEvent=new YAHOO.util.CustomEvent("configChanged");this.queueInProgress=false;var _6c5={};var _6c6={};var _6c7=[];var _6c8=function(key,_6ca){key=key.toLowerCase();var _6cb=_6c5[key];if(typeof _6cb!="undefined"&&_6cb.event){_6cb.event.fire(_6ca);}};this.addProperty=function(key,_6cd){key=key.toLowerCase();_6c5[key]=_6cd;_6cd.event=new YAHOO.util.CustomEvent(key);_6cd.key=key;if(_6cd.handler){_6cd.event.subscribe(_6cd.handler,this.owner,true);}this.setProperty(key,_6cd.value,true);if(!_6cd.suppressEvent){this.queueProperty(key,_6cd.value);}};this.getConfig=function(){var cfg={};for(var prop in _6c5){var _6d0=_6c5[prop];if(typeof _6d0!="undefined"&&_6d0.event){cfg[prop]=_6d0.value;}}return cfg;};this.getProperty=function(key){key=key.toLowerCase();var _6d2=_6c5[key];if(typeof _6d2!="undefined"&&_6d2.event){return _6d2.value;}else{return undefined;}};this.resetProperty=function(key){key=key.toLowerCase();var _6d4=_6c5[key];if(typeof _6d4!="undefined"&&_6d4.event){if(_6c6[key]&&_6c6[key]!="undefined"){this.setProperty(key,_6c6[key]);}return true;}else{return false;}};this.setProperty=function(key,_6d6,_6d7){key=key.toLowerCase();if(this.queueInProgress&&!_6d7){this.queueProperty(key,_6d6);return true;}else{var _6d8=_6c5[key];if(typeof _6d8!="undefined"&&_6d8.event){if(_6d8.validator&&!_6d8.validator(_6d6)){return false;}else{_6d8.value=_6d6;if(!_6d7){_6c8(key,_6d6);this.configChangedEvent.fire([key,_6d6]);}return true;}}else{return false;}}};this.queueProperty=function(key,_6da){key=key.toLowerCase();var _6db=_6c5[key];if(typeof _6db!="undefined"&&_6db.event){if(typeof _6da!="undefined"&&_6db.validator&&!_6db.validator(_6da)){return false;}else{if(typeof _6da!="undefined"){_6db.value=_6da;}else{_6da=_6db.value;}var _6dc=false;for(var i=0;i<_6c7.length;i++){var _6de=_6c7[i];if(_6de){var _6df=_6de[0];var _6e0=_6de[1];if(_6df.toLowerCase()==key){_6c7[i]=null;_6c7.push([key,(typeof _6da!="undefined"?_6da:_6e0)]);_6dc=true;break;}}}if(!_6dc&&typeof _6da!="undefined"){_6c7.push([key,_6da]);}}if(_6db.supercedes){for(var s=0;s<_6db.supercedes.length;s++){var _6e2=_6db.supercedes[s];for(var q=0;q<_6c7.length;q++){var _6e4=_6c7[q];if(_6e4){var _6e5=_6e4[0];var _6e6=_6e4[1];if(_6e5.toLowerCase()==_6e2.toLowerCase()){_6c7.push([_6e5,_6e6]);_6c7[q]=null;break;}}}}}return true;}else{return false;}};this.refireEvent=function(key){key=key.toLowerCase();var _6e8=_6c5[key];if(typeof _6e8!="undefined"&&_6e8.event&&typeof _6e8.value!="undefined"){if(this.queueInProgress){this.queueProperty(key);}else{_6c8(key,_6e8.value);}}};this.applyConfig=function(_6e9,init){if(init){_6c6=_6e9;}for(var prop in _6e9){this.queueProperty(prop,_6e9[prop]);}};this.refresh=function(){for(var prop in _6c5){this.refireEvent(prop);}};this.fireQueue=function(){this.queueInProgress=true;for(var i=0;i<_6c7.length;i++){var _6ee=_6c7[i];if(_6ee){var key=_6ee[0];var _6f0=_6ee[1];var _6f1=_6c5[key];_6f1.value=_6f0;_6c8(key,_6f0);}}this.queueInProgress=false;_6c7=[];};this.subscribeToConfigEvent=function(key,_6f3,obj,_6f5){key=key.toLowerCase();var _6f6=_6c5[key];if(typeof _6f6!="undefined"&&_6f6.event){if(!YAHOO.util.Config.alreadySubscribed(_6f6.event,_6f3,obj)){_6f6.event.subscribe(_6f3,obj,_6f5);}return true;}else{return false;}};this.unsubscribeFromConfigEvent=function(key,_6f8,obj){key=key.toLowerCase();var _6fa=_6c5[key];if(typeof _6fa!="undefined"&&_6fa.event){return _6fa.event.unsubscribe(_6f8,obj);}else{return false;}};this.toString=function(){var _6fb="Config";if(this.owner){_6fb+=" ["+this.owner.toString()+"]";}return _6fb;};this.outputEventQueue=function(){var _6fc="";for(var q=0;q<_6c7.length;q++){var _6fe=_6c7[q];if(_6fe){_6fc+=_6fe[0]+"="+_6fe[1]+", ";}}return _6fc;};};YAHOO.util.Config.alreadySubscribed=function(evt,fn,obj){for(var e=0;e<evt.subscribers.length;e++){var _703=evt.subscribers[e];if(_703&&_703.obj==obj&&_703.fn==fn){return true;}}return false;};YAHOO.widget.Module=function(el,_705){if(el){this.init(el,_705);}else{}};YAHOO.widget.Module.IMG_ROOT=null;YAHOO.widget.Module.IMG_ROOT_SSL=null;YAHOO.widget.Module.CSS_MODULE="module";YAHOO.widget.Module.CSS_HEADER="hd";YAHOO.widget.Module.CSS_BODY="bd";YAHOO.widget.Module.CSS_FOOTER="ft";YAHOO.widget.Module.RESIZE_MONITOR_SECURE_URL="javascript:false;";YAHOO.widget.Module.textResizeEvent=new YAHOO.util.CustomEvent("textResize");YAHOO.widget.Module.prototype={constructor:YAHOO.widget.Module,element:null,header:null,body:null,footer:null,id:null,imageRoot:YAHOO.widget.Module.IMG_ROOT,initEvents:function(){this.beforeInitEvent=new YAHOO.util.CustomEvent("beforeInit");this.initEvent=new YAHOO.util.CustomEvent("init");this.appendEvent=new YAHOO.util.CustomEvent("append");this.beforeRenderEvent=new YAHOO.util.CustomEvent("beforeRender");this.renderEvent=new YAHOO.util.CustomEvent("render");this.changeHeaderEvent=new YAHOO.util.CustomEvent("changeHeader");this.changeBodyEvent=new YAHOO.util.CustomEvent("changeBody");this.changeFooterEvent=new YAHOO.util.CustomEvent("changeFooter");this.changeContentEvent=new YAHOO.util.CustomEvent("changeContent");this.destroyEvent=new YAHOO.util.CustomEvent("destroy");this.beforeShowEvent=new YAHOO.util.CustomEvent("beforeShow");this.showEvent=new YAHOO.util.CustomEvent("show");this.beforeHideEvent=new YAHOO.util.CustomEvent("beforeHide");this.hideEvent=new YAHOO.util.CustomEvent("hide");},platform:function(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("windows")!=-1||ua.indexOf("win32")!=-1){return "windows";}else{if(ua.indexOf("macintosh")!=-1){return "mac";}else{return false;}}}(),browser:function(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("opera")!=-1){return "opera";}else{if(ua.indexOf("msie 7")!=-1){return "ie7";}else{if(ua.indexOf("msie")!=-1){return "ie";}else{if(ua.indexOf("safari")!=-1){return "safari";}else{if(ua.indexOf("gecko")!=-1){return "gecko";}else{return false;}}}}}}(),isSecure:function(){if(window.location.href.toLowerCase().indexOf("https")===0){return true;}else{return false;}}(),initDefaultConfig:function(){this.cfg.addProperty("visible",{value:true,handler:this.configVisible,validator:this.cfg.checkBoolean});this.cfg.addProperty("effect",{suppressEvent:true,supercedes:["visible"]});this.cfg.addProperty("monitorresize",{value:true,handler:this.configMonitorResize});},init:function(el,_709){this.initEvents();this.beforeInitEvent.fire(YAHOO.widget.Module);this.cfg=new YAHOO.util.Config(this);if(this.isSecure){this.imageRoot=YAHOO.widget.Module.IMG_ROOT_SSL;}if(typeof el=="string"){var elId=el;el=document.getElementById(el);if(!el){el=document.createElement("div");el.id=elId;}}this.element=el;if(el.id){this.id=el.id;}var _70b=this.element.childNodes;if(_70b){for(var i=0;i<_70b.length;i++){var _70d=_70b[i];switch(_70d.className){case YAHOO.widget.Module.CSS_HEADER:this.header=_70d;break;case YAHOO.widget.Module.CSS_BODY:this.body=_70d;break;case YAHOO.widget.Module.CSS_FOOTER:this.footer=_70d;break;}}}this.initDefaultConfig();YAHOO.util.Dom.addClass(this.element,YAHOO.widget.Module.CSS_MODULE);if(_709){this.cfg.applyConfig(_709,true);}if(!YAHOO.util.Config.alreadySubscribed(this.renderEvent,this.cfg.fireQueue,this.cfg)){this.renderEvent.subscribe(this.cfg.fireQueue,this.cfg,true);}this.initEvent.fire(YAHOO.widget.Module);},initResizeMonitor:function(){if(this.browser!="opera"){var _70e=document.getElementById("_yuiResizeMonitor");if(!_70e){_70e=document.createElement("iframe");var bIE=(this.browser.indexOf("ie")===0);if(this.isSecure&&YAHOO.widget.Module.RESIZE_MONITOR_SECURE_URL&&bIE){_70e.src=YAHOO.widget.Module.RESIZE_MONITOR_SECURE_URL;}_70e.id="_yuiResizeMonitor";_70e.style.visibility="hidden";document.body.appendChild(_70e);_70e.style.width="10em";_70e.style.height="10em";_70e.style.position="absolute";var _710=-1*_70e.offsetWidth;var nTop=-1*_70e.offsetHeight;_70e.style.top=nTop+"px";_70e.style.left=_710+"px";_70e.style.borderStyle="none";_70e.style.borderWidth="0";YAHOO.util.Dom.setStyle(_70e,"opacity","0");_70e.style.visibility="visible";if(!bIE){var doc=_70e.contentWindow.document;doc.open();doc.close();}}var _713=function(){YAHOO.widget.Module.textResizeEvent.fire();};if(_70e&&_70e.contentWindow){this.resizeMonitor=_70e;YAHOO.widget.Module.textResizeEvent.subscribe(this.onDomResize,this,true);if(!YAHOO.widget.Module.textResizeInitialized){if(!YAHOO.util.Event.addListener(this.resizeMonitor.contentWindow,"resize",_713)){YAHOO.util.Event.addListener(this.resizeMonitor,"resize",_713);}YAHOO.widget.Module.textResizeInitialized=true;}}}},onDomResize:function(e,obj){var _716=-1*this.resizeMonitor.offsetWidth,nTop=-1*this.resizeMonitor.offsetHeight;this.resizeMonitor.style.top=nTop+"px";this.resizeMonitor.style.left=_716+"px";},setHeader:function(_717){if(!this.header){this.header=document.createElement("div");this.header.className=YAHOO.widget.Module.CSS_HEADER;}if(typeof _717=="string"){this.header.innerHTML=_717;}else{this.header.innerHTML="";this.header.appendChild(_717);}this.changeHeaderEvent.fire(_717);this.changeContentEvent.fire();},appendToHeader:function(_718){if(!this.header){this.header=document.createElement("div");this.header.className=YAHOO.widget.Module.CSS_HEADER;}this.header.appendChild(_718);this.changeHeaderEvent.fire(_718);this.changeContentEvent.fire();},setBody:function(_719){if(!this.body){this.body=document.createElement("div");this.body.className=YAHOO.widget.Module.CSS_BODY;}if(typeof _719=="string"){this.body.innerHTML=_719;}else{this.body.innerHTML="";this.body.appendChild(_719);}this.changeBodyEvent.fire(_719);this.changeContentEvent.fire();},appendToBody:function(_71a){if(!this.body){this.body=document.createElement("div");this.body.className=YAHOO.widget.Module.CSS_BODY;}this.body.appendChild(_71a);this.changeBodyEvent.fire(_71a);this.changeContentEvent.fire();},setFooter:function(_71b){if(!this.footer){this.footer=document.createElement("div");this.footer.className=YAHOO.widget.Module.CSS_FOOTER;}if(typeof _71b=="string"){this.footer.innerHTML=_71b;}else{this.footer.innerHTML="";this.footer.appendChild(_71b);}this.changeFooterEvent.fire(_71b);this.changeContentEvent.fire();},appendToFooter:function(_71c){if(!this.footer){this.footer=document.createElement("div");this.footer.className=YAHOO.widget.Module.CSS_FOOTER;}this.footer.appendChild(_71c);this.changeFooterEvent.fire(_71c);this.changeContentEvent.fire();},render:function(_71d,_71e){this.beforeRenderEvent.fire();if(!_71e){_71e=this.element;}var me=this;var _720=function(_721){if(typeof _721=="string"){_721=document.getElementById(_721);}if(_721){_721.appendChild(me.element);me.appendEvent.fire();}};if(_71d){_720(_71d);}else{if(!YAHOO.util.Dom.inDocument(this.element)){return false;}}if(this.header&&!YAHOO.util.Dom.inDocument(this.header)){var _722=_71e.firstChild;if(_722){_71e.insertBefore(this.header,_722);}else{_71e.appendChild(this.header);}}if(this.body&&!YAHOO.util.Dom.inDocument(this.body)){if(this.footer&&YAHOO.util.Dom.isAncestor(this.moduleElement,this.footer)){_71e.insertBefore(this.body,this.footer);}else{_71e.appendChild(this.body);}}if(this.footer&&!YAHOO.util.Dom.inDocument(this.footer)){_71e.appendChild(this.footer);}this.renderEvent.fire();return true;},destroy:function(){var _723;if(this.element){YAHOO.util.Event.purgeElement(this.element,true);_723=this.element.parentNode;}if(_723){_723.removeChild(this.element);}this.element=null;this.header=null;this.body=null;this.footer=null;for(var e in this){if(e instanceof YAHOO.util.CustomEvent){e.unsubscribeAll();}}YAHOO.widget.Module.textResizeEvent.unsubscribe(this.onDomResize,this);this.destroyEvent.fire();},show:function(){this.cfg.setProperty("visible",true);},hide:function(){this.cfg.setProperty("visible",false);},configVisible:function(type,args,obj){var _728=args[0];if(_728){this.beforeShowEvent.fire();YAHOO.util.Dom.setStyle(this.element,"display","block");this.showEvent.fire();}else{this.beforeHideEvent.fire();YAHOO.util.Dom.setStyle(this.element,"display","none");this.hideEvent.fire();}},configMonitorResize:function(type,args,obj){var _72c=args[0];if(_72c){this.initResizeMonitor();}else{YAHOO.widget.Module.textResizeEvent.unsubscribe(this.onDomResize,this,true);this.resizeMonitor=null;}}};YAHOO.widget.Module.prototype.toString=function(){return "Module "+this.id;};YAHOO.widget.Overlay=function(el,_72e){YAHOO.widget.Overlay.superclass.constructor.call(this,el,_72e);};YAHOO.extend(YAHOO.widget.Overlay,YAHOO.widget.Module);YAHOO.widget.Overlay.IFRAME_SRC="javascript:false;";YAHOO.widget.Overlay.TOP_LEFT="tl";YAHOO.widget.Overlay.TOP_RIGHT="tr";YAHOO.widget.Overlay.BOTTOM_LEFT="bl";YAHOO.widget.Overlay.BOTTOM_RIGHT="br";YAHOO.widget.Overlay.CSS_OVERLAY="yui-overlay";YAHOO.widget.Overlay.prototype.init=function(el,_730){YAHOO.widget.Overlay.superclass.init.call(this,el);this.beforeInitEvent.fire(YAHOO.widget.Overlay);YAHOO.util.Dom.addClass(this.element,YAHOO.widget.Overlay.CSS_OVERLAY);if(_730){this.cfg.applyConfig(_730,true);}if(this.platform=="mac"&&this.browser=="gecko"){if(!YAHOO.util.Config.alreadySubscribed(this.showEvent,this.showMacGeckoScrollbars,this)){this.showEvent.subscribe(this.showMacGeckoScrollbars,this,true);}if(!YAHOO.util.Config.alreadySubscribed(this.hideEvent,this.hideMacGeckoScrollbars,this)){this.hideEvent.subscribe(this.hideMacGeckoScrollbars,this,true);}}this.initEvent.fire(YAHOO.widget.Overlay);};YAHOO.widget.Overlay.prototype.initEvents=function(){YAHOO.widget.Overlay.superclass.initEvents.call(this);this.beforeMoveEvent=new YAHOO.util.CustomEvent("beforeMove",this);this.moveEvent=new YAHOO.util.CustomEvent("move",this);};YAHOO.widget.Overlay.prototype.initDefaultConfig=function(){YAHOO.widget.Overlay.superclass.initDefaultConfig.call(this);this.cfg.addProperty("x",{handler:this.configX,validator:this.cfg.checkNumber,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("y",{handler:this.configY,validator:this.cfg.checkNumber,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("xy",{handler:this.configXY,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("context",{handler:this.configContext,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("fixedcenter",{value:false,handler:this.configFixedCenter,validator:this.cfg.checkBoolean,supercedes:["iframe","visible"]});this.cfg.addProperty("width",{handler:this.configWidth,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("height",{handler:this.configHeight,suppressEvent:true,supercedes:["iframe"]});this.cfg.addProperty("zIndex",{value:null,handler:this.configzIndex});this.cfg.addProperty("constraintoviewport",{value:false,handler:this.configConstrainToViewport,validator:this.cfg.checkBoolean,supercedes:["iframe","x","y","xy"]});this.cfg.addProperty("iframe",{value:(this.browser=="ie"?true:false),handler:this.configIframe,validator:this.cfg.checkBoolean,supercedes:["zIndex"]});};YAHOO.widget.Overlay.prototype.moveTo=function(x,y){this.cfg.setProperty("xy",[x,y]);};YAHOO.widget.Overlay.prototype.hideMacGeckoScrollbars=function(){YAHOO.util.Dom.removeClass(this.element,"show-scrollbars");YAHOO.util.Dom.addClass(this.element,"hide-scrollbars");};YAHOO.widget.Overlay.prototype.showMacGeckoScrollbars=function(){YAHOO.util.Dom.removeClass(this.element,"hide-scrollbars");YAHOO.util.Dom.addClass(this.element,"show-scrollbars");};YAHOO.widget.Overlay.prototype.configVisible=function(type,args,obj){var _736=args[0];var _737=YAHOO.util.Dom.getStyle(this.element,"visibility");if(_737=="inherit"){var e=this.element.parentNode;while(e.nodeType!=9&&e.nodeType!=11){_737=YAHOO.util.Dom.getStyle(e,"visibility");if(_737!="inherit"){break;}e=e.parentNode;}if(_737=="inherit"){_737="visible";}}var _739=this.cfg.getProperty("effect");var _73a=[];if(_739){if(_739 instanceof Array){for(var i=0;i<_739.length;i++){var eff=_739[i];_73a[_73a.length]=eff.effect(this,eff.duration);}}else{_73a[_73a.length]=_739.effect(this,_739.duration);}}var _73d=(this.platform=="mac"&&this.browser=="gecko");if(_736){if(_73d){this.showMacGeckoScrollbars();}if(_739){if(_736){if(_737!="visible"||_737===""){this.beforeShowEvent.fire();for(var j=0;j<_73a.length;j++){var ei=_73a[j];if(j===0&&!YAHOO.util.Config.alreadySubscribed(ei.animateInCompleteEvent,this.showEvent.fire,this.showEvent)){ei.animateInCompleteEvent.subscribe(this.showEvent.fire,this.showEvent,true);}ei.animateIn();}}}}else{if(_737!="visible"||_737===""){this.beforeShowEvent.fire();YAHOO.util.Dom.setStyle(this.element,"visibility","visible");this.cfg.refireEvent("iframe");this.showEvent.fire();}}}else{if(_73d){this.hideMacGeckoScrollbars();}if(_739){if(_737=="visible"){this.beforeHideEvent.fire();for(var k=0;k<_73a.length;k++){var h=_73a[k];if(k===0&&!YAHOO.util.Config.alreadySubscribed(h.animateOutCompleteEvent,this.hideEvent.fire,this.hideEvent)){h.animateOutCompleteEvent.subscribe(this.hideEvent.fire,this.hideEvent,true);}h.animateOut();}}else{if(_737===""){YAHOO.util.Dom.setStyle(this.element,"visibility","hidden");}}}else{if(_737=="visible"||_737===""){this.beforeHideEvent.fire();YAHOO.util.Dom.setStyle(this.element,"visibility","hidden");this.cfg.refireEvent("iframe");this.hideEvent.fire();}}}};YAHOO.widget.Overlay.prototype.doCenterOnDOMEvent=function(){if(this.cfg.getProperty("visible")){this.center();}};YAHOO.widget.Overlay.prototype.configFixedCenter=function(type,args,obj){var val=args[0];if(val){this.center();if(!YAHOO.util.Config.alreadySubscribed(this.beforeShowEvent,this.center,this)){this.beforeShowEvent.subscribe(this.center,this,true);}if(!YAHOO.util.Config.alreadySubscribed(YAHOO.widget.Overlay.windowResizeEvent,this.doCenterOnDOMEvent,this)){YAHOO.widget.Overlay.windowResizeEvent.subscribe(this.doCenterOnDOMEvent,this,true);}if(!YAHOO.util.Config.alreadySubscribed(YAHOO.widget.Overlay.windowScrollEvent,this.doCenterOnDOMEvent,this)){YAHOO.widget.Overlay.windowScrollEvent.subscribe(this.doCenterOnDOMEvent,this,true);}}else{YAHOO.widget.Overlay.windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);YAHOO.widget.Overlay.windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);}};YAHOO.widget.Overlay.prototype.configHeight=function(type,args,obj){var _749=args[0];var el=this.element;YAHOO.util.Dom.setStyle(el,"height",_749);this.cfg.refireEvent("iframe");};YAHOO.widget.Overlay.prototype.configWidth=function(type,args,obj){var _74e=args[0];var el=this.element;YAHOO.util.Dom.setStyle(el,"width",_74e);this.cfg.refireEvent("iframe");};YAHOO.widget.Overlay.prototype.configzIndex=function(type,args,obj){var _753=args[0];var el=this.element;if(!_753){_753=YAHOO.util.Dom.getStyle(el,"zIndex");if(!_753||isNaN(_753)){_753=0;}}if(this.iframe){if(_753<=0){_753=1;}YAHOO.util.Dom.setStyle(this.iframe,"zIndex",(_753-1));}YAHOO.util.Dom.setStyle(el,"zIndex",_753);this.cfg.setProperty("zIndex",_753,true);};YAHOO.widget.Overlay.prototype.configXY=function(type,args,obj){var pos=args[0];var x=pos[0];var y=pos[1];this.cfg.setProperty("x",x);this.cfg.setProperty("y",y);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y]);};YAHOO.widget.Overlay.prototype.configX=function(type,args,obj){var x=args[0];var y=this.cfg.getProperty("y");this.cfg.setProperty("x",x,true);this.cfg.setProperty("y",y,true);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");YAHOO.util.Dom.setX(this.element,x,true);this.cfg.setProperty("xy",[x,y],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y]);};YAHOO.widget.Overlay.prototype.configY=function(type,args,obj){var x=this.cfg.getProperty("x");var y=args[0];this.cfg.setProperty("x",x,true);this.cfg.setProperty("y",y,true);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");YAHOO.util.Dom.setY(this.element,y,true);this.cfg.setProperty("xy",[x,y],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y]);};YAHOO.widget.Overlay.prototype.showIframe=function(){if(this.iframe){this.iframe.style.display="block";}};YAHOO.widget.Overlay.prototype.hideIframe=function(){if(this.iframe){this.iframe.style.display="none";}};YAHOO.widget.Overlay.prototype.configIframe=function(type,args,obj){var val=args[0];if(val){if(!YAHOO.util.Config.alreadySubscribed(this.showEvent,this.showIframe,this)){this.showEvent.subscribe(this.showIframe,this,true);}if(!YAHOO.util.Config.alreadySubscribed(this.hideEvent,this.hideIframe,this)){this.hideEvent.subscribe(this.hideIframe,this,true);}var x=this.cfg.getProperty("x");var y=this.cfg.getProperty("y");if(!x||!y){this.syncPosition();x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");}if(!isNaN(x)&&!isNaN(y)){if(!this.iframe){this.iframe=document.createElement("iframe");if(this.isSecure){this.iframe.src=YAHOO.widget.Overlay.IFRAME_SRC;}var _76b=this.element.parentNode;if(_76b){_76b.appendChild(this.iframe);}else{document.body.appendChild(this.iframe);}YAHOO.util.Dom.setStyle(this.iframe,"position","absolute");YAHOO.util.Dom.setStyle(this.iframe,"border","none");YAHOO.util.Dom.setStyle(this.iframe,"margin","0");YAHOO.util.Dom.setStyle(this.iframe,"padding","0");YAHOO.util.Dom.setStyle(this.iframe,"opacity","0");if(this.cfg.getProperty("visible")){this.showIframe();}else{this.hideIframe();}}var _76c=YAHOO.util.Dom.getStyle(this.iframe,"display");if(_76c=="none"){this.iframe.style.display="block";}YAHOO.util.Dom.setXY(this.iframe,[x,y]);var _76d=this.element.clientWidth;var _76e=this.element.clientHeight;YAHOO.util.Dom.setStyle(this.iframe,"width",(_76d+2)+"px");YAHOO.util.Dom.setStyle(this.iframe,"height",(_76e+2)+"px");if(_76c=="none"){this.iframe.style.display="none";}}}else{if(this.iframe){this.iframe.style.display="none";}this.showEvent.unsubscribe(this.showIframe,this);this.hideEvent.unsubscribe(this.hideIframe,this);}};YAHOO.widget.Overlay.prototype.configConstrainToViewport=function(type,args,obj){var val=args[0];if(val){if(!YAHOO.util.Config.alreadySubscribed(this.beforeMoveEvent,this.enforceConstraints,this)){this.beforeMoveEvent.subscribe(this.enforceConstraints,this,true);}}else{this.beforeMoveEvent.unsubscribe(this.enforceConstraints,this);}};YAHOO.widget.Overlay.prototype.configContext=function(type,args,obj){var _776=args[0];if(_776){var _777=_776[0];var _778=_776[1];var _779=_776[2];if(_777){if(typeof _777=="string"){this.cfg.setProperty("context",[document.getElementById(_777),_778,_779],true);}if(_778&&_779){this.align(_778,_779);}}}};YAHOO.widget.Overlay.prototype.align=function(_77a,_77b){var _77c=this.cfg.getProperty("context");if(_77c){var _77d=_77c[0];var _77e=this.element;var me=this;if(!_77a){_77a=_77c[1];}if(!_77b){_77b=_77c[2];}if(_77e&&_77d){var _780=YAHOO.util.Dom.getRegion(_77d);var _781=function(v,h){switch(_77a){case YAHOO.widget.Overlay.TOP_LEFT:me.moveTo(h,v);break;case YAHOO.widget.Overlay.TOP_RIGHT:me.moveTo(h-_77e.offsetWidth,v);break;case YAHOO.widget.Overlay.BOTTOM_LEFT:me.moveTo(h,v-_77e.offsetHeight);break;case YAHOO.widget.Overlay.BOTTOM_RIGHT:me.moveTo(h-_77e.offsetWidth,v-_77e.offsetHeight);break;}};switch(_77b){case YAHOO.widget.Overlay.TOP_LEFT:_781(_780.top,_780.left);break;case YAHOO.widget.Overlay.TOP_RIGHT:_781(_780.top,_780.right);break;case YAHOO.widget.Overlay.BOTTOM_LEFT:_781(_780.bottom,_780.left);break;case YAHOO.widget.Overlay.BOTTOM_RIGHT:_781(_780.bottom,_780.right);break;}}}};YAHOO.widget.Overlay.prototype.enforceConstraints=function(type,args,obj){var pos=args[0];var x=pos[0];var y=pos[1];var _78a=this.element.offsetHeight;var _78b=this.element.offsetWidth;var _78c=YAHOO.util.Dom.getViewportWidth();var _78d=YAHOO.util.Dom.getViewportHeight();var _78e=document.documentElement.scrollLeft||document.body.scrollLeft;var _78f=document.documentElement.scrollTop||document.body.scrollTop;var _790=_78f+10;var _791=_78e+10;var _792=_78f+_78d-_78a-10;var _793=_78e+_78c-_78b-10;if(x<_791){x=_791;}else{if(x>_793){x=_793;}}if(y<_790){y=_790;}else{if(y>_792){y=_792;}}this.cfg.setProperty("x",x,true);this.cfg.setProperty("y",y,true);this.cfg.setProperty("xy",[x,y],true);};YAHOO.widget.Overlay.prototype.center=function(){var _794=document.documentElement.scrollLeft||document.body.scrollLeft;var _795=document.documentElement.scrollTop||document.body.scrollTop;var _796=YAHOO.util.Dom.getClientWidth();var _797=YAHOO.util.Dom.getClientHeight();var _798=this.element.offsetWidth;var _799=this.element.offsetHeight;var x=(_796/2)-(_798/2)+_794;var y=(_797/2)-(_799/2)+_795;this.cfg.setProperty("xy",[parseInt(x,10),parseInt(y,10)]);this.cfg.refireEvent("iframe");};YAHOO.widget.Overlay.prototype.syncPosition=function(){var pos=YAHOO.util.Dom.getXY(this.element);this.cfg.setProperty("x",pos[0],true);this.cfg.setProperty("y",pos[1],true);this.cfg.setProperty("xy",pos,true);};YAHOO.widget.Overlay.prototype.onDomResize=function(e,obj){YAHOO.widget.Overlay.superclass.onDomResize.call(this,e,obj);var me=this;setTimeout(function(){me.syncPosition();me.cfg.refireEvent("iframe");me.cfg.refireEvent("context");},0);};YAHOO.widget.Overlay.prototype.destroy=function(){if(this.iframe){this.iframe.parentNode.removeChild(this.iframe);}this.iframe=null;YAHOO.widget.Overlay.windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);YAHOO.widget.Overlay.windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);YAHOO.widget.Overlay.superclass.destroy.call(this);};YAHOO.widget.Overlay.prototype.toString=function(){return "Overlay "+this.id;};YAHOO.widget.Overlay.windowScrollEvent=new YAHOO.util.CustomEvent("windowScroll");YAHOO.widget.Overlay.windowResizeEvent=new YAHOO.util.CustomEvent("windowResize");YAHOO.widget.Overlay.windowScrollHandler=function(e){if(YAHOO.widget.Module.prototype.browser=="ie"||YAHOO.widget.Module.prototype.browser=="ie7"){if(!window.scrollEnd){window.scrollEnd=-1;}clearTimeout(window.scrollEnd);window.scrollEnd=setTimeout(function(){YAHOO.widget.Overlay.windowScrollEvent.fire();},1);}else{YAHOO.widget.Overlay.windowScrollEvent.fire();}};YAHOO.widget.Overlay.windowResizeHandler=function(e){if(YAHOO.widget.Module.prototype.browser=="ie"||YAHOO.widget.Module.prototype.browser=="ie7"){if(!window.resizeEnd){window.resizeEnd=-1;}clearTimeout(window.resizeEnd);window.resizeEnd=setTimeout(function(){YAHOO.widget.Overlay.windowResizeEvent.fire();},100);}else{YAHOO.widget.Overlay.windowResizeEvent.fire();}};YAHOO.widget.Overlay._initialized=null;if(YAHOO.widget.Overlay._initialized===null){YAHOO.util.Event.addListener(window,"scroll",YAHOO.widget.Overlay.windowScrollHandler);YAHOO.util.Event.addListener(window,"resize",YAHOO.widget.Overlay.windowResizeHandler);YAHOO.widget.Overlay._initialized=true;}YAHOO.widget.OverlayManager=function(_7a2){this.init(_7a2);};YAHOO.widget.OverlayManager.CSS_FOCUSED="focused";YAHOO.widget.OverlayManager.prototype={constructor:YAHOO.widget.OverlayManager,overlays:null,initDefaultConfig:function(){this.cfg.addProperty("overlays",{suppressEvent:true});this.cfg.addProperty("focusevent",{value:"mousedown"});},init:function(_7a3){this.cfg=new YAHOO.util.Config(this);this.initDefaultConfig();if(_7a3){this.cfg.applyConfig(_7a3,true);}this.cfg.fireQueue();var _7a4=null;this.getActive=function(){return _7a4;};this.focus=function(_7a5){var o=this.find(_7a5);if(o){this.blurAll();_7a4=o;YAHOO.util.Dom.addClass(_7a4.element,YAHOO.widget.OverlayManager.CSS_FOCUSED);this.overlays.sort(this.compareZIndexDesc);var _7a7=YAHOO.util.Dom.getStyle(this.overlays[0].element,"zIndex");if(!isNaN(_7a7)&&this.overlays[0]!=_7a5){_7a4.cfg.setProperty("zIndex",(parseInt(_7a7,10)+2));}this.overlays.sort(this.compareZIndexDesc);}};this.remove=function(_7a8){var o=this.find(_7a8);if(o){var _7aa=YAHOO.util.Dom.getStyle(o.element,"zIndex");o.cfg.setProperty("zIndex",-1000,true);this.overlays.sort(this.compareZIndexDesc);this.overlays=this.overlays.slice(0,this.overlays.length-1);o.cfg.setProperty("zIndex",_7aa,true);o.cfg.setProperty("manager",null);o.focusEvent=null;o.blurEvent=null;o.focus=null;o.blur=null;}};this.blurAll=function(){_7a4=null;for(var o=0;o<this.overlays.length;o++){YAHOO.util.Dom.removeClass(this.overlays[o].element,YAHOO.widget.OverlayManager.CSS_FOCUSED);}};var _7ac=this.cfg.getProperty("overlays");if(!this.overlays){this.overlays=[];}if(_7ac){this.register(_7ac);this.overlays.sort(this.compareZIndexDesc);}},register:function(_7ad){if(_7ad instanceof YAHOO.widget.Overlay){_7ad.cfg.addProperty("manager",{value:this});_7ad.focusEvent=new YAHOO.util.CustomEvent("focus");_7ad.blurEvent=new YAHOO.util.CustomEvent("blur");var mgr=this;_7ad.focus=function(){mgr.focus(this);this.focusEvent.fire();};_7ad.blur=function(){mgr.blurAll();this.blurEvent.fire();};var _7af=function(e,obj){_7ad.focus();};var _7b2=this.cfg.getProperty("focusevent");YAHOO.util.Event.addListener(_7ad.element,_7b2,_7af,this,true);var _7b3=YAHOO.util.Dom.getStyle(_7ad.element,"zIndex");if(!isNaN(_7b3)){_7ad.cfg.setProperty("zIndex",parseInt(_7b3,10));}else{_7ad.cfg.setProperty("zIndex",0);}this.overlays.push(_7ad);return true;}else{if(_7ad instanceof Array){var _7b4=0;for(var i=0;i<_7ad.length;i++){if(this.register(_7ad[i])){_7b4++;}}if(_7b4>0){return true;}}else{return false;}}},find:function(_7b6){if(_7b6 instanceof YAHOO.widget.Overlay){for(var o=0;o<this.overlays.length;o++){if(this.overlays[o]==_7b6){return this.overlays[o];}}}else{if(typeof _7b6=="string"){for(var p=0;p<this.overlays.length;p++){if(this.overlays[p].id==_7b6){return this.overlays[p];}}}}return null;},compareZIndexDesc:function(o1,o2){var _7bb=o1.cfg.getProperty("zIndex");var _7bc=o2.cfg.getProperty("zIndex");if(_7bb>_7bc){return -1;}else{if(_7bb<_7bc){return 1;}else{return 0;}}},showAll:function(){for(var o=0;o<this.overlays.length;o++){this.overlays[o].show();}},hideAll:function(){for(var o=0;o<this.overlays.length;o++){this.overlays[o].hide();}},toString:function(){return "OverlayManager";}};YAHOO.util.KeyListener=function(_7bf,_7c0,_7c1,_7c2){if(!_7bf){}if(!_7c0){}if(!_7c1){}if(!_7c2){_7c2=YAHOO.util.KeyListener.KEYDOWN;}var _7c3=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(typeof _7bf=="string"){_7bf=document.getElementById(_7bf);}if(typeof _7c1=="function"){_7c3.subscribe(_7c1);}else{_7c3.subscribe(_7c1.fn,_7c1.scope,_7c1.correctScope);}function handleKeyPress(e,obj){if(!_7c0.shift){_7c0.shift=false;}if(!_7c0.alt){_7c0.alt=false;}if(!_7c0.ctrl){_7c0.ctrl=false;}if(e.shiftKey==_7c0.shift&&e.altKey==_7c0.alt&&e.ctrlKey==_7c0.ctrl){var _7c6;var _7c7;if(_7c0.keys instanceof Array){for(var i=0;i<_7c0.keys.length;i++){_7c6=_7c0.keys[i];if(_7c6==e.charCode){_7c3.fire(e.charCode,e);break;}else{if(_7c6==e.keyCode){_7c3.fire(e.keyCode,e);break;}}}}else{_7c6=_7c0.keys;if(_7c6==e.charCode){_7c3.fire(e.charCode,e);}else{if(_7c6==e.keyCode){_7c3.fire(e.keyCode,e);}}}}}this.enable=function(){if(!this.enabled){YAHOO.util.Event.addListener(_7bf,_7c2,handleKeyPress);this.enabledEvent.fire(_7c0);}this.enabled=true;};this.disable=function(){if(this.enabled){YAHOO.util.Event.removeListener(_7bf,_7c2,handleKeyPress);this.disabledEvent.fire(_7c0);}this.enabled=false;};this.toString=function(){return "KeyListener ["+_7c0.keys+"] "+_7bf.tagName+(_7bf.id?"["+_7bf.id+"]":"");};};YAHOO.util.KeyListener.KEYDOWN="keydown";YAHOO.util.KeyListener.KEYUP="keyup";YAHOO.widget.ContainerEffect=function(_7c9,_7ca,_7cb,_7cc,_7cd){if(!_7cd){_7cd=YAHOO.util.Anim;}this.overlay=_7c9;this.attrIn=_7ca;this.attrOut=_7cb;this.targetElement=_7cc||_7c9.element;this.animClass=_7cd;};YAHOO.widget.ContainerEffect.prototype.init=function(){this.beforeAnimateInEvent=new YAHOO.util.CustomEvent("beforeAnimateIn");this.beforeAnimateOutEvent=new YAHOO.util.CustomEvent("beforeAnimateOut");this.animateInCompleteEvent=new YAHOO.util.CustomEvent("animateInComplete");this.animateOutCompleteEvent=new YAHOO.util.CustomEvent("animateOutComplete");this.animIn=new this.animClass(this.targetElement,this.attrIn.attributes,this.attrIn.duration,this.attrIn.method);this.animIn.onStart.subscribe(this.handleStartAnimateIn,this);this.animIn.onTween.subscribe(this.handleTweenAnimateIn,this);this.animIn.onComplete.subscribe(this.handleCompleteAnimateIn,this);this.animOut=new this.animClass(this.targetElement,this.attrOut.attributes,this.attrOut.duration,this.attrOut.method);this.animOut.onStart.subscribe(this.handleStartAnimateOut,this);this.animOut.onTween.subscribe(this.handleTweenAnimateOut,this);this.animOut.onComplete.subscribe(this.handleCompleteAnimateOut,this);};YAHOO.widget.ContainerEffect.prototype.animateIn=function(){this.beforeAnimateInEvent.fire();this.animIn.animate();};YAHOO.widget.ContainerEffect.prototype.animateOut=function(){this.beforeAnimateOutEvent.fire();this.animOut.animate();};YAHOO.widget.ContainerEffect.prototype.handleStartAnimateIn=function(type,args,obj){};YAHOO.widget.ContainerEffect.prototype.handleTweenAnimateIn=function(type,args,obj){};YAHOO.widget.ContainerEffect.prototype.handleCompleteAnimateIn=function(type,args,obj){};YAHOO.widget.ContainerEffect.prototype.handleStartAnimateOut=function(type,args,obj){};YAHOO.widget.ContainerEffect.prototype.handleTweenAnimateOut=function(type,args,obj){};YAHOO.widget.ContainerEffect.prototype.handleCompleteAnimateOut=function(type,args,obj){};YAHOO.widget.ContainerEffect.prototype.toString=function(){var _7e0="ContainerEffect";if(this.overlay){_7e0+=" ["+this.overlay.toString()+"]";}return _7e0;};YAHOO.widget.ContainerEffect.FADE=function(_7e1,dur){var fade=new YAHOO.widget.ContainerEffect(_7e1,{attributes:{opacity:{from:0,to:1}},duration:dur,method:YAHOO.util.Easing.easeIn},{attributes:{opacity:{to:0}},duration:dur,method:YAHOO.util.Easing.easeOut},_7e1.element);fade.handleStartAnimateIn=function(type,args,obj){YAHOO.util.Dom.addClass(obj.overlay.element,"hide-select");if(!obj.overlay.underlay){obj.overlay.cfg.refireEvent("underlay");}if(obj.overlay.underlay){obj.initialUnderlayOpacity=YAHOO.util.Dom.getStyle(obj.overlay.underlay,"opacity");obj.overlay.underlay.style.filter=null;}YAHOO.util.Dom.setStyle(obj.overlay.element,"visibility","visible");YAHOO.util.Dom.setStyle(obj.overlay.element,"opacity",0);};fade.handleCompleteAnimateIn=function(type,args,obj){YAHOO.util.Dom.removeClass(obj.overlay.element,"hide-select");if(obj.overlay.element.style.filter){obj.overlay.element.style.filter=null;}if(obj.overlay.underlay){YAHOO.util.Dom.setStyle(obj.overlay.underlay,"opacity",obj.initialUnderlayOpacity);}obj.overlay.cfg.refireEvent("iframe");obj.animateInCompleteEvent.fire();};fade.handleStartAnimateOut=function(type,args,obj){YAHOO.util.Dom.addClass(obj.overlay.element,"hide-select");if(obj.overlay.underlay){obj.overlay.underlay.style.filter=null;}};fade.handleCompleteAnimateOut=function(type,args,obj){YAHOO.util.Dom.removeClass(obj.overlay.element,"hide-select");if(obj.overlay.element.style.filter){obj.overlay.element.style.filter=null;}YAHOO.util.Dom.setStyle(obj.overlay.element,"visibility","hidden");YAHOO.util.Dom.setStyle(obj.overlay.element,"opacity",1);obj.overlay.cfg.refireEvent("iframe");obj.animateOutCompleteEvent.fire();};fade.init();return fade;};YAHOO.widget.ContainerEffect.SLIDE=function(_7f0,dur){var x=_7f0.cfg.getProperty("x")||YAHOO.util.Dom.getX(_7f0.element);var y=_7f0.cfg.getProperty("y")||YAHOO.util.Dom.getY(_7f0.element);var _7f4=YAHOO.util.Dom.getClientWidth();var _7f5=_7f0.element.offsetWidth;var _7f6=new YAHOO.widget.ContainerEffect(_7f0,{attributes:{points:{to:[x,y]}},duration:dur,method:YAHOO.util.Easing.easeIn},{attributes:{points:{to:[(_7f4+25),y]}},duration:dur,method:YAHOO.util.Easing.easeOut},_7f0.element,YAHOO.util.Motion);_7f6.handleStartAnimateIn=function(type,args,obj){obj.overlay.element.style.left=(-25-_7f5)+"px";obj.overlay.element.style.top=y+"px";};_7f6.handleTweenAnimateIn=function(type,args,obj){var pos=YAHOO.util.Dom.getXY(obj.overlay.element);var _7fe=pos[0];var _7ff=pos[1];if(YAHOO.util.Dom.getStyle(obj.overlay.element,"visibility")=="hidden"&&_7fe<x){YAHOO.util.Dom.setStyle(obj.overlay.element,"visibility","visible");}obj.overlay.cfg.setProperty("xy",[_7fe,_7ff],true);obj.overlay.cfg.refireEvent("iframe");};_7f6.handleCompleteAnimateIn=function(type,args,obj){obj.overlay.cfg.setProperty("xy",[x,y],true);obj.startX=x;obj.startY=y;obj.overlay.cfg.refireEvent("iframe");obj.animateInCompleteEvent.fire();};_7f6.handleStartAnimateOut=function(type,args,obj){var vw=YAHOO.util.Dom.getViewportWidth();var pos=YAHOO.util.Dom.getXY(obj.overlay.element);var yso=pos[1];var _809=obj.animOut.attributes.points.to;obj.animOut.attributes.points.to=[(vw+25),yso];};_7f6.handleTweenAnimateOut=function(type,args,obj){var pos=YAHOO.util.Dom.getXY(obj.overlay.element);var xto=pos[0];var yto=pos[1];obj.overlay.cfg.setProperty("xy",[xto,yto],true);obj.overlay.cfg.refireEvent("iframe");};_7f6.handleCompleteAnimateOut=function(type,args,obj){YAHOO.util.Dom.setStyle(obj.overlay.element,"visibility","hidden");obj.overlay.cfg.setProperty("xy",[x,y]);obj.animateOutCompleteEvent.fire();};_7f6.init();return _7f6;};YAHOO.register("container_core",YAHOO.widget.Module,{version:"2.2.0",build:"127"});(function(){var Dom=YAHOO.util.Dom,Event=YAHOO.util.Event;YAHOO.widget.MenuManager=function(){var _814=false,m_oMenus={},m_oItems={},m_oVisibleMenus={},me=this;function addItem(_815){var sId=_815.id;if(_815&&m_oItems[sId]!=_815){m_oItems[sId]=_815;_815.destroyEvent.subscribe(onItemDestroy,_815);}}function removeItem(_817){var sId=_817.id;if(sId&&m_oItems[sId]){delete m_oItems[sId];}}function getMenuRootElement(_819){var _81a;if(_819&&_819.tagName){switch(_819.tagName.toUpperCase()){case "DIV":_81a=_819.parentNode;if((Dom.hasClass(_819,"hd")||Dom.hasClass(_819,"bd")||Dom.hasClass(_819,"ft"))&&_81a&&_81a.tagName&&_81a.tagName.toUpperCase()=="DIV"){return _81a;}else{return _819;}break;case "LI":return _819;default:_81a=_819.parentNode;if(_81a){return getMenuRootElement(_81a);}break;}}}function onDOMEvent(_81b){var _81c=Event.getTarget(_81b),oElement=getMenuRootElement(_81c),oMenuItem,oMenu;if(oElement){var _81d=oElement.tagName.toUpperCase();if(_81d=="LI"){var sId=oElement.id;if(sId&&m_oItems[sId]){oMenuItem=m_oItems[sId];oMenu=oMenuItem.parent;}}else{if(_81d=="DIV"){if(oElement.id){oMenu=m_oMenus[oElement.id];}}}}if(oMenu){var _81f={"click":"clickEvent","mousedown":"mouseDownEvent","mouseup":"mouseUpEvent","mouseover":"mouseOverEvent","mouseout":"mouseOutEvent","keydown":"keyDownEvent","keyup":"keyUpEvent","keypress":"keyPressEvent"},sCustomEventType=_81f[_81b.type];if(oMenuItem&&!oMenuItem.cfg.getProperty("disabled")){oMenuItem[sCustomEventType].fire(_81b);}oMenu[sCustomEventType].fire(_81b,oMenuItem);}else{if(_81b.type=="mousedown"){var _820;for(var i in m_oMenus){if(m_oMenus.hasOwnProperty(i)){oMenu=m_oMenus[i];if(oMenu.cfg.getProperty("clicktohide")&&oMenu.cfg.getProperty("position")=="dynamic"){oMenu.hide();}else{oMenu.clearActiveItem(true);}}}}}}function onMenuDestroy(_822,_823,_824){if(_824&&m_oMenus[_824.id]){delete m_oMenus[_824.id];}}function onItemDestroy(_825,_826,_827){var sId=_827.id;if(sId&&m_oItems[sId]){delete m_oItems[sId];}}function onMenuVisibleConfigChange(_829,_82a,_82b){var _82c=_82a[0];if(_82c){m_oVisibleMenus[_82b.id]=_82b;}else{if(m_oVisibleMenus[_82b.id]){delete m_oVisibleMenus[_82b.id];}}}function onItemAdded(_82d,_82e){addItem(_82e[0]);}function onItemRemoved(_82f,_830){removeItem(_830[0]);}return {addMenu:function(_831){if(_831&&_831.id&&!m_oMenus[_831.id]){m_oMenus[_831.id]=_831;if(!_814){var oDoc=document;Event.addListener(oDoc,"mouseover",onDOMEvent,me,true);Event.addListener(oDoc,"mouseout",onDOMEvent,me,true);Event.addListener(oDoc,"mousedown",onDOMEvent,me,true);Event.addListener(oDoc,"mouseup",onDOMEvent,me,true);Event.addListener(oDoc,"click",onDOMEvent,me,true);Event.addListener(oDoc,"keydown",onDOMEvent,me,true);Event.addListener(oDoc,"keyup",onDOMEvent,me,true);Event.addListener(oDoc,"keypress",onDOMEvent,me,true);_814=true;}_831.destroyEvent.subscribe(onMenuDestroy,_831,me);_831.cfg.subscribeToConfigEvent("visible",onMenuVisibleConfigChange,_831);_831.itemAddedEvent.subscribe(onItemAdded);_831.itemRemovedEvent.subscribe(onItemRemoved);}},removeMenu:function(_833){if(_833&&m_oMenus[_833.id]){delete m_oMenus[_833.id];}},hideVisible:function(){var _834;for(var i in m_oVisibleMenus){if(m_oVisibleMenus.hasOwnProperty(i)){_834=m_oVisibleMenus[i];if(_834.cfg.getProperty("position")=="dynamic"){_834.hide();}}}},getMenus:function(){return m_oMenus;},getMenu:function(_836){if(m_oMenus[_836]){return m_oMenus[_836];}},toString:function(){return ("MenuManager");}};}();})();(function(){var Dom=YAHOO.util.Dom,Event=YAHOO.util.Event,Lang=YAHOO.lang;YAHOO.widget.Menu=function(_838,_839){if(_839){this.parent=_839.parent;this.lazyLoad=_839.lazyLoad||_839.lazyload;this.itemData=_839.itemData||_839.itemdata;}YAHOO.widget.Menu.superclass.constructor.call(this,_838,_839);};YAHOO.lang.extend(YAHOO.widget.Menu,YAHOO.widget.Overlay,{CSS_CLASS_NAME:"yuimenu",ITEM_TYPE:null,GROUP_TITLE_TAG_NAME:"h6",_nHideDelayId:null,_nShowDelayId:null,_nSubmenuHideDelayId:null,_nBodyScrollId:null,_bHideDelayEventHandlersAssigned:false,_bHandledMouseOverEvent:false,_bHandledMouseOutEvent:false,_aGroupTitleElements:null,_aItemGroups:null,_aListElements:null,_nCurrentMouseX:0,_nMaxHeight:-1,_bStopMouseEventHandlers:false,_sClassName:null,lazyLoad:false,itemData:null,activeItem:null,parent:null,srcElement:null,mouseOverEvent:null,mouseOutEvent:null,mouseDownEvent:null,mouseUpEvent:null,clickEvent:null,keyPressEvent:null,keyDownEvent:null,keyUpEvent:null,itemAddedEvent:null,itemRemovedEvent:null,init:function(_83a,_83b){this._aItemGroups=[];this._aListElements=[];this._aGroupTitleElements=[];if(!this.ITEM_TYPE){this.ITEM_TYPE=YAHOO.widget.MenuItem;}var _83c;if(typeof _83a=="string"){_83c=document.getElementById(_83a);}else{if(_83a.tagName){_83c=_83a;}}if(_83c&&_83c.tagName){switch(_83c.tagName.toUpperCase()){case "DIV":this.srcElement=_83c;if(!_83c.id){_83c.setAttribute("id",Dom.generateId());}YAHOO.widget.Menu.superclass.init.call(this,_83c);this.beforeInitEvent.fire(YAHOO.widget.Menu);break;case "SELECT":this.srcElement=_83c;YAHOO.widget.Menu.superclass.init.call(this,Dom.generateId());this.beforeInitEvent.fire(YAHOO.widget.Menu);break;}}else{YAHOO.widget.Menu.superclass.init.call(this,_83a);this.beforeInitEvent.fire(YAHOO.widget.Menu);}if(this.element){var oEl=this.element;Dom.addClass(oEl,this.CSS_CLASS_NAME);this.initEvent.subscribe(this._onInit,this,true);this.beforeRenderEvent.subscribe(this._onBeforeRender,this,true);this.renderEvent.subscribe(this._setWidth,this,true);this.beforeShowEvent.subscribe(this._onBeforeShow,this,true);this.showEvent.subscribe(this._onShow,this,true);this.beforeHideEvent.subscribe(this._onBeforeHide,this,true);this.hideEvent.subscribe(this._onHide,this,true);this.mouseOverEvent.subscribe(this._onMouseOver,this,true);this.mouseOutEvent.subscribe(this._onMouseOut,this,true);this.clickEvent.subscribe(this._onClick,this,true);this.keyDownEvent.subscribe(this._onKeyDown,this,true);this.keyPressEvent.subscribe(this._onKeyPress,this,true);YAHOO.widget.Module.textResizeEvent.subscribe(this._onTextResize,this,true);if(_83b){this.cfg.applyConfig(_83b,true);}YAHOO.widget.MenuManager.addMenu(this);this.initEvent.fire(YAHOO.widget.Menu);}},_initSubTree:function(){var _83e;if(this.srcElement.tagName.toUpperCase()=="DIV"){_83e=this.body.firstChild;var _83f=0,sGroupTitleTagName=this.GROUP_TITLE_TAG_NAME.toUpperCase();do{if(_83e&&_83e.tagName){switch(_83e.tagName.toUpperCase()){case sGroupTitleTagName:this._aGroupTitleElements[_83f]=_83e;break;case "UL":this._aListElements[_83f]=_83e;this._aItemGroups[_83f]=[];_83f++;break;}}}while((_83e=_83e.nextSibling));if(this._aListElements[0]){Dom.addClass(this._aListElements[0],"first-of-type");}}_83e=null;if(this.srcElement.tagName){var _840=this.srcElement.tagName.toUpperCase();switch(_840){case "DIV":if(this._aListElements.length>0){var i=this._aListElements.length-1;do{_83e=this._aListElements[i].firstChild;do{if(_83e&&_83e.tagName&&_83e.tagName.toUpperCase()=="LI"){this.addItem(new this.ITEM_TYPE(_83e,{parent:this}),i);}}while((_83e=_83e.nextSibling));}while(i--);}break;case "SELECT":_83e=this.srcElement.firstChild;do{if(_83e&&_83e.tagName){switch(_83e.tagName.toUpperCase()){case "OPTGROUP":case "OPTION":this.addItem(new this.ITEM_TYPE(_83e,{parent:this}));break;}}}while((_83e=_83e.nextSibling));break;}}},_getFirstEnabledItem:function(){var _842=this.getItems(),nItems=_842.length,oItem;for(var i=0;i<nItems;i++){oItem=_842[i];if(oItem&&!oItem.cfg.getProperty("disabled")&&oItem.element.style.display!="none"){return oItem;}}},_checkPosition:function(_844){if(typeof _844=="string"){var _845=_844.toLowerCase();return ("dynamic,static".indexOf(_845)!=-1);}},_addItemToGroup:function(_846,_847,_848){var _849;if(_847 instanceof this.ITEM_TYPE){_849=_847;_849.parent=this;}else{if(typeof _847=="string"){_849=new this.ITEM_TYPE(_847,{parent:this});}else{if(typeof _847=="object"){_847.parent=this;_849=new this.ITEM_TYPE(_847.text,_847);}}}if(_849){var _84a=typeof _846=="number"?_846:0,aGroup=this._getItemGroup(_84a),oGroupItem;if(!aGroup){aGroup=this._createItemGroup(_84a);}if(typeof _848=="number"){var _84b=(_848>=aGroup.length);if(aGroup[_848]){aGroup.splice(_848,0,_849);}else{aGroup[_848]=_849;}oGroupItem=aGroup[_848];if(oGroupItem){if(_84b&&(!oGroupItem.element.parentNode||oGroupItem.element.parentNode.nodeType==11)){this._aListElements[_84a].appendChild(oGroupItem.element);}else{function getNextItemSibling(_84c,_84d){return (_84c[_84d]||getNextItemSibling(_84c,(_84d+1)));}var _84e=getNextItemSibling(aGroup,(_848+1));if(_84e&&(!oGroupItem.element.parentNode||oGroupItem.element.parentNode.nodeType==11)){this._aListElements[_84a].insertBefore(oGroupItem.element,_84e.element);}}oGroupItem.parent=this;this._subscribeToItemEvents(oGroupItem);this._configureSubmenu(oGroupItem);this._updateItemProperties(_84a);this.itemAddedEvent.fire(oGroupItem);return oGroupItem;}}else{var _84f=aGroup.length;aGroup[_84f]=_849;oGroupItem=aGroup[_84f];if(oGroupItem){if(!Dom.isAncestor(this._aListElements[_84a],oGroupItem.element)){this._aListElements[_84a].appendChild(oGroupItem.element);}oGroupItem.element.setAttribute("groupindex",_84a);oGroupItem.element.setAttribute("index",_84f);oGroupItem.parent=this;oGroupItem.index=_84f;oGroupItem.groupIndex=_84a;this._subscribeToItemEvents(oGroupItem);this._configureSubmenu(oGroupItem);if(_84f===0){Dom.addClass(oGroupItem.element,"first-of-type");}this.itemAddedEvent.fire(oGroupItem);return oGroupItem;}}}},_removeItemFromGroupByIndex:function(_850,_851){var _852=typeof _850=="number"?_850:0,aGroup=this._getItemGroup(_852);if(aGroup){var _853=aGroup.splice(_851,1),oItem=_853[0];if(oItem){this._updateItemProperties(_852);if(aGroup.length===0){var oUL=this._aListElements[_852];if(this.body&&oUL){this.body.removeChild(oUL);}this._aItemGroups.splice(_852,1);this._aListElements.splice(_852,1);oUL=this._aListElements[0];if(oUL){Dom.addClass(oUL,"first-of-type");}}this.itemRemovedEvent.fire(oItem);return oItem;}}},_removeItemFromGroupByValue:function(_855,_856){var _857=this._getItemGroup(_855);if(_857){var _858=_857.length,nItemIndex=-1;if(_858>0){var i=_858-1;do{if(_857[i]==_856){nItemIndex=i;break;}}while(i--);if(nItemIndex>-1){return this._removeItemFromGroupByIndex(_855,nItemIndex);}}}},_updateItemProperties:function(_85a){var _85b=this._getItemGroup(_85a),nItems=_85b.length;if(nItems>0){var i=nItems-1,oItem,oLI;do{oItem=_85b[i];if(oItem){oLI=oItem.element;oItem.index=i;oItem.groupIndex=_85a;oLI.setAttribute("groupindex",_85a);oLI.setAttribute("index",i);Dom.removeClass(oLI,"first-of-type");}}while(i--);if(oLI){Dom.addClass(oLI,"first-of-type");}}},_createItemGroup:function(_85d){if(!this._aItemGroups[_85d]){this._aItemGroups[_85d]=[];var oUL=document.createElement("ul");this._aListElements[_85d]=oUL;return this._aItemGroups[_85d];}},_getItemGroup:function(_85f){var _860=((typeof _85f=="number")?_85f:0);return this._aItemGroups[_860];},_configureSubmenu:function(_861){var _862=_861.cfg.getProperty("submenu");if(_862){this.cfg.configChangedEvent.subscribe(this._onParentMenuConfigChange,_862,true);this.renderEvent.subscribe(this._onParentMenuRender,_862,true);_862.beforeShowEvent.subscribe(this._onSubmenuBeforeShow,_862,true);_862.showEvent.subscribe(this._onSubmenuShow,_862,true);_862.hideEvent.subscribe(this._onSubmenuHide,_862,true);}},_subscribeToItemEvents:function(_863){_863.focusEvent.subscribe(this._onMenuItemFocus,_863,this);_863.blurEvent.subscribe(this._onMenuItemBlur,this,true);_863.cfg.configChangedEvent.subscribe(this._onMenuItemConfigChange,_863,this);},_getOffsetWidth:function(){var _864=this.element.cloneNode(true);Dom.setStyle(_864,"width","");document.body.appendChild(_864);var _865=_864.offsetWidth;document.body.removeChild(_864);return _865;},_setWidth:function(){if(this.cfg.getProperty("position")=="dynamic"){var _866;if(this.element.parentNode.tagName.toUpperCase()=="BODY"){if(this.browser=="opera"){_866=this._getOffsetWidth();}else{Dom.setStyle(this.element,"width","auto");_866=this.element.offsetWidth;}}else{_866=this._getOffsetWidth();}this.cfg.setProperty("width",(_866+"px"));}},_cancelHideDelay:function(){var _867=this.getRoot();if(_867._nHideDelayId){window.clearTimeout(_867._nHideDelayId);}},_execHideDelay:function(){this._cancelHideDelay();var _868=this.getRoot(),me=this;function hideMenu(){if(_868.activeItem){_868.clearActiveItem();}if(_868==me&&me.cfg.getProperty("position")=="dynamic"){me.hide();}}_868._nHideDelayId=window.setTimeout(hideMenu,_868.cfg.getProperty("hidedelay"));},_cancelShowDelay:function(){var _869=this.getRoot();if(_869._nShowDelayId){window.clearTimeout(_869._nShowDelayId);}},_execShowDelay:function(_86a){var _86b=this.getRoot();function showMenu(){if(_86a.parent.cfg.getProperty("selected")){_86a.show();}}_86b._nShowDelayId=window.setTimeout(showMenu,_86b.cfg.getProperty("showdelay"));},_execSubmenuHideDelay:function(_86c,_86d,_86e){var me=this;_86c._nSubmenuHideDelayId=window.setTimeout(function(){if(me._nCurrentMouseX>(_86d+10)){_86c._nSubmenuHideDelayId=window.setTimeout(function(){_86c.hide();},_86e);}else{_86c.hide();}},50);},_disableScrollHeader:function(){if(!this._bHeaderDisabled){Dom.addClass(this.header,"topscrollbar_disabled");this._bHeaderDisabled=true;}},_disableScrollFooter:function(){if(!this._bFooterDisabled){Dom.addClass(this.footer,"bottomscrollbar_disabled");this._bFooterDisabled=true;}},_enableScrollHeader:function(){if(this._bHeaderDisabled){Dom.removeClass(this.header,"topscrollbar_disabled");this._bHeaderDisabled=false;}},_enableScrollFooter:function(){if(this._bFooterDisabled){Dom.removeClass(this.footer,"bottomscrollbar_disabled");this._bFooterDisabled=false;}},_onMouseOver:function(_870,_871,_872){if(this._bStopMouseEventHandlers){return false;}var _873=_871[0],oItem=_871[1],oTarget=Event.getTarget(_873);if(!this._bHandledMouseOverEvent&&(oTarget==this.element||Dom.isAncestor(this.element,oTarget))){this._nCurrentMouseX=0;Event.addListener(this.element,"mousemove",this._onMouseMove,this,true);this.clearActiveItem();if(this.parent&&this._nSubmenuHideDelayId){window.clearTimeout(this._nSubmenuHideDelayId);this.parent.cfg.setProperty("selected",true);var _874=this.parent.parent;_874.activeItem=this.parent;_874._bHandledMouseOutEvent=true;_874._bHandledMouseOverEvent=false;}this._bHandledMouseOverEvent=true;this._bHandledMouseOutEvent=false;}if(oItem&&!oItem.handledMouseOverEvent&&!oItem.cfg.getProperty("disabled")&&(oTarget==oItem.element||Dom.isAncestor(oItem.element,oTarget))){var _875=this.cfg.getProperty("showdelay"),bShowDelay=(_875>0);if(bShowDelay){this._cancelShowDelay();}var _876=this.activeItem;if(_876){_876.cfg.setProperty("selected",false);}var _877=oItem.cfg;_877.setProperty("selected",true);oItem.focus();if(this.cfg.getProperty("autosubmenudisplay")){var _878=_877.getProperty("submenu");if(_878){if(bShowDelay){this._execShowDelay(_878);}else{_878.show();}}}oItem.handledMouseOverEvent=true;oItem.handledMouseOutEvent=false;}},_onMouseOut:function(_879,_87a,_87b){if(this._bStopMouseEventHandlers){return false;}var _87c=_87a[0],oItem=_87a[1],oRelatedTarget=Event.getRelatedTarget(_87c),bMovingToSubmenu=false;if(oItem&&!oItem.cfg.getProperty("disabled")){var _87d=oItem.cfg,oSubmenu=_87d.getProperty("submenu");if(oSubmenu&&(oRelatedTarget==oSubmenu.element||Dom.isAncestor(oSubmenu.element,oRelatedTarget))){bMovingToSubmenu=true;}if(!oItem.handledMouseOutEvent&&((oRelatedTarget!=oItem.element&&!Dom.isAncestor(oItem.element,oRelatedTarget))||bMovingToSubmenu)){if(!bMovingToSubmenu){oItem.cfg.setProperty("selected",false);if(oSubmenu){var _87e=this.cfg.getProperty("submenuhidedelay"),nShowDelay=this.cfg.getProperty("showdelay");if(!(this instanceof YAHOO.widget.MenuBar)&&_87e>0&&nShowDelay>=_87e){this._execSubmenuHideDelay(oSubmenu,Event.getPageX(_87c),_87e);}else{oSubmenu.hide();}}}oItem.handledMouseOutEvent=true;oItem.handledMouseOverEvent=false;}}if(!this._bHandledMouseOutEvent&&((oRelatedTarget!=this.element&&!Dom.isAncestor(this.element,oRelatedTarget))||bMovingToSubmenu)){Event.removeListener(this.element,"mousemove",this._onMouseMove);this._nCurrentMouseX=Event.getPageX(_87c);this._bHandledMouseOutEvent=true;this._bHandledMouseOverEvent=false;}},_onMouseMove:function(_87f,_880){if(this._bStopMouseEventHandlers){return false;}this._nCurrentMouseX=Event.getPageX(_87f);},_onClick:function(_881,_882,_883){var _884=_882[0],oItem=_882[1],oTarget=Event.getTarget(_884);if(oItem&&!oItem.cfg.getProperty("disabled")){var _885=oItem.cfg,oSubmenu=_885.getProperty("submenu");if(oTarget==oItem.submenuIndicator&&oSubmenu){if(oSubmenu.cfg.getProperty("visible")){oSubmenu.hide();oSubmenu.parent.focus();}else{this.clearActiveItem();this.activeItem=oItem;oItem.cfg.setProperty("selected",true);oSubmenu.show();}}else{var sURL=_885.getProperty("url"),bCurrentPageURL=(sURL.substr((sURL.length-1),1)=="#"),sTarget=_885.getProperty("target"),bHasTarget=(sTarget&&sTarget.length>0);if(oTarget.tagName.toUpperCase()=="A"&&bCurrentPageURL&&!bHasTarget){Event.preventDefault(_884);}if(oTarget.tagName.toUpperCase()!="A"&&!bCurrentPageURL&&!bHasTarget){document.location=sURL;}if(bCurrentPageURL&&!oSubmenu){var _887=this.getRoot();if(_887.cfg.getProperty("position")=="static"){_887.clearActiveItem();}else{if(_887.cfg.getProperty("clicktohide")){_887.hide();}}}}}},_onKeyDown:function(_888,_889,_88a){var _88b=_889[0],oItem=_889[1],me=this,oSubmenu;function stopMouseEventHandlers(){me._bStopMouseEventHandlers=true;window.setTimeout(function(){me._bStopMouseEventHandlers=false;},10);}if(oItem&&!oItem.cfg.getProperty("disabled")){var _88c=oItem.cfg,oParentItem=this.parent,oRoot,oNextItem;switch(_88b.keyCode){case 38:case 40:if(oItem==this.activeItem&&!_88c.getProperty("selected")){_88c.setProperty("selected",true);}else{oNextItem=(_88b.keyCode==38)?oItem.getPreviousEnabledSibling():oItem.getNextEnabledSibling();if(oNextItem){this.clearActiveItem();oNextItem.cfg.setProperty("selected",true);oNextItem.focus();if(this.cfg.getProperty("maxheight")>0){var _88d=this.body;_88d.scrollTop=(oNextItem.element.offsetTop+oNextItem.element.offsetHeight)-_88d.offsetHeight;var _88e=_88d.scrollTop,nScrollTarget=_88d.scrollHeight-_88d.offsetHeight;if(_88e===0){this._disableScrollHeader();this._enableScrollFooter();}else{if(_88e==nScrollTarget){this._enableScrollHeader();this._disableScrollFooter();}else{this._enableScrollHeader();this._enableScrollFooter();}}}}}Event.preventDefault(_88b);stopMouseEventHandlers();break;case 39:oSubmenu=_88c.getProperty("submenu");if(oSubmenu){if(!_88c.getProperty("selected")){_88c.setProperty("selected",true);}oSubmenu.show();oSubmenu.setInitialSelection();}else{oRoot=this.getRoot();if(oRoot instanceof YAHOO.widget.MenuBar){oNextItem=oRoot.activeItem.getNextEnabledSibling();if(oNextItem){oRoot.clearActiveItem();oNextItem.cfg.setProperty("selected",true);oSubmenu=oNextItem.cfg.getProperty("submenu");if(oSubmenu){oSubmenu.show();}oNextItem.focus();}}}Event.preventDefault(_88b);stopMouseEventHandlers();break;case 37:if(oParentItem){var _88f=oParentItem.parent;if(_88f instanceof YAHOO.widget.MenuBar){oNextItem=_88f.activeItem.getPreviousEnabledSibling();if(oNextItem){_88f.clearActiveItem();oNextItem.cfg.setProperty("selected",true);oSubmenu=oNextItem.cfg.getProperty("submenu");if(oSubmenu){oSubmenu.show();}oNextItem.focus();}}else{this.hide();oParentItem.focus();}}Event.preventDefault(_88b);stopMouseEventHandlers();break;}}if(_88b.keyCode==27){if(this.cfg.getProperty("position")=="dynamic"){this.hide();if(this.parent){this.parent.focus();}}else{if(this.activeItem){oSubmenu=this.activeItem.cfg.getProperty("submenu");if(oSubmenu&&oSubmenu.cfg.getProperty("visible")){oSubmenu.hide();this.activeItem.focus();}else{this.activeItem.cfg.setProperty("selected",false);this.activeItem.blur();}}}Event.preventDefault(_88b);}},_onKeyPress:function(_890,_891,_892){var _893=_891[0];if(_893.keyCode==40||_893.keyCode==38){YAHOO.util.Event.preventDefault(_893);}},_onTextResize:function(_894,_895,_896){if(this.browser=="gecko"&&!this._handleResize){this._handleResize=true;return;}var _897=this.cfg;if(_897.getProperty("position")=="dynamic"){_897.setProperty("width",(this._getOffsetWidth()+"px"));}},_onScrollTargetMouseOver:function(_898,_899){this._cancelHideDelay();var _89a=Event.getTarget(_898),oBody=this.body,me=this,nScrollTarget,fnScrollFunction;function scrollBodyDown(){var _89b=oBody.scrollTop;if(_89b<nScrollTarget){oBody.scrollTop=(_89b+1);me._enableScrollHeader();}else{oBody.scrollTop=nScrollTarget;window.clearInterval(me._nBodyScrollId);me._disableScrollFooter();}}function scrollBodyUp(){var _89c=oBody.scrollTop;if(_89c>0){oBody.scrollTop=(_89c-1);me._enableScrollFooter();}else{oBody.scrollTop=0;window.clearInterval(me._nBodyScrollId);me._disableScrollHeader();}}if(Dom.hasClass(_89a,"hd")){fnScrollFunction=scrollBodyUp;}else{nScrollTarget=oBody.scrollHeight-oBody.offsetHeight;fnScrollFunction=scrollBodyDown;}this._nBodyScrollId=window.setInterval(fnScrollFunction,10);},_onScrollTargetMouseOut:function(_89d,_89e){window.clearInterval(this._nBodyScrollId);this._cancelHideDelay();},_onInit:function(_89f,_8a0,_8a1){if(((this.parent&&!this.lazyLoad)||(!this.parent&&this.cfg.getProperty("position")=="static")||(!this.parent&&!this.lazyLoad&&this.cfg.getProperty("position")=="dynamic"))&&this.getItemGroups().length===0){if(this.srcElement){this._initSubTree();}if(this.itemData){this.addItems(this.itemData);}}else{if(this.lazyLoad){this.cfg.fireQueue();}}},_onBeforeRender:function(_8a2,_8a3,_8a4){var _8a5=this.cfg,oEl=this.element,nListElements=this._aListElements.length;if(nListElements>0){var i=0,bFirstList=true,oUL,oGroupTitle;do{oUL=this._aListElements[i];if(oUL){if(bFirstList){Dom.addClass(oUL,"first-of-type");bFirstList=false;}if(!Dom.isAncestor(oEl,oUL)){this.appendToBody(oUL);}oGroupTitle=this._aGroupTitleElements[i];if(oGroupTitle){if(!Dom.isAncestor(oEl,oGroupTitle)){oUL.parentNode.insertBefore(oGroupTitle,oUL);}Dom.addClass(oUL,"hastitle");}}i++;}while(i<nListElements);}},_onBeforeShow:function(_8a7,_8a8,_8a9){if(this.lazyLoad&&this.getItemGroups().length===0){if(this.srcElement){this._initSubTree();}if(this.itemData){if(this.parent&&this.parent.parent&&this.parent.parent.srcElement&&this.parent.parent.srcElement.tagName.toUpperCase()=="SELECT"){var _8aa=this.itemData.length;for(var n=0;n<_8aa;n++){if(this.itemData[n].tagName){this.addItem((new this.ITEM_TYPE(this.itemData[n])));}}}else{this.addItems(this.itemData);}}var _8ac=this.srcElement;if(_8ac){if(_8ac.tagName.toUpperCase()=="SELECT"){if(Dom.inDocument(_8ac)){this.render(_8ac.parentNode);}else{this.render(this.cfg.getProperty("container"));}}else{this.render();}}else{if(this.parent){this.render(this.parent.element);}else{this.render(this.cfg.getProperty("container"));}}}if(this.cfg.getProperty("position")=="dynamic"){var _8ad=Dom.getViewportHeight();if(this.element.offsetHeight>=_8ad){var _8ae=this.cfg.getProperty("maxheight");this._nMaxHeight=_8ae;this.cfg.setProperty("maxheight",(_8ad-20));}if(this.cfg.getProperty("maxheight")>0){var _8af=this.body;if(_8af.scrollTop>0){_8af.scrollTop=0;}this._disableScrollHeader();this._enableScrollFooter();}}},_onShow:function(_8b0,_8b1,_8b2){this.setInitialFocus();var _8b3=this.parent;if(_8b3){var _8b4=_8b3.parent,aParentAlignment=_8b4.cfg.getProperty("submenualignment"),aAlignment=this.cfg.getProperty("submenualignment");if((aParentAlignment[0]!=aAlignment[0])&&(aParentAlignment[1]!=aAlignment[1])){this.cfg.setProperty("submenualignment",[aParentAlignment[0],aParentAlignment[1]]);}if(!_8b4.cfg.getProperty("autosubmenudisplay")&&_8b4.cfg.getProperty("position")=="static"){_8b4.cfg.setProperty("autosubmenudisplay",true);function disableAutoSubmenuDisplay(_8b5){if(_8b5.type=="mousedown"||(_8b5.type=="keydown"&&_8b5.keyCode==27)){var _8b6=Event.getTarget(_8b5);if(_8b6!=_8b4.element||!YAHOO.util.Dom.isAncestor(_8b4.element,_8b6)){_8b4.cfg.setProperty("autosubmenudisplay",false);Event.removeListener(document,"mousedown",disableAutoSubmenuDisplay);Event.removeListener(document,"keydown",disableAutoSubmenuDisplay);}}}Event.addListener(document,"mousedown",disableAutoSubmenuDisplay);Event.addListener(document,"keydown",disableAutoSubmenuDisplay);}}else{if(!_8b3&&this.lazyLoad){this.cfg.refireEvent("xy");}}},_onBeforeHide:function(_8b7,_8b8,_8b9){var _8ba=this.activeItem;if(_8ba){var _8bb=_8ba.cfg;_8bb.setProperty("selected",false);var _8bc=_8bb.getProperty("submenu");if(_8bc){_8bc.hide();}_8ba.blur();}},_onHide:function(_8bd,_8be,_8bf){if(this._nMaxHeight!=-1){this.cfg.setProperty("maxheight",this._nMaxHeight);this._nMaxHeight=-1;}},_onParentMenuConfigChange:function(_8c0,_8c1,_8c2){var _8c3=_8c1[0][0],oPropertyValue=_8c1[0][1];switch(_8c3){case "iframe":case "constraintoviewport":case "hidedelay":case "showdelay":case "submenuhidedelay":case "clicktohide":case "effect":case "classname":_8c2.cfg.setProperty(_8c3,oPropertyValue);break;}},_onParentMenuRender:function(_8c4,_8c5,_8c6){var _8c7=_8c6.parent.parent,oConfig={constraintoviewport:_8c7.cfg.getProperty("constraintoviewport"),xy:[0,0],clicktohide:_8c7.cfg.getProperty("clicktohide"),effect:_8c7.cfg.getProperty("effect"),showdelay:_8c7.cfg.getProperty("showdelay"),hidedelay:_8c7.cfg.getProperty("hidedelay"),submenuhidedelay:_8c7.cfg.getProperty("submenuhidedelay"),classname:_8c7.cfg.getProperty("classname")};if(this.cfg.getProperty("position")==_8c7.cfg.getProperty("position")){oConfig.iframe=_8c7.cfg.getProperty("iframe");}_8c6.cfg.applyConfig(oConfig);if(!this.lazyLoad){var oLI=this.parent.element;if(this.element.parentNode==oLI){this.render();}else{this.render(oLI);}}},_onSubmenuBeforeShow:function(_8c9,_8ca,_8cb){var _8cc=this.parent,aAlignment=_8cc.parent.cfg.getProperty("submenualignment");this.cfg.setProperty("context",[_8cc.element,aAlignment[0],aAlignment[1]]);var _8cd=_8cc.parent.body.scrollTop;if((this.browser=="gecko"||this.browser=="safari")&&_8cd>0){this.cfg.setProperty("y",(this.cfg.getProperty("y")-_8cd));}},_onSubmenuShow:function(_8ce,_8cf,_8d0){var _8d1=this.parent;_8d1.submenuIndicator.firstChild.nodeValue=_8d1.EXPANDED_SUBMENU_INDICATOR_TEXT;},_onSubmenuHide:function(_8d2,_8d3,_8d4){var _8d5=this.parent;_8d5.submenuIndicator.firstChild.nodeValue=_8d5.COLLAPSED_SUBMENU_INDICATOR_TEXT;},_onMenuItemFocus:function(_8d6,_8d7,_8d8){this.activeItem=_8d8;},_onMenuItemBlur:function(_8d9,_8da){this.activeItem=null;},_onMenuItemConfigChange:function(_8db,_8dc,_8dd){var _8de=_8dc[0][0];switch(_8de){case "submenu":var _8df=_8dc[0][1];if(_8df){this._configureSubmenu(_8dd);}break;case "text":case "helptext":if(this.element.style.width){var _8e0=this._getOffsetWidth()+"px";Dom.setStyle(this.element,"width",_8e0);}break;}},enforceConstraints:function(type,args,obj){var _8e4=this.cfg,pos=args[0],x=pos[0],y=pos[1],offsetHeight=this.element.offsetHeight,offsetWidth=this.element.offsetWidth,viewPortWidth=YAHOO.util.Dom.getViewportWidth(),viewPortHeight=YAHOO.util.Dom.getViewportHeight(),scrollX=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),scrollY=Math.max(document.documentElement.scrollTop,document.body.scrollTop),nPadding=(this.parent&&this.parent.parent instanceof YAHOO.widget.MenuBar)?0:10,topConstraint=scrollY+nPadding,leftConstraint=scrollX+nPadding,bottomConstraint=scrollY+viewPortHeight-offsetHeight-nPadding,rightConstraint=scrollX+viewPortWidth-offsetWidth-nPadding,aContext=_8e4.getProperty("context"),oContextElement=aContext?aContext[0]:null;if(x<10){x=leftConstraint;}else{if((x+offsetWidth)>viewPortWidth){if(oContextElement&&((x-oContextElement.offsetWidth)>offsetWidth)){x=(x-(oContextElement.offsetWidth+offsetWidth));}else{x=rightConstraint;}}}if(y<10){y=topConstraint;}else{if(y>bottomConstraint){if(oContextElement&&(y>offsetHeight)){y=((y+oContextElement.offsetHeight)-offsetHeight);}else{y=bottomConstraint;}}}_8e4.setProperty("x",x,true);_8e4.setProperty("y",y,true);_8e4.setProperty("xy",[x,y],true);},configVisible:function(_8e5,_8e6,_8e7){if(this.cfg.getProperty("position")=="dynamic"){YAHOO.widget.Menu.superclass.configVisible.call(this,_8e5,_8e6,_8e7);}else{var _8e8=_8e6[0],sDisplay=Dom.getStyle(this.element,"display");if(_8e8){if(sDisplay!="block"){this.beforeShowEvent.fire();Dom.setStyle(this.element,"display","block");this.showEvent.fire();}}else{if(sDisplay=="block"){this.beforeHideEvent.fire();Dom.setStyle(this.element,"display","none");this.hideEvent.fire();}}}},configPosition:function(_8e9,_8ea,_8eb){var _8ec=_8ea[0]=="static"?"static":"absolute",oCfg=this.cfg;Dom.setStyle(this.element,"position",_8ec);if(_8ec=="static"){oCfg.setProperty("iframe",false);Dom.setStyle(this.element,"display","block");oCfg.setProperty("visible",true);}else{Dom.setStyle(this.element,"visibility","hidden");}if(_8ec=="absolute"){var _8ed=oCfg.getProperty("zindex");if(!_8ed||_8ed===0){_8ed=this.parent?(this.parent.parent.cfg.getProperty("zindex")+1):1;oCfg.setProperty("zindex",_8ed);}}},configIframe:function(_8ee,_8ef,_8f0){if(this.cfg.getProperty("position")=="dynamic"){YAHOO.widget.Menu.superclass.configIframe.call(this,_8ee,_8ef,_8f0);}},configHideDelay:function(_8f1,_8f2,_8f3){var _8f4=_8f2[0],oMouseOutEvent=this.mouseOutEvent,oMouseOverEvent=this.mouseOverEvent,oKeyDownEvent=this.keyDownEvent;if(_8f4>0){if(!this._bHideDelayEventHandlersAssigned){oMouseOutEvent.subscribe(this._execHideDelay,true);oMouseOverEvent.subscribe(this._cancelHideDelay,this,true);oKeyDownEvent.subscribe(this._cancelHideDelay,this,true);this._bHideDelayEventHandlersAssigned=true;}}else{oMouseOutEvent.unsubscribe(this._execHideDelay,this);oMouseOverEvent.unsubscribe(this._cancelHideDelay,this);oKeyDownEvent.unsubscribe(this._cancelHideDelay,this);this._bHideDelayEventHandlersAssigned=false;}},configContainer:function(_8f5,_8f6,_8f7){var _8f8=_8f6[0];if(typeof _8f8=="string"){this.cfg.setProperty("container",document.getElementById(_8f8),true);}},configMaxHeight:function(_8f9,_8fa,_8fb){var _8fc=_8fa[0],oBody=this.body,oHeader=this.header,oFooter=this.footer,fnMouseOver=this._onScrollTargetMouseOver,fnMouseOut=this._onScrollTargetMouseOut;if((_8fc>0)&&(oBody.offsetHeight>_8fc)){if(!this.cfg.getProperty("width")){this._setWidth();}if(!oHeader&&!oFooter){this.setHeader("&#32;");this.setFooter("&#32;");oHeader=this.header;oFooter=this.footer;Dom.addClass(oHeader,"topscrollbar");Dom.addClass(oFooter,"bottomscrollbar");this.element.insertBefore(oHeader,oBody);this.element.appendChild(oFooter);Event.addListener(oHeader,"mouseover",fnMouseOver,this,true);Event.addListener(oHeader,"mouseout",fnMouseOut,this,true);Event.addListener(oFooter,"mouseover",fnMouseOver,this,true);Event.addListener(oFooter,"mouseout",fnMouseOut,this,true);}var _8fd=(_8fc-(this.footer.offsetHeight+this.header.offsetHeight));Dom.setStyle(oBody,"height",(_8fd+"px"));Dom.setStyle(oBody,"overflow","hidden");}else{if(oHeader&&oFooter){Dom.setStyle(oBody,"height","auto");Dom.setStyle(oBody,"overflow","visible");Event.removeListener(oHeader,"mouseover",fnMouseOver);Event.removeListener(oHeader,"mouseout",fnMouseOut);Event.removeListener(oFooter,"mouseover",fnMouseOver);Event.removeListener(oFooter,"mouseout",fnMouseOut);this.element.removeChild(oHeader);this.element.removeChild(oFooter);this.header=null;this.footer=null;}}},configClassName:function(_8fe,_8ff,_900){var _901=_8ff[0];if(this._sClassName){Dom.removeClass(this.element,this._sClassName);}Dom.addClass(this.element,_901);this._sClassName=_901;},initEvents:function(){YAHOO.widget.Menu.superclass.initEvents.call(this);var _902=YAHOO.util.CustomEvent;this.mouseOverEvent=new _902("mouseOverEvent",this);this.mouseOutEvent=new _902("mouseOutEvent",this);this.mouseDownEvent=new _902("mouseDownEvent",this);this.mouseUpEvent=new _902("mouseUpEvent",this);this.clickEvent=new _902("clickEvent",this);this.keyPressEvent=new _902("keyPressEvent",this);this.keyDownEvent=new _902("keyDownEvent",this);this.keyUpEvent=new _902("keyUpEvent",this);this.itemAddedEvent=new _902("itemAddedEvent",this);this.itemRemovedEvent=new _902("itemRemovedEvent",this);},getRoot:function(){var _903=this.parent;if(_903){var _904=_903.parent;return _904?_904.getRoot():this;}else{return this;}},toString:function(){return ("Menu "+this.id);},setItemGroupTitle:function(_905,_906){if(typeof _905=="string"&&_905.length>0){var _907=typeof _906=="number"?_906:0,oTitle=this._aGroupTitleElements[_907];if(oTitle){oTitle.innerHTML=_905;}else{oTitle=document.createElement(this.GROUP_TITLE_TAG_NAME);oTitle.innerHTML=_905;this._aGroupTitleElements[_907]=oTitle;}var i=this._aGroupTitleElements.length-1,nFirstIndex;do{if(this._aGroupTitleElements[i]){Dom.removeClass(this._aGroupTitleElements[i],"first-of-type");nFirstIndex=i;}}while(i--);if(nFirstIndex!==null){Dom.addClass(this._aGroupTitleElements[nFirstIndex],"first-of-type");}}},addItem:function(_909,_90a){if(_909){return this._addItemToGroup(_90a,_909);}},addItems:function(_90b,_90c){if(Lang.isArray(_90b)){var _90d=_90b.length,aItems=[],oItem;for(var i=0;i<_90d;i++){oItem=_90b[i];if(oItem){if(Lang.isArray(oItem)){aItems[aItems.length]=this.addItems(oItem,i);}else{aItems[aItems.length]=this._addItemToGroup(_90c,oItem);}}}if(aItems.length){return aItems;}}},insertItem:function(_90f,_910,_911){if(_90f){return this._addItemToGroup(_911,_90f,_910);}},removeItem:function(_912,_913){if(typeof _912!="undefined"){var _914;if(_912 instanceof YAHOO.widget.MenuItem){_914=this._removeItemFromGroupByValue(_913,_912);}else{if(typeof _912=="number"){_914=this._removeItemFromGroupByIndex(_913,_912);}}if(_914){_914.destroy();return _914;}}},getItems:function(){var _915=this._aItemGroups,nGroups=_915.length;return ((nGroups==1)?_915[0]:(Array.prototype.concat.apply([],_915)));},getItemGroups:function(){return this._aItemGroups;},getItem:function(_916,_917){if(typeof _916=="number"){var _918=this._getItemGroup(_917);if(_918){return _918[_916];}}},clearContent:function(){var _919=this.getItems(),nItems=_919.length,oElement=this.element,oBody=this.body,oHeader=this.header,oFooter=this.footer;if(nItems>0){var i=nItems-1,oItem,oSubmenu;do{oItem=_919[i];if(oItem){oSubmenu=oItem.cfg.getProperty("submenu");if(oSubmenu){this.cfg.configChangedEvent.unsubscribe(this._onParentMenuConfigChange,oSubmenu);this.renderEvent.unsubscribe(this._onParentMenuRender,oSubmenu);}oItem.destroy();}}while(i--);}if(oHeader){Event.purgeElement(oHeader);oElement.removeChild(oHeader);}if(oFooter){Event.purgeElement(oFooter);oElement.removeChild(oFooter);}if(oBody){Event.purgeElement(oBody);oBody.innerHTML="";}this._aItemGroups=[];this._aListElements=[];this._aGroupTitleElements=[];},destroy:function(){Event.purgeElement(this.element);this.mouseOverEvent.unsubscribeAll();this.mouseOutEvent.unsubscribeAll();this.mouseDownEvent.unsubscribeAll();this.mouseUpEvent.unsubscribeAll();this.clickEvent.unsubscribeAll();this.keyPressEvent.unsubscribeAll();this.keyDownEvent.unsubscribeAll();this.keyUpEvent.unsubscribeAll();this.itemAddedEvent.unsubscribeAll();this.itemRemovedEvent.unsubscribeAll();YAHOO.widget.Module.textResizeEvent.unsubscribe(this._onTextResize,this);this.clearContent();this._aItemGroups=null;this._aListElements=null;this._aGroupTitleElements=null;YAHOO.widget.Menu.superclass.destroy.call(this);},setInitialFocus:function(){var _91b=this._getFirstEnabledItem();if(_91b){_91b.focus();}},setInitialSelection:function(){var _91c=this._getFirstEnabledItem();if(_91c){_91c.cfg.setProperty("selected",true);}},clearActiveItem:function(_91d){if(this.cfg.getProperty("showdelay")>0){this._cancelShowDelay();}var _91e=this.activeItem;if(_91e){var _91f=_91e.cfg;_91f.setProperty("selected",false);var _920=_91f.getProperty("submenu");if(_920){_920.hide();}if(_91d){_91e.blur();}}},initDefaultConfig:function(){YAHOO.widget.Menu.superclass.initDefaultConfig.call(this);var _921=this.cfg;_921.addProperty("visible",{value:false,handler:this.configVisible,validator:this.cfg.checkBoolean});_921.addProperty("constraintoviewport",{value:true,handler:this.configConstrainToViewport,validator:this.cfg.checkBoolean,supercedes:["iframe","x","y","xy"]});_921.addProperty("position",{value:"dynamic",handler:this.configPosition,validator:this._checkPosition,supercedes:["visible"]});_921.addProperty("submenualignment",{value:["tl","tr"]});_921.addProperty("autosubmenudisplay",{value:true,validator:_921.checkBoolean});_921.addProperty("showdelay",{value:250,validator:_921.checkNumber});_921.addProperty("hidedelay",{value:0,validator:_921.checkNumber,handler:this.configHideDelay,suppressEvent:true});_921.addProperty("submenuhidedelay",{value:250,validator:_921.checkNumber});_921.addProperty("clicktohide",{value:true,validator:_921.checkBoolean});_921.addProperty("container",{value:document.body,handler:this.configContainer});_921.addProperty("maxheight",{value:0,validator:_921.checkNumber,handler:this.configMaxHeight});_921.addProperty("classname",{value:null,handler:this.configClassName,validator:this._checkString});}});})();(function(){var Dom=YAHOO.util.Dom,Module=YAHOO.widget.Module,Menu=YAHOO.widget.Menu,m_oMenuItemElement=null,m_oSubmenuIndicator=null,m_oCheckedIndicator=null;YAHOO.widget.MenuItem=function(_923,_924){if(_923){if(_924){this.parent=_924.parent;this.value=_924.value;this.id=_924.id;}this.init(_923,_924);}};YAHOO.widget.MenuItem.prototype={SUBMENU_INDICATOR_IMAGE_PATH:"nt/ic/ut/alt1/menuarorght8_nrm_1.gif",SELECTED_SUBMENU_INDICATOR_IMAGE_PATH:"nt/ic/ut/alt1/menuarorght8_hov_1.gif",DISABLED_SUBMENU_INDICATOR_IMAGE_PATH:"nt/ic/ut/alt1/menuarorght8_dim_1.gif",COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT:"Collapsed.  Click to expand.",EXPANDED_SUBMENU_INDICATOR_ALT_TEXT:"Expanded.  Click to collapse.",DISABLED_SUBMENU_INDICATOR_ALT_TEXT:"Disabled.",COLLAPSED_SUBMENU_INDICATOR_TEXT:"Submenu collapsed.  Click to expand submenu.",EXPANDED_SUBMENU_INDICATOR_TEXT:"Submenu expanded.  Click to collapse submenu.",DISABLED_SUBMENU_INDICATOR_TEXT:"Submenu collapsed.  (Item disabled.)",CHECKED_IMAGE_PATH:"nt/ic/ut/bsc/menuchk8_nrm_1.gif",SELECTED_CHECKED_IMAGE_PATH:"nt/ic/ut/bsc/menuchk8_hov_1.gif",DISABLED_CHECKED_IMAGE_PATH:"nt/ic/ut/bsc/menuchk8_dim_1.gif",CHECKED_IMAGE_ALT_TEXT:"Checked.",DISABLED_CHECKED_IMAGE_ALT_TEXT:"Checked. (Item disabled.)",CHECKED_TEXT:"Menu item checked.",DISABLED_CHECKED_TEXT:"Checked. (Item disabled.)",CSS_CLASS_NAME:"yuimenuitem",SUBMENU_TYPE:null,IMG_ROOT:"http://us.i1.yimg.com/us.yimg.com/i/",IMG_ROOT_SSL:"https://a248.e.akamai.net/sec.yimg.com/i/",_oAnchor:null,_oText:null,_oHelpTextEM:null,_oSubmenu:null,_checkImage:null,_oCheckedIndicator:null,_oOnclickAttributeValue:null,_sClassName:null,constructor:YAHOO.widget.MenuItem,imageRoot:null,isSecure:Module.prototype.isSecure,index:null,groupIndex:null,parent:null,element:null,srcElement:null,value:null,submenuIndicator:null,browser:Module.prototype.browser,id:null,destroyEvent:null,mouseOverEvent:null,mouseOutEvent:null,mouseDownEvent:null,mouseUpEvent:null,clickEvent:null,keyPressEvent:null,keyDownEvent:null,keyUpEvent:null,focusEvent:null,blurEvent:null,init:function(_925,_926){if(!this.SUBMENU_TYPE){this.SUBMENU_TYPE=Menu;}this.cfg=new YAHOO.util.Config(this);this.initDefaultConfig();var _927=this.cfg;if(this._checkString(_925)){this._createRootNodeStructure();_927.setProperty("text",_925);}else{if(this._checkDOMNode(_925)){switch(_925.tagName.toUpperCase()){case "OPTION":this._createRootNodeStructure();_927.setProperty("text",_925.text);this.srcElement=_925;break;case "OPTGROUP":this._createRootNodeStructure();_927.setProperty("text",_925.label);this.srcElement=_925;this._initSubTree();break;case "LI":var _928=this._getFirstElement(_925,"A"),sURL="#",sTarget,sText;if(_928){sURL=_928.getAttribute("href");sTarget=_928.getAttribute("target");if(_928.innerText){sText=_928.innerText;}else{var _929=_928.ownerDocument.createRange();_929.selectNodeContents(_928);sText=_929.toString();}}else{var _92a=_925.firstChild;sText=_92a.nodeValue;_928=document.createElement("a");_928.setAttribute("href",sURL);_925.replaceChild(_928,_92a);_928.appendChild(_92a);}this.srcElement=_925;this.element=_925;this._oAnchor=_928;var _92b=this._getFirstElement(_928),bEmphasis=false,bStrongEmphasis=false;if(_92b){this._oText=_92b.firstChild;switch(_92b.tagName.toUpperCase()){case "EM":bEmphasis=true;break;case "STRONG":bStrongEmphasis=true;break;}}else{this._oText=_928.firstChild;}_927.setProperty("text",sText,true);_927.setProperty("url",sURL,true);_927.setProperty("target",sTarget,true);_927.setProperty("emphasis",bEmphasis,true);_927.setProperty("strongemphasis",bStrongEmphasis,true);this._initSubTree();break;}}}if(this.element){var sId=this.element.id;if(!sId){sId=this.id||Dom.generateId();this.element.id=sId;}this.id=sId;Dom.addClass(this.element,this.CSS_CLASS_NAME);var _92d=YAHOO.util.CustomEvent;this.destroyEvent=new _92d("destroyEvent",this);this.mouseOverEvent=new _92d("mouseOverEvent",this);this.mouseOutEvent=new _92d("mouseOutEvent",this);this.mouseDownEvent=new _92d("mouseDownEvent",this);this.mouseUpEvent=new _92d("mouseUpEvent",this);this.clickEvent=new _92d("clickEvent",this);this.keyPressEvent=new _92d("keyPressEvent",this);this.keyDownEvent=new _92d("keyDownEvent",this);this.keyUpEvent=new _92d("keyUpEvent",this);this.focusEvent=new _92d("focusEvent",this);this.blurEvent=new _92d("blurEvent",this);if(_926){_927.applyConfig(_926);}_927.fireQueue();}},_getFirstElement:function(_92e,_92f){var _930=_92e.firstChild,oElement;if(_930){if(_930.nodeType==1){oElement=_930;}else{var _931=_930.nextSibling;if(_931&&_931.nodeType==1){oElement=_931;}}}if(_92f){return (oElement&&oElement.tagName.toUpperCase()==_92f)?oElement:false;}return oElement;},_checkString:function(_932){return (typeof _932=="string");},_checkDOMNode:function(_933){return (_933&&_933.tagName);},_createRootNodeStructure:function(){if(!m_oMenuItemElement){m_oMenuItemElement=document.createElement("li");m_oMenuItemElement.innerHTML="<a href=\"#\">s</a>";}this.element=m_oMenuItemElement.cloneNode(true);this._oAnchor=this.element.firstChild;this._oText=this._oAnchor.firstChild;this.element.appendChild(this._oAnchor);},_initSubTree:function(){var _934=this.srcElement,oConfig=this.cfg;if(_934.childNodes.length>0){if(this.parent.lazyLoad&&this.parent.srcElement&&this.parent.srcElement.tagName.toUpperCase()=="SELECT"){oConfig.setProperty("submenu",{id:Dom.generateId(),itemdata:_934.childNodes});}else{var _935=_934.firstChild,aOptions=[];do{if(_935&&_935.tagName){switch(_935.tagName.toUpperCase()){case "DIV":oConfig.setProperty("submenu",_935);break;case "OPTION":aOptions[aOptions.length]=_935;break;}}}while((_935=_935.nextSibling));var _936=aOptions.length;if(_936>0){var _937=new this.SUBMENU_TYPE(Dom.generateId());oConfig.setProperty("submenu",_937);for(var n=0;n<_936;n++){_937.addItem((new _937.ITEM_TYPE(aOptions[n])));}}}}},_preloadImage:function(_939){var _93a=this.imageRoot+_939;if(!document.images[_93a]){var _93b=document.createElement("img");_93b.src=_93a;_93b.name=_93a;_93b.id=_93a;_93b.style.display="none";document.body.appendChild(_93b);}},configText:function(_93c,_93d,_93e){var _93f=_93d[0];if(this._oText){this._oText.nodeValue=_93f;}},configHelpText:function(_940,_941,_942){var me=this,oHelpText=_941[0],oEl=this.element,oConfig=this.cfg,aNodes=[oEl,this._oAnchor],oSubmenuIndicator=this.submenuIndicator;function initHelpText(){Dom.addClass(aNodes,"hashelptext");if(oConfig.getProperty("disabled")){oConfig.refireEvent("disabled");}if(oConfig.getProperty("selected")){oConfig.refireEvent("selected");}}function removeHelpText(){Dom.removeClass(aNodes,"hashelptext");oEl.removeChild(me._oHelpTextEM);me._oHelpTextEM=null;}if(this._checkDOMNode(oHelpText)){oHelpText.className="helptext";if(this._oHelpTextEM){this._oHelpTextEM.parentNode.replaceChild(oHelpText,this._oHelpTextEM);}else{this._oHelpTextEM=oHelpText;oEl.insertBefore(this._oHelpTextEM,oSubmenuIndicator);}initHelpText();}else{if(this._checkString(oHelpText)){if(oHelpText.length===0){removeHelpText();}else{if(!this._oHelpTextEM){this._oHelpTextEM=document.createElement("em");this._oHelpTextEM.className="helptext";oEl.insertBefore(this._oHelpTextEM,oSubmenuIndicator);}this._oHelpTextEM.innerHTML=oHelpText;initHelpText();}}else{if(!oHelpText&&this._oHelpTextEM){removeHelpText();}}}},configURL:function(_944,_945,_946){var sURL=_945[0];if(!sURL){sURL="#";}this._oAnchor.setAttribute("href",sURL);},configTarget:function(_948,_949,_94a){var _94b=_949[0],oAnchor=this._oAnchor;if(_94b&&_94b.length>0){oAnchor.setAttribute("target",_94b);}else{oAnchor.removeAttribute("target");}},configEmphasis:function(_94c,_94d,_94e){var _94f=_94d[0],oAnchor=this._oAnchor,oText=this._oText,oConfig=this.cfg,oEM;if(_94f&&oConfig.getProperty("strongemphasis")){oConfig.setProperty("strongemphasis",false);}if(oAnchor){if(_94f){oEM=document.createElement("em");oEM.appendChild(oText);oAnchor.appendChild(oEM);}else{oEM=this._getFirstElement(oAnchor,"EM");if(oEM){oAnchor.removeChild(oEM);oAnchor.appendChild(oText);}}}},configStrongEmphasis:function(_950,_951,_952){var _953=_951[0],oAnchor=this._oAnchor,oText=this._oText,oConfig=this.cfg,oStrong;if(_953&&oConfig.getProperty("emphasis")){oConfig.setProperty("emphasis",false);}if(oAnchor){if(_953){oStrong=document.createElement("strong");oStrong.appendChild(oText);oAnchor.appendChild(oStrong);}else{oStrong=this._getFirstElement(oAnchor,"STRONG");if(oStrong){oAnchor.removeChild(oStrong);oAnchor.appendChild(oText);}}}},configChecked:function(_954,_955,_956){var _957=_955[0],oEl=this.element,oConfig=this.cfg,oEM;if(_957){if(!m_oCheckedIndicator){m_oCheckedIndicator=document.createElement("em");m_oCheckedIndicator.innerHTML=this.CHECKED_TEXT;m_oCheckedIndicator.className="checkedindicator";}oEM=m_oCheckedIndicator.cloneNode(true);var _958=this.cfg.getProperty("submenu");if(_958&&_958.element){oEl.insertBefore(oEM,_958.element);}else{oEl.appendChild(oEM);}Dom.addClass(oEl,"checked");this._oCheckedIndicator=oEM;if(oConfig.getProperty("disabled")){oConfig.refireEvent("disabled");}if(oConfig.getProperty("selected")){oConfig.refireEvent("selected");}}else{oEM=this._oCheckedIndicator;Dom.removeClass(oEl,"checked");if(oEM){oEl.removeChild(oEM);}this._oCheckedIndicator=null;}},configDisabled:function(_959,_95a,_95b){var _95c=_95a[0],oConfig=this.cfg,oAnchor=this._oAnchor,aNodes=[this.element,oAnchor],oHelpText=this._oHelpTextEM,oCheckedIndicator=this._oCheckedIndicator,oSubmenuIndicator=this.submenuIndicator,i=1;if(oHelpText){i++;aNodes[i]=oHelpText;}if(oCheckedIndicator){oCheckedIndicator.firstChild.nodeValue=_95c?this.DISABLED_CHECKED_TEXT:this.CHECKED_TEXT;i++;aNodes[i]=oCheckedIndicator;}if(oSubmenuIndicator){oSubmenuIndicator.firstChild.nodeValue=_95c?this.DISABLED_SUBMENU_INDICATOR_TEXT:this.COLLAPSED_SUBMENU_INDICATOR_TEXT;i++;aNodes[i]=oSubmenuIndicator;}if(_95c){if(oConfig.getProperty("selected")){oConfig.setProperty("selected",false);}oAnchor.removeAttribute("href");Dom.addClass(aNodes,"disabled");}else{oAnchor.setAttribute("href",oConfig.getProperty("url"));Dom.removeClass(aNodes,"disabled");}},configSelected:function(_95d,_95e,_95f){if(!this.cfg.getProperty("disabled")){var _960=_95e[0],oHelpText=this._oHelpTextEM,oSubmenuIndicator=this.submenuIndicator,oCheckedIndicator=this._oCheckedIndicator,aNodes=[this.element,this._oAnchor],i=1;if(oHelpText){i++;aNodes[i]=oHelpText;}if(oSubmenuIndicator){i++;aNodes[i]=oSubmenuIndicator;}if(oCheckedIndicator){i++;aNodes[i]=oCheckedIndicator;}if(_960){Dom.addClass(aNodes,"selected");}else{Dom.removeClass(aNodes,"selected");}}},configSubmenu:function(_961,_962,_963){var oEl=this.element,oSubmenu=_962[0],oSubmenuIndicator=this.submenuIndicator,oConfig=this.cfg,aNodes=[this.element,this._oAnchor],bLazyLoad=this.parent&&this.parent.lazyLoad,oMenu;if(oSubmenu){if(oSubmenu instanceof Menu){oMenu=oSubmenu;oMenu.parent=this;oMenu.lazyLoad=bLazyLoad;}else{if(typeof oSubmenu=="object"&&oSubmenu.id&&!oSubmenu.nodeType){var _965=oSubmenu.id,oSubmenuConfig=oSubmenu;oSubmenuConfig.lazyload=bLazyLoad;oSubmenuConfig.parent=this;oMenu=new this.SUBMENU_TYPE(_965,oSubmenuConfig);this.cfg.setProperty("submenu",oMenu,true);}else{oMenu=new this.SUBMENU_TYPE(oSubmenu,{lazyload:bLazyLoad,parent:this});this.cfg.setProperty("submenu",oMenu,true);}}if(oMenu){this._oSubmenu=oMenu;if(!oSubmenuIndicator){if(!m_oSubmenuIndicator){m_oSubmenuIndicator=document.createElement("em");m_oSubmenuIndicator.innerHTML=this.COLLAPSED_SUBMENU_INDICATOR_TEXT;m_oSubmenuIndicator.className="submenuindicator";}oSubmenuIndicator=m_oSubmenuIndicator.cloneNode(true);if(oMenu.element.parentNode==oEl){if(this.browser=="opera"){oEl.appendChild(oSubmenuIndicator);oMenu.renderEvent.subscribe(function(){oSubmenuIndicator.parentNode.insertBefore(oSubmenuIndicator,oMenu.element);});}else{oEl.insertBefore(oSubmenuIndicator,oMenu.element);}}else{oEl.appendChild(oSubmenuIndicator);}this.submenuIndicator=oSubmenuIndicator;}Dom.addClass(aNodes,"hassubmenu");if(oConfig.getProperty("disabled")){oConfig.refireEvent("disabled");}if(oConfig.getProperty("selected")){oConfig.refireEvent("selected");}}}else{Dom.removeClass(aNodes,"hassubmenu");if(oSubmenuIndicator){oEl.removeChild(oSubmenuIndicator);}if(this._oSubmenu){this._oSubmenu.destroy();}}},configOnClick:function(_966,_967,_968){var _969=_967[0];if(this._oOnclickAttributeValue&&(this._oOnclickAttributeValue!=_969)){this.clickEvent.unsubscribe(this._oOnclickAttributeValue.fn,this._oOnclickAttributeValue.obj);this._oOnclickAttributeValue=null;}if(!this._oOnclickAttributeValue&&typeof _969=="object"&&typeof _969.fn=="function"){this.clickEvent.subscribe(_969.fn,(_969.obj||this),_969.scope);this._oOnclickAttributeValue=_969;}},configClassName:function(_96a,_96b,_96c){var _96d=_96b[0];if(this._sClassName){Dom.removeClass(this.element,this._sClassName);}Dom.addClass(this.element,_96d);this._sClassName=_96d;},initDefaultConfig:function(){var _96e=this.cfg,CheckBoolean=_96e.checkBoolean;_96e.addProperty("text",{value:"",handler:this.configText,validator:this._checkString,suppressEvent:true});_96e.addProperty("helptext",{handler:this.configHelpText});_96e.addProperty("url",{value:"#",handler:this.configURL,suppressEvent:true});_96e.addProperty("target",{handler:this.configTarget,suppressEvent:true});_96e.addProperty("emphasis",{value:false,handler:this.configEmphasis,validator:CheckBoolean,suppressEvent:true});_96e.addProperty("strongemphasis",{value:false,handler:this.configStrongEmphasis,validator:CheckBoolean,suppressEvent:true});_96e.addProperty("checked",{value:false,handler:this.configChecked,validator:this.cfg.checkBoolean,suppressEvent:true,supercedes:["disabled"]});_96e.addProperty("disabled",{value:false,handler:this.configDisabled,validator:CheckBoolean,suppressEvent:true});_96e.addProperty("selected",{value:false,handler:this.configSelected,validator:CheckBoolean,suppressEvent:true});_96e.addProperty("submenu",{handler:this.configSubmenu});_96e.addProperty("onclick",{handler:this.configOnClick});_96e.addProperty("classname",{value:null,handler:this.configClassName,validator:this._checkString});},getNextEnabledSibling:function(){if(this.parent instanceof Menu){var _96f=this.groupIndex;function getNextArrayItem(_970,_971){return _970[_971]||getNextArrayItem(_970,(_971+1));}var _972=this.parent.getItemGroups(),oNextItem;if(this.index<(_972[_96f].length-1)){oNextItem=getNextArrayItem(_972[_96f],(this.index+1));}else{var _973;if(_96f<(_972.length-1)){_973=_96f+1;}else{_973=0;}var _974=getNextArrayItem(_972,_973);oNextItem=getNextArrayItem(_974,0);}return (oNextItem.cfg.getProperty("disabled")||oNextItem.element.style.display=="none")?oNextItem.getNextEnabledSibling():oNextItem;}},getPreviousEnabledSibling:function(){if(this.parent instanceof Menu){var _975=this.groupIndex;function getPreviousArrayItem(_976,_977){return _976[_977]||getPreviousArrayItem(_976,(_977-1));}function getFirstItemIndex(_978,_979){return _978[_979]?_979:getFirstItemIndex(_978,(_979+1));}var _97a=this.parent.getItemGroups(),oPreviousItem;if(this.index>getFirstItemIndex(_97a[_975],0)){oPreviousItem=getPreviousArrayItem(_97a[_975],(this.index-1));}else{var _97b;if(_975>getFirstItemIndex(_97a,0)){_97b=_975-1;}else{_97b=_97a.length-1;}var _97c=getPreviousArrayItem(_97a,_97b);oPreviousItem=getPreviousArrayItem(_97c,(_97c.length-1));}return (oPreviousItem.cfg.getProperty("disabled")||oPreviousItem.element.style.display=="none")?oPreviousItem.getPreviousEnabledSibling():oPreviousItem;}},focus:function(){var _97d=this.parent,oAnchor=this._oAnchor,oActiveItem=_97d.activeItem;function setFocus(){try{oAnchor.focus();}catch(e){}}if(!this.cfg.getProperty("disabled")&&_97d&&_97d.cfg.getProperty("visible")&&this.element.style.display!="none"){if(oActiveItem){oActiveItem.blur();}window.setTimeout(setFocus,0);this.focusEvent.fire();}},blur:function(){var _97e=this.parent;if(!this.cfg.getProperty("disabled")&&_97e&&Dom.getStyle(_97e.element,"visibility")=="visible"){this._oAnchor.blur();this.blurEvent.fire();}},destroy:function(){var oEl=this.element;if(oEl){var _980=this.cfg.getProperty("submenu");if(_980){_980.destroy();}this.mouseOverEvent.unsubscribeAll();this.mouseOutEvent.unsubscribeAll();this.mouseDownEvent.unsubscribeAll();this.mouseUpEvent.unsubscribeAll();this.clickEvent.unsubscribeAll();this.keyPressEvent.unsubscribeAll();this.keyDownEvent.unsubscribeAll();this.keyUpEvent.unsubscribeAll();this.focusEvent.unsubscribeAll();this.blurEvent.unsubscribeAll();this.cfg.configChangedEvent.unsubscribeAll();var _981=oEl.parentNode;if(_981){_981.removeChild(oEl);this.destroyEvent.fire();}this.destroyEvent.unsubscribeAll();}},toString:function(){return ("MenuItem: "+this.cfg.getProperty("text"));}};})();YAHOO.widget.ContextMenu=function(_982,_983){YAHOO.widget.ContextMenu.superclass.constructor.call(this,_982,_983);};YAHOO.lang.extend(YAHOO.widget.ContextMenu,YAHOO.widget.Menu,{_oTrigger:null,_bCancelled:false,contextEventTarget:null,triggerContextMenuEvent:null,init:function(_984,_985){if(!this.ITEM_TYPE){this.ITEM_TYPE=YAHOO.widget.ContextMenuItem;}YAHOO.widget.ContextMenu.superclass.init.call(this,_984);this.beforeInitEvent.fire(YAHOO.widget.ContextMenu);if(_985){this.cfg.applyConfig(_985,true);}this.initEvent.fire(YAHOO.widget.ContextMenu);},initEvents:function(){YAHOO.widget.ContextMenu.superclass.initEvents.call(this);this.triggerContextMenuEvent=new YAHOO.util.CustomEvent("triggerContextMenuEvent",this);},cancel:function(){this._bCancelled=true;},_removeEventHandlers:function(){var _986=YAHOO.util.Event,oTrigger=this._oTrigger,bOpera=(this.browser=="opera");_986.removeListener(oTrigger,(bOpera?"mousedown":"contextmenu"),this._onTriggerContextMenu);if(bOpera){_986.removeListener(oTrigger,"click",this._onTriggerClick);}},_onTriggerClick:function(_987,_988){if(_987.ctrlKey){YAHOO.util.Event.stopEvent(_987);}},_onTriggerContextMenu:function(_989,_98a){var _98b=YAHOO.util.Event;if(_989.type=="mousedown"&&!_989.ctrlKey){return;}_98b.stopEvent(_989);YAHOO.widget.MenuManager.hideVisible();this.contextEventTarget=_98b.getTarget(_989);this.triggerContextMenuEvent.fire(_989);if(!this._bCancelled){this.cfg.setProperty("xy",_98b.getXY(_989));this.show();}this._bCancelled=false;},toString:function(){return ("ContextMenu "+this.id);},initDefaultConfig:function(){YAHOO.widget.ContextMenu.superclass.initDefaultConfig.call(this);this.cfg.addProperty("trigger",{handler:this.configTrigger});},destroy:function(){this._removeEventHandlers();YAHOO.widget.ContextMenu.superclass.destroy.call(this);},configTrigger:function(_98c,_98d,_98e){var _98f=YAHOO.util.Event,oTrigger=_98d[0];if(oTrigger){if(this._oTrigger){this._removeEventHandlers();}this._oTrigger=oTrigger;var _990=(this.browser=="opera");_98f.addListener(oTrigger,(_990?"mousedown":"contextmenu"),this._onTriggerContextMenu,this,true);if(_990){_98f.addListener(oTrigger,"click",this._onTriggerClick,this,true);}}else{this._removeEventHandlers();}}});YAHOO.widget.ContextMenuItem=function(_991,_992){YAHOO.widget.ContextMenuItem.superclass.constructor.call(this,_991,_992);};YAHOO.lang.extend(YAHOO.widget.ContextMenuItem,YAHOO.widget.MenuItem,{init:function(_993,_994){if(!this.SUBMENU_TYPE){this.SUBMENU_TYPE=YAHOO.widget.ContextMenu;}YAHOO.widget.ContextMenuItem.superclass.init.call(this,_993);var _995=this.cfg;if(_994){_995.applyConfig(_994,true);}_995.fireQueue();},toString:function(){return ("ContextMenuItem: "+this.cfg.getProperty("text"));}});YAHOO.widget.MenuBar=function(_996,_997){YAHOO.widget.MenuBar.superclass.constructor.call(this,_996,_997);};YAHOO.lang.extend(YAHOO.widget.MenuBar,YAHOO.widget.Menu,{init:function(_998,_999){if(!this.ITEM_TYPE){this.ITEM_TYPE=YAHOO.widget.MenuBarItem;}YAHOO.widget.MenuBar.superclass.init.call(this,_998);this.beforeInitEvent.fire(YAHOO.widget.MenuBar);if(_999){this.cfg.applyConfig(_999,true);}this.initEvent.fire(YAHOO.widget.MenuBar);},CSS_CLASS_NAME:"yuimenubar",_onKeyDown:function(_99a,_99b,_99c){var _99d=YAHOO.util.Event,oEvent=_99b[0],oItem=_99b[1],oSubmenu;if(oItem&&!oItem.cfg.getProperty("disabled")){var _99e=oItem.cfg;switch(oEvent.keyCode){case 37:case 39:if(oItem==this.activeItem&&!_99e.getProperty("selected")){_99e.setProperty("selected",true);}else{var _99f=(oEvent.keyCode==37)?oItem.getPreviousEnabledSibling():oItem.getNextEnabledSibling();if(_99f){this.clearActiveItem();_99f.cfg.setProperty("selected",true);if(this.cfg.getProperty("autosubmenudisplay")){oSubmenu=_99f.cfg.getProperty("submenu");if(oSubmenu){oSubmenu.show();oSubmenu.activeItem.blur();oSubmenu.activeItem=null;}}_99f.focus();}}_99d.preventDefault(oEvent);break;case 40:if(this.activeItem!=oItem){this.clearActiveItem();_99e.setProperty("selected",true);oItem.focus();}oSubmenu=_99e.getProperty("submenu");if(oSubmenu){if(oSubmenu.cfg.getProperty("visible")){oSubmenu.setInitialSelection();oSubmenu.setInitialFocus();}else{oSubmenu.show();}}_99d.preventDefault(oEvent);break;}}if(oEvent.keyCode==27&&this.activeItem){oSubmenu=this.activeItem.cfg.getProperty("submenu");if(oSubmenu&&oSubmenu.cfg.getProperty("visible")){oSubmenu.hide();this.activeItem.focus();}else{this.activeItem.cfg.setProperty("selected",false);this.activeItem.blur();}_99d.preventDefault(oEvent);}},_onClick:function(_9a0,_9a1,_9a2){YAHOO.widget.MenuBar.superclass._onClick.call(this,_9a0,_9a1,_9a2);var _9a3=_9a1[1];if(_9a3&&!_9a3.cfg.getProperty("disabled")){var _9a4=YAHOO.util.Event,Dom=YAHOO.util.Dom,oEvent=_9a1[0],oTarget=_9a4.getTarget(oEvent),oActiveItem=this.activeItem,oConfig=this.cfg;if(oActiveItem&&oActiveItem!=_9a3){this.clearActiveItem();}_9a3.cfg.setProperty("selected",true);_9a3.focus();var _9a5=_9a3.cfg.getProperty("submenu");if(_9a5&&oTarget!=_9a3.submenuIndicator){if(_9a5.cfg.getProperty("visible")){_9a5.hide();}else{_9a5.show();}}}},toString:function(){return ("MenuBar "+this.id);},initDefaultConfig:function(){YAHOO.widget.MenuBar.superclass.initDefaultConfig.call(this);var _9a6=this.cfg;_9a6.addProperty("position",{value:"static",handler:this.configPosition,validator:this._checkPosition,supercedes:["visible"]});_9a6.addProperty("submenualignment",{value:["tl","bl"]});_9a6.addProperty("autosubmenudisplay",{value:false,validator:_9a6.checkBoolean});}});YAHOO.widget.MenuBarItem=function(_9a7,_9a8){YAHOO.widget.MenuBarItem.superclass.constructor.call(this,_9a7,_9a8);};YAHOO.lang.extend(YAHOO.widget.MenuBarItem,YAHOO.widget.MenuItem,{init:function(_9a9,_9aa){if(!this.SUBMENU_TYPE){this.SUBMENU_TYPE=YAHOO.widget.Menu;}YAHOO.widget.MenuBarItem.superclass.init.call(this,_9a9);var _9ab=this.cfg;if(_9aa){_9ab.applyConfig(_9aa,true);}_9ab.fireQueue();},CSS_CLASS_NAME:"yuimenubaritem",toString:function(){return ("MenuBarItem: "+this.cfg.getProperty("text"));}});YAHOO.register("menu",YAHOO.widget.Menu,{version:"2.2.0",build:"127"});if(!YAHOO.util.DragDropMgr){YAHOO.util.DragDropMgr=function(){var _9ac=YAHOO.util.Event;return {ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initalized:false,locked:false,init:function(){this.initialized=true;},POINT:0,INTERSECT:1,STRICT_INTERSECT:2,mode:0,_execOnAll:function(_9ad,args){for(var i in this.ids){for(var j in this.ids[i]){var oDD=this.ids[i][j];if(!this.isTypeOfDD(oDD)){continue;}oDD[_9ad].apply(oDD,args);}}},_onLoad:function(){this.init();_9ac.on(document,"mouseup",this.handleMouseUp,this,true);_9ac.on(document,"mousemove",this.handleMouseMove,this,true);_9ac.on(window,"unload",this._onUnload,this,true);_9ac.on(window,"resize",this._onResize,this,true);},_onResize:function(e){this._execOnAll("resetConstraints",[]);},lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isLocked:function(){return this.locked;},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:1000,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(oDD,_9b4){if(!this.initialized){this.init();}if(!this.ids[_9b4]){this.ids[_9b4]={};}this.ids[_9b4][oDD.id]=oDD;},removeDDFromGroup:function(oDD,_9b6){if(!this.ids[_9b6]){this.ids[_9b6]={};}var obj=this.ids[_9b6];if(obj&&obj[oDD.id]){delete obj[oDD.id];}},_remove:function(oDD){for(var g in oDD.groups){if(g&&this.ids[g][oDD.id]){delete this.ids[g][oDD.id];}}delete this.handleIds[oDD.id];},regHandle:function(_9ba,_9bb){if(!this.handleIds[_9ba]){this.handleIds[_9ba]={};}this.handleIds[_9ba][_9bb]=_9bb;},isDragDrop:function(id){return (this.getDDById(id))?true:false;},getRelated:function(_9bd,_9be){var oDDs=[];for(var i in _9bd.groups){for(j in this.ids[i]){var dd=this.ids[i][j];if(!this.isTypeOfDD(dd)){continue;}if(!_9be||dd.isTarget){oDDs[oDDs.length]=dd;}}}return oDDs;},isLegalTarget:function(oDD,_9c3){var _9c4=this.getRelated(oDD,true);for(var i=0,len=_9c4.length;i<len;++i){if(_9c4[i].id==_9c3.id){return true;}}return false;},isTypeOfDD:function(oDD){return (oDD&&oDD.__ygDragDrop);},isHandle:function(_9c7,_9c8){return (this.handleIds[_9c7]&&this.handleIds[_9c7][_9c8]);},getDDById:function(id){for(var i in this.ids){if(this.ids[i][id]){return this.ids[i][id];}}return null;},handleMouseDown:function(e,oDD){this.currentTarget=YAHOO.util.Event.getTarget(e);this.dragCurrent=oDD;var el=oDD.getEl();this.startX=YAHOO.util.Event.getPageX(e);this.startY=YAHOO.util.Event.getPageY(e);this.deltaX=this.startX-el.offsetLeft;this.deltaY=this.startY-el.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var DDM=YAHOO.util.DDM;DDM.startDrag(DDM.startX,DDM.startY);},this.clickTimeThresh);},startDrag:function(x,y){clearTimeout(this.clickTimeout);if(this.dragCurrent){this.dragCurrent.b4StartDrag(x,y);this.dragCurrent.startDrag(x,y);}this.dragThreshMet=true;},handleMouseUp:function(e){if(!this.dragCurrent){return;}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this.fireEvents(e,true);}else{}this.stopDrag(e);this.stopEvent(e);},stopEvent:function(e){if(this.stopPropagation){YAHOO.util.Event.stopPropagation(e);}if(this.preventDefault){YAHOO.util.Event.preventDefault(e);}},stopDrag:function(e){if(this.dragCurrent){if(this.dragThreshMet){this.dragCurrent.b4EndDrag(e);this.dragCurrent.endDrag(e);}this.dragCurrent.onMouseUp(e);}this.dragCurrent=null;this.dragOvers={};},handleMouseMove:function(e){if(!this.dragCurrent){return true;}if(YAHOO.util.Event.isIE&&!e.button){this.stopEvent(e);return this.handleMouseUp(e);}if(!this.dragThreshMet){var _9d5=Math.abs(this.startX-YAHOO.util.Event.getPageX(e));var _9d6=Math.abs(this.startY-YAHOO.util.Event.getPageY(e));if(_9d5>this.clickPixelThresh||_9d6>this.clickPixelThresh){this.startDrag(this.startX,this.startY);}}if(this.dragThreshMet){this.dragCurrent.b4Drag(e);this.dragCurrent.onDrag(e);this.fireEvents(e,false);}this.stopEvent(e);return true;},fireEvents:function(e,_9d8){var dc=this.dragCurrent;if(!dc||dc.isLocked()){return;}var x=YAHOO.util.Event.getPageX(e);var y=YAHOO.util.Event.getPageY(e);var pt=new YAHOO.util.Point(x,y);var _9dd=[];var _9de=[];var _9df=[];var _9e0=[];var _9e1=[];for(var i in this.dragOvers){var ddo=this.dragOvers[i];if(!this.isTypeOfDD(ddo)){continue;}if(!this.isOverTarget(pt,ddo,this.mode)){_9de.push(ddo);}_9dd[i]=true;delete this.dragOvers[i];}for(var _9e4 in dc.groups){if("string"!=typeof _9e4){continue;}for(i in this.ids[_9e4]){var oDD=this.ids[_9e4][i];if(!this.isTypeOfDD(oDD)){continue;}if(oDD.isTarget&&!oDD.isLocked()&&oDD!=dc){if(this.isOverTarget(pt,oDD,this.mode)){if(_9d8){_9e0.push(oDD);}else{if(!_9dd[oDD.id]){_9e1.push(oDD);}else{_9df.push(oDD);}this.dragOvers[oDD.id]=oDD;}}}}}if(this.mode){if(_9de.length){dc.b4DragOut(e,_9de);dc.onDragOut(e,_9de);}if(_9e1.length){dc.onDragEnter(e,_9e1);}if(_9df.length){dc.b4DragOver(e,_9df);dc.onDragOver(e,_9df);}if(_9e0.length){dc.b4DragDrop(e,_9e0);dc.onDragDrop(e,_9e0);}}else{var len=0;for(i=0,len=_9de.length;i<len;++i){dc.b4DragOut(e,_9de[i].id);dc.onDragOut(e,_9de[i].id);}for(i=0,len=_9e1.length;i<len;++i){dc.onDragEnter(e,_9e1[i].id);}for(i=0,len=_9df.length;i<len;++i){dc.b4DragOver(e,_9df[i].id);dc.onDragOver(e,_9df[i].id);}for(i=0,len=_9e0.length;i<len;++i){dc.b4DragDrop(e,_9e0[i].id);dc.onDragDrop(e,_9e0[i].id);}}if(_9d8&&!_9e0.length){dc.onInvalidDrop(e);}},getBestMatch:function(dds){var _9e8=null;var len=dds.length;if(len==1){_9e8=dds[0];}else{for(var i=0;i<len;++i){var dd=dds[i];if(this.mode==this.INTERSECT&&dd.cursorIsOver){_9e8=dd;break;}else{if(!_9e8||!_9e8.overlap||(dd.overlap&&_9e8.overlap.getArea()<dd.overlap.getArea())){_9e8=dd;}}}}return _9e8;},refreshCache:function(_9ec){var g=_9ec||this.ids;for(var _9ee in g){if("string"!=typeof _9ee){continue;}for(var i in this.ids[_9ee]){var oDD=this.ids[_9ee][i];if(this.isTypeOfDD(oDD)){var loc=this.getLocation(oDD);if(loc){this.locationCache[oDD.id]=loc;}else{delete this.locationCache[oDD.id];}}}}},verifyEl:function(el){try{if(el){var _9f3=el.offsetParent;if(_9f3){return true;}}}catch(e){}return false;},getLocation:function(oDD){if(!this.isTypeOfDD(oDD)){return null;}var el=oDD.getEl(),pos,x1,x2,y1,y2,t,r,b,l;try{pos=YAHOO.util.Dom.getXY(el);}catch(e){}if(!pos){return null;}x1=pos[0];x2=x1+el.offsetWidth;y1=pos[1];y2=y1+el.offsetHeight;t=y1-oDD.padding[0];r=x2+oDD.padding[1];b=y2+oDD.padding[2];l=x1-oDD.padding[3];return new YAHOO.util.Region(t,r,b,l);},isOverTarget:function(pt,_9f7,_9f8){var loc=this.locationCache[_9f7.id];if(!loc||!this.useCache){loc=this.getLocation(_9f7);this.locationCache[_9f7.id]=loc;}if(!loc){return false;}_9f7.cursorIsOver=loc.contains(pt);var dc=this.dragCurrent;if(!dc||!dc.getTargetCoord||(!_9f8&&!dc.constrainX&&!dc.constrainY)){return _9f7.cursorIsOver;}_9f7.overlap=null;var pos=dc.getTargetCoord(pt.x,pt.y);var el=dc.getDragEl();var _9fd=new YAHOO.util.Region(pos.y,pos.x+el.offsetWidth,pos.y+el.offsetHeight,pos.x);var _9fe=_9fd.intersect(loc);if(_9fe){_9f7.overlap=_9fe;return (_9f8)?true:_9f7.cursorIsOver;}else{return false;}},_onUnload:function(e,me){this.unregAll();},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null;}this._execOnAll("unreg",[]);for(i in this.elementCache){delete this.elementCache[i];}this.elementCache={};this.ids={};},elementCache:{},getElWrapper:function(id){var _a02=this.elementCache[id];if(!_a02||!_a02.el){_a02=this.elementCache[id]=new this.ElementWrapper(YAHOO.util.Dom.get(id));}return _a02;},getElement:function(id){return YAHOO.util.Dom.get(id);},getCss:function(id){var el=YAHOO.util.Dom.get(id);return (el)?el.style:null;},ElementWrapper:function(el){this.el=el||null;this.id=this.el&&el.id;this.css=this.el&&el.style;},getPosX:function(el){return YAHOO.util.Dom.getX(el);},getPosY:function(el){return YAHOO.util.Dom.getY(el);},swapNode:function(n1,n2){if(n1.swapNode){n1.swapNode(n2);}else{var p=n2.parentNode;var s=n2.nextSibling;if(s==n1){p.insertBefore(n1,n2);}else{if(n2==n1.nextSibling){p.insertBefore(n2,n1);}else{n1.parentNode.replaceChild(n2,n1);p.insertBefore(n1,s);}}}},getScroll:function(){var t,l,dde=document.documentElement,db=document.body;if(dde&&(dde.scrollTop||dde.scrollLeft)){t=dde.scrollTop;l=dde.scrollLeft;}else{if(db){t=db.scrollTop;l=db.scrollLeft;}else{}}return {top:t,left:l};},getStyle:function(el,_a0f){return YAHOO.util.Dom.getStyle(el,_a0f);},getScrollTop:function(){return this.getScroll().top;},getScrollLeft:function(){return this.getScroll().left;},moveToEl:function(_a10,_a11){var _a12=YAHOO.util.Dom.getXY(_a11);YAHOO.util.Dom.setXY(_a10,_a12);},getClientHeight:function(){return YAHOO.util.Dom.getViewportHeight();},getClientWidth:function(){return YAHOO.util.Dom.getViewportWidth();},numericSort:function(a,b){return (a-b);},_timeoutCount:0,_addListeners:function(){var DDM=YAHOO.util.DDM;if(YAHOO.util.Event&&document){DDM._onLoad();}else{if(DDM._timeoutCount>2000){}else{setTimeout(DDM._addListeners,10);if(document&&document.body){DDM._timeoutCount+=1;}}}},handleWasClicked:function(node,id){if(this.isHandle(id,node.id)){return true;}else{var p=node.parentNode;while(p){if(this.isHandle(id,p.id)){return true;}else{p=p.parentNode;}}}return false;}};}();YAHOO.util.DDM=YAHOO.util.DragDropMgr;YAHOO.util.DDM._addListeners();}(function(){var _a19=YAHOO.util.Event;var Dom=YAHOO.util.Dom;YAHOO.util.DragDrop=function(id,_a1c,_a1d){if(id){this.init(id,_a1c,_a1d);}};YAHOO.util.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,b4StartDrag:function(x,y){},startDrag:function(x,y){},b4Drag:function(e){},onDrag:function(e){},onDragEnter:function(e,id){},b4DragOver:function(e){},onDragOver:function(e,id){},b4DragOut:function(e){},onDragOut:function(e,id){},b4DragDrop:function(e){},onDragDrop:function(e,id){},onInvalidDrop:function(e){},b4EndDrag:function(e){},endDrag:function(e){},b4MouseDown:function(e){},onMouseDown:function(e){},onMouseUp:function(e){},onAvailable:function(){},getEl:function(){if(!this._domRef){this._domRef=Dom.get(this.id);}return this._domRef;},getDragEl:function(){return Dom.get(this.dragElId);},init:function(id,_a36,_a37){this.initTarget(id,_a36,_a37);_a19.on(this.id,"mousedown",this.handleMouseDown,this,true);},initTarget:function(id,_a39,_a3a){this.config=_a3a||{};this.DDM=YAHOO.util.DDM;this.groups={};if(typeof id!=="string"){id=Dom.generateId(id);}this.id=id;this.addToGroup((_a39)?_a39:"default");this.handleElId=id;_a19.onAvailable(id,this.handleOnAvailable,this,true);this.setDragElId(id);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false);},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable();},setPadding:function(iTop,_a3c,iBot,_a3e){if(!_a3c&&0!==_a3c){this.padding=[iTop,iTop,iTop,iTop];}else{if(!iBot&&0!==iBot){this.padding=[iTop,_a3c,iTop,_a3c];}else{this.padding=[iTop,_a3c,iBot,_a3e];}}},setInitPosition:function(_a3f,_a40){var el=this.getEl();if(!this.DDM.verifyEl(el)){return;}var dx=_a3f||0;var dy=_a40||0;var p=Dom.getXY(el);this.initPageX=p[0]-dx;this.initPageY=p[1]-dy;this.lastPageX=p[0];this.lastPageY=p[1];this.setStartPosition(p);},setStartPosition:function(pos){var p=pos||Dom.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=p[0];this.startPageY=p[1];},addToGroup:function(_a47){this.groups[_a47]=true;this.DDM.regDragDrop(this,_a47);},removeFromGroup:function(_a48){if(this.groups[_a48]){delete this.groups[_a48];}this.DDM.removeDDFromGroup(this,_a48);},setDragElId:function(id){this.dragElId=id;},setHandleElId:function(id){if(typeof id!=="string"){id=Dom.generateId(id);}this.handleElId=id;this.DDM.regHandle(this.id,id);},setOuterHandleElId:function(id){if(typeof id!=="string"){id=Dom.generateId(id);}_a19.on(id,"mousedown",this.handleMouseDown,this,true);this.setHandleElId(id);this.hasOuterHandles=true;},unreg:function(){_a19.removeListener(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this);},isLocked:function(){return (this.DDM.isLocked()||this.locked);},handleMouseDown:function(e,oDD){var _a4e=e.which||e.button;if(this.primaryButtonOnly&&_a4e>1){return;}if(this.isLocked()){return;}this.b4MouseDown(e);this.onMouseDown(e);this.DDM.refreshCache(this.groups);var pt=new YAHOO.util.Point(_a19.getPageX(e),_a19.getPageY(e));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(pt,this)){}else{if(this.clickValidator(e)){this.setStartPosition();this.DDM.handleMouseDown(e,this);this.DDM.stopEvent(e);}else{}}},clickValidator:function(e){var _a51=_a19.getTarget(e);return (this.isValidHandleChild(_a51)&&(this.id==this.handleElId||this.DDM.handleWasClicked(_a51,this.id)));},addInvalidHandleType:function(_a52){var type=_a52.toUpperCase();this.invalidHandleTypes[type]=type;},addInvalidHandleId:function(id){if(typeof id!=="string"){id=Dom.generateId(id);}this.invalidHandleIds[id]=id;},addInvalidHandleClass:function(_a55){this.invalidHandleClasses.push(_a55);},removeInvalidHandleType:function(_a56){var type=_a56.toUpperCase();delete this.invalidHandleTypes[type];},removeInvalidHandleId:function(id){if(typeof id!=="string"){id=Dom.generateId(id);}delete this.invalidHandleIds[id];},removeInvalidHandleClass:function(_a59){for(var i=0,len=this.invalidHandleClasses.length;i<len;++i){if(this.invalidHandleClasses[i]==_a59){delete this.invalidHandleClasses[i];}}},isValidHandleChild:function(node){var _a5c=true;var _a5d;try{_a5d=node.nodeName.toUpperCase();}catch(e){_a5d=node.nodeName;}_a5c=_a5c&&!this.invalidHandleTypes[_a5d];_a5c=_a5c&&!this.invalidHandleIds[node.id];for(var i=0,len=this.invalidHandleClasses.length;_a5c&&i<len;++i){_a5c=!Dom.hasClass(node,this.invalidHandleClasses[i]);}return _a5c;},setXTicks:function(_a5f,_a60){this.xTicks=[];this.xTickSize=_a60;var _a61={};for(var i=this.initPageX;i>=this.minX;i=i-_a60){if(!_a61[i]){this.xTicks[this.xTicks.length]=i;_a61[i]=true;}}for(i=this.initPageX;i<=this.maxX;i=i+_a60){if(!_a61[i]){this.xTicks[this.xTicks.length]=i;_a61[i]=true;}}this.xTicks.sort(this.DDM.numericSort);},setYTicks:function(_a63,_a64){this.yTicks=[];this.yTickSize=_a64;var _a65={};for(var i=this.initPageY;i>=this.minY;i=i-_a64){if(!_a65[i]){this.yTicks[this.yTicks.length]=i;_a65[i]=true;}}for(i=this.initPageY;i<=this.maxY;i=i+_a64){if(!_a65[i]){this.yTicks[this.yTicks.length]=i;_a65[i]=true;}}this.yTicks.sort(this.DDM.numericSort);},setXConstraint:function(_a67,_a68,_a69){this.leftConstraint=parseInt(_a67,10);this.rightConstraint=parseInt(_a68,10);this.minX=this.initPageX-this.leftConstraint;this.maxX=this.initPageX+this.rightConstraint;if(_a69){this.setXTicks(this.initPageX,_a69);}this.constrainX=true;},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks();},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0;},setYConstraint:function(iUp,_a6b,_a6c){this.topConstraint=parseInt(iUp,10);this.bottomConstraint=parseInt(_a6b,10);this.minY=this.initPageY-this.topConstraint;this.maxY=this.initPageY+this.bottomConstraint;if(_a6c){this.setYTicks(this.initPageY,_a6c);}this.constrainY=true;},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var dx=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var dy=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(dx,dy);}else{this.setInitPosition();}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize);}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize);}},getTick:function(val,_a70){if(!_a70){return val;}else{if(_a70[0]>=val){return _a70[0];}else{for(var i=0,len=_a70.length;i<len;++i){var next=i+1;if(_a70[next]&&_a70[next]>=val){var _a73=val-_a70[i];var _a74=_a70[next]-val;return (_a74>_a73)?_a70[i]:_a70[next];}}return _a70[_a70.length-1];}}},toString:function(){return ("DragDrop "+this.id);}};})();YAHOO.util.DD=function(id,_a76,_a77){if(id){this.init(id,_a76,_a77);}};YAHOO.extend(YAHOO.util.DD,YAHOO.util.DragDrop,{scroll:true,autoOffset:function(_a78,_a79){var x=_a78-this.startPageX;var y=_a79-this.startPageY;this.setDelta(x,y);},setDelta:function(_a7c,_a7d){this.deltaX=_a7c;this.deltaY=_a7d;},setDragElPos:function(_a7e,_a7f){var el=this.getDragEl();this.alignElWithMouse(el,_a7e,_a7f);},alignElWithMouse:function(el,_a82,_a83){var _a84=this.getTargetCoord(_a82,_a83);if(!this.deltaSetXY){var _a85=[_a84.x,_a84.y];YAHOO.util.Dom.setXY(el,_a85);var _a86=parseInt(YAHOO.util.Dom.getStyle(el,"left"),10);var _a87=parseInt(YAHOO.util.Dom.getStyle(el,"top"),10);this.deltaSetXY=[_a86-_a84.x,_a87-_a84.y];}else{YAHOO.util.Dom.setStyle(el,"left",(_a84.x+this.deltaSetXY[0])+"px");YAHOO.util.Dom.setStyle(el,"top",(_a84.y+this.deltaSetXY[1])+"px");}this.cachePosition(_a84.x,_a84.y);this.autoScroll(_a84.x,_a84.y,el.offsetHeight,el.offsetWidth);},cachePosition:function(_a88,_a89){if(_a88){this.lastPageX=_a88;this.lastPageY=_a89;}else{var _a8a=YAHOO.util.Dom.getXY(this.getEl());this.lastPageX=_a8a[0];this.lastPageY=_a8a[1];}},autoScroll:function(x,y,h,w){if(this.scroll){var _a8f=this.DDM.getClientHeight();var _a90=this.DDM.getClientWidth();var st=this.DDM.getScrollTop();var sl=this.DDM.getScrollLeft();var bot=h+y;var _a94=w+x;var _a95=(_a8f+st-y-this.deltaY);var _a96=(_a90+sl-x-this.deltaX);var _a97=40;var _a98=(document.all)?80:30;if(bot>_a8f&&_a95<_a97){window.scrollTo(sl,st+_a98);}if(y<st&&st>0&&y-st<_a97){window.scrollTo(sl,st-_a98);}if(_a94>_a90&&_a96<_a97){window.scrollTo(sl+_a98,st);}if(x<sl&&sl>0&&x-sl<_a97){window.scrollTo(sl-_a98,st);}}},getTargetCoord:function(_a99,_a9a){var x=_a99-this.deltaX;var y=_a9a-this.deltaY;if(this.constrainX){if(x<this.minX){x=this.minX;}if(x>this.maxX){x=this.maxX;}}if(this.constrainY){if(y<this.minY){y=this.minY;}if(y>this.maxY){y=this.maxY;}}x=this.getTick(x,this.xTicks);y=this.getTick(y,this.yTicks);return {x:x,y:y};},applyConfig:function(){YAHOO.util.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false);},b4MouseDown:function(e){this.setStartPosition();this.autoOffset(YAHOO.util.Event.getPageX(e),YAHOO.util.Event.getPageY(e));},b4Drag:function(e){this.setDragElPos(YAHOO.util.Event.getPageX(e),YAHOO.util.Event.getPageY(e));},toString:function(){return ("DD "+this.id);}});YAHOO.util.DDProxy=function(id,_aa0,_aa1){if(id){this.init(id,_aa0,_aa1);this.initFrame();}};YAHOO.util.DDProxy.dragElId="ygddfdiv";YAHOO.extend(YAHOO.util.DDProxy,YAHOO.util.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var self=this;var body=document.body;if(!body||!body.firstChild){setTimeout(function(){self.createFrame();},50);return;}var div=this.getDragEl();if(!div){div=document.createElement("div");div.id=this.dragElId;var s=div.style;s.position="absolute";s.visibility="hidden";s.cursor="move";s.border="2px solid #aaa";s.zIndex=999;body.insertBefore(div,body.firstChild);}},initFrame:function(){this.createFrame();},applyConfig:function(){YAHOO.util.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||YAHOO.util.DDProxy.dragElId);},showFrame:function(_aa6,_aa7){var el=this.getEl();var _aa9=this.getDragEl();var s=_aa9.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(s.width,10)/2),Math.round(parseInt(s.height,10)/2));}this.setDragElPos(_aa6,_aa7);YAHOO.util.Dom.setStyle(_aa9,"visibility","visible");},_resizeProxy:function(){if(this.resizeFrame){var DOM=YAHOO.util.Dom;var el=this.getEl();var _aad=this.getDragEl();var bt=parseInt(DOM.getStyle(_aad,"borderTopWidth"),10);var br=parseInt(DOM.getStyle(_aad,"borderRightWidth"),10);var bb=parseInt(DOM.getStyle(_aad,"borderBottomWidth"),10);var bl=parseInt(DOM.getStyle(_aad,"borderLeftWidth"),10);if(isNaN(bt)){bt=0;}if(isNaN(br)){br=0;}if(isNaN(bb)){bb=0;}if(isNaN(bl)){bl=0;}var _ab2=Math.max(0,el.offsetWidth-br-bl);var _ab3=Math.max(0,el.offsetHeight-bt-bb);DOM.setStyle(_aad,"width",_ab2+"px");DOM.setStyle(_aad,"height",_ab3+"px");}},b4MouseDown:function(e){this.setStartPosition();var x=YAHOO.util.Event.getPageX(e);var y=YAHOO.util.Event.getPageY(e);this.autoOffset(x,y);this.setDragElPos(x,y);},b4StartDrag:function(x,y){this.showFrame(x,y);},b4EndDrag:function(e){YAHOO.util.Dom.setStyle(this.getDragEl(),"visibility","hidden");},endDrag:function(e){var DOM=YAHOO.util.Dom;var lel=this.getEl();var del=this.getDragEl();DOM.setStyle(del,"visibility","");DOM.setStyle(lel,"visibility","hidden");YAHOO.util.DDM.moveToEl(lel,del);DOM.setStyle(del,"visibility","hidden");DOM.setStyle(lel,"visibility","");},toString:function(){return ("DDProxy "+this.id);}});YAHOO.util.DDTarget=function(id,_abf,_ac0){if(id){this.initTarget(id,_abf,_ac0);}};YAHOO.extend(YAHOO.util.DDTarget,YAHOO.util.DragDrop,{toString:function(){return ("DDTarget "+this.id);}});YAHOO.register("dragdrop",YAHOO.util.DragDropMgr,{version:"2.2.0",build:"127"});YAHOO.namespace("ext","ext.util","ext.grid");YAHOO.ext.Strict=(document.compatMode=="CSS1Compat");YAHOO.ext.SSL_SECURE_URL="javascript:false";window.undefined=undefined;Function.prototype.createCallback=function(){var args=arguments;var _ac2=this;return function(){return _ac2.apply(window,args);};};Function.prototype.createDelegate=function(obj,args,_ac5){var _ac6=this;return function(){var _ac7=args||arguments;if(_ac5===true){_ac7=Array.prototype.slice.call(arguments,0);_ac7=_ac7.concat(args);}else{if(typeof _ac5=="number"){_ac7=Array.prototype.slice.call(arguments,0);var _ac8=[_ac5,0].concat(args);Array.prototype.splice.apply(_ac7,_ac8);}}return _ac6.apply(obj||window,_ac7);};};Function.prototype.defer=function(_ac9,obj,args,_acc){return setTimeout(this.createDelegate(obj,args,_acc),_ac9);};Function.prototype.createSequence=function(fcn,_ace){if(typeof fcn!="function"){return this;}var _acf=this;return function(){var _ad0=_acf.apply(this||window,arguments);fcn.apply(_ace||this||window,arguments);return _ad0;};};YAHOO.util.Event.on(window,"unload",function(){delete Function.prototype.createSequence;delete Function.prototype.defer;delete Function.prototype.createDelegate;delete Function.prototype.createCallback;delete Function.prototype.createInterceptor;});Function.prototype.createInterceptor=function(fcn,_ad2){if(typeof fcn!="function"){return this;}var _ad3=this;return function(){fcn.target=this;fcn.method=_ad3;if(fcn.apply(_ad2||this||window,arguments)===false){return;}return _ad3.apply(this||window,arguments);};};YAHOO.ext.util.Browser=new function(){var ua=navigator.userAgent.toLowerCase();this.isOpera=(ua.indexOf("opera")>-1);this.isSafari=(ua.indexOf("webkit")>-1);this.isIE=(window.ActiveXObject);this.isIE7=(ua.indexOf("msie 7")>-1);this.isGecko=!this.isSafari&&(ua.indexOf("gecko")>-1);if(ua.indexOf("windows")!=-1||ua.indexOf("win32")!=-1){this.isWindows=true;}else{if(ua.indexOf("macintosh")!=-1){this.isMac=true;}}if(this.isIE&&!this.isIE7){try{document.execCommand("BackgroundImageCache",false,true);}catch(e){}}}();YAHOO.print=function(arg1,arg2,etc){if(!YAHOO.ext._console){var cs=YAHOO.ext.DomHelper.insertBefore(document.body.firstChild,{tag:"div",style:"width:250px;height:350px;overflow:auto;border:3px solid #c3daf9;"+"background:white;position:absolute;right:5px;top:5px;"+"font:normal 8pt arial,verdana,helvetica;z-index:50000;padding:5px;"},true);new YAHOO.ext.Resizable(cs,{transparent:true,handles:"all",pinned:true,adjustments:[0,0],wrap:true,draggable:(YAHOO.util.DD?true:false)});cs.on("dblclick",cs.hide);YAHOO.ext._console=cs;}var msg="";for(var i=0,len=arguments.length;i<len;i++){msg+=arguments[i]+"<hr noshade style=\"color:#eeeeee;\" size=\"1\">";}YAHOO.ext._console.dom.innerHTML=msg+YAHOO.ext._console.dom.innerHTML;YAHOO.ext._console.dom.scrollTop=0;YAHOO.ext._console.show();};YAHOO.printf=function(_adb,arg1,arg2,etc){var args=Array.prototype.slice.call(arguments,1);YAHOO.print(_adb.replace(/\{\{[^{}]*\}\}|\{(\d+)(,\s*([\w.]+))?\}/g,function(m,a1,a2,a3){if(m.chatAt=="{"){return m.slice(1,-1);}var rpl=args[a1];if(a3){var f=eval(a3);rpl=f(rpl);}return rpl?rpl:"";}));};YAHOO.util.CustomEvent.prototype.fireDirect=function(){var len=this.subscribers.length;for(var i=0;i<len;++i){var s=this.subscribers[i];if(s){var _ae9=(s.override)?s.obj:this.scope;if(s.fn.apply(_ae9,arguments)===false){return false;}}}return true;};YAHOO.extendX=function(_aea,_aeb,_aec){YAHOO.extend(_aea,_aeb);_aea.override=function(o){YAHOO.override(_aea,o);};if(!_aea.prototype.override){_aea.prototype.override=function(o){for(var _aef in o){this[_aef]=o[_aef];}};}if(_aec){_aea.override(_aec);}};YAHOO.override=function(_af0,_af1){if(_af1){var p=_af0.prototype;for(var _af3 in _af1){p[_af3]=_af1[_af3];}}};YAHOO.ext.util.DelayedTask=function(fn,_af5,args){var _af7=null;this.delay=function(_af8,_af9,_afa,_afb){if(_af7){clearTimeout(_af7);}fn=_af9||fn;_af5=_afa||_af5;args=_afb||args;_af7=setTimeout(fn.createDelegate(_af5,args),_af8);};this.cancel=function(){if(_af7){clearTimeout(_af7);_af7=null;}};};YAHOO.ext.KeyMap=function(el,_afd,_afe){this.el=getEl(el);this.eventName=_afe||"keydown";this.bindings=[];if(_afd instanceof Array){for(var i=0,len=_afd.length;i<len;i++){this.addBinding(_afd[i]);}}else{this.addBinding(_afd);}this.keyDownDelegate=YAHOO.ext.EventManager.wrap(this.handleKeyDown,this,true);this.enable();};YAHOO.ext.KeyMap.prototype={addBinding:function(_b00){var _b01=_b00.key,shift=_b00.shift,ctrl=_b00.ctrl,alt=_b00.alt,fn=_b00.fn,scope=_b00.scope;if(typeof _b01=="string"){var ks=[];var _b03=_b01.toUpperCase();for(var j=0,len=_b03.length;j<len;j++){ks.push(_b03.charCodeAt(j));}_b01=ks;}var _b05=_b01 instanceof Array;var _b06=function(e){if((!shift||e.shiftKey)&&(!ctrl||e.ctrlKey)&&(!alt||e.altKey)){var k=e.getKey();if(_b05){for(var i=0,len=_b01.length;i<len;i++){if(_b01[i]==k){fn.call(scope||window,k,e);return;}}}else{if(k==_b01){fn.call(scope||window,k,e);}}}};this.bindings.push(_b06);},handleKeyDown:function(e){if(this.enabled){var b=this.bindings;for(var i=0,len=b.length;i<len;i++){b[i](e);}}},isEnabled:function(){return this.enabled;},enable:function(){if(!this.enabled){this.el.on(this.eventName,this.keyDownDelegate);this.enabled=true;}},disable:function(){if(this.enabled){this.el.removeListener(this.eventName,this.keyDownDelegate);this.enabled=false;}}};YAHOO.ext.util.Observable=function(){};YAHOO.ext.util.Observable.prototype={fireEvent:function(){var ce=this.events[arguments[0].toLowerCase()];if(typeof ce=="object"){return ce.fireDirect.apply(ce,Array.prototype.slice.call(arguments,1));}else{return true;}},addListener:function(_b0e,fn,_b10,_b11){_b0e=_b0e.toLowerCase();var ce=this.events[_b0e];if(!ce){throw "You are trying to listen for an event that does not exist: \""+_b0e+"\".";}if(typeof ce=="boolean"){ce=new YAHOO.util.CustomEvent(_b0e);this.events[_b0e]=ce;}ce.subscribe(fn,_b10,_b11);},delayedListener:function(_b13,fn,_b15,_b16){var _b17=function(){setTimeout(fn.createDelegate(_b15,arguments),_b16||1);};this.addListener(_b13,_b17);return _b17;},bufferedListener:function(_b18,fn,_b1a,_b1b){var task=new YAHOO.ext.util.DelayedTask();var _b1d=function(){task.delay(_b1b||250,fn,_b1a,Array.prototype.slice.call(arguments,0));};this.addListener(_b18,_b1d);return _b1d;},removeListener:function(_b1e,fn,_b20){var ce=this.events[_b1e.toLowerCase()];if(typeof ce=="object"){ce.unsubscribe(fn,_b20);}},purgeListeners:function(){for(var evt in this.events){if(typeof this.events[evt]=="object"){this.events[evt].unsubscribeAll();}}}};YAHOO.ext.util.Observable.prototype.on=YAHOO.ext.util.Observable.prototype.addListener;YAHOO.ext.util.Config={apply:function(obj,_b24,_b25){if(_b25){this.apply(obj,_b25);}if(_b24){for(var prop in _b24){obj[prop]=_b24[prop];}}return obj;}};if(!String.escape){String.escape=function(_b27){return _b27.replace(/('|\\)/g,"\\$1");};}String.leftPad=function(val,size,ch){var _b2b=new String(val);if(ch==null){ch=" ";}while(_b2b.length<size){_b2b=ch+_b2b;}return _b2b;};if(YAHOO.util.Connect){YAHOO.util.Connect.setHeader=function(o){for(var prop in this._http_header){if(typeof this._http_header[prop]!="function"){o.conn.setRequestHeader(prop,this._http_header[prop]);}}delete this._http_header;this._http_header={};this._has_http_headers=false;};}if(YAHOO.util.DragDrop){YAHOO.util.DragDrop.prototype.defaultPadding={left:0,right:0,top:0,bottom:0};YAHOO.util.DragDrop.prototype.constrainTo=function(_b2e,pad,_b30){if(typeof pad=="number"){pad={left:pad,right:pad,top:pad,bottom:pad};}pad=pad||this.defaultPadding;var b=getEl(this.getEl()).getBox();var ce=getEl(_b2e);var c=ce.dom==document.body?{x:0,y:0,width:YAHOO.util.Dom.getViewportWidth(),height:YAHOO.util.Dom.getViewportHeight()}:ce.getBox(_b30||false);var _b34=b.y-c.y;var _b35=b.x-c.x;this.resetConstraints();this.setXConstraint(_b35-(pad.left||0),c.width-_b35-b.width-(pad.right||0));this.setYConstraint(_b34-(pad.top||0),c.height-_b34-b.height-(pad.bottom||0));};}YAHOO.ext.Element=function(_b36,_b37){var dom=YAHOO.util.Dom.get(_b36);if(!dom){return null;}if(!_b37&&YAHOO.ext.Element.cache[dom.id]){return YAHOO.ext.Element.cache[dom.id];}this.dom=dom;this.id=this.dom.id;this.visibilityMode=YAHOO.ext.Element.VISIBILITY;this.originalDisplay=YAHOO.util.Dom.getStyle(this.dom,"display")||"";if(this.autoDisplayMode){if(this.originalDisplay=="none"){this.setVisibilityMode(YAHOO.ext.Element.DISPLAY);}}if(this.originalDisplay=="none"){this.originalDisplay="";}this.defaultUnit="px";};YAHOO.ext.Element.prototype={setVisibilityMode:function(_b39){this.visibilityMode=_b39;return this;},enableDisplayMode:function(_b3a){this.setVisibilityMode(YAHOO.ext.Element.DISPLAY);if(typeof _b3a!="undefined"){this.originalDisplay=_b3a;}return this;},animate:function(args,_b3c,_b3d,_b3e,_b3f){this.anim(args,_b3c,_b3d,_b3e,_b3f);return this;},anim:function(args,_b41,_b42,_b43,_b44){_b44=_b44||YAHOO.util.Anim;var anim=new _b44(this.dom,args,_b41||0.35,_b43||YAHOO.util.Easing.easeBoth);if(_b42){if(!(_b42 instanceof Array)){anim.onComplete.subscribe(_b42,this,true);}else{for(var i=0;i<_b42.length;i++){var fn=_b42[i];if(fn){anim.onComplete.subscribe(fn,this,true);}}}}anim.animate();},scrollIntoView:function(_b48){var c=getEl(_b48||document.body,true);var cp=c.getStyle("position");var _b4b=false;if(cp!="relative"&&cp!="absolute"){c.setStyle("position","relative");_b4b=true;}var el=this.dom;var _b4d=parseInt(el.offsetTop,10);var _b4e=_b4d+el.offsetHeight;var _b4f=parseInt(c.scrollTop,10);var _b50=_b4f+c.clientHeight;if(_b4d<_b4f){c.scrollTop=_b4d;}else{if(_b4e>_b50){c.scrollTop=_b4e-c.clientHeight;}}if(_b4b){c.setStyle("position",cp);}return this;},autoHeight:function(_b51,_b52,_b53,_b54){var _b55=this.getHeight();this.clip();this.setHeight(1);setTimeout(function(){var _b56=parseInt(this.dom.scrollHeight,10);if(!_b51){this.setHeight(_b56);this.unclip();if(typeof _b53=="function"){_b53();}}else{this.setHeight(_b55);this.setHeight(_b56,_b51,_b52,function(){this.unclip();if(typeof _b53=="function"){_b53();}}.createDelegate(this),_b54);}}.createDelegate(this),0);return this;},isVisible:function(deep){var vis=YAHOO.util.Dom.getStyle(this.dom,"visibility")!="hidden"&&YAHOO.util.Dom.getStyle(this.dom,"display")!="none";if(!deep||!vis){return vis;}var p=this.dom.parentNode;while(p&&p.tagName.toLowerCase()!="body"){if(YAHOO.util.Dom.getStyle(p,"visibility")=="hidden"||YAHOO.util.Dom.getStyle(p,"display")=="none"){return false;}p=p.parentNode;}return true;},select:function(_b5a,_b5b){return YAHOO.ext.Element.select("#"+this.dom.id+" "+_b5a,_b5b);},initDD:function(_b5c,_b5d,_b5e){var dd=new YAHOO.util.DD(YAHOO.util.Dom.generateId(this.dom),_b5c,_b5d);return YAHOO.ext.util.Config.apply(dd,_b5e);},initDDProxy:function(_b60,_b61,_b62){var dd=new YAHOO.util.DDProxy(YAHOO.util.Dom.generateId(this.dom),_b60,_b61);return YAHOO.ext.util.Config.apply(dd,_b62);},initDDTarget:function(_b64,_b65,_b66){var dd=new YAHOO.util.DDTarget(YAHOO.util.Dom.generateId(this.dom),_b64,_b65);return YAHOO.ext.util.Config.apply(dd,_b66);},setVisible:function(_b68,_b69,_b6a,_b6b,_b6c){if(!_b69||!YAHOO.util.Anim){if(this.visibilityMode==YAHOO.ext.Element.DISPLAY){this.setDisplayed(_b68);}else{YAHOO.util.Dom.setStyle(this.dom,"visibility",_b68?"visible":"hidden");}}else{this.setOpacity(_b68?0:1);YAHOO.util.Dom.setStyle(this.dom,"visibility","visible");if(this.visibilityMode==YAHOO.ext.Element.DISPLAY){this.setDisplayed(true);}var args={opacity:{from:(_b68?0:1),to:(_b68?1:0)}};var anim=new YAHOO.util.Anim(this.dom,args,_b6a||0.35,_b6c||(_b68?YAHOO.util.Easing.easeIn:YAHOO.util.Easing.easeOut));anim.onComplete.subscribe((function(){if(this.visibilityMode==YAHOO.ext.Element.DISPLAY){this.setDisplayed(_b68);}else{YAHOO.util.Dom.setStyle(this.dom,"visibility",_b68?"visible":"hidden");}}).createDelegate(this));if(_b6b){anim.onComplete.subscribe(_b6b);}anim.animate();}return this;},isDisplayed:function(){return YAHOO.util.Dom.getStyle(this.dom,"display")!="none";},toggle:function(_b6f,_b70,_b71,_b72){this.setVisible(!this.isVisible(),_b6f,_b70,_b71,_b72);return this;},setDisplayed:function(_b73){if(typeof _b73=="boolean"){_b73=_b73?this.originalDisplay:"none";}YAHOO.util.Dom.setStyle(this.dom,"display",_b73);return this;},focus:function(){try{this.dom.focus();}catch(e){}return this;},blur:function(){try{this.dom.blur();}catch(e){}return this;},addClass:function(_b74){if(_b74 instanceof Array){for(var i=0,len=_b74.length;i<len;i++){this.addClass(_b74[i]);}}else{if(!this.hasClass(_b74)){this.dom.className=this.dom.className+" "+_b74;}}return this;},radioClass:function(_b76){var _b77=this.dom.parentNode.childNodes;for(var i=0;i<_b77.length;i++){var s=_b77[i];if(s.nodeType==1){YAHOO.util.Dom.removeClass(s,_b76);}}this.addClass(_b76);return this;},removeClass:function(_b7a){if(_b7a instanceof Array){for(var i=0,len=_b7a.length;i<len;i++){this.removeClass(_b7a[i]);}}else{var re=new RegExp("(?:^|\\s+)"+_b7a+"(?:\\s+|$)","g");var c=this.dom.className;if(re.test(c)){this.dom.className=c.replace(re," ");}}return this;},toggleClass:function(_b7e){if(this.hasClass(_b7e)){this.removeClass(_b7e);}else{this.addClass(_b7e);}return this;},hasClass:function(_b7f){var re=new RegExp("(?:^|\\s+)"+_b7f+"(?:\\s+|$)");return re.test(this.dom.className);},replaceClass:function(_b81,_b82){this.removeClass(_b81);this.addClass(_b82);return this;},getStyle:function(name){return YAHOO.util.Dom.getStyle(this.dom,name);},setStyle:function(name,_b85){if(typeof name=="string"){YAHOO.util.Dom.setStyle(this.dom,name,_b85);}else{var D=YAHOO.util.Dom;for(var _b87 in name){if(typeof name[_b87]!="function"){D.setStyle(this.dom,_b87,name[_b87]);}}}return this;},applyStyles:function(_b88){YAHOO.ext.DomHelper.applyStyles(this.dom,_b88);},getX:function(){return YAHOO.util.Dom.getX(this.dom);},getY:function(){return YAHOO.util.Dom.getY(this.dom);},getXY:function(){return YAHOO.util.Dom.getXY(this.dom);},setX:function(x,_b8a,_b8b,_b8c,_b8d){if(!_b8a||!YAHOO.util.Anim){YAHOO.util.Dom.setX(this.dom,x);}else{this.setXY([x,this.getY()],_b8a,_b8b,_b8c,_b8d);}return this;},setY:function(y,_b8f,_b90,_b91,_b92){if(!_b8f||!YAHOO.util.Anim){YAHOO.util.Dom.setY(this.dom,y);}else{this.setXY([this.getX(),y],_b8f,_b90,_b91,_b92);}return this;},setLeft:function(left){YAHOO.util.Dom.setStyle(this.dom,"left",this.addUnits(left));return this;},setTop:function(top){YAHOO.util.Dom.setStyle(this.dom,"top",this.addUnits(top));return this;},setRight:function(_b95){YAHOO.util.Dom.setStyle(this.dom,"right",this.addUnits(_b95));return this;},setBottom:function(_b96){YAHOO.util.Dom.setStyle(this.dom,"bottom",this.addUnits(_b96));return this;},setXY:function(pos,_b98,_b99,_b9a,_b9b){if(!_b98||!YAHOO.util.Anim){YAHOO.util.Dom.setXY(this.dom,pos);}else{this.anim({points:{to:pos}},_b99,_b9a,_b9b,YAHOO.util.Motion);}return this;},setLocation:function(x,y,_b9e,_b9f,_ba0,_ba1){this.setXY([x,y],_b9e,_b9f,_ba0,_ba1);return this;},moveTo:function(x,y,_ba4,_ba5,_ba6,_ba7){this.setXY([x,y],_ba4,_ba5,_ba6,_ba7);return this;},getRegion:function(){return YAHOO.util.Dom.getRegion(this.dom);},getHeight:function(_ba8){var h=this.dom.offsetHeight;return _ba8!==true?h:h-this.getBorderWidth("tb")-this.getPadding("tb");},getWidth:function(_baa){var w=this.dom.offsetWidth;return _baa!==true?w:w-this.getBorderWidth("lr")-this.getPadding("lr");},getSize:function(_bac){return {width:this.getWidth(_bac),height:this.getHeight(_bac)};},adjustWidth:function(_bad){if(typeof _bad=="number"){if(this.autoBoxAdjust&&!this.isBorderBox()){_bad-=(this.getBorderWidth("lr")+this.getPadding("lr"));}if(_bad<0){_bad=0;}}return _bad;},adjustHeight:function(_bae){if(typeof _bae=="number"){if(this.autoBoxAdjust&&!this.isBorderBox()){_bae-=(this.getBorderWidth("tb")+this.getPadding("tb"));}if(_bae<0){_bae=0;}}return _bae;},setWidth:function(_baf,_bb0,_bb1,_bb2,_bb3){_baf=this.adjustWidth(_baf);if(!_bb0||!YAHOO.util.Anim){YAHOO.util.Dom.setStyle(this.dom,"width",this.addUnits(_baf));}else{this.anim({width:{to:_baf}},_bb1,_bb2,_bb3||(_baf>this.getWidth()?YAHOO.util.Easing.easeOut:YAHOO.util.Easing.easeIn));}return this;},setHeight:function(_bb4,_bb5,_bb6,_bb7,_bb8){_bb4=this.adjustHeight(_bb4);if(!_bb5||!YAHOO.util.Anim){YAHOO.util.Dom.setStyle(this.dom,"height",this.addUnits(_bb4));}else{this.anim({height:{to:_bb4}},_bb6,_bb7,_bb8||(_bb4>this.getHeight()?YAHOO.util.Easing.easeOut:YAHOO.util.Easing.easeIn));}return this;},setSize:function(_bb9,_bba,_bbb,_bbc,_bbd,_bbe){if(!_bbb||!YAHOO.util.Anim){this.setWidth(_bb9);this.setHeight(_bba);}else{_bb9=this.adjustWidth(_bb9);_bba=this.adjustHeight(_bba);this.anim({width:{to:_bb9},height:{to:_bba}},_bbc,_bbd,_bbe);}return this;},setBounds:function(x,y,_bc1,_bc2,_bc3,_bc4,_bc5,_bc6){if(!_bc3||!YAHOO.util.Anim){this.setWidth(_bc1);this.setHeight(_bc2);this.setLocation(x,y);}else{_bc1=this.adjustWidth(_bc1);_bc2=this.adjustHeight(_bc2);this.anim({points:{to:[x,y]},width:{to:_bc1},height:{to:_bc2}},_bc4,_bc5,_bc6,YAHOO.util.Motion);}return this;},setRegion:function(_bc7,_bc8,_bc9,_bca,_bcb){this.setBounds(_bc7.left,_bc7.top,_bc7.right-_bc7.left,_bc7.bottom-_bc7.top,_bc8,_bc9,_bca,_bcb);return this;},addListener:function(_bcc,_bcd,_bce,_bcf){YAHOO.util.Event.addListener(this.dom,_bcc,_bcd,_bce||this,true);return this;},bufferedListener:function(_bd0,fn,_bd2,_bd3){var task=new YAHOO.ext.util.DelayedTask();_bd2=_bd2||this;var _bd5=function(){task.delay(_bd3||250,fn,_bd2,Array.prototype.slice.call(arguments,0));};this.addListener(_bd0,_bd5);return _bd5;},addHandler:function(_bd6,_bd7,_bd8,_bd9,_bda){var fn=YAHOO.ext.Element.createStopHandler(_bd7,_bd8,_bd9||this,true);YAHOO.util.Event.addListener(this.dom,_bd6,fn);return this;},on:function(_bdc,_bdd,_bde,_bdf){YAHOO.util.Event.addListener(this.dom,_bdc,_bdd,_bde||this,true);return this;},addManagedListener:function(_be0,fn,_be2,_be3){return YAHOO.ext.EventManager.on(this.dom,_be0,fn,_be2||this,true);},mon:function(_be4,fn,_be6,_be7){return YAHOO.ext.EventManager.on(this.dom,_be4,fn,_be6||this,true);},removeListener:function(_be8,_be9,_bea){YAHOO.util.Event.removeListener(this.dom,_be8,_be9);return this;},removeAllListeners:function(){YAHOO.util.Event.purgeElement(this.dom);return this;},setOpacity:function(_beb,_bec,_bed,_bee,_bef){if(!_bec||!YAHOO.util.Anim){YAHOO.util.Dom.setStyle(this.dom,"opacity",_beb);}else{this.anim({opacity:{to:_beb}},_bed,_bee,_bef);}return this;},getLeft:function(_bf0){if(!_bf0){return this.getX();}else{return parseInt(this.getStyle("left"),10)||0;}},getRight:function(_bf1){if(!_bf1){return this.getX()+this.getWidth();}else{return (this.getLeft(true)+this.getWidth())||0;}},getTop:function(_bf2){if(!_bf2){return this.getY();}else{return parseInt(this.getStyle("top"),10)||0;}},getBottom:function(_bf3){if(!_bf3){return this.getY()+this.getHeight();}else{return (this.getTop(true)+this.getHeight())||0;}},setAbsolutePositioned:function(_bf4){this.setStyle("position","absolute");if(_bf4){this.setStyle("z-index",_bf4);}return this;},setRelativePositioned:function(_bf5){this.setStyle("position","relative");if(_bf5){this.setStyle("z-index",_bf5);}return this;},clearPositioning:function(){this.setStyle("position","");this.setStyle("left","");this.setStyle("right","");this.setStyle("top","");this.setStyle("bottom","");return this;},getPositioning:function(){return {"position":this.getStyle("position"),"left":this.getStyle("left"),"right":this.getStyle("right"),"top":this.getStyle("top"),"bottom":this.getStyle("bottom")};},getBorderWidth:function(side){return this.addStyles(side,YAHOO.ext.Element.borders);},getPadding:function(side){return this.addStyles(side,YAHOO.ext.Element.paddings);},setPositioning:function(_bf8){if(_bf8.position){this.setStyle("position",_bf8.position);}if(_bf8.left){this.setLeft(_bf8.left);}if(_bf8.right){this.setRight(_bf8.right);}if(_bf8.top){this.setTop(_bf8.top);}if(_bf8.bottom){this.setBottom(_bf8.bottom);}return this;},setLeftTop:function(left,top){this.dom.style.left=this.addUnits(left);this.dom.style.top=this.addUnits(top);return this;},move:function(_bfb,_bfc,_bfd,_bfe,_bff,_c00){var xy=this.getXY();_bfb=_bfb.toLowerCase();switch(_bfb){case "l":case "left":this.moveTo(xy[0]-_bfc,xy[1],_bfd,_bfe,_bff,_c00);break;case "r":case "right":this.moveTo(xy[0]+_bfc,xy[1],_bfd,_bfe,_bff,_c00);break;case "t":case "top":case "up":this.moveTo(xy[0],xy[1]-_bfc,_bfd,_bfe,_bff,_c00);break;case "b":case "bottom":case "down":this.moveTo(xy[0],xy[1]+_bfc,_bfd,_bfe,_bff,_c00);break;}return this;},clip:function(){if(!this.isClipped){this.isClipped=true;this.originalClip={"o":this.getStyle("overflow"),"x":this.getStyle("overflow-x"),"y":this.getStyle("overflow-y")};this.setStyle("overflow","hidden");this.setStyle("overflow-x","hidden");this.setStyle("overflow-y","hidden");}return this;},unclip:function(){if(this.isClipped){this.isClipped=false;var o=this.originalClip;if(o.o){this.setStyle("overflow",o.o);}if(o.x){this.setStyle("overflow-x",o.x);}if(o.y){this.setStyle("overflow-y",o.y);}}return this;},alignTo:function(_c03,_c04,_c05,_c06,_c07,_c08,_c09){var _c0a=getEl(_c03);if(!_c0a){return this;}_c05=_c05||[0,0];var r=_c0a.getRegion();_c04=_c04.toLowerCase();switch(_c04){case "bl":this.moveTo(r.left+_c05[0],r.bottom+_c05[1],_c06,_c07,_c08,_c09);break;case "br":this.moveTo(r.right+_c05[0],r.bottom+_c05[1],_c06,_c07,_c08,_c09);break;case "tl":this.moveTo(r.left+_c05[0],r.top+_c05[1],_c06,_c07,_c08,_c09);break;case "tr":this.moveTo(r.right+_c05[0],r.top+_c05[1],_c06,_c07,_c08,_c09);break;}return this;},clearOpacity:function(){if(window.ActiveXObject){this.dom.style.filter="";}else{this.dom.style.opacity="";this.dom.style["-moz-opacity"]="";this.dom.style["-khtml-opacity"]="";}return this;},hide:function(_c0c,_c0d,_c0e,_c0f){this.setVisible(false,_c0c,_c0d,_c0e,_c0f);return this;},show:function(_c10,_c11,_c12,_c13){this.setVisible(true,_c10,_c11,_c12,_c13);return this;},addUnits:function(size){if(size===""||size=="auto"||typeof size=="undefined"){return size;}if(typeof size=="number"||!YAHOO.ext.Element.unitPattern.test(size)){return size+this.defaultUnit;}return size;},beginMeasure:function(){var el=this.dom;if(el.offsetWidth||el.offsetHeight){return this;}var _c16=[];var p=this.dom;while((!el.offsetWidth&&!el.offsetHeight)&&p&&p.tagName&&p.tagName.toLowerCase()!="body"){if(YAHOO.util.Dom.getStyle(p,"display")=="none"){_c16.push({el:p,visibility:YAHOO.util.Dom.getStyle(p,"visibility")});p.style.visibility="hidden";p.style.display="block";}p=p.parentNode;}this._measureChanged=_c16;return this;},endMeasure:function(){var _c18=this._measureChanged;if(_c18){for(var i=0,len=_c18.length;i<len;i++){var r=_c18[i];r.el.style.visibility=r.visibility;r.el.style.display="none";}this._measureChanged=null;}return this;},update:function(html,_c1c,_c1d){if(typeof html=="undefined"){html="";}if(_c1c!==true){this.dom.innerHTML=html;if(typeof _c1d=="function"){_c1d();}return this;}var id=YAHOO.util.Dom.generateId();var dom=this.dom;html+="<span id=\""+id+"\"></span>";YAHOO.util.Event.onAvailable(id,function(){var hd=document.getElementsByTagName("head")[0];var re=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/img;var _c22=/\ssrc=([\'\"])(.*?)\1/i;var _c23;while(_c23=re.exec(html)){var _c24=_c23[0].match(_c22);if(_c24&&_c24[2]){var s=document.createElement("script");s.src=_c24[2];hd.appendChild(s);}else{if(_c23[1]&&_c23[1].length>0){eval(_c23[1]);}}}var el=document.getElementById(id);if(el){el.parentNode.removeChild(el);}if(typeof _c1d=="function"){_c1d();}});dom.innerHTML=html.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/img,"");return this;},load:function(){var um=this.getUpdateManager();um.update.apply(um,arguments);return this;},getUpdateManager:function(){if(!this.updateManager){this.updateManager=new YAHOO.ext.UpdateManager(this);}return this.updateManager;},unselectable:function(){this.dom.unselectable="on";this.swallowEvent("selectstart",true);this.applyStyles("-moz-user-select:none;-khtml-user-select:none;");return this;},getCenterXY:function(_c28){var _c29=Math.round((YAHOO.util.Dom.getViewportWidth()-this.getWidth())/2);var _c2a=Math.round((YAHOO.util.Dom.getViewportHeight()-this.getHeight())/2);if(!_c28){return [_c29,_c2a];}else{var _c2b=document.documentElement.scrollLeft||document.body.scrollLeft||0;var _c2c=document.documentElement.scrollTop||document.body.scrollTop||0;return [_c29+_c2b,_c2a+_c2c];}},center:function(_c2d){if(!_c2d){this.setXY(this.getCenterXY(true));}else{var box=YAHOO.ext.Element.get(_c2d).getBox();this.setXY([box.x+(box.width/2)-(this.getWidth()/2),box.y+(box.height/2)-(this.getHeight()/2)]);}return this;},getChildrenByTagName:function(_c2f){var _c30=this.dom.getElementsByTagName(_c2f);var len=_c30.length;var ce=new Array(len);for(var i=0;i<len;++i){ce[i]=YAHOO.ext.Element.get(_c30[i],true);}return ce;},getChildrenByClassName:function(_c34,_c35){var _c36=YAHOO.util.Dom.getElementsByClassName(_c34,_c35,this.dom);var len=_c36.length;var ce=new Array(len);for(var i=0;i<len;++i){ce[i]=YAHOO.ext.Element.get(_c36[i],true);}return ce;},isBorderBox:function(){if(typeof this.bbox=="undefined"){var el=this.dom;var b=YAHOO.ext.util.Browser;var _c3c=YAHOO.ext.Strict;this.bbox=((b.isIE&&!_c3c&&el.style.boxSizing!="content-box")||(b.isGecko&&YAHOO.util.Dom.getStyle(el,"-moz-box-sizing")=="border-box")||(!b.isSafari&&YAHOO.util.Dom.getStyle(el,"box-sizing")=="border-box"));}return this.bbox;},getBox:function(_c3d,_c3e){var xy;if(!_c3e){xy=this.getXY();}else{var left=parseInt(YAHOO.util.Dom.getStyle("left"),10)||0;var top=parseInt(YAHOO.util.Dom.getStyle("top"),10)||0;xy=[left,top];}var el=this.dom;var w=el.offsetWidth;var h=el.offsetHeight;if(!_c3d){return {x:xy[0],y:xy[1],width:w,height:h};}else{var l=this.getBorderWidth("l")+this.getPadding("l");var r=this.getBorderWidth("r")+this.getPadding("r");var t=this.getBorderWidth("t")+this.getPadding("t");var b=this.getBorderWidth("b")+this.getPadding("b");return {x:xy[0]+l,y:xy[1]+t,width:w-(l+r),height:h-(t+b)};}},setBox:function(box,_c4a,_c4b,_c4c,_c4d,_c4e){var w=box.width,h=box.height;if((_c4a&&!this.autoBoxAdjust)&&!this.isBorderBox()){w-=(this.getBorderWidth("lr")+this.getPadding("lr"));h-=(this.getBorderWidth("tb")+this.getPadding("tb"));}this.setBounds(box.x,box.y,w,h,_c4b,_c4c,_c4d,_c4e);return this;},repaint:function(){var dom=this.dom;YAHOO.util.Dom.addClass(dom,"yui-ext-repaint");setTimeout(function(){YAHOO.util.Dom.removeClass(dom,"yui-ext-repaint");},1);return this;},getMargins:function(side){if(!side){return {top:parseInt(this.getStyle("margin-top"),10)||0,left:parseInt(this.getStyle("margin-left"),10)||0,bottom:parseInt(this.getStyle("margin-bottom"),10)||0,right:parseInt(this.getStyle("margin-right"),10)||0};}else{return this.addStyles(side,YAHOO.ext.Element.margins);}},addStyles:function(_c52,_c53){var val=0;for(var i=0,len=_c52.length;i<len;i++){var w=parseInt(this.getStyle(_c53[_c52.charAt(i)]),10);if(!isNaN(w)){val+=w;}}return val;},createProxy:function(_c57,_c58,_c59){if(_c58){_c58=YAHOO.util.Dom.get(_c58);}else{_c58=document.body;}_c57=typeof _c57=="object"?_c57:{tag:"div",cls:_c57};var _c5a=YAHOO.ext.DomHelper.append(_c58,_c57,true);if(_c59){_c5a.setBox(this.getBox());}return _c5a;},createShim:function(){var _c5b={tag:"iframe",frameBorder:"no",cls:"yiframe-shim",style:"position:absolute;visibility:hidden;left:0;top:0;overflow:hidden;",src:YAHOO.ext.SSL_SECURE_URL};var shim=YAHOO.ext.DomHelper.append(this.dom.parentNode,_c5b,true);shim.setBox(this.getBox());return shim;},remove:function(){this.dom.parentNode.removeChild(this.dom);delete YAHOO.ext.Element.cache[this.dom.id];},addClassOnOver:function(_c5d){this.on("mouseover",function(){this.addClass(_c5d);},this,true);this.on("mouseout",function(){this.removeClass(_c5d);},this,true);return this;},swallowEvent:function(_c5e,_c5f){var fn=function(e){e.stopPropagation();if(_c5f){e.preventDefault();}};this.mon(_c5e,fn);return this;},fitToParent:function(_c62){var p=getEl(this.dom.parentNode,true);p.beginMeasure();var box=p.getBox(true,true);p.endMeasure();this.setSize(box.width,box.height);if(_c62===true){YAHOO.ext.EventManager.onWindowResize(this.fitToParent,this,true);}return this;},getNextSibling:function(){var n=this.dom.nextSibling;while(n&&n.nodeType!=1){n=n.nextSibling;}return n;},getPrevSibling:function(){var n=this.dom.previousSibling;while(n&&n.nodeType!=1){n=n.previousSibling;}return n;},appendChild:function(el){el=getEl(el);el.appendTo(this);return this;},createChild:function(_c68,_c69){var c;if(_c69){c=YAHOO.ext.DomHelper.insertBefore(_c69,_c68,true);}else{c=YAHOO.ext.DomHelper.append(this.dom,_c68,true);}return c;},appendTo:function(el){var node=getEl(el).dom;node.appendChild(this.dom);return this;},insertBefore:function(el){var node=getEl(el).dom;node.parentNode.insertBefore(this.dom,node);return this;},insertAfter:function(el){var node=getEl(el).dom;node.parentNode.insertBefore(this.dom,node.nextSibling);return this;},wrap:function(_c71){if(!_c71){_c71={tag:"div"};}var _c72=YAHOO.ext.DomHelper.insertBefore(this.dom,_c71,true);_c72.dom.appendChild(this.dom);return _c72;},replace:function(el){el=getEl(el);this.insertBefore(el);el.remove();return this;},insertHtml:function(_c74,html){YAHOO.ext.DomHelper.insertHtml(_c74,this.dom,html);return this;},set:function(o){var el=this.dom;var _c78=el.setAttribute?true:false;for(var attr in o){if(attr=="style"||typeof o[attr]=="function"){continue;}if(attr=="cls"){el.className=o["cls"];}else{if(_c78){el.setAttribute(attr,o[attr]);}else{el[attr]=o[attr];}}}YAHOO.ext.DomHelper.applyStyles(el,o.style);return this;},addKeyListener:function(key,fn,_c7c){var _c7d;if(typeof key!="object"||key instanceof Array){_c7d={key:key,fn:fn,scope:_c7c};}else{_c7d={key:key.key,shift:key.shift,ctrl:key.ctrl,alt:key.alt,fn:fn,scope:_c7c};}var map=new YAHOO.ext.KeyMap(this,_c7d);return map;},addKeyMap:function(_c7f){return new YAHOO.ext.KeyMap(this,_c7f);}};YAHOO.ext.Element.prototype.autoBoxAdjust=true;YAHOO.ext.Element.prototype.autoDisplayMode=true;YAHOO.ext.Element.unitPattern=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i;YAHOO.ext.Element.VISIBILITY=1;YAHOO.ext.Element.DISPLAY=2;YAHOO.ext.Element.blockElements=/^(?:address|blockquote|center|dir|div|dl|fieldset|form|h\d|hr|isindex|menu|ol|ul|p|pre|table|dd|dt|li|tbody|tr|td|thead|tfoot|iframe)$/i;YAHOO.ext.Element.borders={l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"};YAHOO.ext.Element.paddings={l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"};YAHOO.ext.Element.margins={l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"};YAHOO.ext.Element.createStopHandler=function(_c80,_c81,_c82,_c83){return function(e){if(e){if(_c80){YAHOO.util.Event.stopEvent(e);}else{YAHOO.util.Event.preventDefault(e);}}_c81.call(_c83&&_c82?_c82:window,e,_c82);};};YAHOO.ext.Element.cache={};YAHOO.ext.Element.get=function(el,_c86){if(!el){return null;}_c86=true;if(el instanceof YAHOO.ext.Element){el.dom=YAHOO.util.Dom.get(el.id);YAHOO.ext.Element.cache[el.id]=el;return el;}else{if(el.isComposite){return el;}else{if(el instanceof Array){return YAHOO.ext.Element.select(el);}else{if(el===document){if(!YAHOO.ext.Element.cache["__ydocument"]){var _c87=function(){};_c87.prototype=YAHOO.ext.Element.prototype;var o=new _c87();o.dom=document;YAHOO.ext.Element.cache["__ydocument"]=o;}return YAHOO.ext.Element.cache["__ydocument"];}}}}var key=el;if(typeof el!="string"){if(!el.id&&!_c86){return null;}YAHOO.util.Dom.generateId(el,"elgen-");key=el.id;}var _c8a=YAHOO.ext.Element.cache[key];if(!_c8a){_c8a=new YAHOO.ext.Element(key);if(!_c8a.dom){return null;}YAHOO.ext.Element.cache[key]=_c8a;}else{_c8a.dom=YAHOO.util.Dom.get(key);}return _c8a;};var getEl=YAHOO.ext.Element.get;YAHOO.util.Event.addListener(window,"unload",function(){YAHOO.ext.Element.cache=null;});YAHOO.ext.DomHelper=new function(){var d=document;var _c8c=null;this.useDom=false;var _c8d=/^(?:base|basefont|br|frame|hr|img|input|isindex|link|meta|nextid|range|spacer|wbr|audioscope|area|param|keygen|col|limittext|spot|tab|over|right|left|choose|atop|of)$/i;this.applyStyles=function(el,_c8f){if(_c8f){var D=YAHOO.util.Dom;if(typeof _c8f=="string"){var re=/\s?([a-z\-]*)\:([^;]*);?/gi;var _c92;while((_c92=re.exec(_c8f))!=null){D.setStyle(el,_c92[1],_c92[2]);}}else{if(typeof _c8f=="object"){for(var _c93 in _c8f){D.setStyle(el,_c93,_c8f[_c93]);}}else{if(typeof _c8f=="function"){YAHOO.ext.DomHelper.applyStyles(el,_c8f.call());}}}}};var _c94=function(o){var b="";b+="<"+o.tag;for(var attr in o){if(attr=="tag"||attr=="children"||attr=="html"||typeof o[attr]=="function"){continue;}if(attr=="style"){var s=o["style"];if(typeof s=="function"){s=s.call();}if(typeof s=="string"){b+=" style=\""+s+"\"";}else{if(typeof s=="object"){b+=" style=\"";for(var key in s){if(typeof s[key]!="function"){b+=key+":"+s[key]+";";}}b+="\"";}}}else{if(attr=="cls"){b+=" class=\""+o["cls"]+"\"";}else{if(attr=="htmlFor"){b+=" for=\""+o["htmlFor"]+"\"";}else{b+=" "+attr+"=\""+o[attr]+"\"";}}}}if(_c8d.test(o.tag)){b+=" />";}else{b+=">";if(o.children){for(var i=0,len=o.children.length;i<len;i++){b+=_c94(o.children[i],b);}}if(o.html){b+=o.html;}b+="</"+o.tag+">";}return b;};var _c9b=function(o,_c9d){var el=d.createElement(o.tag);var _c9f=el.setAttribute?true:false;for(var attr in o){if(attr=="tag"||attr=="children"||attr=="html"||attr=="style"||typeof o[attr]=="function"){continue;}if(attr=="cls"){el.className=o["cls"];}else{if(_c9f){el.setAttribute(attr,o[attr]);}else{el[attr]=o[attr];}}}YAHOO.ext.DomHelper.applyStyles(el,o.style);if(o.children){for(var i=0,len=o.children.length;i<len;i++){_c9b(o.children[i],el);}}if(o.html){el.innerHTML=o.html;}if(_c9d){_c9d.appendChild(el);}return el;};var _ca2=function(tag,_ca4,el,html){if(!_c8c){_c8c=document.createElement("div");}var node;if(tag=="table"||tag=="tbody"){_c8c.innerHTML="<table><tbody>"+html+"</tbody></table>";node=_c8c.firstChild.firstChild.firstChild;}else{_c8c.innerHTML="<table><tbody><tr>"+html+"</tr></tbody></table>";node=_c8c.firstChild.firstChild.firstChild.firstChild;}if(_ca4=="beforebegin"){el.parentNode.insertBefore(node,el);return node;}else{if(_ca4=="afterbegin"){el.insertBefore(node,el.firstChild);return node;}else{if(_ca4=="beforeend"){el.appendChild(node);return node;}else{if(_ca4=="afterend"){el.parentNode.insertBefore(node,el.nextSibling);return node;}}}}};this.insertHtml=function(_ca8,el,html){_ca8=_ca8.toLowerCase();if(el.insertAdjacentHTML){var tag=el.tagName.toLowerCase();if(tag=="table"||tag=="tbody"||tag=="tr"){return _ca2(tag,_ca8,el,html);}switch(_ca8){case "beforebegin":el.insertAdjacentHTML(_ca8,html);return el.previousSibling;case "afterbegin":el.insertAdjacentHTML(_ca8,html);return el.firstChild;case "beforeend":el.insertAdjacentHTML(_ca8,html);return el.lastChild;case "afterend":el.insertAdjacentHTML(_ca8,html);return el.nextSibling;}throw "Illegal insertion point -> \""+_ca8+"\"";}var _cac=el.ownerDocument.createRange();var frag;switch(_ca8){case "beforebegin":_cac.setStartBefore(el);frag=_cac.createContextualFragment(html);el.parentNode.insertBefore(frag,el);return el.previousSibling;case "afterbegin":if(el.firstChild){_cac.setStartBefore(el.firstChild);}else{_cac.selectNodeContents(el);_cac.collapse(true);}frag=_cac.createContextualFragment(html);el.insertBefore(frag,el.firstChild);return el.firstChild;case "beforeend":if(el.lastChild){_cac.setStartAfter(el.lastChild);}else{_cac.selectNodeContents(el);_cac.collapse(false);}frag=_cac.createContextualFragment(html);el.appendChild(frag);return el.lastChild;case "afterend":_cac.setStartAfter(el);frag=_cac.createContextualFragment(html);el.parentNode.insertBefore(frag,el.nextSibling);return el.nextSibling;}throw "Illegal insertion point -> \""+_ca8+"\"";};this.insertBefore=function(el,o,_cb0){el=YAHOO.util.Dom.get(el);var _cb1;if(this.useDom){_cb1=_c9b(o,null);el.parentNode.insertBefore(_cb1,el);}else{var html=_c94(o);_cb1=this.insertHtml("beforeBegin",el,html);}return _cb0?YAHOO.ext.Element.get(_cb1,true):_cb1;};this.insertAfter=function(el,o,_cb5){el=YAHOO.util.Dom.get(el);var _cb6;if(this.useDom){_cb6=_c9b(o,null);el.parentNode.insertBefore(_cb6,el.nextSibling);}else{var html=_c94(o);_cb6=this.insertHtml("afterEnd",el,html);}return _cb5?YAHOO.ext.Element.get(_cb6,true):_cb6;};this.append=function(el,o,_cba){el=YAHOO.util.Dom.get(el);var _cbb;if(this.useDom){_cbb=_c9b(o,null);el.appendChild(_cbb);}else{var html=_c94(o);_cbb=this.insertHtml("beforeEnd",el,html);}return _cba?YAHOO.ext.Element.get(_cbb,true):_cbb;};this.overwrite=function(el,o,_cbf){el=YAHOO.util.Dom.get(el);el.innerHTML=_c94(o);return _cbf?YAHOO.ext.Element.get(el.firstChild,true):el.firstChild;};this.createTemplate=function(o){var html=_c94(o);return new YAHOO.ext.DomHelper.Template(html);};}();YAHOO.ext.DomHelper.Template=function(html){this.html=html;};YAHOO.ext.DomHelper.Template.prototype={applyTemplate:function(_cc3){if(this.compiled){return this.compiled(_cc3);}var _cc4="";var fn=function(_cc6,_cc7){if(typeof _cc3[_cc7]!="undefined"){return _cc3[_cc7];}else{return _cc4;}};return this.html.replace(this.re,fn);},re:/\{(\w+)\}/g,compile:function(){var html=this.html;var re=this.re;var body=[];body.push("this.compiled = function(values){ return [");var _ccb;var _ccc=0;while((_ccb=re.exec(html))!=null){body.push("'",html.substring(_ccc,_ccb.index),"', ");body.push("values['",html.substring(_ccb.index+1,re.lastIndex-1),"'], ");_ccc=re.lastIndex;}body.push("'",html.substr(_ccc),"'].join('');};");eval(body.join(""));},insertBefore:function(el,_cce,_ccf){el=YAHOO.util.Dom.get(el);var _cd0=YAHOO.ext.DomHelper.insertHtml("beforeBegin",el,this.applyTemplate(_cce));return _ccf?YAHOO.ext.Element.get(_cd0,true):_cd0;},insertAfter:function(el,_cd2,_cd3){el=YAHOO.util.Dom.get(el);var _cd4=YAHOO.ext.DomHelper.insertHtml("afterEnd",el,this.applyTemplate(_cd2));return _cd3?YAHOO.ext.Element.get(_cd4,true):_cd4;},append:function(el,_cd6,_cd7){el=YAHOO.util.Dom.get(el);var _cd8=YAHOO.ext.DomHelper.insertHtml("beforeEnd",el,this.applyTemplate(_cd6));return _cd7?YAHOO.ext.Element.get(_cd8,true):_cd8;},overwrite:function(el,_cda,_cdb){el=YAHOO.util.Dom.get(el);el.innerHTML="";var _cdc=YAHOO.ext.DomHelper.insertHtml("beforeEnd",el,this.applyTemplate(_cda));return _cdb?YAHOO.ext.Element.get(_cdc,true):_cdc;}};YAHOO.ext.Template=YAHOO.ext.DomHelper.Template;YAHOO.ext.CompositeElement=function(els){this.elements=[];this.addElements(els);};YAHOO.ext.CompositeElement.prototype={isComposite:true,addElements:function(els){if(!els){return this;}var yels=this.elements;var _ce0=yels.length-1;for(var i=0,len=els.length;i<len;i++){yels[++_ce0]=getEl(els[i],true);}return this;},invoke:function(fn,args){var els=this.elements;for(var i=0,len=els.length;i<len;i++){YAHOO.ext.Element.prototype[fn].apply(els[i],args);}return this;},add:function(els){if(typeof els=="string"){this.addElements(YAHOO.ext.Element.selectorFunction(string));}else{if(els instanceof Array){this.addElements(els);}else{this.addElements([els]);}}return this;},each:function(fn,_ce8){var els=this.elements;for(var i=0,len=els.length;i<len;i++){fn.call(_ce8||els[i],els[i],this,i);}return this;}};YAHOO.ext.CompositeElementLite=function(els){YAHOO.ext.CompositeElementLite.superclass.constructor.call(this,els);this.el=YAHOO.ext.Element.get(this.elements[0],true);};YAHOO.extendX(YAHOO.ext.CompositeElementLite,YAHOO.ext.CompositeElement,{addElements:function(els){if(els){this.elements=this.elements.concat(els);}return this;},invoke:function(fn,args){var els=this.elements;var el=this.el;for(var i=0,len=els.length;i<len;i++){el.dom=els[i];YAHOO.ext.Element.prototype[fn].apply(el,args);}return this;}});YAHOO.ext.CompositeElement.createCall=function(_cf2,_cf3){if(!_cf2[_cf3]){_cf2[_cf3]=function(){return this.invoke(_cf3,arguments);};}};for(var fnName in YAHOO.ext.Element.prototype){if(typeof YAHOO.ext.Element.prototype[fnName]=="function"){YAHOO.ext.CompositeElement.createCall(YAHOO.ext.CompositeElement.prototype,fnName);}}if(typeof cssQuery=="function"){YAHOO.ext.Element.selectorFunction=cssQuery;}else{if(typeof document.getElementsBySelector=="function"){YAHOO.ext.Element.selectorFunction=document.getElementsBySelector.createDelegate(document);}}YAHOO.ext.Element.select=function(_cf4,_cf5){var els;if(typeof _cf4=="string"){els=YAHOO.ext.Element.selectorFunction(_cf4);}else{if(_cf4 instanceof Array){els=_cf4;}else{throw "Invalid selector";}}if(_cf5===true){return new YAHOO.ext.CompositeElement(els);}else{return new YAHOO.ext.CompositeElementLite(els);}};var getEls=YAHOO.ext.Element.select;YAHOO.ext.EventManager=new function(){var _cf7;var _cf8;var _cf9=false;this.ieDeferSrc=false;var _cfa;var _cfb;var _cfc=function(){if(!_cf9){_cf9=true;if(_cf8){clearInterval(_cf8);}if(_cf7){_cf7.fire();}}};var _cfd=function(){_cf7=new YAHOO.util.CustomEvent("documentready");if(document.addEventListener){YAHOO.util.Event.on(document,"DOMContentLoaded",_cfc);}else{if(YAHOO.ext.util.Browser.isIE){document.write("<s"+"cript id=\"ie-deferred-loader\" defer=\"defer\" src=\""+(YAHOO.ext.EventManager.ieDeferSrc||YAHOO.ext.SSL_SECURE_URL)+"\"></s"+"cript>");YAHOO.util.Event.on("ie-deferred-loader","readystatechange",function(){if(this.readyState=="complete"){_cfc();}});}else{if(YAHOO.ext.util.Browser.isSafari){_cf8=setInterval(function(){var rs=document.readyState;if(rs=="loaded"||rs=="complete"){_cfc();}},10);}}}YAHOO.util.Event.on(window,"load",_cfc);};this.wrap=function(fn,_d00,_d01){var _d02=function(e){YAHOO.ext.EventObject.setEvent(e);fn.call(_d01?_d00||window:window,YAHOO.ext.EventObject,_d00);};return _d02;};this.addListener=function(_d04,_d05,fn,_d07,_d08){var _d09=this.wrap(fn,_d07,_d08);YAHOO.util.Event.addListener(_d04,_d05,_d09);return _d09;};this.removeListener=function(_d0a,_d0b,_d0c){return YAHOO.util.Event.removeListener(_d0a,_d0b,_d0c);};this.on=this.addListener;this.onDocumentReady=function(fn,_d0e,_d0f){if(_cf9){fn.call(_d0f?_d0e||window:window,_d0e);return;}if(!_cf7){_cfd();}_cf7.subscribe(fn,_d0e,_d0f);};this.onWindowResize=function(fn,_d11,_d12){if(!_cfa){_cfa=new YAHOO.util.CustomEvent("windowresize");_cfb=new YAHOO.ext.util.DelayedTask(function(){_cfa.fireDirect(YAHOO.util.Dom.getViewportWidth(),YAHOO.util.Dom.getViewportHeight());});YAHOO.util.Event.on(window,"resize",function(){_cfb.delay(50);});}_cfa.subscribe(fn,_d11,_d12);},this.removeResizeListener=function(fn,_d14){if(_cfa){_cfa.unsubscribe(fn,_d14);}};};YAHOO.ext.EventObject=new function(){this.browserEvent=null;this.button=-1;this.shiftKey=false;this.ctrlKey=false;this.altKey=false;this.BACKSPACE=8;this.TAB=9;this.RETURN=13;this.ESC=27;this.SPACE=32;this.PAGEUP=33;this.PAGEDOWN=34;this.END=35;this.HOME=36;this.LEFT=37;this.UP=38;this.RIGHT=39;this.DOWN=40;this.DELETE=46;this.F5=116;this.setEvent=function(e){if(e==this){return this;}this.browserEvent=e;if(e){this.button=e.button;this.shiftKey=e.shiftKey;this.ctrlKey=e.ctrlKey;this.altKey=e.altKey;}else{this.button=-1;this.shiftKey=false;this.ctrlKey=false;this.altKey=false;}return this;};this.stopEvent=function(){if(this.browserEvent){YAHOO.util.Event.stopEvent(this.browserEvent);}};this.preventDefault=function(){if(this.browserEvent){YAHOO.util.Event.preventDefault(this.browserEvent);}};this.isNavKeyPress=function(){return (this.browserEvent.keyCode&&this.browserEvent.keyCode>=33&&this.browserEvent.keyCode<=40);};this.stopPropagation=function(){if(this.browserEvent){YAHOO.util.Event.stopPropagation(this.browserEvent);}};this.getCharCode=function(){if(this.browserEvent){return YAHOO.util.Event.getCharCode(this.browserEvent);}return null;};this.getKey=function(){if(this.browserEvent){return this.browserEvent.keyCode||this.browserEvent.charCode;}return null;};this.getPageX=function(){if(this.browserEvent){return YAHOO.util.Event.getPageX(this.browserEvent);}return null;};this.getPageY=function(){if(this.browserEvent){return YAHOO.util.Event.getPageY(this.browserEvent);}return null;};this.getTime=function(){if(this.browserEvent){return YAHOO.util.Event.getTime(this.browserEvent);}return null;};this.getXY=function(){if(this.browserEvent){return YAHOO.util.Event.getXY(this.browserEvent);}return [];};this.getTarget=function(){if(this.browserEvent){return YAHOO.util.Event.getTarget(this.browserEvent);}return null;};this.findTarget=function(_d16,_d17){if(_d17){_d17=_d17.toLowerCase();}if(this.browserEvent){function isMatch(el){if(!el){return false;}if(_d16&&!YAHOO.util.Dom.hasClass(el,_d16)){return false;}if(_d17&&el.tagName.toLowerCase()!=_d17){return false;}return true;}var t=this.getTarget();if(!t||isMatch(t)){return t;}var p=t.parentNode;var b=document.body;while(p&&p!=b){if(isMatch(p)){return p;}p=p.parentNode;}}return null;};this.getRelatedTarget=function(){if(this.browserEvent){return YAHOO.util.Event.getRelatedTarget(this.browserEvent);}return null;};this.getWheelDelta=function(){var e=this.browserEvent;var _d1d=0;if(e.wheelDelta){_d1d=e.wheelDelta/120;if(window.opera){_d1d=-_d1d;}}else{if(e.detail){_d1d=-e.detail/3;}}return _d1d;};this.hasModifier=function(){return this.ctrlKey||this.altKey||this.shiftKey;};}();YAHOO.widget.AutoComplete=function(_d1e,_d1f,_d20,_d21){if(_d1e&&_d1f&&_d20){if(_d20&&(_d20 instanceof YAHOO.widget.DataSource)){this.dataSource=_d20;}else{return;}if(YAHOO.util.Dom.inDocument(_d1e)){if(typeof _d1e=="string"){this._sName="instance"+YAHOO.widget.AutoComplete._nIndex+" "+_d1e;this._oTextbox=document.getElementById(_d1e);}else{this._sName=(_d1e.id)?"instance"+YAHOO.widget.AutoComplete._nIndex+" "+_d1e.id:"instance"+YAHOO.widget.AutoComplete._nIndex;this._oTextbox=_d1e;}}else{return;}if(YAHOO.util.Dom.inDocument(_d1f)){if(typeof _d1f=="string"){this._oContainer=document.getElementById(_d1f);}else{this._oContainer=_d1f;}if(this._oContainer.style.display=="none"){}}else{return;}if(typeof _d21=="object"){for(var _d22 in _d21){if(_d22){this[_d22]=_d21[_d22];}}}this._initContainer();this._initProps();this._initList();this._initContainerHelpers();var _d23=this;var _d24=this._oTextbox;var _d25=this._oContainer._oContent;YAHOO.util.Event.addListener(_d24,"keyup",_d23._onTextboxKeyUp,_d23);YAHOO.util.Event.addListener(_d24,"keydown",_d23._onTextboxKeyDown,_d23);YAHOO.util.Event.addListener(_d24,"focus",_d23._onTextboxFocus,_d23);YAHOO.util.Event.addListener(_d24,"blur",_d23._onTextboxBlur,_d23);YAHOO.util.Event.addListener(_d25,"mouseover",_d23._onContainerMouseover,_d23);YAHOO.util.Event.addListener(_d25,"mouseout",_d23._onContainerMouseout,_d23);YAHOO.util.Event.addListener(_d25,"scroll",_d23._onContainerScroll,_d23);YAHOO.util.Event.addListener(_d25,"resize",_d23._onContainerResize,_d23);if(_d24.form){YAHOO.util.Event.addListener(_d24.form,"submit",_d23._onFormSubmit,_d23);}YAHOO.util.Event.addListener(_d24,"keypress",_d23._onTextboxKeyPress,_d23);this.textboxFocusEvent=new YAHOO.util.CustomEvent("textboxFocus",this);this.textboxKeyEvent=new YAHOO.util.CustomEvent("textboxKey",this);this.dataRequestEvent=new YAHOO.util.CustomEvent("dataRequest",this);this.dataReturnEvent=new YAHOO.util.CustomEvent("dataReturn",this);this.dataErrorEvent=new YAHOO.util.CustomEvent("dataError",this);this.containerExpandEvent=new YAHOO.util.CustomEvent("containerExpand",this);this.typeAheadEvent=new YAHOO.util.CustomEvent("typeAhead",this);this.itemMouseOverEvent=new YAHOO.util.CustomEvent("itemMouseOver",this);this.itemMouseOutEvent=new YAHOO.util.CustomEvent("itemMouseOut",this);this.itemArrowToEvent=new YAHOO.util.CustomEvent("itemArrowTo",this);this.itemArrowFromEvent=new YAHOO.util.CustomEvent("itemArrowFrom",this);this.itemSelectEvent=new YAHOO.util.CustomEvent("itemSelect",this);this.unmatchedItemSelectEvent=new YAHOO.util.CustomEvent("unmatchedItemSelect",this);this.selectionEnforceEvent=new YAHOO.util.CustomEvent("selectionEnforce",this);this.containerCollapseEvent=new YAHOO.util.CustomEvent("containerCollapse",this);this.textboxBlurEvent=new YAHOO.util.CustomEvent("textboxBlur",this);_d24.setAttribute("autocomplete","off");YAHOO.widget.AutoComplete._nIndex++;}else{}};YAHOO.widget.AutoComplete.prototype.dataSource=null;YAHOO.widget.AutoComplete.prototype.minQueryLength=1;YAHOO.widget.AutoComplete.prototype.maxResultsDisplayed=10;YAHOO.widget.AutoComplete.prototype.queryDelay=0.5;YAHOO.widget.AutoComplete.prototype.highlightClassName="yui-ac-highlight";YAHOO.widget.AutoComplete.prototype.prehighlightClassName=null;YAHOO.widget.AutoComplete.prototype.delimChar=null;YAHOO.widget.AutoComplete.prototype.autoHighlight=true;YAHOO.widget.AutoComplete.prototype.typeAhead=false;YAHOO.widget.AutoComplete.prototype.animHoriz=false;YAHOO.widget.AutoComplete.prototype.animVert=true;YAHOO.widget.AutoComplete.prototype.animSpeed=0.3;YAHOO.widget.AutoComplete.prototype.forceSelection=false;YAHOO.widget.AutoComplete.prototype.allowBrowserAutocomplete=true;YAHOO.widget.AutoComplete.prototype.alwaysShowContainer=false;YAHOO.widget.AutoComplete.prototype.useIFrame=false;YAHOO.widget.AutoComplete.prototype.useShadow=false;YAHOO.widget.AutoComplete.prototype.toString=function(){return "AutoComplete "+this._sName;};YAHOO.widget.AutoComplete.prototype.isContainerOpen=function(){return this._bContainerOpen;};YAHOO.widget.AutoComplete.prototype.getListItems=function(){return this._aListItems;};YAHOO.widget.AutoComplete.prototype.getListItemData=function(_d26){if(_d26._oResultData){return _d26._oResultData;}else{return false;}};YAHOO.widget.AutoComplete.prototype.setHeader=function(_d27){if(_d27){if(this._oContainer._oContent._oHeader){this._oContainer._oContent._oHeader.innerHTML=_d27;this._oContainer._oContent._oHeader.style.display="block";}}else{this._oContainer._oContent._oHeader.innerHTML="";this._oContainer._oContent._oHeader.style.display="none";}};YAHOO.widget.AutoComplete.prototype.setFooter=function(_d28){if(_d28){if(this._oContainer._oContent._oFooter){this._oContainer._oContent._oFooter.innerHTML=_d28;this._oContainer._oContent._oFooter.style.display="block";}}else{this._oContainer._oContent._oFooter.innerHTML="";this._oContainer._oContent._oFooter.style.display="none";}};YAHOO.widget.AutoComplete.prototype.setBody=function(_d29){if(_d29){if(this._oContainer._oContent._oBody){this._oContainer._oContent._oBody.innerHTML=_d29;this._oContainer._oContent._oBody.style.display="block";this._oContainer._oContent.style.display="block";}}else{this._oContainer._oContent._oBody.innerHTML="";this._oContainer._oContent.style.display="none";}this._maxResultsDisplayed=0;};YAHOO.widget.AutoComplete.prototype.formatResult=function(_d2a,_d2b){var _d2c=_d2a[0];if(_d2c){return _d2c;}else{return "";}};YAHOO.widget.AutoComplete.prototype.doBeforeExpandContainer=function(_d2d,_d2e){return true;};YAHOO.widget.AutoComplete.prototype.sendQuery=function(_d2f){this._sendQuery(_d2f);};YAHOO.widget.AutoComplete.prototype.textboxFocusEvent=null;YAHOO.widget.AutoComplete.prototype.textboxKeyEvent=null;YAHOO.widget.AutoComplete.prototype.dataRequestEvent=null;YAHOO.widget.AutoComplete.prototype.dataReturnEvent=null;YAHOO.widget.AutoComplete.prototype.dataErrorEvent=null;YAHOO.widget.AutoComplete.prototype.containerExpandEvent=null;YAHOO.widget.AutoComplete.prototype.typeAheadEvent=null;YAHOO.widget.AutoComplete.prototype.itemMouseOverEvent=null;YAHOO.widget.AutoComplete.prototype.itemMouseOutEvent=null;YAHOO.widget.AutoComplete.prototype.itemArrowToEvent=null;YAHOO.widget.AutoComplete.prototype.itemArrowFromEvent=null;YAHOO.widget.AutoComplete.prototype.itemSelectEvent=null;YAHOO.widget.AutoComplete.prototype.unmatchedItemSelectEvent=null;YAHOO.widget.AutoComplete.prototype.selectionEnforceEvent=null;YAHOO.widget.AutoComplete.prototype.containerCollapseEvent=null;YAHOO.widget.AutoComplete.prototype.textboxBlurEvent=null;YAHOO.widget.AutoComplete._nIndex=0;YAHOO.widget.AutoComplete.prototype._sName=null;YAHOO.widget.AutoComplete.prototype._oTextbox=null;YAHOO.widget.AutoComplete.prototype._bFocused=true;YAHOO.widget.AutoComplete.prototype._oAnim=null;YAHOO.widget.AutoComplete.prototype._oContainer=null;YAHOO.widget.AutoComplete.prototype._bContainerOpen=false;YAHOO.widget.AutoComplete.prototype._bOverContainer=false;YAHOO.widget.AutoComplete.prototype._aListItems=null;YAHOO.widget.AutoComplete.prototype._nDisplayedItems=0;YAHOO.widget.AutoComplete.prototype._maxResultsDisplayed=0;YAHOO.widget.AutoComplete.prototype._sCurQuery=null;YAHOO.widget.AutoComplete.prototype._sSavedQuery=null;YAHOO.widget.AutoComplete.prototype._oCurItem=null;YAHOO.widget.AutoComplete.prototype._bItemSelected=false;YAHOO.widget.AutoComplete.prototype._nKeyCode=null;YAHOO.widget.AutoComplete.prototype._nDelayID=-1;YAHOO.widget.AutoComplete.prototype._iFrameSrc="javascript:false;";YAHOO.widget.AutoComplete.prototype._queryInterval=null;YAHOO.widget.AutoComplete.prototype._sLastTextboxValue=null;YAHOO.widget.AutoComplete.prototype._initProps=function(){var _d30=this.minQueryLength;if(isNaN(_d30)||(_d30<1)){_d30=1;}var _d31=this.maxResultsDisplayed;if(isNaN(this.maxResultsDisplayed)||(this.maxResultsDisplayed<1)){this.maxResultsDisplayed=10;}var _d32=this.queryDelay;if(isNaN(this.queryDelay)||(this.queryDelay<0)){this.queryDelay=0.5;}var _d33=(this.delimChar)?this.delimChar:null;if(_d33){if(typeof _d33=="string"){this.delimChar=[_d33];}else{if(_d33.constructor!=Array){this.delimChar=null;}}}var _d34=this.animSpeed;if((this.animHoriz||this.animVert)&&YAHOO.util.Anim){if(isNaN(_d34)||(_d34<0)){_d34=0.3;}if(!this._oAnim){oAnim=new YAHOO.util.Anim(this._oContainer._oContent,{},this.animSpeed);this._oAnim=oAnim;}else{this._oAnim.duration=_d34;}}if(this.forceSelection&&this.delimChar){}};YAHOO.widget.AutoComplete.prototype._initContainerHelpers=function(){if(this.useShadow&&!this._oContainer._oShadow){var _d35=document.createElement("div");_d35.className="yui-ac-shadow";this._oContainer._oShadow=this._oContainer.appendChild(_d35);}if(this.useIFrame&&!this._oContainer._oIFrame){var _d36=document.createElement("iframe");_d36.src=this._iFrameSrc;_d36.frameBorder=0;_d36.scrolling="no";_d36.style.position="absolute";_d36.style.width="100%";_d36.style.height="100%";_d36.tabIndex=-1;this._oContainer._oIFrame=this._oContainer.appendChild(_d36);}};YAHOO.widget.AutoComplete.prototype._initContainer=function(){if(!this._oContainer._oContent){var _d37=document.createElement("div");_d37.className="yui-ac-content";_d37.style.display="none";this._oContainer._oContent=this._oContainer.appendChild(_d37);var _d38=document.createElement("div");_d38.className="yui-ac-hd";_d38.style.display="none";this._oContainer._oContent._oHeader=this._oContainer._oContent.appendChild(_d38);var _d39=document.createElement("div");_d39.className="yui-ac-bd";this._oContainer._oContent._oBody=this._oContainer._oContent.appendChild(_d39);var _d3a=document.createElement("div");_d3a.className="yui-ac-ft";_d3a.style.display="none";this._oContainer._oContent._oFooter=this._oContainer._oContent.appendChild(_d3a);}else{}};YAHOO.widget.AutoComplete.prototype._initList=function(){this._aListItems=[];while(this._oContainer._oContent._oBody.hasChildNodes()){var _d3b=this.getListItems();if(_d3b){for(var oldi=_d3b.length-1;oldi>=0;i--){_d3b[oldi]=null;}}this._oContainer._oContent._oBody.innerHTML="";}var _d3d=document.createElement("ul");_d3d=this._oContainer._oContent._oBody.appendChild(_d3d);for(var i=0;i<this.maxResultsDisplayed;i++){var _d3f=document.createElement("li");_d3f=_d3d.appendChild(_d3f);this._aListItems[i]=_d3f;this._initListItem(_d3f,i);}this._maxResultsDisplayed=this.maxResultsDisplayed;};YAHOO.widget.AutoComplete.prototype._initListItem=function(_d40,_d41){var _d42=this;_d40.style.display="none";_d40._nItemIndex=_d41;_d40.mouseover=_d40.mouseout=_d40.onclick=null;YAHOO.util.Event.addListener(_d40,"mouseover",_d42._onItemMouseover,_d42);YAHOO.util.Event.addListener(_d40,"mouseout",_d42._onItemMouseout,_d42);YAHOO.util.Event.addListener(_d40,"click",_d42._onItemMouseclick,_d42);};YAHOO.widget.AutoComplete.prototype._onIMEDetected=function(_d43){_d43._enableIntervalDetection();};YAHOO.widget.AutoComplete.prototype._enableIntervalDetection=function(){var _d44=this._oTextbox.value;var _d45=this._sLastTextboxValue;if(_d44!=_d45){this._sLastTextboxValue=_d44;this._sendQuery(_d44);}};YAHOO.widget.AutoComplete.prototype._cancelIntervalDetection=function(_d46){if(_d46._queryInterval){clearInterval(_d46._queryInterval);}};YAHOO.widget.AutoComplete.prototype._isIgnoreKey=function(_d47){if((_d47==9)||(_d47==13)||(_d47==16)||(_d47==17)||(_d47>=18&&_d47<=20)||(_d47==27)||(_d47>=33&&_d47<=35)||(_d47>=36&&_d47<=38)||(_d47==40)||(_d47>=44&&_d47<=45)){return true;}return false;};YAHOO.widget.AutoComplete.prototype._sendQuery=function(_d48){if(this.minQueryLength==-1){this._toggleContainer(false);return;}var _d49=(this.delimChar)?this.delimChar:null;if(_d49){var _d4a=-1;for(var i=_d49.length-1;i>=0;i--){var _d4c=_d48.lastIndexOf(_d49[i]);if(_d4c>_d4a){_d4a=_d4c;}}if(_d49[i]==" "){for(var j=_d49.length-1;j>=0;j--){if(_d48[_d4a-1]==_d49[j]){_d4a--;break;}}}if(_d4a>-1){var _d4e=_d4a+1;while(_d48.charAt(_d4e)==" "){_d4e+=1;}this._sSavedQuery=_d48.substring(0,_d4e);_d48=_d48.substr(_d4e);}else{if(_d48.indexOf(this._sSavedQuery)<0){this._sSavedQuery=null;}}}if(_d48&&(_d48.length<this.minQueryLength)||(!_d48&&this.minQueryLength>0)){if(this._nDelayID!=-1){clearTimeout(this._nDelayID);}this._toggleContainer(false);return;}_d48=encodeURIComponent(_d48);this._nDelayID=-1;this.dataRequestEvent.fire(this,_d48);this.dataSource.getResults(this._populateList,_d48,this);};YAHOO.widget.AutoComplete.prototype._populateList=function(_d4f,_d50,_d51){if(_d50===null){_d51.dataErrorEvent.fire(_d51,_d4f);}if(!_d51._bFocused||!_d50){return;}var _d52=(navigator.userAgent.toLowerCase().indexOf("opera")!=-1);var _d53=_d51._oContainer._oContent.style;_d53.width=(!_d52)?null:"";_d53.height=(!_d52)?null:"";var _d54=decodeURIComponent(_d4f);_d51._sCurQuery=_d54;_d51._bItemSelected=false;if(_d51._maxResultsDisplayed!=_d51.maxResultsDisplayed){_d51._initList();}var _d55=Math.min(_d50.length,_d51.maxResultsDisplayed);_d51._nDisplayedItems=_d55;if(_d55>0){_d51._initContainerHelpers();var _d56=_d51._aListItems;for(var i=_d55-1;i>=0;i--){var _d58=_d56[i];var _d59=_d50[i];_d58.innerHTML=_d51.formatResult(_d59,_d54);_d58.style.display="list-item";_d58._sResultKey=_d59[0];_d58._oResultData=_d59;}for(var j=_d56.length-1;j>=_d55;j--){var _d5b=_d56[j];_d5b.innerHTML=null;_d5b.style.display="none";_d5b._sResultKey=null;_d5b._oResultData=null;}if(_d51.autoHighlight){var _d5c=_d56[0];_d51._toggleHighlight(_d5c,"to");_d51.itemArrowToEvent.fire(_d51,_d5c);_d51._typeAhead(_d5c,_d4f);}else{_d51._oCurItem=null;}var ok=_d51.doBeforeExpandContainer(_d51._oTextbox,_d51._oContainer,_d4f,_d50);_d51._toggleContainer(ok);}else{_d51._toggleContainer(false);}_d51.dataReturnEvent.fire(_d51,_d4f,_d50);};YAHOO.widget.AutoComplete.prototype._clearSelection=function(){var _d5e=this._oTextbox.value;var _d5f=(this.delimChar)?this.delimChar[0]:null;var _d60=(_d5f)?_d5e.lastIndexOf(_d5f,_d5e.length-2):-1;if(_d60>-1){this._oTextbox.value=_d5e.substring(0,_d60);}else{this._oTextbox.value="";}this._sSavedQuery=this._oTextbox.value;this.selectionEnforceEvent.fire(this);};YAHOO.widget.AutoComplete.prototype._textMatchesOption=function(){var _d61=false;for(var i=this._nDisplayedItems-1;i>=0;i--){var _d63=this._aListItems[i];var _d64=_d63._sResultKey.toLowerCase();if(_d64==this._sCurQuery.toLowerCase()){_d61=true;break;}}return (_d61);};YAHOO.widget.AutoComplete.prototype._typeAhead=function(_d65,_d66){if(!this.typeAhead||(this._nKeyCode==8)){return;}var _d67=this._oTextbox;var _d68=this._oTextbox.value;if(!_d67.setSelectionRange&&!_d67.createTextRange){return;}var _d69=_d68.length;this._updateValue(_d65);var nEnd=_d67.value.length;this._selectText(_d67,_d69,nEnd);var _d6b=_d67.value.substr(_d69,nEnd);this.typeAheadEvent.fire(this,_d66,_d6b);};YAHOO.widget.AutoComplete.prototype._selectText=function(_d6c,_d6d,nEnd){if(_d6c.setSelectionRange){_d6c.setSelectionRange(_d6d,nEnd);}else{if(_d6c.createTextRange){var _d6f=_d6c.createTextRange();_d6f.moveStart("character",_d6d);_d6f.moveEnd("character",nEnd-_d6c.value.length);_d6f.select();}else{_d6c.select();}}};YAHOO.widget.AutoComplete.prototype._toggleContainerHelpers=function(_d70){var _d71=false;var _d72=this._oContainer._oContent.offsetWidth+"px";var _d73=this._oContainer._oContent.offsetHeight+"px";if(this.useIFrame&&this._oContainer._oIFrame){_d71=true;if(_d70){this._oContainer._oIFrame.style.width=_d72;this._oContainer._oIFrame.style.height=_d73;}else{this._oContainer._oIFrame.style.width=0;this._oContainer._oIFrame.style.height=0;}}if(this.useShadow&&this._oContainer._oShadow){_d71=true;if(_d70){this._oContainer._oShadow.style.width=_d72;this._oContainer._oShadow.style.height=_d73;}else{this._oContainer._oShadow.style.width=0;this._oContainer._oShadow.style.height=0;}}};YAHOO.widget.AutoComplete.prototype._toggleContainer=function(_d74){var _d75=this._oContainer;if(this.alwaysShowContainer&&this._bContainerOpen){return;}if(!_d74){this._oContainer._oContent.scrollTop=0;var _d76=this._aListItems;if(_d76&&(_d76.length>0)){for(var i=_d76.length-1;i>=0;i--){_d76[i].style.display="none";}}if(this._oCurItem){this._toggleHighlight(this._oCurItem,"from");}this._oCurItem=null;this._nDisplayedItems=0;this._sCurQuery=null;}if(!_d74&&!this._bContainerOpen){_d75._oContent.style.display="none";return;}var _d78=this._oAnim;if(_d78&&_d78.getEl()&&(this.animHoriz||this.animVert)){if(!_d74){this._toggleContainerHelpers(_d74);}if(_d78.isAnimated()){_d78.stop();}var _d79=_d75._oContent.cloneNode(true);_d75.appendChild(_d79);_d79.style.top="-9000px";_d79.style.display="block";var wExp=_d79.offsetWidth;var hExp=_d79.offsetHeight;var _d7c=(this.animHoriz)?0:wExp;var _d7d=(this.animVert)?0:hExp;_d78.attributes=(_d74)?{width:{to:wExp},height:{to:hExp}}:{width:{to:_d7c},height:{to:_d7d}};if(_d74&&!this._bContainerOpen){_d75._oContent.style.width=_d7c+"px";_d75._oContent.style.height=_d7d+"px";}else{_d75._oContent.style.width=wExp+"px";_d75._oContent.style.height=hExp+"px";}_d75.removeChild(_d79);_d79=null;var _d7e=this;var _d7f=function(){_d78.onComplete.unsubscribeAll();if(_d74){_d7e.containerExpandEvent.fire(_d7e);}else{_d75._oContent.style.display="none";_d7e.containerCollapseEvent.fire(_d7e);}_d7e._toggleContainerHelpers(_d74);};_d75._oContent.style.display="block";_d78.onComplete.subscribe(_d7f);_d78.animate();this._bContainerOpen=_d74;}else{if(_d74){_d75._oContent.style.display="block";this.containerExpandEvent.fire(this);}else{_d75._oContent.style.display="none";this.containerCollapseEvent.fire(this);}this._toggleContainerHelpers(_d74);this._bContainerOpen=_d74;}};YAHOO.widget.AutoComplete.prototype._toggleHighlight=function(_d80,_d81){var _d82=this.highlightClassName;if(this._oCurItem){YAHOO.util.Dom.removeClass(this._oCurItem,_d82);}if((_d81=="to")&&_d82){YAHOO.util.Dom.addClass(_d80,_d82);this._oCurItem=_d80;}};YAHOO.widget.AutoComplete.prototype._togglePrehighlight=function(_d83,_d84){if(_d83==this._oCurItem){return;}var _d85=this.prehighlightClassName;if((_d84=="mouseover")&&_d85){YAHOO.util.Dom.addClass(_d83,_d85);}else{YAHOO.util.Dom.removeClass(_d83,_d85);}};YAHOO.widget.AutoComplete.prototype._updateValue=function(_d86){var _d87=this._oTextbox;var _d88=(this.delimChar)?(this.delimChar[0]||this.delimChar):null;var _d89=this._sSavedQuery;var _d8a=_d86._sResultKey;_d87.focus();_d87.value="";if(_d88){if(_d89){_d87.value=_d89;}_d87.value+=_d8a+_d88;if(_d88!=" "){_d87.value+=" ";}}else{_d87.value=_d8a;}if(_d87.type=="textarea"){_d87.scrollTop=_d87.scrollHeight;}var end=_d87.value.length;this._selectText(_d87,end,end);this._oCurItem=_d86;};YAHOO.widget.AutoComplete.prototype._selectItem=function(_d8c){this._bItemSelected=true;this._updateValue(_d8c);this._cancelIntervalDetection(this);this.itemSelectEvent.fire(this,_d8c,_d8c._oResultData);this._toggleContainer(false);};YAHOO.widget.AutoComplete.prototype._jumpSelection=function(){if(!this.typeAhead){return;}else{this._toggleContainer(false);}};YAHOO.widget.AutoComplete.prototype._moveSelection=function(_d8d){if(this._bContainerOpen){var _d8e=this._oCurItem;var _d8f=-1;if(_d8e){_d8f=_d8e._nItemIndex;}var _d90=(_d8d==40)?(_d8f+1):(_d8f-1);if(_d90<-2||_d90>=this._nDisplayedItems){return;}if(_d8e){this._toggleHighlight(_d8e,"from");this.itemArrowFromEvent.fire(this,_d8e);}if(_d90==-1){if(this.delimChar&&this._sSavedQuery){if(!this._textMatchesOption()){this._oTextbox.value=this._sSavedQuery;}else{this._oTextbox.value=this._sSavedQuery+this._sCurQuery;}}else{this._oTextbox.value=this._sCurQuery;}this._oCurItem=null;return;}if(_d90==-2){this._toggleContainer(false);return;}var _d91=this._aListItems[_d90];var _d92=this._oContainer._oContent;var _d93=((YAHOO.util.Dom.getStyle(_d92,"overflow")=="auto")||(YAHOO.util.Dom.getStyle(_d92,"overflowY")=="auto"));if(_d93&&(_d90>-1)&&(_d90<this._nDisplayedItems)){if(_d8d==40){if((_d91.offsetTop+_d91.offsetHeight)>(_d92.scrollTop+_d92.offsetHeight)){_d92.scrollTop=(_d91.offsetTop+_d91.offsetHeight)-_d92.offsetHeight;}else{if((_d91.offsetTop+_d91.offsetHeight)<_d92.scrollTop){_d92.scrollTop=_d91.offsetTop;}}}else{if(_d91.offsetTop<_d92.scrollTop){this._oContainer._oContent.scrollTop=_d91.offsetTop;}else{if(_d91.offsetTop>(_d92.scrollTop+_d92.offsetHeight)){this._oContainer._oContent.scrollTop=(_d91.offsetTop+_d91.offsetHeight)-_d92.offsetHeight;}}}}this._toggleHighlight(_d91,"to");this.itemArrowToEvent.fire(this,_d91);if(this.typeAhead){this._updateValue(_d91);}}};YAHOO.widget.AutoComplete.prototype._onItemMouseover=function(v,_d95){if(_d95.prehighlightClassName){_d95._togglePrehighlight(this,"mouseover");}else{_d95._toggleHighlight(this,"to");}_d95.itemMouseOverEvent.fire(_d95,this);};YAHOO.widget.AutoComplete.prototype._onItemMouseout=function(v,_d97){if(_d97.prehighlightClassName){_d97._togglePrehighlight(this,"mouseout");}else{_d97._toggleHighlight(this,"from");}_d97.itemMouseOutEvent.fire(_d97,this);};YAHOO.widget.AutoComplete.prototype._onItemMouseclick=function(v,_d99){_d99._toggleHighlight(this,"to");_d99._selectItem(this);};YAHOO.widget.AutoComplete.prototype._onContainerMouseover=function(v,_d9b){_d9b._bOverContainer=true;};YAHOO.widget.AutoComplete.prototype._onContainerMouseout=function(v,_d9d){_d9d._bOverContainer=false;if(_d9d._oCurItem){_d9d._toggleHighlight(_d9d._oCurItem,"to");}};YAHOO.widget.AutoComplete.prototype._onContainerScroll=function(v,_d9f){_d9f._oTextbox.focus();};YAHOO.widget.AutoComplete.prototype._onContainerResize=function(v,_da1){_da1._toggleContainerHelpers(_da1._bContainerOpen);};YAHOO.widget.AutoComplete.prototype._onTextboxKeyDown=function(v,_da3){var _da4=v.keyCode;switch(_da4){case 9:if(_da3.delimChar&&(_da3._nKeyCode!=_da4)){if(_da3._bContainerOpen){YAHOO.util.Event.stopEvent(v);}}if(_da3._oCurItem){_da3._selectItem(_da3._oCurItem);}else{_da3._toggleContainer(false);}break;case 13:if(_da3._nKeyCode!=_da4){if(_da3._bContainerOpen){YAHOO.util.Event.stopEvent(v);}}if(_da3._oCurItem){_da3._selectItem(_da3._oCurItem);}else{_da3._toggleContainer(false);}break;case 27:_da3._toggleContainer(false);return;case 39:_da3._jumpSelection();break;case 38:YAHOO.util.Event.stopEvent(v);_da3._moveSelection(_da4);break;case 40:YAHOO.util.Event.stopEvent(v);_da3._moveSelection(_da4);break;default:break;}};YAHOO.widget.AutoComplete.prototype._onTextboxKeyPress=function(v,_da6){var _da7=v.keyCode;var _da8=(navigator.userAgent.toLowerCase().indexOf("mac")!=-1);if(_da8){switch(_da7){case 9:if(_da6.delimChar&&(_da6._nKeyCode!=_da7)){if(_da6._bContainerOpen){YAHOO.util.Event.stopEvent(v);}}break;case 13:if(_da6._nKeyCode!=_da7){if(_da6._bContainerOpen){YAHOO.util.Event.stopEvent(v);}}break;case 38:case 40:YAHOO.util.Event.stopEvent(v);break;default:break;}}else{if(_da7==229){_da6._queryInterval=setInterval(function(){_da6._onIMEDetected(_da6);},500);}}};YAHOO.widget.AutoComplete.prototype._onTextboxKeyUp=function(v,_daa){_daa._initProps();var _dab=v.keyCode;_daa._nKeyCode=_dab;var _dac=this.value;if(_daa._isIgnoreKey(_dab)||(_dac.toLowerCase()==_daa._sCurQuery)){return;}else{_daa.textboxKeyEvent.fire(_daa,_dab);}if(_daa.queryDelay>0){var _dad=setTimeout(function(){_daa._sendQuery(_dac);},(_daa.queryDelay*1000));if(_daa._nDelayID!=-1){clearTimeout(_daa._nDelayID);}_daa._nDelayID=_dad;}else{_daa._sendQuery(_dac);}};YAHOO.widget.AutoComplete.prototype._onTextboxFocus=function(v,_daf){_daf._oTextbox.setAttribute("autocomplete","off");_daf._bFocused=true;_daf.textboxFocusEvent.fire(_daf);};YAHOO.widget.AutoComplete.prototype._onTextboxBlur=function(v,_db1){if(!_db1._bOverContainer||(_db1._nKeyCode==9)){if(!_db1._bItemSelected){if(!_db1._bContainerOpen||(_db1._bContainerOpen&&!_db1._textMatchesOption())){if(_db1.forceSelection){_db1._clearSelection();}else{_db1.unmatchedItemSelectEvent.fire(_db1,_db1._sCurQuery);}}}if(_db1._bContainerOpen){_db1._toggleContainer(false);}_db1._cancelIntervalDetection(_db1);_db1._bFocused=false;_db1.textboxBlurEvent.fire(_db1);}};YAHOO.widget.AutoComplete.prototype._onFormSubmit=function(v,_db3){if(_db3.allowBrowserAutocomplete){_db3._oTextbox.setAttribute("autocomplete","on");}else{_db3._oTextbox.setAttribute("autocomplete","off");}};YAHOO.widget.DataSource=function(){};YAHOO.widget.DataSource.ERROR_DATANULL="Response data was null";YAHOO.widget.DataSource.ERROR_DATAPARSE="Response data could not be parsed";YAHOO.widget.DataSource.prototype.maxCacheEntries=15;YAHOO.widget.DataSource.prototype.queryMatchContains=false;YAHOO.widget.DataSource.prototype.queryMatchSubset=false;YAHOO.widget.DataSource.prototype.queryMatchCase=false;YAHOO.widget.DataSource.prototype.toString=function(){return "DataSource "+this._sName;};YAHOO.widget.DataSource.prototype.getResults=function(_db4,_db5,_db6){var _db7=this._doQueryCache(_db4,_db5,_db6);if(_db7.length===0){this.queryEvent.fire(this,_db6,_db5);this.doQuery(_db4,_db5,_db6);}};YAHOO.widget.DataSource.prototype.doQuery=function(_db8,_db9,_dba){};YAHOO.widget.DataSource.prototype.flushCache=function(){if(this._aCache){this._aCache=[];}if(this._aCacheHelper){this._aCacheHelper=[];}this.cacheFlushEvent.fire(this);};YAHOO.widget.DataSource.prototype.queryEvent=null;YAHOO.widget.DataSource.prototype.cacheQueryEvent=null;YAHOO.widget.DataSource.prototype.getResultsEvent=null;YAHOO.widget.DataSource.prototype.getCachedResultsEvent=null;YAHOO.widget.DataSource.prototype.dataErrorEvent=null;YAHOO.widget.DataSource.prototype.cacheFlushEvent=null;YAHOO.widget.DataSource._nIndex=0;YAHOO.widget.DataSource.prototype._sName=null;YAHOO.widget.DataSource.prototype._aCache=null;YAHOO.widget.DataSource.prototype._init=function(){var _dbb=this.maxCacheEntries;if(isNaN(_dbb)||(_dbb<0)){_dbb=0;}if(_dbb>0&&!this._aCache){this._aCache=[];}this._sName="instance"+YAHOO.widget.DataSource._nIndex;YAHOO.widget.DataSource._nIndex++;this.queryEvent=new YAHOO.util.CustomEvent("query",this);this.cacheQueryEvent=new YAHOO.util.CustomEvent("cacheQuery",this);this.getResultsEvent=new YAHOO.util.CustomEvent("getResults",this);this.getCachedResultsEvent=new YAHOO.util.CustomEvent("getCachedResults",this);this.dataErrorEvent=new YAHOO.util.CustomEvent("dataError",this);this.cacheFlushEvent=new YAHOO.util.CustomEvent("cacheFlush",this);};YAHOO.widget.DataSource.prototype._addCacheElem=function(_dbc){var _dbd=this._aCache;if(!_dbd||!_dbc||!_dbc.query||!_dbc.results){return;}if(_dbd.length>=this.maxCacheEntries){_dbd.shift();}_dbd.push(_dbc);};YAHOO.widget.DataSource.prototype._doQueryCache=function(_dbe,_dbf,_dc0){var _dc1=[];var _dc2=false;var _dc3=this._aCache;var _dc4=(_dc3)?_dc3.length:0;var _dc5=this.queryMatchContains;if((this.maxCacheEntries>0)&&_dc3&&(_dc4>0)){this.cacheQueryEvent.fire(this,_dc0,_dbf);if(!this.queryMatchCase){var _dc6=_dbf;_dbf=_dbf.toLowerCase();}for(var i=_dc4-1;i>=0;i--){var _dc8=_dc3[i];var _dc9=_dc8.results;var _dca=(!this.queryMatchCase)?encodeURIComponent(_dc8.query).toLowerCase():encodeURIComponent(_dc8.query);if(_dca==_dbf){_dc2=true;_dc1=_dc9;if(i!=_dc4-1){_dc3.splice(i,1);this._addCacheElem(_dc8);}break;}else{if(this.queryMatchSubset){for(var j=_dbf.length-1;j>=0;j--){var _dcc=_dbf.substr(0,j);if(_dca==_dcc){_dc2=true;for(var k=_dc9.length-1;k>=0;k--){var _dce=_dc9[k];var _dcf=(this.queryMatchCase)?encodeURIComponent(_dce[0]).indexOf(_dbf):encodeURIComponent(_dce[0]).toLowerCase().indexOf(_dbf);if((!_dc5&&(_dcf===0))||(_dc5&&(_dcf>-1))){_dc1.unshift(_dce);}}_dc8={};_dc8.query=_dbf;_dc8.results=_dc1;this._addCacheElem(_dc8);break;}}if(_dc2){break;}}}}if(_dc2){this.getCachedResultsEvent.fire(this,_dc0,_dc6,_dc1);_dbe(_dc6,_dc1,_dc0);}}return _dc1;};YAHOO.widget.DS_XHR=function(_dd0,_dd1,_dd2){if(typeof _dd2=="object"){for(var _dd3 in _dd2){this[_dd3]=_dd2[_dd3];}}if(!_dd1||(_dd1.constructor!=Array)){return;}else{this.schema=_dd1;}this.scriptURI=_dd0;this._init();};YAHOO.widget.DS_XHR.prototype=new YAHOO.widget.DataSource();YAHOO.widget.DS_XHR.TYPE_JSON=0;YAHOO.widget.DS_XHR.TYPE_XML=1;YAHOO.widget.DS_XHR.TYPE_FLAT=2;YAHOO.widget.DS_XHR.ERROR_DATAXHR="XHR response failed";YAHOO.widget.DS_XHR.prototype.connMgr=YAHOO.util.Connect;YAHOO.widget.DS_XHR.prototype.connTimeout=0;YAHOO.widget.DS_XHR.prototype.scriptURI=null;YAHOO.widget.DS_XHR.prototype.scriptQueryParam="query";YAHOO.widget.DS_XHR.prototype.scriptQueryAppend="";YAHOO.widget.DS_XHR.prototype.responseType=YAHOO.widget.DS_XHR.TYPE_JSON;YAHOO.widget.DS_XHR.prototype.responseStripAfter="\n<!-";YAHOO.widget.DS_XHR.prototype.doQuery=function(_dd4,_dd5,_dd6){var _dd7=(this.responseType==YAHOO.widget.DS_XHR.TYPE_XML);var sUri=this.scriptURI+"?"+this.scriptQueryParam+"="+_dd5;if(this.scriptQueryAppend.length>0){sUri+="&"+this.scriptQueryAppend;}var _dd9=null;var _dda=this;var _ddb=function(_ddc){if(!_dda._oConn||(_ddc.tId!=_dda._oConn.tId)){_dda.dataErrorEvent.fire(_dda,_dd6,_dd5,YAHOO.widget.DataSource.ERROR_DATANULL);return;}for(var foo in _ddc){}if(!_dd7){_ddc=_ddc.responseText;}else{_ddc=_ddc.responseXML;}if(_ddc===null){_dda.dataErrorEvent.fire(_dda,_dd6,_dd5,YAHOO.widget.DataSource.ERROR_DATANULL);return;}var _dde=_dda.parseResponse(_dd5,_ddc,_dd6);var _ddf={};_ddf.query=decodeURIComponent(_dd5);_ddf.results=_dde;if(_dde===null){_dda.dataErrorEvent.fire(_dda,_dd6,_dd5,YAHOO.widget.DataSource.ERROR_DATAPARSE);_dde=[];}else{_dda.getResultsEvent.fire(_dda,_dd6,_dd5,_dde);_dda._addCacheElem(_ddf);}_dd4(_dd5,_dde,_dd6);};var _de0=function(_de1){_dda.dataErrorEvent.fire(_dda,_dd6,_dd5,YAHOO.widget.DS_XHR.ERROR_DATAXHR);return;};var _de2={success:_ddb,failure:_de0};if(!isNaN(this.connTimeout)&&this.connTimeout>0){_de2.timeout=this.connTimeout;}if(this._oConn){this.connMgr.abort(this._oConn);}_dda._oConn=this.connMgr.asyncRequest("GET",sUri,_de2,null);};YAHOO.widget.DS_XHR.prototype.parseResponse=function(_de3,_de4,_de5){var _de6=this.schema;var _de7=[];var _de8=false;var nEnd=((this.responseStripAfter!=="")&&(_de4.indexOf))?_de4.indexOf(this.responseStripAfter):-1;if(nEnd!=-1){_de4=_de4.substring(0,nEnd);}switch(this.responseType){case YAHOO.widget.DS_XHR.TYPE_JSON:var _dea;if(window.JSON&&(navigator.userAgent.toLowerCase().indexOf("khtml")==-1)){var _deb=JSON.parse(_de4);if(!_deb){_de8=true;break;}else{try{_dea=eval("jsonObjParsed."+_de6[0]);}catch(e){_de8=true;break;}}}else{try{while(_de4.substring(0,1)==" "){_de4=_de4.substring(1,_de4.length);}if(_de4.indexOf("{")<0){_de8=true;break;}if(_de4.indexOf("{}")===0){break;}var _dec=eval("("+_de4+")");if(!_dec){_de8=true;break;}_dea=eval("(jsonObjRaw."+_de6[0]+")");}catch(e){_de8=true;break;}}if(!_dea){_de8=true;break;}if(_dea.constructor!=Array){_dea=[_dea];}for(var i=_dea.length-1;i>=0;i--){var _dee=[];var _def=_dea[i];for(var j=_de6.length-1;j>=1;j--){var _df1=_def[_de6[j]];if(!_df1){_df1="";}_dee.unshift(_df1);}if(_dee.length==1){_dee.push(_def);}_de7.unshift(_dee);}break;case YAHOO.widget.DS_XHR.TYPE_XML:var _df2=_de4.getElementsByTagName(_de6[0]);if(!_df2){_de8=true;break;}for(var k=_df2.length-1;k>=0;k--){var _df4=_df2.item(k);var _df5=[];for(var m=_de6.length-1;m>=1;m--){var _df7=null;var _df8=_df4.attributes.getNamedItem(_de6[m]);if(_df8){_df7=_df8.value;}else{var _df9=_df4.getElementsByTagName(_de6[m]);if(_df9&&_df9.item(0)&&_df9.item(0).firstChild){_df7=_df9.item(0).firstChild.nodeValue;}else{_df7="";}}_df5.unshift(_df7);}_de7.unshift(_df5);}break;case YAHOO.widget.DS_XHR.TYPE_FLAT:if(_de4.length>0){var _dfa=_de4.length-_de6[0].length;if(_de4.substr(_dfa)==_de6[0]){_de4=_de4.substr(0,_dfa);}var _dfb=_de4.split(_de6[0]);for(var n=_dfb.length-1;n>=0;n--){_de7[n]=_dfb[n].split(_de6[1]);}}break;default:break;}_de3=null;_de4=null;_de5=null;if(_de8){return null;}else{return _de7;}};YAHOO.widget.DS_XHR.prototype._oConn=null;YAHOO.widget.DS_JSFunction=function(_dfd,_dfe){if(typeof _dfe=="object"){for(var _dff in _dfe){this[_dff]=_dfe[_dff];}}if(!_dfd||(_dfd.constructor!=Function)){return;}else{this.dataFunction=_dfd;this._init();}};YAHOO.widget.DS_JSFunction.prototype=new YAHOO.widget.DataSource();YAHOO.widget.DS_JSFunction.prototype.dataFunction=null;YAHOO.widget.DS_JSFunction.prototype.doQuery=function(_e00,_e01,_e02){var _e03=this.dataFunction;var _e04=[];_e04=_e03(_e01);if(_e04===null){this.dataErrorEvent.fire(this,_e02,_e01,YAHOO.widget.DataSource.ERROR_DATANULL);return;}var _e05={};_e05.query=decodeURIComponent(_e01);_e05.results=_e04;this._addCacheElem(_e05);this.getResultsEvent.fire(this,_e02,_e01,_e04);_e00(_e01,_e04,_e02);return;};YAHOO.widget.DS_JSArray=function(_e06,_e07){if(typeof _e07=="object"){for(var _e08 in _e07){this[_e08]=_e07[_e08];}}if(!_e06||(_e06.constructor!=Array)){return;}else{this.data=_e06;this._init();}};YAHOO.widget.DS_JSArray.prototype=new YAHOO.widget.DataSource();YAHOO.widget.DS_JSArray.prototype.data=null;YAHOO.widget.DS_JSArray.prototype.doQuery=function(_e09,_e0a,_e0b){var _e0c=this.data;var _e0d=[];var _e0e=false;var _e0f=this.queryMatchContains;if(_e0a){if(!this.queryMatchCase){_e0a=_e0a.toLowerCase();}for(var i=_e0c.length-1;i>=0;i--){var _e11=[];if(_e0c[i]){if(_e0c[i].constructor==String){_e11[0]=_e0c[i];}else{if(_e0c[i].constructor==Array){_e11=_e0c[i];}}}if(_e11[0]&&(_e11[0].constructor==String)){var _e12=(this.queryMatchCase)?encodeURIComponent(_e11[0]).indexOf(_e0a):encodeURIComponent(_e11[0]).toLowerCase().indexOf(_e0a);if((!_e0f&&(_e12===0))||(_e0f&&(_e12>-1))){_e0d.unshift(_e11);}}}}this.getResultsEvent.fire(this,_e0b,_e0a,_e0d);_e09(_e0a,_e0d,_e0b);};YAHOO.register("autocomplete",YAHOO.widget.AutoComplete,{version:"2.2.0",build:"127"});YAHOO.ext.TabPanel=function(_e13,_e14){this.el=getEl(_e13,true);this.tabPosition="top";this.currentTabWidth=0;this.minTabWidth=40;this.maxTabWidth=250;this.preferredTabWidth=175;this.resizeTabs=false;this.monitorResize=true;if(_e14){if(typeof _e14=="boolean"){this.tabPosition=_e14?"bottom":"top";}else{YAHOO.ext.util.Config.apply(this,_e14);}}if(this.tabPosition=="bottom"){this.bodyEl=getEl(this.createBody(this.el.dom));this.el.addClass("ytabs-bottom");}this.stripWrap=getEl(this.createStrip(this.el.dom),true);this.stripEl=getEl(this.createStripList(this.stripWrap.dom),true);this.stripBody=getEl(this.stripWrap.dom.firstChild.firstChild,true);if(YAHOO.ext.util.Browser.isIE){YAHOO.util.Dom.setStyle(this.stripWrap.dom.firstChild,"overflow-x","hidden");}if(this.tabPosition!="bottom"){this.bodyEl=getEl(this.createBody(this.el.dom));this.el.addClass("ytabs-top");}this.items=[];this.bodyEl.setStyle("position","relative");if(!this.items.indexOf){this.items.indexOf=function(o){for(var i=0,len=this.length;i<len;i++){if(this[i]==o){return i;}}return -1;};}this.active=null;this.onTabChange=new YAHOO.util.CustomEvent("TabItem.onTabChange");this.activateDelegate=this.activate.createDelegate(this);this.events={"tabchange":this.onTabChange,"beforetabchange":new YAHOO.util.CustomEvent("beforechange")};YAHOO.ext.EventManager.onWindowResize(this.onResize,this,true);this.cpad=this.el.getPadding("lr");this.hiddenCount=0;};YAHOO.ext.TabPanel.prototype={fireEvent:YAHOO.ext.util.Observable.prototype.fireEvent,on:YAHOO.ext.util.Observable.prototype.on,addListener:YAHOO.ext.util.Observable.prototype.addListener,delayedListener:YAHOO.ext.util.Observable.prototype.delayedListener,removeListener:YAHOO.ext.util.Observable.prototype.removeListener,purgeListeners:YAHOO.ext.util.Observable.prototype.purgeListeners,addTab:function(id,text,_e19,_e1a){var item=new YAHOO.ext.TabPanelItem(this,id,text,_e1a);this.addTabItem(item);if(_e19){item.setContent(_e19);}return item;},getTab:function(id){return this.items[id];},hideTab:function(id){var t=this.items[id];if(!t.isHidden()){t.setHidden(true);this.hiddenCount++;this.autoSizeTabs();}},unhideTab:function(id){var t=this.items[id];if(t.isHidden()){t.setHidden(false);this.hiddenCount--;this.autoSizeTabs();}},addTabItem:function(item){this.items[item.id]=item;this.items.push(item);if(this.resizeTabs){item.setWidth(this.currentTabWidth||this.preferredTabWidth);this.autoSizeTabs();}else{item.autoSize();}},removeTab:function(id){var _e23=this.items;var tab=_e23[id];if(!tab){return;}var _e25=_e23.indexOf(tab);if(this.active==tab&&_e23.length>1){var _e26=this.getNextAvailable(_e25);if(_e26){_e26.activate();}}this.stripEl.dom.removeChild(tab.pnode.dom);if(tab.bodyEl.dom.parentNode==this.bodyEl.dom){this.bodyEl.dom.removeChild(tab.bodyEl.dom);}_e23.splice(_e25,1);delete this.items[tab.id];tab.fireEvent("close",tab);tab.purgeListeners();this.autoSizeTabs();},getNextAvailable:function(_e27){var _e28=this.items;var _e29=_e27;while(_e29<_e28.length){var item=_e28[++_e29];if(item&&!item.isHidden()){return item;}}var _e2b=_e27;while(_e2b>=0){var item=_e28[--_e2b];if(item&&!item.isHidden()){return item;}}return null;},disableTab:function(id){var tab=this.items[id];if(tab&&this.active!=tab){tab.disable();}},enableTab:function(id){var tab=this.items[id];tab.enable();},activate:function(id){var tab=this.items[id];if(tab==this.active){return tab;}var e={};this.fireEvent("beforetabchange",this,e,tab);if(e.cancel!==true&&!tab.disabled){if(this.active){this.active.hide();}this.active=this.items[id];this.active.show();this.onTabChange.fireDirect(this,this.active);}return tab;},getActiveTab:function(){return this.active;},syncHeight:function(_e34){var _e35=(_e34||this.el.getHeight())-this.el.getBorderWidth("tb")-this.el.getPadding("tb");var bm=this.bodyEl.getMargins();var _e37=_e35-(this.stripWrap.getHeight()||0)-(bm.top+bm.bottom);this.bodyEl.setHeight(_e37);return _e37;},onResize:function(){if(this.monitorResize){this.autoSizeTabs();}},beginUpdate:function(){this.updating=true;},endUpdate:function(){this.updating=false;this.autoSizeTabs();},autoSizeTabs:function(){var _e38=this.items.length;var _e39=_e38-this.hiddenCount;if(!this.resizeTabs||_e38<1||_e39<1||this.updating){return;}var w=Math.max(this.el.getWidth()-this.cpad,10);var _e3b=Math.floor(w/_e39);var b=this.stripBody;if(b.getWidth()>w){var tabs=this.items;this.setTabWidth(Math.max(_e3b,this.minTabWidth));if(_e3b<this.minTabWidth){}}else{if(this.currentTabWidth<this.preferredTabWidth){this.setTabWidth(Math.min(_e3b,this.preferredTabWidth));}}},getCount:function(){return this.items.length;},setTabWidth:function(_e3e){this.currentTabWidth=_e3e;for(var i=0,len=this.items.length;i<len;i++){if(!this.items[i].isHidden()){this.items[i].setWidth(_e3e);}}},destroy:function(_e40){YAHOO.ext.EventManager.removeResizeListener(this.onResize,this);for(var i=0,len=this.items.length;i<len;i++){this.items[i].purgeListeners();}if(_e40===true){this.el.update("");this.el.remove();}}};YAHOO.ext.TabPanelItem=function(_e42,id,text,_e45){this.tabPanel=_e42;this.id=id;this.disabled=false;this.text=text;this.loaded=false;this.closable=_e45;this.bodyEl=getEl(_e42.createItemBody(_e42.bodyEl.dom,id));this.bodyEl.setVisibilityMode(YAHOO.ext.Element.VISIBILITY);this.bodyEl.setStyle("display","block");this.bodyEl.setStyle("zoom","1");this.hideAction();var els=_e42.createStripElements(_e42.stripEl.dom,text,_e45);this.el=getEl(els.el,true);this.inner=getEl(els.inner,true);this.textEl=getEl(this.el.dom.firstChild.firstChild.firstChild,true);this.pnode=getEl(els.el.parentNode,true);this.el.mon("click",this.onTabClick,this,true);if(_e45){var c=getEl(els.close,true);c.dom.title=this.closeText;c.addClassOnOver("close-over");c.mon("click",this.closeClick,this,true);}this.onActivate=new YAHOO.util.CustomEvent("TabItem.onActivate");this.onDeactivate=new YAHOO.util.CustomEvent("TabItem.onDeactivate");this.events={"activate":this.onActivate,"beforeclose":new YAHOO.util.CustomEvent("beforeclose"),"close":new YAHOO.util.CustomEvent("close"),"deactivate":this.onDeactivate};this.hidden=false;};YAHOO.ext.TabPanelItem.prototype={fireEvent:YAHOO.ext.util.Observable.prototype.fireEvent,on:YAHOO.ext.util.Observable.prototype.on,addListener:YAHOO.ext.util.Observable.prototype.addListener,delayedListener:YAHOO.ext.util.Observable.prototype.delayedListener,removeListener:YAHOO.ext.util.Observable.prototype.removeListener,purgeListeners:function(){YAHOO.ext.util.Observable.prototype.purgeListeners.call(this);this.el.removeAllListeners();},show:function(){this.pnode.addClass("on");this.showAction();if(YAHOO.ext.util.Browser.isOpera){this.tabPanel.stripWrap.repaint();}this.onActivate.fireDirect(this.tabPanel,this);},isActive:function(){return this.tabPanel.getActiveTab()==this;},hide:function(){this.pnode.removeClass("on");this.hideAction();this.onDeactivate.fireDirect(this.tabPanel,this);},hideAction:function(){this.bodyEl.setStyle("position","absolute");this.bodyEl.setLeft("-20000px");this.bodyEl.setTop("-20000px");this.bodyEl.hide();},showAction:function(){this.bodyEl.setStyle("position","relative");this.bodyEl.setTop("");this.bodyEl.setLeft("");this.bodyEl.show();this.tabPanel.el.repaint.defer(1);},setTooltip:function(text){this.textEl.dom.title=text;},onTabClick:function(e){e.preventDefault();this.tabPanel.activate(this.id);},getWidth:function(){return this.inner.getWidth();},setWidth:function(_e4a){var _e4b=_e4a-this.pnode.getPadding("lr");this.inner.setWidth(_e4b);this.textEl.setWidth(_e4b-this.inner.getPadding("lr"));this.pnode.setWidth(_e4a);},setHidden:function(_e4c){this.hidden=_e4c;this.pnode.setStyle("display",_e4c?"none":"");},isHidden:function(){return this.hidden;},getText:function(){return this.text;},autoSize:function(){this.el.beginMeasure();this.textEl.setWidth(1);this.setWidth(this.textEl.dom.scrollWidth+this.pnode.getPadding("lr")+this.inner.getPadding("lr"));this.el.endMeasure();},setText:function(text){this.text=text;this.textEl.update(text);this.textEl.dom.title=text;if(!this.tabPanel.resizeTabs){this.autoSize();}},activate:function(){this.tabPanel.activate(this.id);},disable:function(){if(this.tabPanel.active!=this){this.disabled=true;this.pnode.addClass("disabled");}},enable:function(){this.disabled=false;this.pnode.removeClass("disabled");},setContent:function(_e4e,_e4f){this.bodyEl.update(_e4e,_e4f);},getUpdateManager:function(){return this.bodyEl.getUpdateManager();},setUrl:function(url,_e51,_e52){if(this.refreshDelegate){this.onActivate.unsubscribe(this.refreshDelegate);}this.refreshDelegate=this._handleRefresh.createDelegate(this,[url,_e51,_e52]);this.onActivate.subscribe(this.refreshDelegate);return this.bodyEl.getUpdateManager();},_handleRefresh:function(url,_e54,_e55){if(!_e55||!this.loaded){var _e56=this.bodyEl.getUpdateManager();_e56.update(url,_e54,this._setLoaded.createDelegate(this));}},refresh:function(){if(this.refreshDelegate){this.loaded=false;this.refreshDelegate();}},_setLoaded:function(){this.loaded=true;},closeClick:function(e){var e={};this.fireEvent("beforeclose",this,e);if(e.cancel!==true){this.tabPanel.removeTab(this.id);}},closeText:"Close this tab"};YAHOO.ext.TabPanel.prototype.createStrip=function(_e59){var _e5a=document.createElement("div");_e5a.className="ytab-wrap";_e59.appendChild(_e5a);return _e5a;};YAHOO.ext.TabPanel.prototype.createStripList=function(_e5b){_e5b.innerHTML="<div class=\"ytab-strip-wrap\"><table class=\"ytab-strip\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\"><tbody><tr></tr></tbody></table></div>";return _e5b.firstChild.firstChild.firstChild.firstChild;};YAHOO.ext.TabPanel.prototype.createBody=function(_e5c){var body=document.createElement("div");YAHOO.util.Dom.generateId(body,"tab-body");YAHOO.util.Dom.addClass(body,"yui-ext-tabbody");_e5c.appendChild(body);return body;};YAHOO.ext.TabPanel.prototype.createItemBody=function(_e5e,id){var body=YAHOO.util.Dom.get(id);if(!body){body=document.createElement("div");body.id=id;}YAHOO.util.Dom.addClass(body,"yui-ext-tabitembody");_e5e.insertBefore(body,_e5e.firstChild);return body;};YAHOO.ext.TabPanel.prototype.createStripElements=function(_e61,text,_e63){var td=document.createElement("td");_e61.appendChild(td);if(_e63){td.className="ytab-closable";if(!this.closeTpl){this.closeTpl=new YAHOO.ext.Template("<a href=\"#\" class=\"ytab-right\"><span class=\"ytab-left\"><em class=\"ytab-inner\">"+"<span unselectable=\"on\" title=\"{text}\" class=\"ytab-text\">{text}</span>"+"<div unselectable=\"on\" class=\"close-icon\">&#160;</div></em></span></a>");}var el=this.closeTpl.overwrite(td,{"text":text});var _e66=el.getElementsByTagName("div")[0];var _e67=el.getElementsByTagName("em")[0];return {"el":el,"close":_e66,"inner":_e67};}else{if(!this.tabTpl){this.tabTpl=new YAHOO.ext.Template("<a href=\"#\" class=\"ytab-right\"><span class=\"ytab-left\"><em class=\"ytab-inner\">"+"<span unselectable=\"on\" title=\"{text}\" class=\"ytab-text\">{text}</span></em></span></a>");}var el=this.tabTpl.overwrite(td,{"text":text});var _e69=el.getElementsByTagName("em")[0];return {"el":el,"inner":_e69};}};YAHOO.ext.Resizable=function(el,_e6b){var _e6c=YAHOO.ext.Element.get;this.el=_e6c(el,true);this.el.autoBoxAdjust=true;if(this.el.getStyle("position")!="absolute"){this.el.setStyle("position","relative");}var dh=YAHOO.ext.DomHelper;var tpl=dh.createTemplate({tag:"div",cls:"yresizable-handle yresizable-handle-{0}",html:"&nbsp;"});this.east=_e6c(tpl.append(this.el.dom,["east"]),true);this.south=_e6c(tpl.append(this.el.dom,["south"]),true);if(_e6b&&_e6b.multiDirectional){this.west=_e6c(tpl.append(this.el.dom,["west"]),true);this.north=_e6c(tpl.append(this.el.dom,["north"]),true);}this.corner=_e6c(tpl.append(this.el.dom,["southeast"]),true);this.proxy=_e6c(dh.insertBefore(document.body.firstChild,{tag:"div",cls:"yresizable-proxy",id:this.el.id+"-rzproxy"}),true);this.proxy.autoBoxAdjust=true;this.moveHandler=YAHOO.ext.EventManager.wrap(this.onMouseMove,this,true);this.upHandler=YAHOO.ext.EventManager.wrap(this.onMouseUp,this,true);this.selHandler=YAHOO.ext.EventManager.wrap(this.cancelSelection,this,true);this.events={"beforeresize":new YAHOO.util.CustomEvent(),"resize":new YAHOO.util.CustomEvent()};this.dir=null;this.resizeChild=false;this.adjustments=[0,0];this.minWidth=5;this.minHeight=5;this.maxWidth=10000;this.maxHeight=10000;this.enabled=true;this.animate=false;this.duration=0.35;this.dynamic=false;this.multiDirectional=false;this.disableTrackOver=false;this.easing=YAHOO.util.Easing?YAHOO.util.Easing.easeOutStrong:null;YAHOO.ext.util.Config.apply(this,_e6b);if(this.resizeChild){if(typeof this.resizeChild=="boolean"){this.resizeChild=YAHOO.ext.Element.get(this.el.dom.firstChild,true);}else{this.resizeChild=YAHOO.ext.Element.get(this.resizeChild,true);}}var _e6f=this.onMouseDown.createDelegate(this);this.east.mon("mousedown",_e6f);this.south.mon("mousedown",_e6f);if(this.multiDirectional){this.west.mon("mousedown",_e6f);this.north.mon("mousedown",_e6f);}this.corner.mon("mousedown",_e6f);if(!this.disableTrackOver){var _e70=this.onMouseOver.createDelegate(this);var mout=this.onMouseOut.createDelegate(this);this.east.mon("mouseover",_e70);this.east.mon("mouseout",mout);this.south.mon("mouseover",_e70);this.south.mon("mouseout",mout);if(this.multiDirectional){this.west.mon("mouseover",_e70);this.west.mon("mouseout",mout);this.north.mon("mouseover",_e70);this.north.mon("mouseout",mout);}this.corner.mon("mouseover",_e70);this.corner.mon("mouseout",mout);}this.updateChildSize();};YAHOO.extendX(YAHOO.ext.Resizable,YAHOO.ext.util.Observable,{resizeTo:function(_e72,_e73){this.el.setSize(_e72,_e73);this.fireEvent("resize",this,_e72,_e73,null);},cancelSelection:function(e){e.preventDefault();},startSizing:function(e){this.fireEvent("beforeresize",this,e);if(this.enabled){e.preventDefault();this.startBox=this.el.getBox();this.startPoint=e.getXY();this.offsets=[(this.startBox.x+this.startBox.width)-this.startPoint[0],(this.startBox.y+this.startBox.height)-this.startPoint[1]];this.proxy.setBox(this.startBox);if(!this.dynamic){this.proxy.show();}YAHOO.util.Event.on(document.body,"selectstart",this.selHandler);YAHOO.util.Event.on(document.body,"mousemove",this.moveHandler);YAHOO.util.Event.on(document.body,"mouseup",this.upHandler);}},onMouseDown:function(e){if(this.enabled){var t=e.getTarget();if(t==this.corner.dom){this.dir="both";this.proxy.setStyle("cursor",this.corner.getStyle("cursor"));this.startSizing(e);}else{if(t==this.east.dom){this.dir="east";this.proxy.setStyle("cursor",this.east.getStyle("cursor"));this.startSizing(e);}else{if(t==this.south.dom){this.dir="south";this.proxy.setStyle("cursor",this.south.getStyle("cursor"));this.startSizing(e);}else{if(t==this.west.dom){this.dir="west";this.proxy.setStyle("cursor",this.west.getStyle("cursor"));this.startSizing(e);}else{if(t==this.north.dom){this.dir="north";this.proxy.setStyle("cursor",this.north.getStyle("cursor"));this.startSizing(e);}}}}}}},onMouseUp:function(e){YAHOO.util.Event.removeListener(document.body,"selectstart",this.selHandler);YAHOO.util.Event.removeListener(document.body,"mousemove",this.moveHandler);YAHOO.util.Event.removeListener(document.body,"mouseup",this.upHandler);var size=this.resizeElement();this.fireEvent("resize",this,size.width,size.height,e);},updateChildSize:function(){if(this.resizeChild&&this.el.dom.offsetWidth){var el=this.el;var _e7b=this.resizeChild;var adj=this.adjustments;setTimeout(function(){var b=el.getBox(true);_e7b.setSize(b.width+adj[0],b.height+adj[1]);},1);}},snap:function(_e7e,inc){if(!inc||!_e7e){return _e7e;}var _e80=_e7e;var m=_e7e%inc;if(m>0){if(m>(inc/2)){_e80=_e7e+(inc-m);}else{_e80=_e7e-m;}}return _e80;},resizeElement:function(){var box=this.proxy.getBox();box.width=this.snap(box.width,this.widthIncrement);box.height=this.snap(box.height,this.heightIncrement);if(this.multiDirectional){this.el.setBox(box,false,this.animate,this.duration,null,this.easing);}else{this.el.setSize(box.width,box.height,this.animate,this.duration,null,this.easing);}this.updateChildSize();this.proxy.hide();return box;},onMouseMove:function(e){if(this.enabled){var xy=e.getXY();if(this.dir=="both"||this.dir=="east"||this.dir=="south"){var w=Math.min(Math.max(this.minWidth,xy[0]-this.startBox.x+this.offsets[0]),this.maxWidth);var h=Math.min(Math.max(this.minHeight,xy[1]-this.startBox.y+this.offsets[1]),this.maxHeight);if(this.dir=="both"){this.proxy.setSize(w,h);}else{if(this.dir=="east"){this.proxy.setWidth(w);}else{if(this.dir=="south"){this.proxy.setHeight(h);}}}}else{var x=this.startBox.x+(xy[0]-this.startPoint[0]);var y=this.startBox.y+(xy[1]-this.startPoint[1]);var w=this.startBox.width+(this.startBox.x-x);var h=this.startBox.height+(this.startBox.y-y);if(this.dir=="west"&&w<=this.maxWidth&&w>=this.minWidth){this.proxy.setX(x);this.proxy.setWidth(w);}else{if(this.dir=="north"&&h<=this.maxHeight&&h>=this.minHeight){this.proxy.setY(y);this.proxy.setHeight(h);}}}if(this.dynamic){this.resizeElement();}}},onMouseOver:function(){if(this.enabled){this.el.addClass("yresizable-over");}},onMouseOut:function(){this.el.removeClass("yresizable-over");}});YAHOO.namespace("ext.state");YAHOO.ext.state.Provider=function(){YAHOO.ext.state.Provider.superclass.constructor.call(this);this.events={"statechange":new YAHOO.util.CustomEvent("statechange")};this.state={};};YAHOO.extendX(YAHOO.ext.state.Provider,YAHOO.ext.util.Observable,{get:function(name,_e8c){return typeof this.state[name]=="undefined"?_e8c:this.state[name];},clear:function(name){delete this.state[name];this.fireEvent("statechange",this,name,null);},set:function(name,_e8f){this.state[name]=_e8f;this.fireEvent("statechange",this,name,_e8f);},decodeValue:function(_e90){var re=/^(a|n|d|b|s|o)\:(.*)$/;var _e92=re.exec(unescape(_e90));if(!_e92||!_e92[1]){return;}var type=_e92[1];var v=_e92[2];switch(type){case "n":return parseFloat(v);case "d":return new Date(Date.parse(v));case "b":return (v=="1");case "a":var all=[];var _e96=v.split("^");for(var i=0,len=_e96.length;i<len;i++){all.push(this.decodeValue(_e96[i]));}return all;case "o":var all={};var _e99=v.split("^");for(var i=0,len=_e99.length;i<len;i++){var kv=_e99[i].split("=");all[kv[0]]=this.decodeValue(kv[1]);}return all;default:return v;}},encodeValue:function(v){var enc;if(typeof v=="number"){enc="n:"+v;}else{if(typeof v=="boolean"){enc="b:"+(v?"1":"0");}else{if(v instanceof Date){enc="d:"+v.toGMTString();}else{if(v instanceof Array){var flat="";for(var i=0,len=v.length;i<len;i++){flat+=this.encodeValue(v[i]);if(i!=len-1){flat+="^";}}enc="a:"+flat;}else{if(typeof v=="object"){var flat="";for(var key in v){if(typeof v[key]!="function"){flat+=key+"="+this.encodeValue(v[key])+"^";}}enc="o:"+flat.substring(0,flat.length-1);}else{enc="s:"+v;}}}}}return escape(enc);}});YAHOO.ext.state.Manager=new function(){var _ea2=new YAHOO.ext.state.Provider();return {setProvider:function(_ea3){_ea2=_ea3;},get:function(key,_ea5){return _ea2.get(key,_ea5);},set:function(key,_ea7){_ea2.set(key,_ea7);},clear:function(key){_ea2.clear(key);},getProvider:function(){return _ea2;}};}();YAHOO.ext.state.CookieProvider=function(_ea9){YAHOO.ext.state.CookieProvider.superclass.constructor.call(this);this.path="/";this.expires=new Date(new Date().getTime()+(1000*60*60*24*7));this.domain=null;this.secure=false;YAHOO.ext.util.Config.apply(this,_ea9);this.state=this.readCookies();};YAHOO.extendX(YAHOO.ext.state.CookieProvider,YAHOO.ext.state.Provider,{set:function(name,_eab){if(typeof _eab=="undefined"||_eab===null){this.clear(name);return;}this.setCookie(name,_eab);YAHOO.ext.state.CookieProvider.superclass.set.call(this,name,_eab);},clear:function(name){this.clearCookie(name);YAHOO.ext.state.CookieProvider.superclass.clear.call(this,name);},readCookies:function(){var _ead={};var c=document.cookie+";";var re=/\s?(.*?)=(.*?);/g;var _eb0;while((_eb0=re.exec(c))!=null){var name=_eb0[1];var _eb2=_eb0[2];if(name&&name.substring(0,3)=="ys-"){_ead[name.substr(3)]=this.decodeValue(_eb2);}}return _ead;},setCookie:function(name,_eb4){document.cookie="ys-"+name+"="+this.encodeValue(_eb4)+((this.expires==null)?"":("; expires="+this.expires.toGMTString()))+((this.path==null)?"":("; path="+this.path))+((this.domain==null)?"":("; domain="+this.domain))+((this.secure==true)?"; secure":"");},clearCookie:function(name){document.cookie="ys-"+name+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+((this.path==null)?"":("; path="+this.path))+((this.domain==null)?"":("; domain="+this.domain))+((this.secure==true)?"; secure":"");}});YAHOO.ext.BasicDialog=function(el,_eb7){this.el=getEl(el);var dh=YAHOO.ext.DomHelper;if(!this.el&&_eb7&&_eb7.autoCreate){if(typeof _eb7.autoCreate=="object"){if(!_eb7.autoCreate.id){_eb7.autoCreate.id=el;}this.el=dh.append(document.body,_eb7.autoCreate,true);}else{this.el=dh.append(document.body,{tag:"div",id:el},true);}}el=this.el;el.setDisplayed(true);el.hide=this.hideAction;this.id=el.id;el.addClass("ydlg");this.shadowOffset=3;this.minHeight=80;this.minWidth=200;this.minButtonWidth=75;this.defaultButton=null;YAHOO.ext.util.Config.apply(this,_eb7);this.proxy=el.createProxy("ydlg-proxy");this.proxy.hide=this.hideAction;this.proxy.setOpacity(0.5);this.proxy.hide();if(_eb7.width){el.setWidth(_eb7.width);}if(_eb7.height){el.setHeight(_eb7.height);}this.size=el.getSize();if(typeof _eb7.x!="undefined"&&typeof _eb7.y!="undefined"){this.xy=[_eb7.x,_eb7.y];}else{this.xy=el.getCenterXY(true);}var cn=el.dom.childNodes;for(var i=0,len=cn.length;i<len;i++){var node=cn[i];if(node&&node.nodeType==1){if(YAHOO.util.Dom.hasClass(node,"ydlg-hd")){this.header=getEl(node,true);}else{if(YAHOO.util.Dom.hasClass(node,"ydlg-bd")){this.body=getEl(node,true);}else{if(YAHOO.util.Dom.hasClass(node,"ydlg-ft")){this.footer=getEl(node,true);}}}}}if(!this.header){this.header=dh.append(el.dom,{tag:"div",cls:"ydlg-hd"},true);}if(this.title){this.header.update(this.title);}if(!this.body){this.body=dh.append(el.dom,{tag:"div",cls:"ydlg-bd"},true);}var hl=dh.insertBefore(this.header.dom,{tag:"div",cls:"ydlg-hd-left"});var hr=dh.append(hl,{tag:"div",cls:"ydlg-hd-right"});hr.appendChild(this.header.dom);this.bwrap=dh.insertBefore(this.body.dom,{tag:"div",cls:"ydlg-dlg-body"},true);this.bwrap.dom.appendChild(this.body.dom);if(this.footer){this.bwrap.dom.appendChild(this.footer.dom);}if(this.autoScroll!==false&&!this.autoTabs){this.body.setStyle("overflow","auto");}if(this.closable!==false){this.el.addClass("ydlg-closable");this.close=dh.append(el.dom,{tag:"div",cls:"ydlg-close"},true);this.close.mon("click",function(){this.hide();},this,true);}if(this.resizable!==false){this.el.addClass("ydlg-resizable");this.resizer=new YAHOO.ext.Resizable(el,{minWidth:this.minWidth||80,minHeight:this.minHeight||80,handles:"all",pinned:true});this.resizer.on("beforeresize",this.beforeResize,this,true);this.resizer.on("resize",this.onResize,this,true);}if(this.draggable!==false){el.addClass("ydlg-draggable");if(!this.proxyDrag){var dd=new YAHOO.util.DD(el.dom.id,"WindowDrag");}else{var dd=new YAHOO.util.DDProxy(el.dom.id,"WindowDrag",{dragElId:this.proxy.id});}dd.setHandleElId(this.header.id);dd.endDrag=this.endMove.createDelegate(this);dd.startDrag=this.startMove.createDelegate(this);dd.onDrag=this.onDrag.createDelegate(this);this.dd=dd;}if(this.modal){this.mask=dh.append(document.body,{tag:"div",cls:"ydlg-mask"},true);this.mask.enableDisplayMode("block");this.mask.hide();}if(this.shadow){this.shadow=el.createProxy({tag:"div",cls:"ydlg-shadow"});this.shadow.setOpacity(0.3);this.shadow.setVisibilityMode(YAHOO.ext.Element.VISIBILITY);this.shadow.setDisplayed("block");this.shadow.hide=this.hideAction;this.shadow.hide();}else{this.shadowOffset=0;}if(this.shim){this.shim=this.el.createShim();this.shim.hide=this.hideAction;this.shim.hide();}if(this.autoTabs){var _ec0=YAHOO.util.Dom.getElementsByClassName("ydlg-tab",this.tabTag||"div",el.dom);if(_ec0.length>0){this.body.addClass(this.tabPosition=="bottom"?"ytabs-bottom":"ytabs-top");this.tabs=new YAHOO.ext.TabPanel(this.body.dom,this.tabPosition=="bottom");for(var i=0,len=_ec0.length;i<len;i++){var _ec2=_ec0[i];this.tabs.addTab(YAHOO.util.Dom.generateId(_ec2),_ec2.title);_ec2.title="";}this.tabs.activate(_ec0[0].id);}}this.syncBodyHeight();this.events={"keydown":true,"move":true,"resize":true,"beforehide":true,"hide":true,"beforeshow":true,"show":true};el.mon("keydown",this.onKeyDown,this,true);el.mon("mousedown",this.toFront,this,true);YAHOO.ext.EventManager.onWindowResize(this.adjustViewport,this,true);this.el.hide();YAHOO.ext.DialogManager.register(this);};YAHOO.extendX(YAHOO.ext.BasicDialog,YAHOO.ext.util.Observable,{setTitle:function(text){this.header.update(text);return this;},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getHeaderFooterHeight(true)+40);},onResize:function(){this.refreshSize();this.syncBodyHeight();this.adjustAssets();this.fireEvent("resize",this,this.size.width,this.size.height);},onKeyDown:function(e){this.fireEvent("keydown",this,e);},resizeTo:function(_ec5,_ec6){this.el.setSize(_ec5,_ec6);this.size={width:_ec5,height:_ec6};this.syncBodyHeight();if(this.fixedcenter){this.center();}if(this.isVisible()){this.constrainXY();this.adjustAssets();}this.fireEvent("resize",this,_ec5,_ec6);return this;},addKeyListener:function(key,fn,_ec9){var _eca,shift,ctrl,alt;if(typeof key=="object"&&!(key instanceof Array)){_eca=key["key"];shift=key["shift"];ctrl=key["ctrl"];alt=key["alt"];}else{_eca=key;}var _ecb=function(dlg,e){if((!shift||e.shiftKey)&&(!ctrl||e.ctrlKey)&&(!alt||e.altKey)){var k=e.getKey();if(_eca instanceof Array){for(var i=0,len=_eca.length;i<len;i++){if(_eca[i]==k){fn.call(_ec9||window,dlg,k,e);return;}}}else{if(k==_eca){fn.call(_ec9||window,dlg,k,e);}}}};this.on("keydown",_ecb);return this;},getTabs:function(){if(!this.tabs){this.body.addClass(this.tabPosition=="bottom"?"ytabs-bottom":"ytabs-top");this.tabs=new YAHOO.ext.TabPanel(this.body.dom,this.tabPosition=="bottom");}return this.tabs;},addButton:function(_ed0,_ed1,_ed2){var dh=YAHOO.ext.DomHelper;if(!this.footer){this.footer=dh.append(this.bwrap.dom,{tag:"div",cls:"ydlg-ft"},true);}var _ed4={handler:_ed1,scope:_ed2,minWidth:this.minButtonWidth};if(typeof _ed0=="string"){_ed4.text=_ed0;}else{_ed4.dhconfig=_ed0;}var btn=new YAHOO.ext.Button(this.footer,_ed4);this.syncBodyHeight();if(!this.buttons){this.buttons=[];}this.buttons.push(btn);return btn;},setDefaultButton:function(btn){this.defaultButton=btn;return this;},getHeaderFooterHeight:function(safe){var _ed8=0;if(this.header){_ed8+=this.header.getHeight();}if(this.footer){var fm=this.footer.getMargins();_ed8+=(this.footer.getHeight()+fm.top+fm.bottom);}_ed8+=this.bwrap.getPadding("tb")+this.bwrap.getBorderWidth("tb");return _ed8;},syncBodyHeight:function(){var _eda=this.size.height-this.getHeaderFooterHeight(false);var bm=this.body.getMargins();this.body.setHeight(_eda-(bm.top+bm.bottom));if(this.tabs){this.tabs.syncHeight();}this.bwrap.setHeight(this.size.height-this.header.getHeight());this.body.setWidth(this.el.getWidth(true)-this.bwrap.getBorderWidth("lr")-this.bwrap.getPadding("lr"));},restoreState:function(){var box=YAHOO.ext.state.Manager.get(this.el.id+"-state");if(box&&box.width){this.xy=[box.x,box.y];this.resizeTo(box.width,box.height);}return this;},beforeShow:function(){if(this.fixedcenter){this.xy=this.el.getCenterXY(true);}if(this.modal){YAHOO.util.Dom.addClass(document.body,"masked");this.mask.setSize(YAHOO.util.Dom.getDocumentWidth(),YAHOO.util.Dom.getDocumentHeight());this.mask.show();}this.constrainXY();},animShow:function(){var b=getEl(this.animateTarget,true).getBox();this.proxy.setSize(b.width,b.height);this.proxy.setLocation(b.x,b.y);this.proxy.show();this.proxy.setBounds(this.xy[0],this.xy[1],this.size.width,this.size.height,true,0.35,this.showEl.createDelegate(this));},show:function(_ede){if(this.fireEvent("beforeshow",this)===false){return;}if(this.syncHeightBeforeShow){this.syncBodyHeight();}this.animateTarget=_ede||this.animateTarget;if(!this.el.isVisible()){this.beforeShow();if(this.animateTarget){this.animShow();}else{this.showEl();}}return this;},showEl:function(){this.proxy.hide();this.el.setXY(this.xy);this.el.show();this.adjustAssets(true);this.toFront();if(this.defaultButton){this.defaultButton.focus();}this.fireEvent("show",this);},constrainXY:function(){if(this.constraintoviewport!==false){if(!this.viewSize){this.viewSize=[YAHOO.util.Dom.getViewportWidth(),YAHOO.util.Dom.getViewportHeight()];}var x=this.xy[0],y=this.xy[1];var w=this.size.width,h=this.size.height;var vw=this.viewSize[0],vh=this.viewSize[1];var _ee2=false;if(x+w>vw){x=vw-w;_ee2=true;}if(y+h>vh){y=vh-h;_ee2=true;}if(x<0){x=0;_ee2=true;}if(y<0){y=0;_ee2=true;}if(_ee2){this.xy=[x,y];if(this.isVisible()){this.el.setLocation(x,y);this.adjustAssets();}}}},onDrag:function(){if(!this.proxyDrag){this.xy=this.el.getXY();this.adjustAssets();}},adjustAssets:function(_ee3){var x=this.xy[0],y=this.xy[1];var w=this.size.width,h=this.size.height;if(_ee3===true){if(this.shadow){this.shadow.show();}if(this.shim){this.shim.show();}}if(this.shadow&&this.shadow.isVisible()){this.shadow.setBounds(x+this.shadowOffset,y+this.shadowOffset,w,h);}if(this.shim&&this.shim.isVisible()){this.shim.setBounds(x,y,w,h);}},adjustViewport:function(w,h){if(!w||!h){w=YAHOO.util.Dom.getViewportWidth();h=YAHOO.util.Dom.getViewportHeight();}this.viewSize=[w,h];if(this.modal&&this.mask.isVisible()){this.mask.setSize(w,h);this.mask.setSize(YAHOO.util.Dom.getDocumentWidth(),YAHOO.util.Dom.getDocumentHeight());}if(this.isVisible()){this.constrainXY();}},destroy:function(_ee8){YAHOO.ext.EventManager.removeResizeListener(this.adjustViewport,this);if(this.tabs){this.tabs.destroy(_ee8);}if(_ee8===true){this.el.update("");this.el.remove();}YAHOO.ext.DialogManager.unregister(this);},startMove:function(){if(this.proxyDrag){this.proxy.show();}if(this.constraintoviewport!==false){this.dd.constrainTo(document.body,{right:this.shadowOffset,bottom:this.shadowOffset});}},endMove:function(){if(!this.proxyDrag){YAHOO.util.DD.prototype.endDrag.apply(this.dd,arguments);}else{YAHOO.util.DDProxy.prototype.endDrag.apply(this.dd,arguments);this.proxy.hide();}this.refreshSize();this.adjustAssets();this.fireEvent("move",this,this.xy[0],this.xy[1]);},toFront:function(){YAHOO.ext.DialogManager.bringToFront(this);return this;},toBack:function(){YAHOO.ext.DialogManager.sendToBack(this);return this;},center:function(){this.moveTo(this.el.getCenterXY(true));return this;},moveTo:function(x,y){this.xy=[x,y];if(this.isVisible()){this.el.setXY(this.xy);this.adjustAssets();}return this;},isVisible:function(){return this.el.isVisible();},animHide:function(_eeb){var b=getEl(this.animateTarget,true).getBox();this.proxy.show();this.proxy.setBounds(this.xy[0],this.xy[1],this.size.width,this.size.height);this.el.hide();this.proxy.setBounds(b.x,b.y,b.width,b.height,true,0.35,this.hideEl.createDelegate(this,[_eeb]));},hide:function(_eed){if(this.fireEvent("beforehide",this)===false){return;}if(this.shadow){this.shadow.hide();}if(this.shim){this.shim.hide();}if(this.animateTarget){this.animHide(_eed);}else{this.el.hide();this.hideEl(_eed);}return this;},hideEl:function(_eee){this.proxy.hide();if(this.modal){this.mask.hide();YAHOO.util.Dom.removeClass(document.body,"masked");}this.fireEvent("hide",this);if(typeof _eee=="function"){_eee();}},hideAction:function(){this.setLeft("-10000px");this.setTop("-10000px");this.setStyle("visibility","hidden");},refreshSize:function(){this.size=this.el.getSize();this.xy=this.el.getXY();YAHOO.ext.state.Manager.set(this.el.id+"-state",this.el.getBox());},setZIndex:function(_eef){if(this.modal){this.mask.setStyle("z-index",_eef);}if(this.shadow){this.shadow.setStyle("z-index",++_eef);}if(this.shim){this.shim.setStyle("z-index",++_eef);}this.el.setStyle("z-index",++_eef);if(this.proxy){this.proxy.setStyle("z-index",++_eef);}if(this.resizer){this.resizer.proxy.setStyle("z-index",++_eef);}this.lastZIndex=_eef;},getEl:function(){return this.el;}});YAHOO.ext.DialogManager=function(){var list={};var _ef1=[];var _ef2=null;var _ef3=function(d1,d2){return (!d1._lastAccess||d1._lastAccess<d2._lastAccess)?-1:1;};var _ef6=function(){_ef1.sort(_ef3);var seed=YAHOO.ext.DialogManager.zseed;for(var i=0,len=_ef1.length;i<len;i++){if(_ef1[i]){_ef1[i].setZIndex(seed+(i*10));}}};return {zseed:10000,register:function(dlg){list[dlg.id]=dlg;_ef1.push(dlg);},unregister:function(dlg){delete list[dlg.id];if(!_ef1.indexOf){for(var i=0,len=_ef1.length;i<len;i++){_ef1.splice(i,1);return;}}else{var i=_ef1.indexOf(dlg);if(i!=-1){_ef1.splice(i,1);}}},get:function(id){return typeof id=="object"?id:list[id];},bringToFront:function(dlg){dlg=this.get(dlg);if(dlg!=_ef2){_ef2=dlg;dlg._lastAccess=new Date().getTime();_ef6();}return dlg;},sendToBack:function(dlg){dlg=this.get(dlg);dlg._lastAccess=-(new Date().getTime());_ef6();return dlg;}};}();YAHOO.ext.LayoutDialog=function(el,_f01){_f01.autoTabs=false;YAHOO.ext.LayoutDialog.superclass.constructor.call(this,el,_f01);this.body.setStyle({overflow:"hidden",position:"relative"});this.layout=new YAHOO.ext.BorderLayout(this.body.dom,_f01);this.layout.monitorWindowResize=false;this.center=YAHOO.ext.BasicDialog.prototype.center;this.on("show",this.layout.layout,this.layout,true);};YAHOO.extendX(YAHOO.ext.LayoutDialog,YAHOO.ext.BasicDialog,{endUpdate:function(){this.layout.endUpdate();},beginUpdate:function(){this.layout.beginUpdate();},getLayout:function(){return this.layout;},syncBodyHeight:function(){YAHOO.ext.LayoutDialog.superclass.syncBodyHeight.call(this);if(this.layout){this.layout.layout();}}});if(YAHOO.util.DragDropMgr){YAHOO.util.DragDropMgr.clickTimeThresh=350;}YAHOO.ext.SplitBar=function(_f02,_f03,_f04,_f05){this.el=YAHOO.ext.Element.get(_f02,true);this.el.dom.unselectable="on";this.resizingEl=YAHOO.ext.Element.get(_f03,true);this.orientation=_f04||YAHOO.ext.SplitBar.HORIZONTAL;this.minSize=0;this.maxSize=2000;this.onMoved=new YAHOO.util.CustomEvent("SplitBarMoved",this);this.animate=false;this.useShim=false;this.shim=null;this.proxy=YAHOO.ext.SplitBar.createProxy(this.orientation);this.dd=new YAHOO.util.DDProxy(this.el.dom.id,"SplitBars",{dragElId:this.proxy.id});this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this);this.dd.endDrag=this.onEndProxyDrag.createDelegate(this);this.dragSpecs={};this.adapter=new YAHOO.ext.SplitBar.BasicLayoutAdapter();this.adapter.init(this);if(this.orientation==YAHOO.ext.SplitBar.HORIZONTAL){this.placement=_f05||(this.el.getX()>this.resizingEl.getX()?YAHOO.ext.SplitBar.LEFT:YAHOO.ext.SplitBar.RIGHT);this.el.setStyle("cursor","e-resize");}else{this.placement=_f05||(this.el.getY()>this.resizingEl.getY()?YAHOO.ext.SplitBar.TOP:YAHOO.ext.SplitBar.BOTTOM);this.el.setStyle("cursor","n-resize");}this.events={"resize":this.onMoved,"moved":this.onMoved,"beforeresize":new YAHOO.util.CustomEvent("beforeresize")};};YAHOO.extendX(YAHOO.ext.SplitBar,YAHOO.ext.util.Observable,{onStartProxyDrag:function(x,y){this.fireEvent("beforeresize",this);if(this.useShim){if(!this.shim){this.shim=YAHOO.ext.SplitBar.createShim();}this.shim.setVisible(true);}YAHOO.util.Dom.setStyle(this.proxy,"display","block");var size=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize();this.activeMaxSize=this.getMaximumSize();var c1=size-this.activeMinSize;var c2=Math.max(this.activeMaxSize-size,0);if(this.orientation==YAHOO.ext.SplitBar.HORIZONTAL){this.dd.resetConstraints();this.dd.setXConstraint(this.placement==YAHOO.ext.SplitBar.LEFT?c1:c2,this.placement==YAHOO.ext.SplitBar.LEFT?c2:c1);this.dd.setYConstraint(0,0);}else{this.dd.resetConstraints();this.dd.setXConstraint(0,0);this.dd.setYConstraint(this.placement==YAHOO.ext.SplitBar.TOP?c1:c2,this.placement==YAHOO.ext.SplitBar.TOP?c2:c1);}this.dragSpecs.startSize=size;this.dragSpecs.startPoint=[x,y];YAHOO.util.DDProxy.prototype.b4StartDrag.call(this.dd,x,y);},onEndProxyDrag:function(e){YAHOO.util.Dom.setStyle(this.proxy,"display","none");var _f0c=YAHOO.util.Event.getXY(e);if(this.useShim){this.shim.setVisible(false);}var _f0d;if(this.orientation==YAHOO.ext.SplitBar.HORIZONTAL){_f0d=this.dragSpecs.startSize+(this.placement==YAHOO.ext.SplitBar.LEFT?_f0c[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-_f0c[0]);}else{_f0d=this.dragSpecs.startSize+(this.placement==YAHOO.ext.SplitBar.TOP?_f0c[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-_f0c[1]);}_f0d=Math.min(Math.max(_f0d,this.activeMinSize),this.activeMaxSize);if(_f0d!=this.dragSpecs.startSize){this.adapter.setElementSize(this,_f0d);this.onMoved.fireDirect(this,_f0d);}},getAdapter:function(){return this.adapter;},setAdapter:function(_f0e){this.adapter=_f0e;this.adapter.init(this);},getMinimumSize:function(){return this.minSize;},setMinimumSize:function(_f0f){this.minSize=_f0f;},getMaximumSize:function(){return this.maxSize;},setMaximumSize:function(_f10){this.maxSize=_f10;},setCurrentSize:function(size){var _f12=this.animate;this.animate=false;this.adapter.setElementSize(this,size);this.animate=_f12;},destroy:function(_f13){if(this.shim){this.shim.remove();}this.dd.unreg();this.proxy.parentNode.removeChild(this.proxy);if(_f13){this.el.remove();}}});YAHOO.ext.SplitBar.createShim=function(){var shim=document.createElement("div");shim.unselectable="on";YAHOO.util.Dom.generateId(shim,"split-shim");YAHOO.util.Dom.setStyle(shim,"width","100%");YAHOO.util.Dom.setStyle(shim,"height","100%");YAHOO.util.Dom.setStyle(shim,"position","absolute");YAHOO.util.Dom.setStyle(shim,"background","white");YAHOO.util.Dom.setStyle(shim,"z-index",11000);window.document.body.appendChild(shim);var _f15=YAHOO.ext.Element.get(shim);_f15.setOpacity(0.01);_f15.setXY([0,0]);return _f15;};YAHOO.ext.SplitBar.createProxy=function(_f16){var _f17=document.createElement("div");_f17.unselectable="on";YAHOO.util.Dom.generateId(_f17,"split-proxy");YAHOO.util.Dom.setStyle(_f17,"position","absolute");YAHOO.util.Dom.setStyle(_f17,"visibility","hidden");YAHOO.util.Dom.setStyle(_f17,"z-index",11001);YAHOO.util.Dom.setStyle(_f17,"background-color","#aaa");if(_f16==YAHOO.ext.SplitBar.HORIZONTAL){YAHOO.util.Dom.setStyle(_f17,"cursor","e-resize");}else{YAHOO.util.Dom.setStyle(_f17,"cursor","n-resize");}YAHOO.util.Dom.setStyle(_f17,"line-height","0px");YAHOO.util.Dom.setStyle(_f17,"font-size","0px");window.document.body.appendChild(_f17);return _f17;};YAHOO.ext.SplitBar.BasicLayoutAdapter=function(){};YAHOO.ext.SplitBar.BasicLayoutAdapter.prototype={init:function(s){},getElementSize:function(s){if(s.orientation==YAHOO.ext.SplitBar.HORIZONTAL){return s.resizingEl.getWidth();}else{return s.resizingEl.getHeight();}},setElementSize:function(s,_f1b,_f1c){if(s.orientation==YAHOO.ext.SplitBar.HORIZONTAL){if(!YAHOO.util.Anim||!s.animate){s.resizingEl.setWidth(_f1b);if(_f1c){_f1c(s,_f1b);}}else{s.resizingEl.setWidth(_f1b,true,0.1,_f1c,YAHOO.util.Easing.easeOut);}}else{if(!YAHOO.util.Anim||!s.animate){s.resizingEl.setHeight(_f1b);if(_f1c){_f1c(s,_f1b);}}else{s.resizingEl.setHeight(_f1b,true,0.1,_f1c,YAHOO.util.Easing.easeOut);}}}};YAHOO.ext.SplitBar.AbsoluteLayoutAdapter=function(_f1d){this.basic=new YAHOO.ext.SplitBar.BasicLayoutAdapter();this.container=getEl(_f1d);};YAHOO.ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(s){this.basic.init(s);},getElementSize:function(s){return this.basic.getElementSize(s);},setElementSize:function(s,_f21,_f22){this.basic.setElementSize(s,_f21,this.moveSplitter.createDelegate(this,[s]));},moveSplitter:function(s){var yes=YAHOO.ext.SplitBar;switch(s.placement){case yes.LEFT:s.el.setX(s.resizingEl.getRight());break;case yes.RIGHT:s.el.setStyle("right",(this.container.getWidth()-s.resizingEl.getLeft())+"px");break;case yes.TOP:s.el.setY(s.resizingEl.getBottom());break;case yes.BOTTOM:s.el.setY(s.resizingEl.getTop()-s.el.getHeight());break;}}};YAHOO.ext.SplitBar.VERTICAL=1;YAHOO.ext.SplitBar.HORIZONTAL=2;YAHOO.ext.SplitBar.LEFT=1;YAHOO.ext.SplitBar.RIGHT=2;YAHOO.ext.SplitBar.TOP=3;YAHOO.ext.SplitBar.BOTTOM=4;YAHOO.ext.util.MixedCollection=function(_f25){this.items=[];this.keys=[];this.events={"clear":new YAHOO.util.CustomEvent("clear"),"add":new YAHOO.util.CustomEvent("add"),"replace":new YAHOO.util.CustomEvent("replace"),"remove":new YAHOO.util.CustomEvent("remove")};this.allowFunctions=_f25===true;};YAHOO.extendX(YAHOO.ext.util.MixedCollection,YAHOO.ext.util.Observable,{allowFunctions:false,add:function(key,o){if(arguments.length==1){o=arguments[0];key=this.getKey(o);}this.items.push(o);if(typeof key!="undefined"&&key!=null){this.items[key]=o;this.keys.push(key);}this.fireEvent("add",this.items.length-1,o,key);return o;},getKey:function(o){return null;},replace:function(key,o){if(arguments.length==1){o=arguments[0];key=this.getKey(o);}if(typeof this.items[key]=="undefined"){return this.add(key,o);}var old=this.items[key];if(typeof key=="number"){this.items[key]=o;}else{var _f2c=this.indexOfKey(key);this.items[_f2c]=o;this.items[key]=o;}this.fireEvent("replace",key,old,o);return o;},addAll:function(objs){if(arguments.length>1||objs instanceof Array){var args=arguments.length>1?arguments:objs;for(var i=0,len=args.length;i<len;i++){this.add(args[i]);}}else{for(var key in objs){if(this.allowFunctions||typeof objs[key]!="function"){this.add(objs[key],key);}}}},each:function(fn,_f32){for(var i=0,len=this.items.length;i<len;i++){fn.call(_f32||window,this.items[i]);}},eachKey:function(fn,_f35){for(var i=0,len=this.keys.length;i<len;i++){fn.call(_f35||window,this.keys[i],this.items[i]);}},find:function(fn,_f38){for(var i=0,len=this.items.length;i<len;i++){if(fn.call(_f38||window,this.items[i])){return this.items[i];}}return null;},insert:function(_f3a,key,o){if(arguments.length==2){o=arguments[1];key=this.getKey(o);}if(_f3a>=this.items.length){return this.add(o,key);}this.items.splice(_f3a,0,o);if(typeof key!="undefined"&&key!=null){this.items[key]=o;this.keys.splice(_f3a,0,key);}this.fireEvent("add",_f3a,o,key);return o;},remove:function(o){var _f3e=this.indexOf(o);this.items.splice(_f3e,1);if(typeof this.keys[_f3e]!="undefined"){var key=this.keys[_f3e];this.keys.splice(_f3e,1);delete this.items[key];}this.fireEvent("remove",o);return o;},removeAt:function(_f40){this.items.splice(_f40,1);var key=this.keys[_f40];if(typeof key!="undefined"){this.keys.splice(_f40,1);delete this.items[key];}this.fireEvent("remove",o,key);},removeKey:function(key){var o=this.items[key];var _f44=this.indexOf(o);this.items.splice(_f44,1);this.keys.splice(_f44,1);delete this.items[key];this.fireEvent("remove",o,key);},getCount:function(){return this.items.length;},indexOf:function(o){if(!this.items.indexOf){for(var i=0,len=this.items.length;i<len;i++){if(this.items[i]==o){return i;}}return -1;}else{return this.items.indexOf(o);}},indexOfKey:function(key){if(!this.keys.indexOf){for(var i=0,len=this.keys.length;i<len;i++){if(this.keys[i]==key){return i;}}return -1;}else{return this.keys.indexOf(key);}},item:function(key){return this.items[key];},contains:function(o){return this.indexOf(o)!=-1;},containsKey:function(key){return typeof this.items[key]!="undefined";},clear:function(o){this.items=[];this.keys=[];this.fireEvent("clear");},first:function(){return this.items[0];},last:function(){return this.items[this.items.length];}});YAHOO.ext.util.MixedCollection.prototype.get=YAHOO.ext.util.MixedCollection.prototype.item;YAHOO.ext.LayoutManager=function(_f4d){YAHOO.ext.LayoutManager.superclass.constructor.call(this);this.el=getEl(_f4d,true);this.id=this.el.id;this.el.addClass("ylayout-container");this.monitorWindowResize=true;this.regions={};this.events={"layout":new YAHOO.util.CustomEvent(),"regionresized":new YAHOO.util.CustomEvent(),"regioncollapsed":new YAHOO.util.CustomEvent(),"regionexpanded":new YAHOO.util.CustomEvent()};this.updating=false;YAHOO.ext.EventManager.onWindowResize(this.onWindowResize,this,true);};YAHOO.extendX(YAHOO.ext.LayoutManager,YAHOO.ext.util.Observable,{isUpdating:function(){return this.updating;},beginUpdate:function(){this.updating=true;},endUpdate:function(_f4e){this.updating=false;if(!_f4e){this.layout();}},layout:function(){},onRegionResized:function(_f4f,_f50){this.fireEvent("regionresized",_f4f,_f50);this.layout();},onRegionCollapsed:function(_f51){this.fireEvent("regioncollapsed",_f51);},onRegionExpanded:function(_f52){this.fireEvent("regionexpanded",_f52);},getViewSize:function(){var size;if(this.el.dom!=document.body){this.el.beginMeasure();size=this.el.getSize();this.el.endMeasure();}else{size={width:YAHOO.util.Dom.getViewportWidth(),height:YAHOO.util.Dom.getViewportHeight()};}size.width-=this.el.getBorderWidth("lr")-this.el.getPadding("lr");size.height-=this.el.getBorderWidth("tb")-this.el.getPadding("tb");return size;},getEl:function(){return this.el;},getRegion:function(_f54){return this.regions[_f54.toLowerCase()];},onWindowResize:function(){if(this.monitorWindowResize){this.layout();}}});YAHOO.ext.BorderLayout=function(_f55,_f56){YAHOO.ext.BorderLayout.superclass.constructor.call(this,_f55);this.factory=_f56.factory||YAHOO.ext.BorderLayout.RegionFactory;this.hideOnLayout=_f56.hideOnLayout||false;for(var i=0,len=this.factory.validRegions.length;i<len;i++){var _f58=this.factory.validRegions[i];if(_f56[_f58]){this.addRegion(_f58,_f56[_f58]);}}};YAHOO.extendX(YAHOO.ext.BorderLayout,YAHOO.ext.LayoutManager,{addRegion:function(_f59,_f5a){if(!this.regions[_f59]){var r=this.factory.create(_f59,this,_f5a);this.regions[_f59]=r;r.on("visibilitychange",this.layout,this,true);r.on("paneladded",this.layout,this,true);r.on("panelremoved",this.layout,this,true);r.on("invalidated",this.layout,this,true);r.on("resized",this.onRegionResized,this,true);r.on("collapsed",this.onRegionCollapsed,this,true);r.on("expanded",this.onRegionExpanded,this,true);}return this.regions[_f59];},layout:function(){if(this.updating){return;}var size=this.getViewSize();var w=size.width,h=size.height;var _f5e=w,centerH=h,centerY=0,centerX=0;var x=0,y=0;var rs=this.regions;var n=rs["north"],s=rs["south"],west=rs["west"],e=rs["east"],c=rs["center"];if(this.hideOnLayout){c.el.setStyle("display","none");}if(n&&n.isVisible()){var b=n.getBox();var m=n.getMargins();b.width=w-(m.left+m.right);b.x=m.left;b.y=m.top;centerY=b.height+b.y+m.bottom;centerH-=centerY;n.updateBox(this.safeBox(b));}if(s&&s.isVisible()){var b=s.getBox();var m=s.getMargins();b.width=w-(m.left+m.right);b.x=m.left;var _f66=(b.height+m.top+m.bottom);b.y=h-_f66+m.top;centerH-=_f66;s.updateBox(this.safeBox(b));}if(west&&west.isVisible()){var b=west.getBox();var m=west.getMargins();b.height=centerH-(m.top+m.bottom);b.x=m.left;b.y=centerY+m.top;var _f69=(b.width+m.left+m.right);centerX+=_f69;_f5e-=_f69;west.updateBox(this.safeBox(b));}if(e&&e.isVisible()){var b=e.getBox();var m=e.getMargins();b.height=centerH-(m.top+m.bottom);var _f6c=(b.width+m.left+m.right);b.x=w-_f6c+m.left;b.y=centerY+m.top;_f5e-=_f6c;e.updateBox(this.safeBox(b));}if(c){var m=c.getMargins();var _f6e={x:centerX+m.left,y:centerY+m.top,width:_f5e-(m.left+m.right),height:centerH-(m.top+m.bottom)};if(this.hideOnLayout){c.el.setStyle("display","block");}c.updateBox(this.safeBox(_f6e));}this.el.repaint();this.fireEvent("layout",this);},safeBox:function(box){box.width=Math.max(0,box.width);box.height=Math.max(0,box.height);return box;},add:function(_f70,_f71){_f70=_f70.toLowerCase();return this.regions[_f70].add(_f71);},remove:function(_f72,_f73){_f72=_f72.toLowerCase();return this.regions[_f72].remove(_f73);},findPanel:function(_f74){var rs=this.regions;for(var _f76 in rs){if(typeof rs[_f76]!="function"){var p=rs[_f76].getPanel(_f74);if(p){return p;}}}return null;},showPanel:function(_f78){var rs=this.regions;for(var _f7a in rs){var r=rs[_f7a];if(typeof r!="function"){if(r.hasPanel(_f78)){return r.showPanel(_f78);}}}return null;},restoreState:function(_f7c){if(!_f7c){_f7c=YAHOO.ext.state.Manager;}var sm=new YAHOO.ext.LayoutStateManager();sm.init(this,_f7c);}});YAHOO.ext.BorderLayout.RegionFactory={};YAHOO.ext.BorderLayout.RegionFactory.validRegions=["north","south","east","west","center"];YAHOO.ext.BorderLayout.RegionFactory.create=function(_f7e,mgr,_f80){if(_f80.lightweight){return new YAHOO.ext.LayoutRegionLite(mgr,_f80);}_f7e=_f7e.toLowerCase();switch(_f7e){case "north":return new YAHOO.ext.NorthLayoutRegion(mgr,_f80);case "south":return new YAHOO.ext.SouthLayoutRegion(mgr,_f80);case "east":return new YAHOO.ext.EastLayoutRegion(mgr,_f80);case "west":return new YAHOO.ext.WestLayoutRegion(mgr,_f80);case "center":return new YAHOO.ext.CenterLayoutRegion(mgr,_f80);}throw "Layout region \""+_f7e+"\" not supported.";};YAHOO.ext.ContentPanel=function(el,_f82,_f83){YAHOO.ext.ContentPanel.superclass.constructor.call(this);this.el=getEl(el,true);if(!this.el&&_f82&&_f82.autoCreate){if(typeof _f82.autoCreate=="object"){if(!_f82.autoCreate.id){_f82.autoCreate.id=el;}this.el=YAHOO.ext.DomHelper.append(document.body,_f82.autoCreate,true);}else{this.el=YAHOO.ext.DomHelper.append(document.body,{tag:"div",cls:"ylayout-inactive-content",id:el},true);}}this.closable=false;this.loaded=false;this.active=false;if(typeof _f82=="string"){this.title=_f82;}else{YAHOO.ext.util.Config.apply(this,_f82);}if(this.resizeEl){this.resizeEl=getEl(this.resizeEl,true);}else{this.resizeEl=this.el;}this.events={"activate":new YAHOO.util.CustomEvent("activate"),"deactivate":new YAHOO.util.CustomEvent("deactivate")};if(this.autoScroll){this.el.setStyle("overflow","auto");}if(_f83){this.setContent(_f83);}};YAHOO.extendX(YAHOO.ext.ContentPanel,YAHOO.ext.util.Observable,{setRegion:function(_f84){this.region=_f84;if(_f84){this.el.replaceClass("ylayout-inactive-content","ylayout-active-content");}else{this.el.replaceClass("ylayout-active-content","ylayout-inactive-content");}},getToolbar:function(){return this.toolbar;},setActiveState:function(_f85){this.active=_f85;if(!_f85){this.fireEvent("deactivate",this);}else{this.fireEvent("activate",this);}},setContent:function(_f86,_f87){this.el.update(_f86,_f87);},getUpdateManager:function(){return this.el.getUpdateManager();},setUrl:function(url,_f89,_f8a){if(this.refreshDelegate){this.removeListener("activate",this.refreshDelegate);}this.refreshDelegate=this._handleRefresh.createDelegate(this,[url,_f89,_f8a]);this.on("activate",this._handleRefresh.createDelegate(this,[url,_f89,_f8a]));return this.el.getUpdateManager();},_handleRefresh:function(url,_f8c,_f8d){if(!_f8d||!this.loaded){var _f8e=this.el.getUpdateManager();_f8e.update(url,_f8c,this._setLoaded.createDelegate(this));}},_setLoaded:function(){this.loaded=true;},getId:function(){return this.el.id;},getEl:function(){return this.el;},adjustForComponents:function(_f8f,_f90){if(this.toolbar){var te=this.toolbar.getEl();_f90-=te.getHeight();te.setWidth(_f8f);}if(this.adjustments){_f8f+=this.adjustments[0];_f90+=this.adjustments[1];}return {"width":_f8f,"height":_f90};},setSize:function(_f92,_f93){if(this.fitToFrame){var size=this.adjustForComponents(_f92,_f93);this.resizeEl.setSize(this.autoWidth?"auto":size.width,size.height);}},getTitle:function(){return this.title;},setTitle:function(_f95){this.title=_f95;if(this.region){this.region.updatePanelTitle(this,_f95);}},isClosable:function(){return this.closable;},beforeSlide:function(){this.el.clip();this.resizeEl.clip();},afterSlide:function(){this.el.unclip();this.resizeEl.unclip();},refresh:function(){if(this.refreshDelegate){this.loaded=false;this.refreshDelegate();}},destroy:function(){this.el.removeAllListeners();var _f96=document.createElement("span");_f96.appendChild(this.el.dom);_f96.innerHTML="";this.el=null;}});YAHOO.ext.GridPanel=function(grid,_f98){this.wrapper=YAHOO.ext.DomHelper.append(document.body,{tag:"div",cls:"ylayout-grid-wrapper ylayout-inactive-content"},true);this.wrapper.dom.appendChild(grid.container.dom);YAHOO.ext.GridPanel.superclass.constructor.call(this,this.wrapper,_f98);if(this.toolbar){this.toolbar.el.insertBefore(this.wrapper.dom.firstChild);}grid.monitorWindowResize=false;grid.autoHeight=false;grid.autoWidth=false;this.grid=grid;this.grid.container.replaceClass("ylayout-inactive-content","ylayout-component-panel");};YAHOO.extendX(YAHOO.ext.GridPanel,YAHOO.ext.ContentPanel,{getId:function(){return this.grid.id;},getGrid:function(){return this.grid;},setSize:function(_f99,_f9a){var grid=this.grid;var size=this.adjustForComponents(_f99,_f9a);grid.container.setSize(size.width,size.height);grid.autoSize();},beforeSlide:function(){this.grid.getView().wrapEl.clip();},afterSlide:function(){this.grid.getView().wrapEl.unclip();},destroy:function(){this.grid.getView().unplugDataModel(this.grid.getDataModel());this.grid.container.removeAllListeners();YAHOO.ext.GridPanel.superclass.destroy.call(this);}});YAHOO.ext.NestedLayoutPanel=function(_f9d,_f9e){YAHOO.ext.NestedLayoutPanel.superclass.constructor.call(this,_f9d.getEl(),_f9e);_f9d.monitorWindowResize=false;this.layout=_f9d;this.layout.getEl().addClass("ylayout-nested-layout");};YAHOO.extendX(YAHOO.ext.NestedLayoutPanel,YAHOO.ext.ContentPanel,{setSize:function(_f9f,_fa0){var size=this.adjustForComponents(_f9f,_fa0);this.layout.getEl().setSize(size.width,size.height);this.layout.layout();},getLayout:function(){return this.layout;}});YAHOO.ext.LayoutRegion=function(mgr,_fa3,pos){this.mgr=mgr;this.position=pos;var dh=YAHOO.ext.DomHelper;this.el=dh.append(mgr.el.dom,{tag:"div",cls:"ylayout-panel ylayout-panel-"+this.position},true);this.titleEl=dh.append(this.el.dom,{tag:"div",unselectable:"on",cls:"yunselectable ylayout-panel-hd ylayout-title-"+this.position,children:[{tag:"span",cls:"yunselectable ylayout-panel-hd-text",unselectable:"on",html:"&#160;"},{tag:"div",cls:"yunselectable ylayout-panel-hd-tools",unselectable:"on"}]},true);this.titleEl.enableDisplayMode();this.titleTextEl=this.titleEl.dom.firstChild;this.tools=getEl(this.titleEl.dom.childNodes[1],true);this.closeBtn=this.createTool(this.tools.dom,"ylayout-close");this.closeBtn.enableDisplayMode();this.closeBtn.on("click",this.closeClicked,this,true);this.closeBtn.hide();this.bodyEl=dh.append(this.el.dom,{tag:"div",cls:"ylayout-panel-body"},true);this.events={"beforeremove":new YAHOO.util.CustomEvent("beforeremove"),"invalidated":new YAHOO.util.CustomEvent("invalidated"),"visibilitychange":new YAHOO.util.CustomEvent("visibilitychange"),"paneladded":new YAHOO.util.CustomEvent("paneladded"),"panelremoved":new YAHOO.util.CustomEvent("panelremoved"),"collapsed":new YAHOO.util.CustomEvent("collapsed"),"expanded":new YAHOO.util.CustomEvent("expanded"),"panelactivated":new YAHOO.util.CustomEvent("panelactivated"),"resized":new YAHOO.util.CustomEvent("resized")};this.panels=new YAHOO.ext.util.MixedCollection();this.panels.getKey=this.getPanelId.createDelegate(this);this.box=null;this.visible=false;this.collapsed=false;this.hide();this.on("paneladded",this.validateVisibility,this,true);this.on("panelremoved",this.validateVisibility,this,true);this.activePanel=null;this.applyConfig(_fa3);};YAHOO.extendX(YAHOO.ext.LayoutRegion,YAHOO.ext.util.Observable,{getPanelId:function(p){return p.getId();},applyConfig:function(_fa7){if(_fa7.collapsible&&this.position!="center"&&!this.collapsedEl){var dh=YAHOO.ext.DomHelper;this.collapseBtn=this.createTool(this.tools.dom,"ylayout-collapse-"+this.position);this.collapseBtn.mon("click",this.collapse,this,true);this.collapsedEl=dh.append(this.mgr.el.dom,{tag:"div",cls:"ylayout-collapsed ylayout-collapsed-"+this.position,children:[{tag:"div",cls:"ylayout-collapsed-tools"}]},true);if(_fa7.floatable!==false){this.collapsedEl.addClassOnOver("ylayout-collapsed-over");this.collapsedEl.mon("click",this.collapseClick,this,true);}this.expandBtn=this.createTool(this.collapsedEl.dom.firstChild,"ylayout-expand-"+this.position);this.expandBtn.mon("click",this.expand,this,true);}if(this.collapseBtn){this.collapseBtn.setVisible(_fa7.collapsible==true);}this.cmargins=_fa7.cmargins||this.cmargins||(this.position=="west"||this.position=="east"?{top:0,left:2,right:2,bottom:0}:{top:2,left:0,right:0,bottom:2});this.margins=_fa7.margins||this.margins||{top:0,left:0,right:0,bottom:0};this.bottomTabs=_fa7.tabPosition!="top";this.autoScroll=_fa7.autoScroll||false;if(this.autoScroll){this.bodyEl.setStyle("overflow","auto");}else{this.bodyEl.setStyle("overflow","hidden");}if((!_fa7.titlebar&&!_fa7.title)||_fa7.titlebar===false){this.titleEl.hide();}else{this.titleEl.show();if(_fa7.title){this.titleTextEl.innerHTML=_fa7.title;}}this.duration=_fa7.duration||0.3;this.slideDuration=_fa7.slideDuration||0.45;this.config=_fa7;if(_fa7.collapsed){this.collapse(true);}},resizeTo:function(_fa9){switch(this.position){case "east":case "west":this.el.setWidth(_fa9);this.fireEvent("resized",this,_fa9);break;case "north":case "south":this.el.setHeight(_fa9);this.fireEvent("resized",this,_fa9);break;}},getBox:function(){var b;if(!this.collapsed){b=this.el.getBox(false,true);}else{b=this.collapsedEl.getBox(false,true);}return b;},getMargins:function(){return this.collapsed?this.cmargins:this.margins;},highlight:function(){this.el.addClass("ylayout-panel-dragover");},unhighlight:function(){this.el.removeClass("ylayout-panel-dragover");},updateBox:function(box){this.box=box;if(!this.collapsed){this.el.dom.style.left=box.x+"px";this.el.dom.style.top=box.y+"px";this.el.setSize(box.width,box.height);var _fac=this.titleEl.isVisible()?box.height-(this.titleEl.getHeight()||0):box.height;_fac-=this.el.getBorderWidth("tb");bodyWidth=box.width-this.el.getBorderWidth("rl");this.bodyEl.setHeight(_fac);this.bodyEl.setWidth(bodyWidth);var _fad=_fac;if(this.tabs){_fad=this.tabs.syncHeight(_fac);if(YAHOO.ext.util.Browser.isIE){this.tabs.el.repaint();}}this.panelSize={width:bodyWidth,height:_fad};if(this.activePanel){this.activePanel.setSize(bodyWidth,_fad);}}else{this.collapsedEl.dom.style.left=box.x+"px";this.collapsedEl.dom.style.top=box.y+"px";this.collapsedEl.setSize(box.width,box.height);}if(this.tabs){this.tabs.autoSizeTabs();}},getEl:function(){return this.el;},hide:function(){if(!this.collapsed){this.el.dom.style.left="-2000px";this.el.hide();}else{this.collapsedEl.dom.style.left="-2000px";this.collapsedEl.hide();}this.visible=false;this.fireEvent("visibilitychange",this,false);},show:function(){if(!this.collapsed){this.el.show();}else{this.collapsedEl.show();}this.visible=true;this.fireEvent("visibilitychange",this,true);},isVisible:function(){return this.visible;},closeClicked:function(){if(this.activePanel){this.remove(this.activePanel);}},collapseClick:function(e){if(this.isSlid){e.stopPropagation();this.slideIn();}else{e.stopPropagation();this.slideOut();}},collapse:function(_faf){if(this.collapsed){return;}this.collapsed=true;if(this.split){this.split.el.hide();}if(this.config.animate&&_faf!==true){this.fireEvent("invalidated",this);this.animateCollapse();}else{this.el.setLocation(-20000,-20000);this.el.hide();this.collapsedEl.show();this.fireEvent("collapsed",this);this.fireEvent("invalidated",this);}},animateCollapse:function(){},expand:function(e,_fb1){if(e){e.stopPropagation();}if(!this.collapsed){return;}if(this.isSlid){this.slideIn(this.expand.createDelegate(this));return;}this.collapsed=false;this.el.show();if(this.config.animate&&_fb1!==true){this.animateExpand();}else{if(this.split){this.split.el.show();}this.collapsedEl.setLocation(-2000,-2000);this.collapsedEl.hide();this.fireEvent("invalidated",this);this.fireEvent("expanded",this);}},animateExpand:function(){},initTabs:function(){this.bodyEl.setStyle("overflow","hidden");var ts=new YAHOO.ext.TabPanel(this.bodyEl.dom,this.bottomTabs);this.tabs=ts;ts.resizeTabs=this.config.resizeTabs===true;ts.minTabWidth=this.config.minTabWidth||40;ts.maxTabWidth=this.config.maxTabWidth||250;ts.preferredTabWidth=this.config.preferredTabWidth||150;ts.monitorResize=false;ts.bodyEl.setStyle("overflow",this.config.autoScroll?"auto":"hidden");this.panels.each(this.initPanelAsTab,this);},initPanelAsTab:function(_fb3){var ti=this.tabs.addTab(_fb3.getEl().id,_fb3.getTitle(),null,this.config.closeOnTab&&_fb3.isClosable());ti.on("activate",function(){this.setActivePanel(_fb3);},this,true);if(this.config.closeOnTab){ti.on("beforeclose",function(t,e){e.cancel=true;this.remove(_fb3);},this,true);}return ti;},updatePanelTitle:function(_fb7,_fb8){if(this.activePanel==_fb7){this.updateTitle(_fb8);}if(this.tabs){this.tabs.getTab(_fb7.getEl().id).setText(_fb8);}},updateTitle:function(_fb9){if(this.titleTextEl&&!this.config.title){this.titleTextEl.innerHTML=(typeof _fb9!="undefined"&&_fb9.length>0?_fb9:"&#160;");}},setActivePanel:function(_fba){_fba=this.getPanel(_fba);if(this.activePanel&&this.activePanel!=_fba){this.activePanel.setActiveState(false);}this.activePanel=_fba;_fba.setActiveState(true);if(this.panelSize){_fba.setSize(this.panelSize.width,this.panelSize.height);}this.closeBtn.setVisible(!this.config.closeOnTab&&!this.isSlid&&_fba.isClosable());this.updateTitle(_fba.getTitle());this.fireEvent("panelactivated",this,_fba);},showPanel:function(_fbb){if(_fbb=this.getPanel(_fbb)){if(this.tabs){this.tabs.activate(_fbb.getEl().id);}else{this.setActivePanel(_fbb);}}return _fbb;},getActivePanel:function(){return this.activePanel;},validateVisibility:function(){if(this.panels.getCount()<1){this.updateTitle("&#160;");this.closeBtn.hide();this.hide();}else{if(!this.isVisible()){this.show();}}},add:function(_fbc){if(arguments.length>1){for(var i=0,len=arguments.length;i<len;i++){this.add(arguments[i]);}return null;}if(this.hasPanel(_fbc)){this.showPanel(_fbc);return _fbc;}_fbc.setRegion(this);this.panels.add(_fbc);if(this.panels.getCount()==1&&!this.config.alwaysShowTabs){this.bodyEl.dom.appendChild(_fbc.getEl().dom);this.setActivePanel(_fbc);this.fireEvent("paneladded",this,_fbc);return _fbc;}if(!this.tabs){this.initTabs();}else{this.initPanelAsTab(_fbc);}this.tabs.activate(_fbc.getEl().id);this.fireEvent("paneladded",this,_fbc);return _fbc;},hasPanel:function(_fbe){if(typeof _fbe=="object"){_fbe=_fbe.getId();}return this.getPanel(_fbe)?true:false;},hidePanel:function(_fbf){if(this.tabs&&(_fbf=this.getPanel(_fbf))){this.tabs.hideTab(_fbf.getEl().id);}},unhidePanel:function(_fc0){if(this.tabs&&(_fc0=this.getPanel(_fc0))){this.tabs.unhideTab(_fc0.getEl().id);}},clearPanels:function(){while(this.panels.getCount()>0){this.remove(this.panels.first());}},remove:function(_fc1,_fc2){_fc1=this.getPanel(_fc1);if(!_fc1){return null;}var e={};this.fireEvent("beforeremove",this,_fc1,e);if(e.cancel===true){return null;}_fc2=(typeof _fc2!="undefined"?_fc2:(this.config.preservePanels===true||_fc1.preserve===true));var _fc4=_fc1.getId();this.panels.removeKey(_fc4);if(_fc2){document.body.appendChild(_fc1.getEl().dom);}if(this.tabs){this.tabs.removeTab(_fc1.getEl().id);}else{if(!_fc2){this.bodyEl.dom.removeChild(_fc1.getEl().dom);}}if(this.panels.getCount()==1&&this.tabs&&!this.config.alwaysShowTabs){var p=this.panels.first();var _fc6=document.createElement("span");_fc6.appendChild(p.getEl().dom);this.bodyEl.update("");this.bodyEl.dom.appendChild(p.getEl().dom);_fc6=null;this.updateTitle(p.getTitle());this.tabs=null;this.bodyEl.setStyle("overflow",this.config.autoScroll?"auto":"hidden");this.setActivePanel(p);}_fc1.setRegion(null);if(this.activePanel==_fc1){this.activePanel=null;}if(this.config.autoDestroy!==false&&_fc2!==true){try{_fc1.destroy();}catch(e){}}this.fireEvent("panelremoved",this,_fc1);return _fc1;},getTabs:function(){return this.tabs;},getPanel:function(id){if(typeof id=="object"){return id;}return this.panels.get(id);},getPosition:function(){return this.position;},createTool:function(_fc8,_fc9){var btn=YAHOO.ext.DomHelper.append(_fc8,{tag:"div",cls:"ylayout-tools-button",children:[{tag:"div",cls:"ylayout-tools-button-inner "+_fc9,html:"&#160;"}]},true);btn.addClassOnOver("ylayout-tools-button-over");return btn;}});YAHOO.ext.LayoutStateManager=function(_fcb){this.state={north:{},south:{},east:{},west:{}};};YAHOO.ext.LayoutStateManager.prototype={init:function(_fcc,_fcd){this.provider=_fcd;var _fce=_fcd.get(_fcc.id+"-layout-state");if(_fce){var _fcf=_fcc.isUpdating();if(!_fcf){_fcc.beginUpdate();}for(var key in _fce){if(typeof _fce[key]!="function"){var _fd1=_fce[key];var r=_fcc.getRegion(key);if(r&&_fd1){if(_fd1.size){r.resizeTo(_fd1.size);}if(_fd1.collapsed==true){r.collapse(true);}else{r.expand(null,true);}}}}if(!_fcf){_fcc.endUpdate();}this.state=_fce;}this.layout=_fcc;_fcc.on("regionresized",this.onRegionResized,this,true);_fcc.on("regioncollapsed",this.onRegionCollapsed,this,true);_fcc.on("regionexpanded",this.onRegionExpanded,this,true);},storeState:function(){this.provider.set(this.layout.id+"-layout-state",this.state);},onRegionResized:function(_fd3,_fd4){this.state[_fd3.getPosition()].size=_fd4;this.storeState();},onRegionCollapsed:function(_fd5){this.state[_fd5.getPosition()].collapsed=true;this.storeState();},onRegionExpanded:function(_fd6){this.state[_fd6.getPosition()].collapsed=false;this.storeState();}};YAHOO.ext.SplitLayoutRegion=function(mgr,_fd8,pos,_fda){this.cursor=_fda;YAHOO.ext.SplitLayoutRegion.superclass.constructor.call(this,mgr,_fd8,pos);if(_fd8.split){this.hide();}};YAHOO.extendX(YAHOO.ext.SplitLayoutRegion,YAHOO.ext.LayoutRegion,{applyConfig:function(_fdb){YAHOO.ext.SplitLayoutRegion.superclass.applyConfig.call(this,_fdb);if(_fdb.split){if(!this.split){var _fdc=YAHOO.ext.DomHelper.append(this.mgr.el.dom,{tag:"div",id:this.el.id+"-split",cls:"ylayout-split ylayout-split-"+this.position,html:"&#160;"});this.split=new YAHOO.ext.SplitBar(_fdc,this.el);this.split.onMoved.subscribe(this.onSplitMove,this,true);this.split.useShim=_fdb.useShim===true;YAHOO.util.Dom.setStyle([this.split.el.dom,this.split.proxy],"cursor",this.cursor);this.split.getMaximumSize=this.getMaxSize.createDelegate(this);}if(typeof _fdb.minSize!="undefined"){this.split.minSize=_fdb.minSize;}if(typeof _fdb.maxSize!="undefined"){this.split.maxSize=_fdb.maxSize;}}},getMaxSize:function(){var cmax=this.config.maxSize||10000;var _fde=this.mgr.getRegion("center");return Math.min(cmax,(this.el.getWidth()+_fde.getEl().getWidth())-_fde.getMinWidth());},onSplitMove:function(_fdf,_fe0){this.fireEvent("resized",this,_fe0);},getSplitBar:function(){return this.split;},hide:function(){if(this.split){this.split.el.setLocation(-2000,-2000);this.split.el.hide();}YAHOO.ext.SplitLayoutRegion.superclass.hide.call(this);},show:function(){if(this.split){this.split.el.show();}YAHOO.ext.SplitLayoutRegion.superclass.show.call(this);},beforeSlide:function(){if(YAHOO.ext.util.Browser.isGecko){this.bodyEl.clip();if(this.tabs){this.tabs.bodyEl.clip();}if(this.activePanel){this.activePanel.getEl().clip();if(this.activePanel.beforeSlide){this.activePanel.beforeSlide();}}}},afterSlide:function(){if(YAHOO.ext.util.Browser.isGecko){this.bodyEl.unclip();if(this.tabs){this.tabs.bodyEl.unclip();}if(this.activePanel){this.activePanel.getEl().unclip();if(this.activePanel.afterSlide){this.activePanel.afterSlide();}}}},slideOut:function(){if(!this.slideEl){this.slideEl=new YAHOO.ext.Actor(YAHOO.ext.DomHelper.append(this.mgr.el.dom,{tag:"div",cls:"ylayout-slider"}));if(this.config.autoHide!==false){var _fe1=new YAHOO.ext.util.DelayedTask(this.slideIn,this);this.slideEl.mon("mouseout",function(e){var to=e.getRelatedTarget();if(to&&to!=this.slideEl.dom&&!YAHOO.util.Dom.isAncestor(this.slideEl.dom,to)){_fe1.delay(500);}},this,true);this.slideEl.mon("mouseover",function(e){_fe1.cancel();},this,true);}}var sl=this.slideEl,c=this.collapsedEl,cm=this.cmargins;this.isSlid=true;this.snapshot={"left":this.el.getLeft(true),"top":this.el.getTop(true),"colbtn":this.collapseBtn.isVisible(),"closebtn":this.closeBtn.isVisible()};this.collapseBtn.hide();this.closeBtn.hide();this.el.show();this.el.setLeftTop(0,0);sl.startCapture(true);var size;switch(this.position){case "west":sl.setLeft(c.getRight(true));sl.setTop(c.getTop(true));size=this.el.getWidth();break;case "east":sl.setRight(this.mgr.getViewSize().width-c.getLeft(true));sl.setTop(c.getTop(true));size=this.el.getWidth();break;case "north":sl.setLeft(c.getLeft(true));sl.setTop(c.getBottom(true));size=this.el.getHeight();break;case "south":sl.setLeft(c.getLeft(true));sl.setBottom(this.mgr.getViewSize().height-c.getTop(true));size=this.el.getHeight();break;}sl.dom.appendChild(this.el.dom);YAHOO.util.Event.on(document.body,"click",this.slideInIf,this,true);sl.setSize(this.el.getWidth(),this.el.getHeight());this.beforeSlide();if(this.activePanel){this.activePanel.setSize(this.bodyEl.getWidth(),this.bodyEl.getHeight());}sl.slideShow(this.getAnchor(),size,this.slideDuration,null,false);sl.play(function(){this.afterSlide();}.createDelegate(this));},slideInIf:function(e){var t=YAHOO.util.Event.getTarget(e);if(!YAHOO.util.Dom.isAncestor(this.el.dom,t)){this.slideIn();}},slideIn:function(_fe9){if(this.isSlid&&!this.slideEl.playlist.isPlaying()){YAHOO.util.Event.removeListener(document.body,"click",this.slideInIf,this,true);this.slideEl.startCapture(true);this.slideEl.slideHide(this.getAnchor(),this.slideDuration,null);this.beforeSlide();this.slideEl.play(function(){this.isSlid=false;this.el.setPositioning(this.snapshot);this.collapseBtn.setVisible(this.snapshot.colbtn);this.closeBtn.setVisible(this.snapshot.closebtn);this.afterSlide();this.mgr.el.dom.appendChild(this.el.dom);if(typeof _fe9=="function"){_fe9();}}.createDelegate(this));}},animateExpand:function(){var em=this.margins,cm=this.cmargins;var c=this.collapsedEl,el=this.el;var _fec,distance;switch(this.position){case "west":_fec="right";el.setLeft(-(el.getWidth()+(em.right+em.left)));el.setTop(c.getTop(true)-cm.top+em.top);distance=el.getWidth()+(em.right+em.left);break;case "east":_fec="left";el.setLeft(this.mgr.getViewSize().width+em.left);el.setTop(c.getTop(true)-cm.top+em.top);distance=el.getWidth()+(em.right+em.left);break;case "north":_fec="down";el.setLeft(em.left);el.setTop(-(el.getHeight()+(em.top+em.bottom)));distance=el.getHeight()+(em.top+em.bottom);break;case "south":_fec="up";el.setLeft(em.left);el.setTop(this.mgr.getViewSize().height+em.top);distance=el.getHeight()+(em.top+em.bottom);break;}this.beforeSlide();el.setStyle("z-index","100");el.show();c.setLocation(-2000,-2000);c.hide();el.move(_fec,distance,true,this.duration,function(){this.afterSlide();el.setStyle("z-index","");if(this.split){this.split.el.show();}this.fireEvent("invalidated",this);this.fireEvent("expanded",this);}.createDelegate(this),this.config.easing||YAHOO.util.Easing.easeOut);},animateCollapse:function(){var em=this.margins,cm=this.cmargins;var c=this.collapsedEl,el=this.el;var _fef,distance;switch(this.position){case "west":_fef="left";distance=el.getWidth()+(em.right+em.left);break;case "east":_fef="right";distance=el.getWidth()+(em.right+em.left);break;case "north":_fef="up";distance=el.getHeight()+(em.top+em.bottom);break;case "south":_fef="down";distance=el.getHeight()+(em.top+em.bottom);break;}this.el.setStyle("z-index","100");this.beforeSlide();this.el.move(_fef,distance,true,this.duration,function(){this.afterSlide();this.el.setStyle("z-index","");this.el.setLocation(-20000,-20000);this.el.hide();this.collapsedEl.show();this.fireEvent("collapsed",this);}.createDelegate(this),YAHOO.util.Easing.easeIn);},getAnchor:function(){switch(this.position){case "west":return "left";case "east":return "right";case "north":return "top";case "south":return "bottom";}}});YAHOO.ext.CenterLayoutRegion=function(mgr,_ff1){YAHOO.ext.CenterLayoutRegion.superclass.constructor.call(this,mgr,_ff1,"center");this.visible=true;this.minWidth=_ff1.minWidth||20;this.minHeight=_ff1.minHeight||20;};YAHOO.extendX(YAHOO.ext.CenterLayoutRegion,YAHOO.ext.LayoutRegion,{hide:function(){},show:function(){},getMinWidth:function(){return this.minWidth;},getMinHeight:function(){return this.minHeight;}});YAHOO.ext.NorthLayoutRegion=function(mgr,_ff3){YAHOO.ext.NorthLayoutRegion.superclass.constructor.call(this,mgr,_ff3,"north","n-resize");if(this.split){this.split.placement=YAHOO.ext.SplitBar.TOP;this.split.orientation=YAHOO.ext.SplitBar.VERTICAL;this.split.el.addClass("ylayout-split-v");}if(typeof _ff3.initialSize!="undefined"){this.el.setHeight(_ff3.initialSize);}};YAHOO.extendX(YAHOO.ext.NorthLayoutRegion,YAHOO.ext.SplitLayoutRegion,{getBox:function(){if(this.collapsed){return this.collapsedEl.getBox();}var box=this.el.getBox();if(this.split){box.height+=this.split.el.getHeight();}return box;},updateBox:function(box){if(this.split&&!this.collapsed){box.height-=this.split.el.getHeight();this.split.el.setLeft(box.x);this.split.el.setTop(box.y+box.height);this.split.el.setWidth(box.width);}if(this.collapsed){this.el.setWidth(box.width);var _ff6=box.width-this.el.getBorderWidth("rl");this.bodyEl.setWidth(_ff6);if(this.activePanel&&this.panelSize){this.activePanel.setSize(_ff6,this.panelSize.height);}}YAHOO.ext.NorthLayoutRegion.superclass.updateBox.call(this,box);}});YAHOO.ext.SouthLayoutRegion=function(mgr,_ff8){YAHOO.ext.SouthLayoutRegion.superclass.constructor.call(this,mgr,_ff8,"south","s-resize");if(this.split){this.split.placement=YAHOO.ext.SplitBar.BOTTOM;this.split.orientation=YAHOO.ext.SplitBar.VERTICAL;this.split.el.addClass("ylayout-split-v");}if(typeof _ff8.initialSize!="undefined"){this.el.setHeight(_ff8.initialSize);}};YAHOO.extendX(YAHOO.ext.SouthLayoutRegion,YAHOO.ext.SplitLayoutRegion,{getBox:function(){if(this.collapsed){return this.collapsedEl.getBox();}var box=this.el.getBox();if(this.split){var sh=this.split.el.getHeight();box.height+=sh;box.y-=sh;}return box;},updateBox:function(box){if(this.split&&!this.collapsed){var sh=this.split.el.getHeight();box.height-=sh;box.y+=sh;this.split.el.setLeft(box.x);this.split.el.setTop(box.y-sh);this.split.el.setWidth(box.width);}if(this.collapsed){this.el.setWidth(box.width);var _ffd=box.width-this.el.getBorderWidth("rl");this.bodyEl.setWidth(_ffd);if(this.activePanel&&this.panelSize){this.activePanel.setSize(_ffd,this.panelSize.height);}}YAHOO.ext.SouthLayoutRegion.superclass.updateBox.call(this,box);}});YAHOO.ext.EastLayoutRegion=function(mgr,_fff){YAHOO.ext.EastLayoutRegion.superclass.constructor.call(this,mgr,_fff,"east","e-resize");if(this.split){this.split.placement=YAHOO.ext.SplitBar.RIGHT;this.split.orientation=YAHOO.ext.SplitBar.HORIZONTAL;this.split.el.addClass("ylayout-split-h");}if(typeof _fff.initialSize!="undefined"){this.el.setWidth(_fff.initialSize);}};YAHOO.extendX(YAHOO.ext.EastLayoutRegion,YAHOO.ext.SplitLayoutRegion,{getBox:function(){if(this.collapsed){return this.collapsedEl.getBox();}var box=this.el.getBox();if(this.split){var sw=this.split.el.getWidth();box.width+=sw;box.x-=sw;}return box;},updateBox:function(box){if(this.split&&!this.collapsed){var sw=this.split.el.getWidth();box.width-=sw;this.split.el.setLeft(box.x);this.split.el.setTop(box.y);this.split.el.setHeight(box.height);box.x+=sw;}if(this.collapsed){this.el.setHeight(box.height);var _1004=this.config.titlebar?box.height-(this.titleEl.getHeight()||0):box.height;_1004-=this.el.getBorderWidth("tb");this.bodyEl.setHeight(_1004);if(this.activePanel&&this.panelSize){this.activePanel.setSize(this.panelSize.width,_1004);}}YAHOO.ext.EastLayoutRegion.superclass.updateBox.call(this,box);}});YAHOO.ext.WestLayoutRegion=function(mgr,_1006){YAHOO.ext.WestLayoutRegion.superclass.constructor.call(this,mgr,_1006,"west","w-resize");if(this.split){this.split.placement=YAHOO.ext.SplitBar.LEFT;this.split.orientation=YAHOO.ext.SplitBar.HORIZONTAL;this.split.el.addClass("ylayout-split-h");}if(typeof _1006.initialSize!="undefined"){this.el.setWidth(_1006.initialSize);}};YAHOO.extendX(YAHOO.ext.WestLayoutRegion,YAHOO.ext.SplitLayoutRegion,{getBox:function(){if(this.collapsed){return this.collapsedEl.getBox();}var box=this.el.getBox();if(this.split){box.width+=this.split.el.getWidth();}return box;},updateBox:function(box){if(this.split&&!this.collapsed){var sw=this.split.el.getWidth();box.width-=sw;this.split.el.setLeft(box.x+box.width);this.split.el.setTop(box.y);this.split.el.setHeight(box.height);}if(this.collapsed){this.el.setHeight(box.height);var _100a=this.config.titlebar?box.height-(this.titleEl.getHeight()||0):box.height;_100a-=this.el.getBorderWidth("tb");this.bodyEl.setHeight(_100a);if(this.activePanel&&this.panelSize){this.activePanel.setSize(this.panelSize.width,_100a);}}YAHOO.ext.WestLayoutRegion.superclass.updateBox.call(this,box);}});YAHOO.ext.grid.AbstractColumnModel=function(){this.onWidthChange=new YAHOO.util.CustomEvent("widthChanged");this.onHeaderChange=new YAHOO.util.CustomEvent("headerChanged");this.onHiddenChange=new YAHOO.util.CustomEvent("hiddenChanged");this.events={"widthchange":this.onWidthChange,"headerchange":this.onHeaderChange,"hiddenchange":this.onHiddenChange};};YAHOO.ext.grid.AbstractColumnModel.prototype={fireEvent:YAHOO.ext.util.Observable.prototype.fireEvent,on:YAHOO.ext.util.Observable.prototype.on,addListener:YAHOO.ext.util.Observable.prototype.addListener,delayedListener:YAHOO.ext.util.Observable.prototype.delayedListener,removeListener:YAHOO.ext.util.Observable.prototype.removeListener,purgeListeners:YAHOO.ext.util.Observable.prototype.purgeListeners,bufferedListener:YAHOO.ext.util.Observable.prototype.bufferedListener,fireWidthChange:function(_100b,_100c){this.onWidthChange.fireDirect(this,_100b,_100c);},fireHeaderChange:function(_100d,_100e){this.onHeaderChange.fireDirect(this,_100d,_100e);},fireHiddenChange:function(_100f,_1010){this.onHiddenChange.fireDirect(this,_100f,_1010);},getColumnCount:function(){return 0;},isSortable:function(col){return false;},isHidden:function(col){return false;},getSortType:function(col){return YAHOO.ext.grid.DefaultColumnModel.sortTypes.none;},getRenderer:function(col){return YAHOO.ext.grid.DefaultColumnModel.defaultRenderer;},getColumnWidth:function(col){return 0;},getTotalWidth:function(){return 0;},getColumnHeader:function(col){return "";}};YAHOO.ext.grid.DefaultColumnModel=function(_1017){YAHOO.ext.grid.DefaultColumnModel.superclass.constructor.call(this);this.config=_1017;this.defaultWidth=100;this.defaultSortable=false;};YAHOO.extendX(YAHOO.ext.grid.DefaultColumnModel,YAHOO.ext.grid.AbstractColumnModel,{getColumnCount:function(){return this.config.length;},isSortable:function(col){if(typeof this.config[col].sortable=="undefined"){return this.defaultSortable;}return this.config[col].sortable;},getSortType:function(col){if(!this.dataMap){var map=[];for(var i=0,len=this.config.length;i<len;i++){map[this.getDataIndex(i)]=i;}this.dataMap=map;}col=this.dataMap[col];if(!this.config[col].sortType){return YAHOO.ext.grid.DefaultColumnModel.sortTypes.none;}return this.config[col].sortType;},setSortType:function(col,fn){this.config[col].sortType=fn;},getRenderer:function(col){if(!this.config[col].renderer){return YAHOO.ext.grid.DefaultColumnModel.defaultRenderer;}return this.config[col].renderer;},setRenderer:function(col,fn){this.config[col].renderer=fn;},getColumnWidth:function(col){return this.config[col].width||this.defaultWidth;},setColumnWidth:function(col,width,_1024){this.config[col].width=width;this.totalWidth=null;if(!_1024){this.onWidthChange.fireDirect(this,col,width);}},getTotalWidth:function(_1025){if(!this.totalWidth){this.totalWidth=0;for(var i=0;i<this.config.length;i++){if(_1025||!this.isHidden(i)){this.totalWidth+=this.getColumnWidth(i);}}}return this.totalWidth;},getColumnHeader:function(col){return this.config[col].header;},setColumnHeader:function(col,_1029){this.config[col].header=_1029;this.onHeaderChange.fireDirect(this,col,_1029);},getColumnTooltip:function(col){return this.config[col].tooltip;},setColumnTooltip:function(col,_102c){this.config[col].tooltip=tooltip;},getDataIndex:function(col){if(typeof this.config[col].dataIndex!="number"){return col;}return this.config[col].dataIndex;},setDataIndex:function(col,_102f){this.config[col].dataIndex=_102f;},isCellEditable:function(_1030,_1031){return this.config[_1030].editable||(typeof this.config[_1030].editable=="undefined"&&this.config[_1030].editor);},getCellEditor:function(_1032,_1033){return this.config[_1032].editor;},setEditable:function(col,_1035){this.config[col].editable=_1035;},isHidden:function(_1036){return this.config[_1036].hidden;},isFixed:function(_1037){return this.config[_1037].fixed;},isResizable:function(_1038){return this.config[_1038].resizable!==false;},setHidden:function(_1039,_103a){this.config[_1039].hidden=_103a;this.totalWidth=null;this.fireHiddenChange(_1039,_103a);},setEditor:function(col,_103c){this.config[col].editor=_103c;}});YAHOO.ext.grid.DefaultColumnModel.sortTypes={none:function(s){return s;},asUCString:function(s){return String(s).toUpperCase();},asDate:function(s){if(s instanceof Date){return s.getTime();}return Date.parse(String(s));},asFloat:function(s){var val=parseFloat(String(s).replace(/,/g,""));if(isNaN(val)){val=0;}return val;},asInt:function(s){var val=parseInt(String(s).replace(/,/g,""));if(isNaN(val)){val=0;}return val;}};YAHOO.ext.grid.DefaultColumnModel.defaultRenderer=function(value){if(typeof value=="string"&&value.length<1){return "&#160;";}return value;};YAHOO.ext.grid.Grid=function(_1045,_1046,_1047,_1048){this.container=YAHOO.ext.Element.get(_1045);this.container.update("");this.container.setStyle("overflow","hidden");this.id=this.container.id;this.rows=[];this.rowCount=0;this.fieldId=null;var _1049=_1046;this.dataModel=_1049;this.colModel=_1047;this.selModel=_1048;this.activeEditor=null;this.editingCell=null;this.minColumnWidth=25;this.autoSizeColumns=false;this.autoSizeHeaders=false;this.monitorWindowResize=true;this.maxRowsToMeasure=0;this.trackMouseOver=false;this.enableDragDrop=false;this.stripeRows=true;this.autoHeight=false;this.autoWidth=false;this.view=null;this.allowTextSelectionPattern=/INPUT|TEXTAREA|SELECT/i;if(typeof _1046=="object"&&!_1046.getRowCount){YAHOO.ext.util.Config.apply(this,_1046);}this.setValueDelegate=this.setCellValue.createDelegate(this);this.events={"click":true,"dblclick":true,"mousedown":true,"mouseup":true,"mouseover":true,"mouseout":true,"keypress":true,"keydown":true,"cellclick":true,"celldblclick":true,"rowclick":true,"rowdblclick":true,"headerclick":true,"rowcontextmenu":true,"headercontextmenu":true,"beforeedit":true,"afteredit":true,"bodyscroll":true,"columnresize":true,"startdrag":true,"enddrag":true,"dragdrop":true,"dragover":true,"dragenter":true,"dragout":true};};YAHOO.ext.grid.Grid.prototype={render:function(){if((!this.container.dom.offsetHeight||this.container.dom.offsetHeight<20)||this.container.getStyle("height")=="auto"){this.autoHeight=true;}if((!this.container.dom.offsetWidth||this.container.dom.offsetWidth<20)){this.autoWidth=true;}if(!this.view){if(this.dataModel.isPaged()){this.view=new YAHOO.ext.grid.PagedGridView();}else{this.view=new YAHOO.ext.grid.GridView();}}this.view.init(this);this.el=getEl(this.view.render(),true);var c=this.container;c.mon("click",this.onClick,this,true);c.mon("dblclick",this.onDblClick,this,true);c.mon("contextmenu",this.onContextMenu,this,true);c.mon("selectstart",this.cancelTextSelection,this,true);c.mon("mousedown",this.cancelTextSelection,this,true);c.mon("mousedown",this.onMouseDown,this,true);c.mon("mouseup",this.onMouseUp,this,true);if(this.trackMouseOver){this.el.mon("mouseover",this.onMouseOver,this,true);this.el.mon("mouseout",this.onMouseOut,this,true);}c.mon("keypress",this.onKeyPress,this,true);c.mon("keydown",this.onKeyDown,this,true);this.init();return this;},init:function(){this.rows=this.el.dom.rows;if(!this.disableSelection){if(!this.selModel){this.selModel=new YAHOO.ext.grid.DefaultSelectionModel(this);}this.selModel.init(this);this.selModel.onSelectionChange.subscribe(this.updateField,this,true);}else{this.selModel=new YAHOO.ext.grid.DisableSelectionModel(this);this.selModel.init(this);}if(this.enableDragDrop){this.dd=new YAHOO.ext.grid.GridDD(this,this.container.dom);}},reset:function(_104b){this.destroy(false,true);YAHOO.ext.util.Config.apply(this,_104b);return this;},destroy:function(_104c,_104d){var c=this.container;c.removeAllListeners();this.view.destroy();YAHOO.ext.EventManager.removeResizeListener(this.view.onWindowResize,this.view);this.view=null;this.colModel.purgeListeners();if(!_104d){this.purgeListeners();}c.update("");if(_104c===true){c.remove();}},setDataModel:function(dm,_1050){this.view.unplugDataModel(this.dataModel);this.dataModel=dm;this.view.plugDataModel(dm);if(_1050){dm.fireEvent("datachanged");}},onMouseDown:function(e){this.fireEvent("mousedown",e);},onMouseUp:function(e){this.fireEvent("mouseup",e);},onMouseOver:function(e){this.fireEvent("mouseover",e);},onMouseOut:function(e){this.fireEvent("mouseout",e);},onKeyPress:function(e){this.fireEvent("keypress",e);},onKeyDown:function(e){this.fireEvent("keydown",e);},fireEvent:YAHOO.ext.util.Observable.prototype.fireEvent,on:YAHOO.ext.util.Observable.prototype.on,addListener:YAHOO.ext.util.Observable.prototype.addListener,delayedListener:YAHOO.ext.util.Observable.prototype.delayedListener,removeListener:YAHOO.ext.util.Observable.prototype.removeListener,purgeListeners:YAHOO.ext.util.Observable.prototype.purgeListeners,bufferedListener:YAHOO.ext.util.Observable.prototype.bufferedListener,onClick:function(e){this.fireEvent("click",e);var _1058=e.getTarget();var row=this.getRowFromChild(_1058);var cell=this.getCellFromChild(_1058);var _105b=this.getHeaderFromChild(_1058);if(row){this.fireEvent("rowclick",this,row.rowIndex,e);}if(cell){this.fireEvent("cellclick",this,row.rowIndex,cell.columnIndex,e);}if(_105b){this.fireEvent("headerclick",this,_105b.columnIndex,e);}},onContextMenu:function(e){var _105d=e.getTarget();var row=this.getRowFromChild(_105d);var _105f=this.getHeaderFromChild(_105d);if(row){this.fireEvent("rowcontextmenu",this,row.rowIndex,e);}if(_105f){this.fireEvent("headercontextmenu",this,_105f.columnIndex,e);}e.preventDefault();},onDblClick:function(e){this.fireEvent("dblclick",e);var _1061=e.getTarget();var row=this.getRowFromChild(_1061);var cell=this.getCellFromChild(_1061);if(row){this.fireEvent("rowdblclick",this,row.rowIndex,e);}if(cell){this.fireEvent("celldblclick",this,row.rowIndex,cell.columnIndex,e);}},startEditing:function(_1064,_1065){var row=this.rows[_1064];var cell=row.childNodes[_1065];this.stopEditing();setTimeout(this.doEdit.createDelegate(this,[row,cell]),10);},stopEditing:function(){if(this.activeEditor){this.activeEditor.stopEditing();}},doEdit:function(row,cell){if(!row||!cell){return;}var cm=this.colModel;var dm=this.dataModel;var _106c=cell.columnIndex;var _106d=row.rowIndex;if(cm.isCellEditable(_106c,_106d)){var ed=cm.getCellEditor(_106c,_106d);if(ed){if(this.activeEditor){this.activeEditor.stopEditing();}this.fireEvent("beforeedit",this,_106d,_106c);this.activeEditor=ed;this.editingCell=cell;this.view.ensureVisible(row,true);try{cell.focus();}catch(e){}ed.init(this,this.el.dom.parentNode,this.setValueDelegate);var value=dm.getValueAt(_106d,cm.getDataIndex(_106c));setTimeout(ed.startEditing.createDelegate(ed,[value,row,cell]),1);}}},setCellValue:function(value,_1071,_1072){this.dataModel.setValueAt(value,_1071,this.colModel.getDataIndex(_1072));this.fireEvent("afteredit",this,_1071,_1072);},cancelTextSelection:function(e){var _1074=e.getTarget();if(_1074&&_1074!=this.el.dom.parentNode&&!this.allowTextSelectionPattern.test(_1074.tagName)){e.preventDefault();}},autoSize:function(){this.view.updateWrapHeight();this.view.adjustForScroll();},scrollTo:function(row){if(typeof row=="number"){row=this.rows[row];}this.view.ensureVisible(row,true);},getEditingCell:function(){return this.editingCell;},bindToField:function(_1076){this.fieldId=_1076;this.readField();},updateField:function(){if(this.fieldId){var field=YAHOO.util.Dom.get(this.fieldId);field.value=this.getSelectedRowIds().join(",");}},readField:function(){if(this.fieldId){var field=YAHOO.util.Dom.get(this.fieldId);var _1079=field.value.split(",");var rows=this.getRowsById(_1079);this.selModel.selectRows(rows,false);}},getRow:function(index){return this.rows[index];},getRowsById:function(id){var dm=this.dataModel;if(!(id instanceof Array)){for(var i=0;i<this.rows.length;i++){if(dm.getRowId(i)==id){return this.rows[i];}}return null;}var found=[];var re="^(?:";for(var i=0;i<id.length;i++){re+=id[i];if(i!=id.length-1){re+="|";}}var regex=new RegExp(re+")$");for(var i=0;i<this.rows.length;i++){if(regex.test(dm.getRowId(i))){found.push(this.rows[i]);}}return found;},getRowAfter:function(row){return this.getSibling("next",row);},getRowBefore:function(row){return this.getSibling("previous",row);},getCellAfter:function(cell,_1087){var next=this.getSibling("next",cell);if(next&&!_1087&&this.colModel.isHidden(next.columnIndex)){return this.getCellAfter(next);}return next;},getCellBefore:function(cell,_108a){var prev=this.getSibling("previous",cell);if(prev&&!_108a&&this.colModel.isHidden(prev.columnIndex)){return this.getCellBefore(prev);}return prev;},getLastCell:function(row,_108d){var cell=this.getElement("previous",row.lastChild);if(cell&&!_108d&&this.colModel.isHidden(cell.columnIndex)){return this.getCellBefore(cell);}return cell;},getFirstCell:function(row,_1090){var cell=this.getElement("next",row.firstChild);if(cell&&!_1090&&this.colModel.isHidden(cell.columnIndex)){return this.getCellAfter(cell);}return cell;},getSibling:function(type,node){if(!node){return null;}type+="Sibling";var n=node[type];while(n&&n.nodeType!=1){n=n[type];}return n;},getElement:function(_1095,node){if(!node||node.nodeType==1){return node;}else{return this.getSibling(_1095,node);}},getElementFromChild:function(_1097,_1098){if(!_1097||(YAHOO.util.Dom.hasClass(_1097,_1098))){return _1097;}var p=_1097.parentNode;var b=document.body;while(p&&p!=b){if(YAHOO.util.Dom.hasClass(p,_1098)){return p;}p=p.parentNode;}return null;},getRowFromChild:function(_109b){return this.getElementFromChild(_109b,"ygrid-row");},getCellFromChild:function(_109c){return this.getElementFromChild(_109c,"ygrid-col");},getHeaderFromChild:function(_109d){return this.getElementFromChild(_109d,"ygrid-hd");},getSelectedRows:function(){return this.selModel.getSelectedRows();},getSelectedRow:function(){if(this.selModel.hasSelection()){return this.selModel.getSelectedRows()[0];}return null;},getSelectedRowIndexes:function(){var a=[];var rows=this.selModel.getSelectedRows();for(var i=0;i<rows.length;i++){a[i]=rows[i].rowIndex;}return a;},getSelectedRowIndex:function(){if(this.selModel.hasSelection()){return this.selModel.getSelectedRows()[0].rowIndex;}return -1;},getSelectedRowId:function(){if(this.selModel.hasSelection()){return this.selModel.getSelectedRowIds()[0];}return null;},getSelectedRowIds:function(){return this.selModel.getSelectedRowIds();},clearSelections:function(){this.selModel.clearSelections();},selectAll:function(){this.selModel.selectAll();},getSelectionCount:function(){return this.selModel.getCount();},hasSelection:function(){return this.selModel.hasSelection();},getSelectionModel:function(){if(!this.selModel){this.selModel=new DefaultSelectionModel();}return this.selModel;},getDataModel:function(){return this.dataModel;},getColumnModel:function(){return this.colModel;},getView:function(){return this.view;},getDragDropText:function(){return this.ddText.replace("%0",this.selModel.getCount());}};YAHOO.ext.grid.Grid.prototype.ddText="%0 selected row(s)";YAHOO.ext.grid.GridView=function(){this.grid=null;this.lastFocusedRow=null;this.onScroll=new YAHOO.util.CustomEvent("onscroll");this.adjustScrollTask=new YAHOO.ext.util.DelayedTask(this._adjustForScroll,this);this.ensureVisibleTask=new YAHOO.ext.util.DelayedTask();};YAHOO.ext.grid.GridView.prototype={init:function(grid){this.grid=grid;},fireScroll:function(_10a2,_10a3){this.onScroll.fireDirect(this.grid,_10a2,_10a3);},getColumnRenderers:function(){var _10a4=[];var cm=this.grid.colModel;var _10a6=cm.getColumnCount();for(var i=0;i<_10a6;i++){_10a4.push(cm.getRenderer(i));}return _10a4;},buildIndexMap:function(){var _10a8={};var _10a9={};var cm=this.grid.colModel;for(var i=0,len=cm.getColumnCount();i<len;i++){var di=cm.getDataIndex(i);_10a8[i]=di;_10a9[di]=i;}return {"colToData":_10a8,"dataToCol":_10a9};},getDataIndexes:function(){if(!this.indexMap){this.indexMap=this.buildIndexMap();}return this.indexMap.colToData;},getColumnIndexByDataIndex:function(_10ad){if(!this.indexMap){this.indexMap=this.buildIndexMap();}return this.indexMap.dataToCol[_10ad];},updateHeaders:function(){var _10ae=this.grid.colModel;var _10af=this.headers;var _10b0=_10ae.getColumnCount();for(var i=0;i<_10b0;i++){_10af[i].textNode.innerHTML=_10ae.getColumnHeader(i);}},adjustForScroll:function(_10b2){if(!_10b2){this.adjustScrollTask.delay(50);}else{this._adjustForScroll();}},getCellAtPoint:function(x,y){var _10b5=null;var _10b6=null;var xy=YAHOO.util.Dom.getXY(this.wrap);x=(x-xy[0])+this.wrap.scrollLeft;y=(y-xy[1])+this.wrap.scrollTop;var _10b8=this.grid.colModel;var pos=0;var _10ba=_10b8.getColumnCount();for(var i=0;i<_10ba;i++){if(_10b8.isHidden(i)){continue;}var width=_10b8.getColumnWidth(i);if(x>=pos&&x<pos+width){_10b5=i;break;}pos+=width;}if(_10b5!=null){_10b6=(y==0?0:Math.floor(y/this.getRowHeight()));if(_10b6>=this.grid.dataModel.getRowCount()){return null;}return [_10b5,_10b6];}return null;},_adjustForScroll:function(){this.forceScrollUpdate();if(this.scrollbarMode==YAHOO.ext.grid.GridView.SCROLLBARS_OVERLAP){var _10bd=0;if(this.wrap.clientWidth&&this.wrap.clientWidth!==0){_10bd=this.wrap.offsetWidth-this.wrap.clientWidth;}this.hwrap.setWidth(this.wrap.offsetWidth-_10bd);}else{this.hwrap.setWidth(this.wrap.offsetWidth);}this.bwrap.setWidth(Math.max(this.grid.colModel.getTotalWidth(),this.wrap.clientWidth));},focusRow:function(row){if(typeof row=="number"){row=this.getBodyTable().childNodes[row];}if(!row){return;}var left=this.wrap.scrollLeft;try{row.childNodes.item(0).hideFocus=true;row.childNodes.item(0).focus();}catch(e){}this.ensureVisible(row);this.wrap.scrollLeft=left;this.handleScroll();this.lastFocusedRow=row;},ensureVisible:function(row,_10c1){if(!_10c1){this.ensureVisibleTask.delay(50,this._ensureVisible,this,[row]);}else{this._ensureVisible(row);}},_ensureVisible:function(row){if(typeof row=="number"){row=this.getBodyTable().childNodes[row];}if(!row){return;}var left=this.wrap.scrollLeft;var _10c4=parseInt(row.offsetTop,10);var _10c5=_10c4+row.offsetHeight;var _10c6=parseInt(this.wrap.scrollTop,10);var _10c7=_10c6+this.wrap.clientHeight;if(_10c4<_10c6){this.wrap.scrollTop=_10c4;}else{if(_10c5>_10c7){this.wrap.scrollTop=_10c5-this.wrap.clientHeight;}}this.wrap.scrollLeft=left;this.handleScroll();},updateColumns:function(){this.grid.stopEditing();var _10c8=this.grid.colModel;var hcols=this.headers;var _10ca=_10c8.getColumnCount();var pos=0;var _10cc=_10c8.getTotalWidth();for(var i=0;i<_10ca;i++){if(_10c8.isHidden(i)){continue;}var width=_10c8.getColumnWidth(i);hcols[i].style.width=width+"px";hcols[i].style.left=pos+"px";hcols[i].split.style.left=(pos+width-3)+"px";this.setCSSWidth(i,width,pos);pos+=width;}this.lastWidth=_10cc;if(this.grid.autoWidth){this.grid.container.setWidth(_10cc+this.grid.container.getBorderWidth("lr"));this.grid.autoSize();}this.bwrap.setWidth(Math.max(_10cc,this.wrap.clientWidth));if(!YAHOO.ext.util.Browser.isIE){this.wrap.scrollLeft=this.hwrap.dom.scrollLeft;}this.syncScroll();this.forceScrollUpdate();if(this.grid.autoHeight){this.autoHeight();this.updateWrapHeight();}},setCSSWidth:function(_10cf,width,pos){var _10d2=["#"+this.grid.id+" .ygrid-col-"+_10cf,".ygrid-col-"+_10cf];YAHOO.ext.util.CSS.updateRule(_10d2,"width",width+"px");if(typeof pos=="number"){YAHOO.ext.util.CSS.updateRule(_10d2,"left",pos+"px");}},setCSSStyle:function(_10d3,name,value){var _10d6=["#"+this.grid.id+" .ygrid-col-"+_10d3,".ygrid-col-"+_10d3];YAHOO.ext.util.CSS.updateRule(_10d6,name,value);},handleHiddenChange:function(_10d7,_10d8,_10d9){if(_10d9){this.hideColumn(_10d8);}else{this.unhideColumn(_10d8);}this.updateColumns();},hideColumn:function(_10da){var _10db=["#"+this.grid.id+" .ygrid-col-"+_10da,".ygrid-col-"+_10da];YAHOO.ext.util.CSS.updateRule(_10db,"position","absolute");YAHOO.ext.util.CSS.updateRule(_10db,"visibility","hidden");this.headers[_10da].style.display="none";this.headers[_10da].split.style.display="none";},unhideColumn:function(_10dc){var _10dd=["#"+this.grid.id+" .ygrid-col-"+_10dc,".ygrid-col-"+_10dc];YAHOO.ext.util.CSS.updateRule(_10dd,"position","");YAHOO.ext.util.CSS.updateRule(_10dd,"visibility","visible");this.headers[_10dc].style.display="";this.headers[_10dc].split.style.display="";},getBodyTable:function(){return this.bwrap.dom;},updateRowIndexes:function(_10de,_10df){var _10e0=this.grid.stripeRows;var bt=this.getBodyTable();var nodes=bt.childNodes;_10de=_10de||0;_10df=_10df||nodes.length-1;var re=/^(?:ygrid-row ygrid-row-alt|ygrid-row)/;for(var _10e4=_10de;_10e4<=_10df;_10e4++){var node=nodes[_10e4];if(_10e0&&(_10e4+1)%2==0){node.className=node.className.replace(re,"ygrid-row ygrid-row-alt");}else{node.className=node.className.replace(re,"ygrid-row");}node.rowIndex=_10e4;nodes[_10e4].style.top=(_10e4*this.rowHeight)+"px";}},insertRows:function(_10e6,_10e7,_10e8){this.updateBodyHeight();this.adjustForScroll(true);var _10e9=this.getColumnRenderers();var _10ea=this.getDataIndexes();var _10eb=this.grid.colModel.getColumnCount();var _10ec=null;var bt=this.getBodyTable();if(_10e7<bt.childNodes.length){_10ec=bt.childNodes[_10e7];}for(var _10ee=_10e7;_10ee<=_10e8;_10ee++){var row=document.createElement("span");row.className="ygrid-row";row.style.top=(_10ee*this.rowHeight)+"px";this.renderRow(_10e6,row,_10ee,_10eb,_10e9,_10ea);if(_10ec){bt.insertBefore(row,_10ec);}else{bt.appendChild(row);}}this.updateRowIndexes(_10e7);this.adjustForScroll(true);},renderRow:function(_10f0,row,_10f2,_10f3,_10f4,_10f5){for(var _10f6=0;_10f6<_10f3;_10f6++){var td=document.createElement("span");td.className="ygrid-col ygrid-col-"+_10f6+(_10f6==_10f3-1?" ygrid-col-last":"");td.columnIndex=_10f6;td.tabIndex=0;var span=document.createElement("span");span.className="ygrid-cell-text";td.appendChild(span);var val=_10f4[_10f6](_10f0.getValueAt(_10f2,_10f5[_10f6]),_10f2,_10f6,td);if(typeof val=="undefined"||val===""){val="&#160;";}span.innerHTML=val;row.appendChild(td);}},deleteRows:function(_10fa,_10fb,_10fc){this.updateBodyHeight();this.grid.selModel.deselectRange(_10fb,_10fc);var bt=this.getBodyTable();var rows=[];for(var _10ff=_10fb;_10ff<=_10fc;_10ff++){rows.push(bt.childNodes[_10ff]);}for(var i=0;i<rows.length;i++){bt.removeChild(rows[i]);rows[i]=null;}rows=null;this.updateRowIndexes(_10fb);this.adjustForScroll();},updateRows:function(_1101,_1102,_1103){var bt=this.getBodyTable();var _1105=this.getDataIndexes();var _1106=this.getColumnRenderers();var _1107=this.grid.colModel.getColumnCount();for(var _1108=_1102;_1108<=_1103;_1108++){var row=bt.rows[_1108];var cells=row.childNodes;for(var _110b=0;_110b<_1107;_110b++){var td=cells[_110b];var val=_1106[_110b](_1101.getValueAt(_1108,_1105[_110b]),_1108,_110b,td);if(typeof val=="undefined"||val===""){val="&#160;";}td.firstChild.innerHTML=val;}}},handleSort:function(_110e,_110f,_1110,_1111){this.grid.selModel.syncSelectionsToIds();if(!_1111){this.updateRows(_110e,0,_110e.getRowCount()-1);}this.updateHeaderSortState();if(this.lastFocusedRow){this.focusRow(this.lastFocusedRow);}},syncScroll:function(){this.hwrap.dom.scrollLeft=this.wrap.scrollLeft;},handleScroll:function(){this.syncScroll();this.fireScroll(this.wrap.scrollLeft,this.wrap.scrollTop);this.grid.fireEvent("bodyscroll",this.wrap.scrollLeft,this.wrap.scrollTop);},getRowHeight:function(){if(!this.rowHeight){var rule=YAHOO.ext.util.CSS.getRule(["#"+this.grid.id+" .ygrid-row",".ygrid-row"]);if(rule&&rule.style.height){this.rowHeight=parseInt(rule.style.height,10);}else{this.rowHeight=21;}}return this.rowHeight;},renderRows:function(_1113){this.grid.stopEditing();if(this.grid.selModel){this.grid.selModel.clearSelections();}var bt=this.getBodyTable();bt.innerHTML="";this.rowHeight=this.getRowHeight();this.insertRows(_1113,0,_1113.getRowCount()-1);},updateCell:function(_1115,_1116,_1117){var _1118=this.getColumnIndexByDataIndex(_1117);if(typeof _1118=="undefined"){return;}var bt=this.getBodyTable();var row=bt.childNodes[_1116];var cell=row.childNodes[_1118];var _111c=this.grid.colModel.getRenderer(_1118);var val=_111c(_1115.getValueAt(_1116,_1117),_1116,_1118,cell);if(typeof val=="undefined"||val===""){val="&#160;";}cell.firstChild.innerHTML=val;},calcColumnWidth:function(_111e,_111f){var _1120=0;var bt=this.getBodyTable();var rows=bt.childNodes;var _1123=Math.min(_111f||rows.length,rows.length);if(this.grid.autoSizeHeaders){var h=this.headers[_111e];var _1125=h.style.width;h.style.width=this.grid.minColumnWidth+"px";_1120=Math.max(_1120,h.scrollWidth);h.style.width=_1125;}for(var i=0;i<_1123;i++){var cell=rows[i].childNodes[_111e].firstChild;_1120=Math.max(_1120,cell.scrollWidth);}return _1120+5;},autoSizeColumn:function(_1128,_1129){if(_1129){this.setCSSWidth(_1128,this.grid.minColumnWidth);}var _112a=this.calcColumnWidth(_1128);this.grid.colModel.setColumnWidth(_1128,Math.max(this.grid.minColumnWidth,_112a));this.grid.fireEvent("columnresize",_1128,_112a);},autoSizeColumns:function(){var _112b=this.grid.colModel;var _112c=_112b.getColumnCount();var wrap=this.wrap;for(var i=0;i<_112c;i++){this.setCSSWidth(i,this.grid.minColumnWidth);_112b.setColumnWidth(i,this.calcColumnWidth(i,this.grid.maxRowsToMeasure),true);}if(_112b.getTotalWidth()<wrap.clientWidth){var diff=Math.floor((wrap.clientWidth-_112b.getTotalWidth())/_112c);for(var i=0;i<_112c;i++){_112b.setColumnWidth(i,_112b.getColumnWidth(i)+diff,true);}}this.updateColumns();},fitColumns:function(){var cm=this.grid.colModel;var _1132=cm.getColumnCount();var cols=[];var width=0;var i,w;for(i=0;i<_1132;i++){if(!cm.isHidden(i)&&!cm.isFixed(i)){w=cm.getColumnWidth(i);cols.push(i);cols.push(w);width+=w;}}var frac=(this.wrap.clientWidth-cm.getTotalWidth())/width;while(cols.length){w=cols.pop();i=cols.pop();cm.setColumnWidth(i,Math.floor(w+w*frac),true);}this.updateColumns();},onWindowResize:function(){if(this.grid.monitorWindowResize){this.adjustForScroll();this.updateWrapHeight();this.adjustForScroll();}},updateWrapHeight:function(){this.grid.container.beginMeasure();this.autoHeight();var box=this.grid.container.getSize(true);this.wrapEl.setHeight(box.height-this.footerHeight-parseInt(this.wrap.offsetTop,10));this.pwrap.setSize(box.width,box.height);this.grid.container.endMeasure();},forceScrollUpdate:function(){var wrap=this.wrapEl;wrap.setWidth(wrap.getWidth(true));setTimeout(function(){wrap.setWidth("");},1);},updateHeaderSortState:function(){var state=this.grid.dataModel.getSortState();if(!state||typeof state.column=="undefined"){return;}var _113a=this.getColumnIndexByDataIndex(state.column);var _113b=state.direction;for(var i=0,len=this.headers.length;i<len;i++){var h=this.headers[i];if(i!=_113a){h.sortDesc.style.display="none";h.sortAsc.style.display="none";}else{h.sortDesc.style.display=_113b=="DESC"?"block":"none";h.sortAsc.style.display=_113b=="ASC"?"block":"none";}}},unplugDataModel:function(dm){dm.removeListener("cellupdated",this.updateCell,this);dm.removeListener("datachanged",this.renderRows,this);dm.removeListener("rowsdeleted",this.deleteRows,this);dm.removeListener("rowsinserted",this.insertRows,this);dm.removeListener("rowsupdated",this.updateRows,this);dm.removeListener("rowssorted",this.handleSort,this);},plugDataModel:function(dm){dm.on("cellupdated",this.updateCell,this,true);dm.on("datachanged",this.renderRows,this,true);dm.on("rowsdeleted",this.deleteRows,this,true);dm.on("rowsinserted",this.insertRows,this,true);dm.on("rowsupdated",this.updateRows,this,true);dm.on("rowssorted",this.handleSort,this,true);},destroy:function(){this.unplugDataModel(this.grid.dataModel);var sp=this.splitters;if(sp){for(var i in sp){if(sp[i]&&typeof sp[i]!="function"){sp[i].destroy(true);}}}},render:function(){var grid=this.grid;var _1143=grid.container.dom;var _1144=grid.dataModel;this.plugDataModel(_1144);var _1145=grid.colModel;_1145.onWidthChange.subscribe(this.updateColumns,this,true);_1145.onHeaderChange.subscribe(this.updateHeaders,this,true);_1145.onHiddenChange.subscribe(this.handleHiddenChange,this,true);if(grid.monitorWindowResize===true){YAHOO.ext.EventManager.onWindowResize(this.onWindowResize,this,true);}var _1146=this.autoSizeColumn.createDelegate(this);var _1147=_1145.getColumnCount();var dh=YAHOO.ext.DomHelper;this.pwrap=dh.append(_1143,{tag:"div",cls:"ygrid-positioner",style:"position:relative;width:100%;height:100%;left:0;top:0;overflow:hidden;"},true);var pos=this.pwrap.dom;var wrap=dh.append(pos,{tag:"div",cls:"ygrid-wrap"});this.wrap=wrap;this.wrapEl=getEl(wrap,true);YAHOO.ext.EventManager.on(wrap,"scroll",this.handleScroll,this,true);var hwrap=dh.append(pos,{tag:"div",cls:"ygrid-wrap-headers"});this.hwrap=getEl(hwrap,true);var bwrap=dh.append(wrap,{tag:"div",cls:"ygrid-wrap-body",id:_1143.id+"-body"});this.bwrap=getEl(bwrap,true);this.bwrap.setWidth(_1145.getTotalWidth());bwrap.rows=bwrap.childNodes;this.footerHeight=0;var foot=this.appendFooter(this.pwrap.dom);if(foot){this.footer=getEl(foot,true);this.footerHeight=this.footer.getHeight();}this.updateWrapHeight();var hrow=dh.append(hwrap,{tag:"span",cls:"ygrid-hrow"});this.hrow=hrow;if(!YAHOO.ext.util.Browser.isGecko){var _114f=document.createElement("iframe");_114f.className="ygrid-hrow-frame";_114f.frameBorder=0;_114f.src=YAHOO.ext.SSL_SECURE_URL;hwrap.appendChild(_114f);}this.headerCtrl=new YAHOO.ext.grid.HeaderController(this.grid);this.headers=[];this.cols=[];this.splitters=[];var _1150=dh.createTemplate({tag:"span",cls:"ygrid-hd ygrid-header-{0}",children:[{tag:"span",cls:"ygrid-hd-body",html:"<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" title=\"{2}\">"+"<tbody><tr><td><span>{1}</span></td>"+"<td><span class=\"sort-desc\"></span><span class=\"sort-asc\"></span></td>"+"</tr></tbody></table>"}]});_1150.compile();for(var i=0;i<_1147;i++){var hd=_1150.append(hrow,[i,_1145.getColumnHeader(i),_1145.getColumnTooltip(i)||""]);var spans=hd.getElementsByTagName("span");hd.textNode=spans[1];hd.sortDesc=spans[2];hd.sortAsc=spans[3];hd.columnIndex=i;this.headers.push(hd);if(_1145.isSortable(i)){this.headerCtrl.register(hd);}var split=dh.append(hrow,{tag:"span",cls:"ygrid-hd-split"});hd.split=split;if(_1145.isResizable(i)&&!_1145.isFixed(i)){YAHOO.util.Event.on(split,"dblclick",_1146.createCallback(i+0,true));var sb=new YAHOO.ext.SplitBar(split,hd,null,YAHOO.ext.SplitBar.LEFT);sb.columnIndex=i;sb.minSize=grid.minColumnWidth;sb.onMoved.subscribe(this.onColumnSplitterMoved,this,true);YAHOO.util.Dom.addClass(sb.proxy,"ygrid-column-sizer");YAHOO.util.Dom.setStyle(sb.proxy,"background-color","");sb.dd._resizeProxy=function(){var el=this.getDragEl();YAHOO.util.Dom.setStyle(el,"height",(hwrap.clientHeight+wrap.clientHeight-2)+"px");};this.splitters[i]=sb;}else{split.style.cursor="default";}}if(grid.autoSizeColumns){this.renderRows(_1144);this.autoSizeColumns();}else{this.updateColumns();this.renderRows(_1144);}for(var i=0;i<_1147;i++){if(_1145.isHidden(i)){this.hideColumn(i);}}this.updateHeaderSortState();return this.bwrap;},onColumnSplitterMoved:function(_1158,_1159){this.grid.colModel.setColumnWidth(_1158.columnIndex,_1159);this.grid.fireEvent("columnresize",_1158.columnIndex,_1159);},appendFooter:function(_115a){return null;},autoHeight:function(){if(this.grid.autoHeight){var h=this.getBodyHeight();var c=this.grid.container;var total=h+(parseInt(this.wrap.offsetTop,10)||0)+this.footerHeight+c.getBorderWidth("tb")+c.getPadding("tb")+(this.wrap.offsetHeight-this.wrap.clientHeight);c.setHeight(total);}},getBodyHeight:function(){return this.grid.dataModel.getRowCount()*this.getRowHeight();},updateBodyHeight:function(){this.getBodyTable().style.height=this.getBodyHeight()+"px";if(this.grid.autoHeight){this.autoHeight();this.updateWrapHeight();}}};YAHOO.ext.grid.GridView.SCROLLBARS_UNDER=0;YAHOO.ext.grid.GridView.SCROLLBARS_OVERLAP=1;YAHOO.ext.grid.GridView.prototype.scrollbarMode=YAHOO.ext.grid.GridView.SCROLLBARS_UNDER;YAHOO.ext.grid.GridView.prototype.fitColumnsToContainer=YAHOO.ext.grid.GridView.prototype.fitColumns;YAHOO.ext.grid.HeaderController=function(grid){this.grid=grid;this.headers=[];};YAHOO.ext.grid.HeaderController.prototype={register:function(_115f){this.headers.push(_115f);YAHOO.ext.EventManager.on(_115f,"selectstart",this.cancelTextSelection,this,true);YAHOO.ext.EventManager.on(_115f,"mousedown",this.cancelTextSelection,this,true);YAHOO.ext.EventManager.on(_115f,"mouseover",this.headerOver,this,true);YAHOO.ext.EventManager.on(_115f,"mouseout",this.headerOut,this,true);YAHOO.ext.EventManager.on(_115f,"click",this.headerClick,this,true);},headerClick:function(e){var grid=this.grid,cm=grid.colModel,dm=grid.dataModel;grid.stopEditing();var _1162=grid.getHeaderFromChild(e.getTarget());var state=dm.getSortState();var _1164=_1162.sortDir||"ASC";if(typeof state.column!="undefined"&&grid.getView().getColumnIndexByDataIndex(state.column)==_1162.columnIndex){_1164=(state.direction=="ASC"?"DESC":"ASC");}_1162.sortDir=_1164;dm.sort(cm,cm.getDataIndex(_1162.columnIndex),_1164);},headerOver:function(e){var _1166=this.grid.getHeaderFromChild(e.getTarget());YAHOO.util.Dom.addClass(_1166,"ygrid-hd-over");},headerOut:function(e){var _1168=this.grid.getHeaderFromChild(e.getTarget());YAHOO.util.Dom.removeClass(_1168,"ygrid-hd-over");},cancelTextSelection:function(e){e.preventDefault();}};YAHOO.ext.grid.DefaultSelectionModel=function(){this.selectedRows=[];this.selectedRowIds=[];this.lastSelectedRow=null;this.onRowSelect=new YAHOO.util.CustomEvent("SelectionTable.rowSelected");this.onSelectionChange=new YAHOO.util.CustomEvent("SelectionTable.selectionChanged");this.events={"selectionchange":this.onSelectionChange,"rowselect":this.onRowSelect};this.locked=false;};YAHOO.ext.grid.DefaultSelectionModel.prototype={init:function(grid){this.grid=grid;this.initEvents();},lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isLocked:function(){return this.locked;},initEvents:function(){if(this.grid.trackMouseOver){this.grid.addListener("mouseover",this.handleOver,this,true);this.grid.addListener("mouseout",this.handleOut,this,true);}this.grid.addListener("rowclick",this.rowClick,this,true);this.grid.addListener("keydown",this.keyDown,this,true);},fireEvent:YAHOO.ext.util.Observable.prototype.fireEvent,on:YAHOO.ext.util.Observable.prototype.on,addListener:YAHOO.ext.util.Observable.prototype.addListener,delayedListener:YAHOO.ext.util.Observable.prototype.delayedListener,removeListener:YAHOO.ext.util.Observable.prototype.removeListener,purgeListeners:YAHOO.ext.util.Observable.prototype.purgeListeners,bufferedListener:YAHOO.ext.util.Observable.prototype.bufferedListener,syncSelectionsToIds:function(){if(this.getCount()>0){var ids=this.selectedRowIds.concat();this.clearSelections();this.selectRowsById(ids,true);}},selectRowsById:function(id,_116d){var rows=this.grid.getRowsById(id);if(!(rows instanceof Array)){this.selectRow(rows,_116d);return;}this.selectRows(rows,_116d);},getCount:function(){return this.selectedRows.length;},selectFirstRow:function(){for(var j=0;j<this.grid.rows.length;j++){if(this.isSelectable(this.grid.rows[j])){this.focusRow(this.grid.rows[j]);this.setRowState(this.grid.rows[j],true);return;}}},selectNext:function(_1170){if(this.lastSelectedRow){for(var j=(this.lastSelectedRow.rowIndex+1);j<this.grid.rows.length;j++){var row=this.grid.rows[j];if(this.isSelectable(row)){this.focusRow(row);this.setRowState(row,true,_1170);return;}}}},selectPrevious:function(_1173){if(this.lastSelectedRow){for(var j=(this.lastSelectedRow.rowIndex-1);j>=0;j--){var row=this.grid.rows[j];if(this.isSelectable(row)){this.focusRow(row);this.setRowState(row,true,_1173);return;}}}},getSelectedRows:function(){return this.selectedRows;},getSelectedRowIds:function(){return this.selectedRowIds;},clearSelections:function(){if(this.isLocked()){return;}var _1176=this.selectedRows.concat();for(var j=0;j<_1176.length;j++){this.setRowState(_1176[j],false);}this.selectedRows=[];this.selectedRowIds=[];},selectAll:function(){if(this.isLocked()){return;}this.selectedRows=[];this.selectedRowIds=[];for(var j=0,len=this.grid.rows.length;j<len;j++){this.setRowState(this.grid.rows[j],true,true);}},hasSelection:function(){return this.selectedRows.length>0;},isSelected:function(row){return row&&(row.selected===true||row.getAttribute("selected")=="true");},isSelectable:function(row){return row&&row.getAttribute("selectable")!="false";},rowClick:function(grid,_117c,e){if(this.isLocked()){return;}var row=grid.getRow(_117c);if(this.isSelectable(row)){if(e.shiftKey&&this.lastSelectedRow){var _117f=this.lastSelectedRow.rowIndex;this.selectRange(this.lastSelectedRow,row,e.ctrlKey);this.lastSelectedRow=this.grid.el.dom.rows[_117f];}else{this.focusRow(row);var _1180=e.ctrlKey?!this.isSelected(row):true;this.setRowState(row,_1180,e.hasModifier());}}},focusRow:function(row){this.grid.view.focusRow(row);},selectRow:function(row,_1183){this.setRowState(this.getRow(row),true,_1183);},selectRows:function(rows,_1185){if(!_1185){this.clearSelections();}for(var i=0;i<rows.length;i++){this.selectRow(rows[i],true);}},deselectRow:function(row){this.setRowState(this.getRow(row),false);},getRow:function(row){if(typeof row=="number"){row=this.grid.rows[row];}return row;},selectRange:function(_1189,_118a,_118b){_1189=this.getRow(_1189);_118a=this.getRow(_118a);this.setRangeState(_1189,_118a,true,_118b);},deselectRange:function(_118c,_118d){_118c=this.getRow(_118c);_118d=this.getRow(_118d);this.setRangeState(_118c,_118d,false,true);},setRowStateFromChild:function(_118e,_118f,_1190){var row=this.grid.getRowFromChild(_118e);this.setRowState(row,_118f,_1190);},setRangeState:function(_1192,_1193,_1194,_1195){if(this.isLocked()){return;}if(!_1195){this.clearSelections();}var _1196=_1192;while(_1196.rowIndex!=_1193.rowIndex){this.setRowState(_1196,_1194,true);_1196=(_1192.rowIndex<_1193.rowIndex?this.grid.getRowAfter(_1196):this.grid.getRowBefore(_1196));}this.setRowState(_1193,_1194,true);},setRowState:function(row,_1198,_1199){if(this.isLocked()){return;}if(this.isSelectable(row)){if(_1198){if(!_1199){this.clearSelections();}this.setRowClass(row,"selected");row.selected=true;this.selectedRows.push(row);this.selectedRowIds.push(this.grid.dataModel.getRowId(row.rowIndex));this.lastSelectedRow=row;}else{this.setRowClass(row,"");row.selected=false;this._removeSelected(row);}this.fireEvent("rowselect",this,row,_1198);this.fireEvent("selectionchange",this,this.selectedRows,this.selectedRowIds);}},handleOver:function(e){var row=this.grid.getRowFromChild(e.getTarget());if(this.isSelectable(row)&&!this.isSelected(row)){this.setRowClass(row,"over");}},handleOut:function(e){var row=this.grid.getRowFromChild(e.getTarget());if(this.isSelectable(row)&&!this.isSelected(row)){this.setRowClass(row,"");}},keyDown:function(e){if(e.browserEvent.keyCode==e.DOWN){this.selectNext(e.shiftKey);e.preventDefault();}else{if(e.browserEvent.keyCode==e.UP){this.selectPrevious(e.shiftKey);e.preventDefault();}}},setRowClass:function(row,_11a0){if(this.isSelectable(row)){if(_11a0=="selected"){YAHOO.util.Dom.removeClass(row,"ygrid-row-over");YAHOO.util.Dom.addClass(row,"ygrid-row-selected");}else{if(_11a0=="over"){YAHOO.util.Dom.removeClass(row,"ygrid-row-selected");YAHOO.util.Dom.addClass(row,"ygrid-row-over");}else{if(_11a0==""){YAHOO.util.Dom.removeClass(row,"ygrid-row-selected");YAHOO.util.Dom.removeClass(row,"ygrid-row-over");}}}}},_removeSelected:function(row){var sr=this.selectedRows;for(var i=0;i<sr.length;i++){if(sr[i]===row){this.selectedRows.splice(i,1);this.selectedRowIds.splice(i,1);return;}}}};YAHOO.ext.grid.SingleSelectionModel=function(){YAHOO.ext.grid.SingleSelectionModel.superclass.constructor.call(this);};YAHOO.extendX(YAHOO.ext.grid.SingleSelectionModel,YAHOO.ext.grid.DefaultSelectionModel);YAHOO.ext.grid.SingleSelectionModel.prototype.setRowState=function(row,_11a5){YAHOO.ext.grid.SingleSelectionModel.superclass.setRowState.call(this,row,_11a5,false);};YAHOO.ext.grid.DisableSelectionModel=function(){YAHOO.ext.grid.DisableSelectionModel.superclass.constructor.call(this);};YAHOO.extendX(YAHOO.ext.grid.DisableSelectionModel,YAHOO.ext.grid.DefaultSelectionModel);YAHOO.ext.grid.DisableSelectionModel.prototype.initEvents=function(){};YAHOO.ext.grid.AbstractDataModel=function(){this.onCellUpdated=new YAHOO.util.CustomEvent("onCellUpdated");this.onTableDataChanged=new YAHOO.util.CustomEvent("onTableDataChanged");this.onRowsDeleted=new YAHOO.util.CustomEvent("onRowsDeleted");this.onRowsInserted=new YAHOO.util.CustomEvent("onRowsInserted");this.onRowsUpdated=new YAHOO.util.CustomEvent("onRowsUpdated");this.onRowsSorted=new YAHOO.util.CustomEvent("onRowsSorted");this.events={"cellupdated":this.onCellUpdated,"datachanged":this.onTableDataChanged,"rowsdeleted":this.onRowsDeleted,"rowsinserted":this.onRowsInserted,"rowsupdated":this.onRowsUpdated,"rowssorted":this.onRowsSorted};};YAHOO.ext.grid.AbstractDataModel.prototype={fireEvent:YAHOO.ext.util.Observable.prototype.fireEvent,on:YAHOO.ext.util.Observable.prototype.on,addListener:YAHOO.ext.util.Observable.prototype.addListener,delayedListener:YAHOO.ext.util.Observable.prototype.delayedListener,removeListener:YAHOO.ext.util.Observable.prototype.removeListener,purgeListeners:YAHOO.ext.util.Observable.prototype.purgeListeners,bufferedListener:YAHOO.ext.util.Observable.prototype.bufferedListener,fireCellUpdated:function(row,col){this.onCellUpdated.fireDirect(this,row,col);},fireTableDataChanged:function(){this.onTableDataChanged.fireDirect(this);},fireRowsDeleted:function(_11a8,_11a9){this.onRowsDeleted.fireDirect(this,_11a8,_11a9);},fireRowsInserted:function(_11aa,_11ab){this.onRowsInserted.fireDirect(this,_11aa,_11ab);},fireRowsUpdated:function(_11ac,_11ad){this.onRowsUpdated.fireDirect(this,_11ac,_11ad);},fireRowsSorted:function(_11ae,_11af,_11b0){this.onRowsSorted.fireDirect(this,_11ae,_11af,_11b0);},sort:function(_11b1,_11b2,_11b3,_11b4){},getSortState:function(){return {column:this.sortColumn,direction:this.sortDir};},getRowCount:function(){},getTotalRowCount:function(){return this.getRowCount();},getRowId:function(_11b5){},getValueAt:function(_11b6,_11b7){},setValueAt:function(value,_11b9,_11ba){},isPaged:function(){return false;}};YAHOO.ext.grid.DefaultDataModel=function(data){YAHOO.ext.grid.DefaultDataModel.superclass.constructor.call(this);this.data=data;};YAHOO.extendX(YAHOO.ext.grid.DefaultDataModel,YAHOO.ext.grid.AbstractDataModel,{getRowCount:function(){return this.data.length;},getRowId:function(_11bc){return this.data[_11bc][0];},getRow:function(_11bd){return this.data[_11bd];},getRows:function(_11be){var data=this.data;var r=[];for(var i=0;i<_11be.length;i++){r.push(data[_11be[i]]);}return r;},getValueAt:function(_11c2,_11c3){return this.data[_11c2][_11c3];},setValueAt:function(value,_11c5,_11c6){this.data[_11c5][_11c6]=value;this.fireCellUpdated(_11c5,_11c6);},removeRows:function(_11c7,_11c8){_11c8=_11c8||_11c7;this.data.splice(_11c7,_11c8-_11c7+1);this.fireRowsDeleted(_11c7,_11c8);},removeRow:function(index){this.data.splice(index,1);this.fireRowsDeleted(index,index);},removeAll:function(){var count=this.getRowCount();if(count>0){this.removeRows(0,count-1);}},query:function(spec,_11cc){var d=this.data;var r=[];for(var i=0;i<d.length;i++){var row=d[i];var _11d1=true;for(var col in spec){if(!_11d1){continue;}var _11d3=spec[col];switch(typeof _11d3){case "string":case "number":case "boolean":if(row[col]!=_11d3){_11d1=false;}break;case "function":if(!_11d3(row[col],row)){_11d1=false;}break;case "object":if(_11d3 instanceof RegExp){if(String(row[col]).search(_11d3)===-1){_11d1=false;}}break;}}if(_11d1&&!_11cc){r.push(i);}else{if(!_11d1&&_11cc){r.push(i);}}}return r;},filter:function(query){var _11d5=this.query(query,true);var data=this.data;for(var i=0;i<_11d5.length;i++){data[_11d5[i]]._deleted=true;}for(var i=0;i<data.length;i++){while(data[i]&&data[i]._deleted===true){this.removeRow(i);}}return _11d5.length;},addRow:function(_11d9){this.data.push(_11d9);var _11da=this.data.length-1;this.fireRowsInserted(_11da,_11da);this.applySort();return _11da;},addRows:function(_11db){this.data=this.data.concat(_11db);var _11dc=this.data.length-_11db.length;this.fireRowsInserted(_11dc,_11dc+_11db.length-1);this.applySort();},insertRow:function(index,_11de){this.data.splice(index,0,_11de);this.fireRowsInserted(index,index);this.applySort();return index;},insertRows:function(index,_11e0){var args=_11e0.concat();args.splice(0,0,index,0);this.data.splice.apply(this.data,args);this.fireRowsInserted(index,index+_11e0.length-1);this.applySort();},applySort:function(_11e2){if(typeof this.sortColumn!="undefined"){this.sort(this.sortInfo,this.sortColumn,this.sortDir,_11e2);}},setDefaultSort:function(_11e3,_11e4,_11e5){this.sortInfo=_11e3;this.sortColumn=_11e4;this.sortDir=_11e5;},sort:function(_11e6,_11e7,_11e8,_11e9){this.sortInfo=_11e6;this.sortColumn=_11e7;this.sortDir=_11e8;var dsc=(_11e8&&_11e8.toUpperCase()=="DESC");var _11eb=null;if(_11e6!=null){if(typeof _11e6=="function"){_11eb=_11e6;}else{if(typeof _11e6=="object"){_11eb=_11e6.getSortType(_11e7);}}}var fn=function(cells,_11ee){var v1=_11eb?_11eb(cells[_11e7],cells):cells[_11e7];var v2=_11eb?_11eb(_11ee[_11e7],_11ee):_11ee[_11e7];if(v1<v2){return dsc?+1:-1;}if(v1>v2){return dsc?-1:+1;}return 0;};this.data.sort(fn);if(!_11e9){this.fireRowsSorted(_11e7,_11e8);}},each:function(fn,scope){var d=this.data;for(var i=0,len=d.length;i<len;i++){if(fn.call(scope||window,d[i],i)===false){break;}}}});if(YAHOO.ext.grid.DefaultColumnModel){YAHOO.ext.grid.DefaultDataModel.sortTypes=YAHOO.ext.grid.DefaultColumnModel.sortTypes;}YAHOO.ext.grid.LoadableDataModel=function(_11f5){YAHOO.ext.grid.LoadableDataModel.superclass.constructor.call(this,[]);this.onLoad=new YAHOO.util.CustomEvent("load");this.onLoadException=new YAHOO.util.CustomEvent("loadException");this.events["load"]=this.onLoad;this.events["beforeload"]=new YAHOO.util.CustomEvent("beforeload");this.events["loadexception"]=this.onLoadException;this.dataType=_11f5;this.preprocessors=[];this.postprocessors=[];this.loadedPage=1;this.remoteSort=false;this.pageSize=0;this.pageUrl=null;this.baseParams={};this.paramMap={"page":"page","pageSize":"pageSize","sortColumn":"sortColumn","sortDir":"sortDir"};};YAHOO.extendX(YAHOO.ext.grid.LoadableDataModel,YAHOO.ext.grid.DefaultDataModel,{setLoadedPage:function(_11f6,_11f7){this.loadedPage=_11f6;if(typeof _11f7=="function"){_11f7();}},isPaged:function(){return this.pageSize>0;},getTotalRowCount:function(){return this.totalCount||this.getRowCount();},getPageSize:function(){return this.pageSize;},getTotalPages:function(){if(this.getPageSize()==0||this.getTotalRowCount()==0){return 1;}return Math.ceil(this.getTotalRowCount()/this.getPageSize());},initPaging:function(url,_11f9,_11fa){this.pageUrl=url;this.pageSize=_11f9;this.remoteSort=true;if(_11fa){this.baseParams=_11fa;}},createParams:function(_11fb,_11fc,_11fd){var _11fe={},map=this.paramMap;for(var key in this.baseParams){if(typeof this.baseParams[key]!="function"){_11fe[key]=this.baseParams[key];}}_11fe[map["page"]]=_11fb;_11fe[map["pageSize"]]=this.getPageSize();_11fe[map["sortColumn"]]=(typeof _11fc=="undefined"?"":_11fc);_11fe[map["sortDir"]]=_11fd||"";return _11fe;},loadPage:function(_1200,_1201,_1202){var sort=this.getSortState();var _1204=this.createParams(_1200,sort.column,sort.direction);this.load(this.pageUrl,_1204,this.setLoadedPage.createDelegate(this,[_1200,_1201]),_1202?(_1200-1)*this.pageSize:null);},applySort:function(_1205){if(!this.remoteSort){YAHOO.ext.grid.LoadableDataModel.superclass.applySort.apply(this,arguments);}else{if(!_1205){var sort=this.getSortState();if(sort.column){this.fireRowsSorted(sort.column,sort.direction,true);}}}},resetPaging:function(){this.loadedPage=1;},sort:function(_1207,_1208,_1209,_120a){if(!this.remoteSort){YAHOO.ext.grid.LoadableDataModel.superclass.sort.apply(this,arguments);}else{this.sortInfo=_1207;this.sortColumn=_1208;this.sortDir=_1209;var _120b=this.createParams(this.loadedPage,_1208,_1209);this.load(this.pageUrl,_120b,this.fireRowsSorted.createDelegate(this,[_1208,_1209,true]));}},load:function(url,_120d,_120e,_120f){this.fireEvent("beforeload",this);if(_120d&&typeof _120d!="string"){var buf=[];for(var key in _120d){if(typeof _120d[key]!="function"){buf.push(encodeURIComponent(key),"=",encodeURIComponent(_120d[key]),"&");}}delete buf[buf.length-1];_120d=buf.join("");}var cb={success:this.processResponse,failure:this.processException,scope:this,argument:{callback:_120e,insertIndex:_120f}};var _1213=_120d?"POST":"GET";this.transId=YAHOO.util.Connect.asyncRequest(_1213,url,cb,_120d);},processResponse:function(_1214){var cb=_1214.argument.callback;var _1216=(typeof _1214.argument.insertIndex=="number");var _1217=_1214.argument.insertIndex;switch(this.dataType){case YAHOO.ext.grid.LoadableDataModel.XML:this.loadData(_1214.responseXML,cb,_1216,_1217);break;case YAHOO.ext.grid.LoadableDataModel.JSON:var rtext=_1214.responseText;try{while(rtext.substring(0,1)==" "){rtext=rtext.substring(1,rtext.length);}if(rtext.indexOf("{")<0){throw "Invalid JSON response";}if(rtext.indexOf("{}")===0){this.loadData({},_1214.argument.callback);return;}var _1219=eval("("+rtext+")");if(!_1219){throw "Error evaling JSON response";}this.loadData(_1219,cb,_1216,_1217);}catch(e){this.fireLoadException(e,_1214);if(typeof cb=="function"){cb(this,false);}}break;case YAHOO.ext.grid.LoadableDataModel.TEXT:this.loadData(_1214.responseText,cb,_1216,_1217);break;}},processException:function(_121a){this.fireLoadException(null,_121a);if(typeof _121a.argument.callback=="function"){_121a.argument.callback(this,false);}},fireLoadException:function(e,_121c){this.onLoadException.fireDirect(this,e,_121c);},fireLoadEvent:function(){this.fireEvent("load",this.loadedPage,this.getTotalPages());},addPreprocessor:function(_121d,fn){this.preprocessors[_121d]=fn;},getPreprocessor:function(_121f){return this.preprocessors[_121f];},removePreprocessor:function(_1220){this.preprocessors[_1220]=null;},addPostprocessor:function(_1221,fn){this.postprocessors[_1221]=fn;},getPostprocessor:function(_1223){return this.postprocessors[_1223];},removePostprocessor:function(_1224){this.postprocessors[_1224]=null;},loadData:function(data,_1226,_1227,_1228){}});YAHOO.ext.grid.LoadableDataModel.XML="xml";YAHOO.ext.grid.LoadableDataModel.JSON="json";YAHOO.ext.grid.LoadableDataModel.TEXT="text";YAHOO.ext.util.CSS=new function(){var rules=null;var _122a=function(_122b){var _122c=function(prop){var test=/(-[a-z])/i.exec(prop);return prop.replace(RegExp.$1,RegExp.$1.substr(1).toUpperCase());};while(_122b.indexOf("-")>-1){_122b=_122c(_122b);}return _122b;};this.getRules=function(_122f){if(rules==null||_122f){rules={};var ds=document.styleSheets;for(var i=0,len=ds.length;i<len;i++){try{var ss=ds[i];var _1233=ss.cssRules||ss.rules;for(var j=_1233.length-1;j>=0;--j){rules[_1233[j].selectorText]=_1233[j];}}catch(e){}}}return rules;};this.getRule=function(_1235,_1236){var rs=this.getRules(_1236);if(!(_1235 instanceof Array)){return rs[_1235];}for(var i=0;i<_1235.length;i++){if(rs[_1235[i]]){return rs[_1235[i]];}}return null;};this.updateRule=function(_1239,_123a,value){if(!(_1239 instanceof Array)){var rule=this.getRule(_1239);if(rule){rule.style[_122a(_123a)]=value;return true;}}else{for(var i=0;i<_1239.length;i++){if(this.updateRule(_1239[i],_123a,value)){return true;}}}return false;};this.apply=function(el,_123f){if(!(_123f instanceof Array)){var rule=this.getRule(_123f);if(rule){var s=rule.style;for(var key in s){if(typeof s[key]!="function"){if(s[key]&&String(s[key]).indexOf(":")<0&&s[key]!="false"){try{el.style[key]=s[key];}catch(e){}}}}return true;}}else{for(var i=0;i<_123f.length;i++){if(this.apply(el,_123f[i])){return true;}}}return false;};this.applyFirst=function(el,id,_1246){var _1247=["#"+id+" "+_1246,_1246];return this.apply(el,_1247);};this.revert=function(el,_1249){if(!(_1249 instanceof Array)){var rule=this.getRule(_1249);if(rule){for(key in rule.style){if(rule.style[key]&&String(rule.style[key]).indexOf(":")<0&&rule.style[key]!="false"){try{el.style[key]="";}catch(e){}}}return true;}}else{for(var i=0;i<_1249.length;i++){if(this.revert(el,_1249[i])){return true;}}}return false;};this.revertFirst=function(el,id,_124e){var _124f=["#"+id+" "+_124e,_124e];return this.revert(el,_124f);};}();var jive={};jive.spank={};jive.spank.chat={};var spank={loadComponent:function(type){if(type==null||type==""){return null;}var _1251=spank._createComponent(type);var _1252=spank._loadAttributes(type);switch(type){case "chat":return new jive.spank.chat.ChatWindow(_1251.id,_1252);case "roster":return new jive.spank.roster.RosterWindow(_1251.id,_1252);default:return null;}},_loadAttributes:function(_1253){if(!spank.conf||!spank.conf[_1253]){return {};}return spank.conf[_1253];},_createComponent:function(type){var elm=document.createElement("div");elm.id=YAHOO.util.Dom.generateId();document.getElementsByTagName("body")[0].appendChild(elm);return elm;}};jive.spank.Window=function(id,title,_1258){this.bodyId=YAHOO.util.Dom.generateId();jive.spank.chat.Template.dialog.append(id,{windowTitle:title,bodyId:this.bodyId});this.dialog=new YAHOO.ext.LayoutDialog(id,_1258);this.dialog.addKeyListener(27,this.dialog.hide,this.dialog);this.tabs={};this.id=id;};YAHOO.extend(jive.spank.Window,YAHOO.ext.util.Observable,{isUpdating:false,beginUpdate:function(){if(!this.isUpdating){this.isUpdating=true;this.dialog.beginUpdate();}},endUpdate:function(){if(this.isUpdating){this.isUpdating=false;this.dialog.endUpdate();}},show:function(){this.dialog.show();},hide:function(){this.dialog.hide();},isVisible:function(){return this.dialog.isVisible();},destroy:function(){this.hide();this.dialog.destroy(true);delete this.dialog;}});jive.spank.chat.ChatWindow=function(id,_125a){var width=_125a["width"]?_125a["width"]:520;var _125c=_125a["height"]?_125a["height"]:450;var x=_125a["x"]?_125a["x"]:(YAHOO.util.Dom.getViewportWidth()/2)-260;var y=_125a["y"]?_125a["y"]:(YAHOO.util.Dom.getViewportHeight()/2)-225;var _125f=_125a["resizable"]!="false";var _1260=_125a["draggable"]!="false";var _1261=_125a["closable"]!="false";var _1262=_125a["blinktab"]=="true";var _1263=_125a["constrained"]!="false";if(_1262){this.notificationInterval={};}var _1264={modal:false,constraintoviewport:_1263,width:width,height:_125c,shadow:false,proxyDrag:true,resizable:_125f,draggable:_1260,minWidth:300,minHeight:300,x:x,y:y,closable:_1261};if(_125a["bottomPane"]){_1264=$H(_1264).merge({south:{autoScroll:false,initialSize:30},east:{split:true,initialSize:105,minSize:50,maxSize:200,autoScroll:false,collapsible:true},center:{autoScroll:false,autoTabs:false}});}else{_1264=$H(_1264).merge({north:{autoScroll:false,initialSize:90},east:{split:true,initialSize:105,minSize:50,maxSize:200,autoScroll:false,collapsible:true},center:{autoScroll:true,closeOnTab:true,closeontab:true,alwaysShowTabs:true,autoTabs:false}});}jive.spank.chat.ChatWindow.superclass.constructor.call(this,id,"Chat",_1264);this.events={"input":true,"message":true,"nickcomplete":true,"mucdblclicked":true,"tabclosed":true,"mucinvitation":true,"changenameinmuc":true,"refreshmuclist":true,"createmuc":true};var _1265=this.dialog.getLayout();_1265.regions["center"].addListener("panelremoved",function(){if(_1265.regions["center"].tabs.items.length==0){this.dialog.hide();}}.bind(this));this.dialog.addListener("hide",function(){if(this.destroyed){return;}this.destroyed=true;this.removeAllTabs();this.dialog.destroy(true);this.dialog.proxy.remove();this.dialog.resizer.proxy.remove();}.bind(this));this.newMessages={};this._wrappedFns={};};YAHOO.extend(jive.spank.chat.ChatWindow,jive.spank.Window,{addTab:function(_1266){this.dialog.beginUpdate();if(typeof _1266=="string"){var _1267=_1266;_1266={name:_1267,jid:_1267};}var tabId="jive-tab-"+_1266.jid;jive.spank.chat.Template.tab.append(this.bodyId,{tabId:tabId});var _1269=this.dialog.getLayout();var _126a=new YAHOO.ext.BorderLayout(tabId+"-layout",jive.spank.chat.ChatWindow.tabConfObject);_126a.add("north",new YAHOO.ext.ContentPanel(tabId+"-toppane"));jive.spank.chat.Template.chat_toppane.append(tabId+"-toppane",{tabId:tabId});_126a.regions["north"].hide();_126a.add("center",new YAHOO.ext.ContentPanel(tabId+"-history"));_126a=this._layoutTextarea(_126a,tabId,_1266.jid.toString());_1269.add("center",new YAHOO.ext.NestedLayoutPanel(_126a,{title:_1266.name,closable:true}));var _126b=this.getTabByJID(_1266.jid);var _126c=getEl(tabId+"-text");this.tabs[_1266.jid]={type:"chat",tab:this.getTabByJID(_1266.jid),contact:_1266};var _126d=function(_126e){this.clearNotification(_126e.jid);this.dialog.setTitle(_126e.name);this._scrollMessageHistory(getEl("jive-tab-"+_126e.jid+"-history"));_126c.dom.focus();}.bind(this,_1266);_126b.addListener("activate",_126d);_126b.addListener("close",function(){this._wrappedFns[tabId].each(function(value){value();});this.fireEvent("tabclosed",_1266,this.tabs[_1266.jid]);delete this._wrappedFns[tabId];delete this.tabs[_1266.jid];}.bind(this));var _1270=function(_1271){this.clearNotification(_1271.jid);}.bind(this,_1266);_126b.el.mon("click",_1270);getEl(getEl(tabId+"-history").dom.parentNode.id).mon("click",_1270);if(_1266.addListener){var _1272=function(_1273,_1274){_126b.textEl.replaceClass("jive-status-"+_1273,"jive-status-"+_1274);};_1266.addListener("status",_1272);_126b.addListener("close",function(){_1266.removeListener("statusChanged",_1272);});}_126b.textEl.addClass("jive-status-"+(_1266.status?_1266.status:"unavailable"));this.dialog.endUpdate();_126d();return true;},preAddMUCChooser:function(){var tabId="jive-tab-mucchooser";if(this.dialog.layout.regions["center"].panels.items[tabId+"-spinner"]){delete this.dialog.layout.regions["center"].panels.items[tabId+"-spinner"];}jive.spank.chat.Template.spinnertab.append(this.bodyId,{tabId:tabId,text:"Loading..."});var _1276=this.dialog.getLayout();this.dialog.beginUpdate();_1276.add("center",new YAHOO.ext.ContentPanel(tabId+"-spinner",{title:"Choose a Conference"}));this.dialog.endUpdate();var _1277=this.getTabs().items[tabId+"-spinner"];_1277.textEl.addClass("jive-muc");var self=this;_1277.addListener("close",function(){delete self.dialog.layout.regions["center"].panels.items[tabId+"-spinner"];});this.tabs["mucchooser"]={type:"muc-spinner",tab:_1277};},addChooseMUCTab:function(_1279){this.dialog.beginUpdate();if(this.tabs["mucchooser"]){this.getTabs().removeTab("jive-tab-mucchooser-spinner");delete this.dialog.layout.regions["center"].panels.items["jive-tab-mucchooser-spinner"];delete this.tabs["mucchooser"];}var tabId=YAHOO.util.Dom.generateId();jive.spank.chat.Template.mucchooser.append(this.bodyId,{tabId:tabId});this._wrappedFns[tabId]=[];var _127b=this._buildMUCChooserGrid(_1279,tabId);var _127c=this.dialog.getLayout();var _127d=new YAHOO.ext.BorderLayout(tabId+"-layout",jive.spank.chat.ChatWindow.chooseMUCConfObject);_127d.add("north",new YAHOO.ext.ContentPanel(tabId+"-toppane"));jive.spank.chat.Template.muc_chooser_top.append(tabId+"-toppane",{tabId:tabId});getEl(tabId+"-createconf").addListener("click",this.fireEvent.createDelegate(this,["createmuc",this]));getEl(tabId+"-refresh").addListener("click",this.fireEvent.createDelegate(this,["refreshmuclist",this]));_127d.add("center",new YAHOO.ext.GridPanel(_127b));_127c.add("center",new YAHOO.ext.NestedLayoutPanel(_127d,{title:"Choose a Conference",closable:true}));var _127e=getEl(tabId+"-roomgrid").getParentByClass("yui-ext-tabitembody").id;var _127f=this.getTabs().items[_127e];_127f.textEl.addClass("jive-muc");var self=this;var _1281=function(){self.dialog.setTitle("Choose a Conference");};_127f.addListener("activate",_1281);_127f.addListener("close",this._wrappedFns[tabId].each.createDelegate(this._wrappedFns[tabId],[function(func){func();}]));this.tabs["muc-chooser-"+tabId]={type:"muc-chooser",tab:_127f};this.dialog.endUpdate();getEl(tabId+"-confcontrols").fitToParent();_1281();},_buildMUCChooserGrid:function(_1283,tabId){var _1285={fields:["name","muc#roominfo_subject","muc#roominfo_occupants"]};var _1286=new YAHOO.ext.grid.SpankJSONDataModel(_1285);var _1287=function(value){if(value.values){return value.values[0];}else{return value;}};_1286.addPreprocessor(1,_1287);_1286.addPreprocessor(2,_1287);_1286.loadData(_1283);var _1289=[{header:"Name",width:240,sortable:true},{header:"Subject",width:160,sortable:true},{header:"Occupants",width:70,sortable:true}];var _128a=new YAHOO.ext.grid.DefaultColumnModel(_1289);var _128b=new YAHOO.ext.grid.Grid(tabId+"-roomgrid",{dataModel:_1286,colModel:_128a,selModel:new YAHOO.ext.grid.SingleSelectionModel(),monitorWindowResize:false,stripeRows:false});_128b.render();this._wrappedFns[tabId].push(_128b.destroy.createDelegate(_128b,[true]));_128b.addListener("rowdblclick",function(grid,_128d,evt){var _128f=evt.findTarget("ylayout-nested-layout").id;var name=grid.getDataModel().getRow(_128d)[0];var jid=grid.getSelectedRowId();this.fireEvent("mucdblclicked",this,jid,name,_128f);}.bind(this));return _128b;},preAddMUC:function(_1292,_1293){var tabId="jive-tab-"+_1292.jid;if(this.dialog.layout.regions["center"].panels.items["jive-tab-"+_1292.jid+"-spinner"]){delete this.dialog.layout.regions["center"].panels.items["jive-tab-"+_1292.jid+"-spinner"];}jive.spank.chat.Template.spinnertab.append(this.bodyId,{tabId:tabId,text:"Joining \""+_1292.name+"\"..."});if(_1293){this.getTabs().removeTab(_1293);}var _1295=this.dialog.getLayout();this.dialog.beginUpdate();_1295.add("center",new YAHOO.ext.ContentPanel(tabId+"-spinner",{title:_1292.name}));this.dialog.endUpdate();var _1296=this.getTabs().items["jive-tab-"+_1292.jid+"-spinner"];_1296.textEl.addClass("jive-muc");var self=this;_1296.addListener("close",function(){delete self.dialog.layout.regions["center"].panels.items["jive-tab-"+_1292.jid+"-spinner"];});this.tabs[_1292.jid]={type:"muc-spinner",tab:_1296};},removeMUCSpinner:function(jid){if(this.tabs[jid]&&this.tabs[jid].type=="muc-spinner"){this.dialog.beginUpdate();delete this.dialog.layout.regions["center"].panels.items["jive-tab-"+jid+"-spinner"];this.getTabs().removeTab(this.tabs[jid].tab.id);delete this.tabs[jid];if(this.dialog.layout.regions["center"].tabs.items.length==0){this.dialog.hide();}else{this.dialog.endUpdate();}}},addMUC:function(_1299,_129a,_129b){var tabId="jive-tab-"+_1299.jid;this.dialog.beginUpdate();if(this.tabs[_1299.jid]&&this.tabs[_1299.jid].type=="muc-spinner"){var tabid=this.tabs[_1299.jid].tab.id;this.getTabs().removeTab(this.tabs[_1299.jid].tab.id);}jive.spank.chat.Template.muctab.append(this.bodyId,{tabId:tabId});var _129e=this.dialog.getLayout();var _129f=new YAHOO.ext.BorderLayout(tabId+"-layout",jive.spank.chat.ChatWindow.mucConfObject);var _12a0=new YAHOO.ext.BorderLayout(tabId+"-sidebarlayout",jive.spank.chat.ChatWindow.mucSidebarConfObject);var topic=new YAHOO.ext.ContentPanel(tabId+"-controls");_129f.add("north",topic);var _12a2=new YAHOO.ext.ContentPanel(tabId+"-history");_129f.add("center",_12a2);_129f=this._layoutTextarea(_129f,tabId,_1299.jid.toString());var _12a3=new YAHOO.ext.ContentPanel(tabId+"-occupants");_12a0.add("center",_12a3);var _12a4=new YAHOO.ext.NestedLayoutPanel(_12a0);_129e.add("east",_12a4);var main=new YAHOO.ext.NestedLayoutPanel(_129f,{title:_1299.name,closable:true});_129e.add("center",main);topic.getEl().dom.parentNode.className+=" jive-topic";_12a2.getEl().dom.parentNode.className+=" jive-chat";_12a3.getEl().dom.parentNode.parentNode.className+=" jive-contact-list";main.getEl().dom.parentNode.className+=" jive-main";_12a4.getEl().dom.parentNode.className+=" jive-sidebar";var _12a6=_129e.regions["east"].getSplitBar();this._wrappedFns[tabId].push(_12a6.destroy.createDelegate(_12a6,[true]));var _12a7=this.getTabByJID(_1299.jid);var _12a8=function(jid,name,_12ab,_12ac){this.clearNotification(jid);this.dialog.setTitle("<h1>"+name+"</h1>");this._scrollMessageHistory(_12ac);_12ab.dom.parentNode.className+=" jive-message-field";_12ab.dom.focus();}.bind(this,_1299.jid,_1299.name,getEl(tabId+"-text"),getEl(tabId+"-history"));_12a7.addListener("activate",_12a8);if(!this.dialog.getLayout().regions["south"]){_12a7.addListener("close",function(){this._wrappedFns[tabId].each(function(value){value();});this.fireEvent("tabclosed",_1299,this.tabs[_1299.jid]);var _12ae=getEl(_1299.jid+"-");if(_12ae){_12ae.remove();}delete this._wrappedFns[tabId];delete this.tabs[_1299.jid];_12a7.purgeListeners();}.bind(this));_12a7.textEl.addClass("jive-muc");}else{jive.spank.chat.Template.muc_subject.append(tabId+"-controls",{jid:_1299.jid});this.tabId=tabId;this.dialog.getLayout().regions["center"].panels.items[0].id=tabId;}var _12af=this.clearNotification.createDelegate(this,[_1299.jid]);_12a7.el.addListener("click",_12af);getEl(getEl(tabId+"-history").dom.parentNode.id).addListener("click",_12af);if(_129b){this._doMucControls(tabId,_1299,_129b.contactsForAutocomp.createDelegate(_129b));}jive.spank.chat.Template.roster.append(tabId+"-occupants",{rosterId:tabId+"-roster",groups:""});_12a7.roster=new jive.spank.roster.Roster(tabId+"-roster");var _12b0={"Participants":(_1299.occupants?_1299.occupants:{})};_12a7.roster.setRoster(_12b0);_12a7.roster.render();_12a7.roster.sortGroups();_12a7.roster._enableBehaviors(false);getEl(tabId+"-text").dom.focus();this.dialog.endUpdate();_12a8();return this.tabs[_1299.jid]={type:"muc-room",tab:_12a7,roster:_12a7.roster,participants:_12a7.roster.groups["Participants"],room:_1299};},_layoutTextarea:function(_12b1,tabId,_12b3){_12b1.add("south",new YAHOO.ext.ContentPanel(tabId+"-text"));var _12b4=getEl(tabId+"-text");this._wrappedFns[tabId]=[];var _12b5=_12b1.regions["south"].getSplitBar();this._wrappedFns[tabId].push(_12b5.destroy.createDelegate(_12b5,[true]));var _12b6=_12b4.fitToParent.createDelegate(_12b4);_12b1.delayedListener("regionresized",_12b6,100);this._wrappedFns[tabId].push(_12b1.purgeListeners.createDelegate(_12b1));this.dialog.addListener("resize",_12b6);this._wrappedFns[tabId].push(this.dialog.removeListener.createDelegate(this.dialog,["resize",_12b6]));window.setTimeout(_12b6,1000);var _12b7=_12b4.mon("keypress",function(evt){if(evt.getKey()==13&&!evt.shiftKey&&this.getMessage()!=""){this.fireEvent("message",_12b3,this.getMessage());window.setTimeout(function(){this.dom.value="";}.bind(_12b4),10);evt.preventDefault();}else{if(evt.getKey()==9){this.fireEvent("nickcomplete",_12b3,this.getMessage(),_12b4);evt.preventDefault();}if(evt.getKey()==13){return;}this.fireEvent("input",_12b3);}}.bind(this));this._wrappedFns[tabId].push(YAHOO.ext.EventManager.removeListener.createDelegate(YAHOO.ext.EventManager,["keypress",_12b4,_12b7]));_12b7=_12b4.mon("focus",function(){var jid=this.getActiveTabJID();this.clearNotification(jid);jive.spank.chat.ChatWindow.focusedJID=jid;}.bind(this));this._wrappedFns[tabId].push(YAHOO.ext.EventManager.removeListener.createDelegate(YAHOO.ext.EventManager,["focus",_12b4,_12b7]));_12b7=_12b4.mon("blur",function(){jive.spank.chat.ChatWindow.focusedJID="";});this._wrappedFns[tabId].push(YAHOO.ext.EventManager.removeListener.createDelegate(YAHOO.ext.EventManager,["blur",_12b4,_12b7]));return _12b1;},_doMucControls:function(tabId,room,_12bc){jive.spank.chat.Template.muc_controls.append(tabId+"-controls",{jid:room.jid});jive.spank.chat.Template.mucinvitemenu.append(document.body,{jid:room.jid});var _12bd=getEl(room.jid+"-container");_12bd.hide();this._wrappedFns[tabId].push(_12bd.remove.createDelegate(_12bd));var _12be=new jive.spank.AutoComplete(room.jid+"-autocomp",room.jid+"-autocomp-menu",new YAHOO.widget.DS_JSFunction(_12bc),{typeAhead:true,autoHighlight:true,minQueryLength:0,maxResultsDisplayed:20});_12be.formatResult=function(_12bf,_12c0){return "<div class='roster-contact-"+_12bf[2]+"'>"+_12bf[0]+"</div>";};var jid=room.jid;var self=this;_12be.itemSelectEvent.subscribe(function(type,args){self.fireEvent("mucinvitation",self,args[2][1].toString(),jid);getEl(jid+"-autocomp").dom.blur();});var _12c5=getEl(jid+"-control");_12c5.mon("click",function(_12c6,_12c7,_12c8,_12c9){_12c6.invitee="";var entry=_12c7.getChildrenByTagName("input")[0];entry.setWidth(_12c7.getWidth()-2);entry.dom.value="";_12c7.alignTo(this,"bl");_12c7.show();_12c7.setStyle("z-index",self.dialog.lastZIndex+1);entry.dom.focus();_12be._populateList("",_12c9(),_12be);_12c7.repaint();}.createDelegate(_12c5,[this,getEl(room.jid+"-container"),_12be,_12bc]));var _12cb=getEl(jid+"-autocomp");_12cb.mon("keypress",function(_12cc,jid,_12ce,evt){if(evt.getKey()==13){evt.preventDefault();var _12d0=_12ce().detect(function(text,value){return text==value[0];}.bind(this,_12cc.dom.value));if(!_12d0){_12d0=_12cc.dom.value;}else{_12d0=_12d0[1].toString();}this.fireEvent("mucinvitation",this,_12d0,jid);getEl(jid+"-container").hide();getEl("jive-tab-"+this.getActiveTabJID()+"-text").dom.focus();}}.bind(this,_12cb,jid,_12bc));_12cb.addListener("blur",function(){window.setTimeout("getEl('"+jid+"-container').hide();",200);getEl("jive-tab-"+self.getActiveTabJID()+"-text").dom.focus();});getEl(jid+"-changenick").addListener("click",function(){var _12d3=self.dialog.getLayout().getRegion("south")?{x:self.dialog.el.getX()+125,y:self.dialog.el.getY()+140}:null;self.showChangeNick(room,_12d3);});},showMUCPassword:function(_12d4,_12d5,_12d6){_12d5=$H(_12d5).merge({title:"Enter the password for '"+_12d4.name+"'",width:285,height:105});var _12d7=new jive.spank.chat.Dialog(this,jive.spank.chat.Template.mucpassword,_12d5);_12d7.dialog.show();var self=this;var _12d9=false;var _12da=function(){var _12db=$F(_12d7.id+"-passwd");_12d6(_12db);_12d9=true;_12d7.dialog.hide();};_12d7.dialog.addListener("hide",function(){if(!_12d9){_12d6(null);}});getEl(_12d7.id+"-passwd").mon("keypress",_12da.createInterceptor(function(evt){return evt.getKey()==13;}));getEl(_12d7.id+"-sendsecret").addListener("click",_12da);getEl(_12d7.id+"-passwd").dom.focus();},addMessage:function(jid,from,_12df,_12e0){var _12e1=getEl("jive-tab-"+jid+"-history");if(_12df.body){var _12e2="";if(_12df.time){_12e2="offline";}else{var _12e3=new Date();_12df.time=_12e3.toLocaleTimeString();}var type=(_12df.isLocal?"user":"contact");var _12e5=(_12df.mentioned?"mentioned":"");var body=jive.spank.chat.Filter.applyAll(_12df.body);var _12e7=jive.spank.chat.Template.message.append(_12e1.id,{from:from,message:body,type:type,mentioned:_12e5,time:_12df.time,msgclass:_12e2});}else{_12e1.dom.appendChild(_12df.el);_12df.callback(this);}this._scrollMessageHistory(_12e1);var _12e8=jive.spank.chat.ChatWindow.focusedJID;if(_12e8!=jid){this.addNotification(jid);}},addStatusMessage:function(jid,_12ea){var _12eb=getEl("jive-tab-"+jid+"-history");var _12ec=jive.spank.chat.Template.statusMessage.append(_12eb.id,{message:_12ea});this._scrollMessageHistory(_12eb);},_scrollMessageHistory:function(_12ed){_12ed.dom.parentNode.scrollTop=_12ed.getHeight()-_12ed.dom.parentNode.clientHeight;},addNotification:function(jid){var _12ef=this.getTabByJID(jid);if(typeof this.newMessages[jid]=="undefined"){this.newMessages[jid]=1;}else{this.newMessages[jid]++;}if(_12ef&&_12ef.textEl){_12ef.textEl.addClass("jive-notify");}if(this.notificationInterval&&!this.notificationInterval[jid]){var _12f0=this.bodyId;this.notificationInterval=window.setInterval(function(){getEls("#"+_12f0+" span.jive-notify").toggleClass("flashNotify");},1000);}else{getEls("#"+this.bodyId+" span.jive-notify").addClass("flashNotify");}jive.spank.notifier.doTitleNotify();if(_12ef&&_12ef.text){if(/ \(\d+\)$/.test(_12ef.text)){_12ef.setText(_12ef.text.replace(/ \(\d+\)$/,""));}_12ef.setText(_12ef.text+" ("+this.newMessages[jid]+")");}},clearNotification:function(jid){var _12f2=this.getTabByJID(jid);if(_12f2&&_12f2.textEl){_12f2.textEl.removeClass("jive-notify").removeClass("flashNotify");_12f2.setText(_12f2.text.replace(/ \(\d+\)$/,""));}delete this.newMessages[jid];if(this.notificationInterval&&this.notificationInterval[jid]&&this.newMessages.properties&&this.newMessages.properties.length==0){window.clearInterval(this.notificationInterval[jid]);this.notificationInterval[jid]=null;}jive.spank.notifier.doTitleNotify();},clearAllNotifications:function(){var _12f3=getEls("#"+this.bodyId+" span.jive-notify");_12f3.removeClass("jive-notify");window.clearInterval(this.notificationInterval);this.notificationInterval=null;_12f3.removeClass("flashNotify");this.newMessages={};jive.spank.notifier.doTitleNotify();},getMessage:function(){var _12f4=this.getTabs()?this.getTabs().active:this._tabIfSingleTab();var _12f5=_12f4.id.split("-");_12f5[3]="text";var _12f6=_12f5.join("-");return getEl(_12f6).dom.value;},getActiveTabJID:function(){var _12f7=this.getTabs()?this.getTabs().active:this._tabIfSingleTab();return _12f7.id.split("-")[2];},getTabJID:function(id){var _12f9=this.getTabs()?this.getTabs().getTab(id):this._tabIfSingleTab();return _12f9.id.split("-")[2];},getTabs:function(){var _12fa=this.dialog.getLayout().regions;return _12fa["center"].getTabs();},getTabByJID:function(jid){var guys=this.getTabs();if(guys!=null){var tabb=guys.items["jive-tab-"+jid+"-layout"];return (typeof tabb=="undefined")?null:tabb;}else{return this._tabIfSingleTab();}},_tabIfSingleTab:function(){return this.dialog.getLayout().regions["center"].panels.items[0];},removeAllTabs:function(){var tabs=this.getTabs();if(!tabs){return;}for(var i=tabs.getCount()-1;i>=0;i--){tabs.getTab(i).closeClick();}delete this.tabs;this.tabs={};},destroy:function(){this.clearAllNotifications();jive.spank.chat.ChatWindow.superclass.destroy.call(this);delete this.tabs;},hide:function(){this.clearAllNotifications();jive.spank.chat.ChatWindow.superclass.hide.call(this);},getContactTab:function(_1300,focus){if(typeof _1300=="string"){var jid=_1300;_1300={name:jid,jid:jid};}var _1303=this.getTabs();var convo;if(_1303){convo=_1303.getTab("jive-tab-"+_1300.jid+"-layout");}if(typeof convo=="undefined"){this.addTab(_1300);}if(focus){this.focusContactTab(_1300);}},focusContactTab:function(_1305){var _1306=this.getTabs();_1306.activate("jive-tab-"+_1305.jid+"-layout");var _1307=getEl("jive-tab-"+_1305.jid+"-text");_1307.dom.focus();},prepUserPane:function(){var _1308=this.dialog.getLayout().getRegion("east").getPanel(0).getLayout();jive.spank.chat.Template.userpane.append(this.bodyId+"-toppane",{id:this.bodyId});this.dialog.beginUpdate();var _1309=new YAHOO.ext.ContentPanel(this.bodyId+"-toppane");_1308.add("north",_1309);_1309.getEl().dom.parentNode.className+=" jive-user-controls";this.dialog.endUpdate();},finalizeUserPane:function(uname){jive.spank.chat.Template.userpane_loggedin.append(this.bodyId+"-message",{id:this.bodyId,uname:uname});var input=getEl(this.bodyId+"-uname");var _130c=input.dom;var _130d=function(){this.className=this.className.replace("jive-muc-username","jive-muc-username-active");}.bind(_130c);var _130e=function(){this.className=this.className.replace("jive-muc-username-active","jive-muc-username");}.bind(_130c);var _130f=function(evt){if(evt.keyCode==13||evt.type=="blur"){var _1311=this.tabId.split("-")[2];var room=this.tabs[_1311].room;this.fireEvent("changenameinmuc",this,room.jid,getEl(this.bodyId+"-uname").dom.value);_130e();}};getEl(this.bodyId+"-uname").addListener("keydown",_130f.bind(this));_130c.onfocus=_130d;_130c.onblur=_130f.bind(this);},setSubject:function(_1313,_1314){var _1315=getEl((this.tabId?this.tabId:"jive-tab-"+_1314)+"-subject");if(_1315&&_1315.dom){_1315.dom.innerHTML=_1313;}}});jive.spank.chat.ChatWindow.getWindow=function(_1316){return jive.spank.chat.ChatWindow.currentWindow[_1316];};jive.spank.chat.ChatWindow.createWindow=function(){var _1317=spank.loadComponent("chat");jive.spank.chat.ChatWindow.currentWindow[_1317.id]=_1317;_1317.dialog.addListener("hide",function(){delete jive.spank.chat.ChatWindow.currentWindow[_1317.id];});return _1317;};jive.spank.chat.ChatWindow.destroyWindow=function(_1318){if(jive.spank.chat.ChatWindow.currentWindow[_1318]){jive.spank.chat.ChatWindow.currentWindow[_1318].hide();delete jive.spank.chat.ChatWindow.currentWindow[_1318];}};jive.spank.chat.ChatWindow.tabConfObject={north:{initialSize:72},south:{split:true,initialSize:50,minSize:50,maxSize:200,autoScroll:false,collapsible:true},center:{autoScroll:true}};jive.spank.chat.ChatWindow.chooseMUCConfObject={north:{initialSize:50},center:{autoScroll:true}};jive.spank.chat.ChatWindow.mucSidebarConfObject={north:{initialSize:38,margins:{top:0,left:0,right:0,bottom:10}},center:{initialSize:50,minSize:50,maxSize:200,autoScroll:true,collapsible:true}};jive.spank.chat.ChatWindow.mucConfObject={north:{initialSize:38,margins:{top:0,left:0,right:0,bottom:10}},center:{autoScroll:true},south:{split:true,initialSize:50,minSize:50,maxSize:200,autoScroll:false,collapsible:true}};jive.spank.chat.ChatWindow.currentWindow={};jive.spank.chat.ChatWindow.focusedJID="";jive.spank.roster={};jive.spank.roster.RosterWindow=function(id,_131a){var width=_131a["width"]?_131a["width"]:310;var _131c=_131a["height"]?_131a["height"]:YAHOO.util.Dom.getViewportHeight()-40;var x=_131a["x"]?_131a["x"]:YAHOO.util.Dom.getViewportWidth()-330;var y=_131a["y"]?_131a["y"]:20;var _131f=_131a["resizable"]!="false";var _1320=_131a["draggable"]!="false";var _1321=_131a["closable"]!="false";this.roster=null;this.groups=null;this.controls={};this.controlCount=0;var conf={modal:false,width:width,height:_131c,resizable:_131f,draggable:_1320,proxyDrag:true,shadow:false,minWidth:200,minHeight:150,x:x,y:y,closable:_1321,shim:false,north:{initialSize:50,autoScroll:false},center:{closeOnTab:true,alwaysShowTabs:false,autoTabs:true}};this.events={"changestatus":true,"setstatusmsgrequest":true,"addcontact":true,"acceptsubscription":true,"denysubscription":true,"renamecontact":true,"renamegroup":true,"removecontact":true,"removegroup":true,"close":true};jive.spank.roster.RosterWindow.superclass.constructor.call(this,id,"Spark Web",conf);var _1323=this.dialog.getLayout();this.dialog.beginUpdate();_1323.add("north",new YAHOO.ext.ContentPanel(this.bodyId+"-toppane"));this.dialog.endUpdate();this.dialog.close.removeAllListeners();this.dialog.close.addListener("click",function(){if(confirm("Are you sure you want to close the connection?\n('OK' to logout, 'Cancel' to stay connected.)")){this.dialog.hide();this.fireEvent("close",this);}}.bind(this));this._prepContextMenus();};YAHOO.extend(jive.spank.roster.RosterWindow,jive.spank.Window,{needsUpdate:false,addTab:function(title){var tabId=YAHOO.util.Dom.generateId();jive.spank.chat.Template.rostertab.append(this.bodyId,{tabId:tabId});var _1326=this.dialog.getLayout();this.dialog.beginUpdate();var _1327=new YAHOO.ext.BorderLayout(tabId+"-layout",{north:{split:false,initialSize:28,autoScroll:false},center:{autoScroll:true}});_1327.add("center",new YAHOO.ext.ContentPanel(tabId+"-resources"));jive.spank.chat.Template.roster.append(tabId+"-resources",{rosterId:"jive-roster",groups:""});_1327.add("north",new YAHOO.ext.ContentPanel(tabId+"-user"));jive.spank.chat.Template.control_panel.append(tabId+"-user",{tabId:tabId});this.controlPanel=_1327.regions["north"];this.controlPanel.hide();_1326.add("center",new YAHOO.ext.NestedLayoutPanel(_1327,{title:title}));this.dialog.endUpdate();this.tabs[title]=tabId;},_prepUserStatusPanel:function(_1328,_1329){var elm=getEl(this.bodyId+"-toppane");jive.spank.chat.Template.status_panel.append(elm.id,{bodyId:this.bodyId,username:_1328,status:_1329,statusName:_1329.toLowerCase()});var _132b=new YAHOO.widget.Menu("jive-statusmenu");_132b.addItems([[{text:"Free to Chat"},{text:"Available"},{text:"On The Road"},{text:"Away"},{text:"On Phone"},{text:"Do Not Disturb"}],[{text:"Set status message...",disabled:true}]]);_132b.render(document.body);var self=this;var _132d=function(_132e,_132f,_1330){this.fireEvent("changestatus",this,_1330);};var _1331=function(){self.fireEvent("setstatusmsgrequest",self);};var _1332;var _1333=["chat","available","onroad","away","onphone","dnd"];for(var i=0;i<6;i++){_1332=_132b.getItem(i);_1332.element.className+=" roster-contact-"+_1333[i];_1332.clickEvent.subscribe(_132d,_1333[i],self);}getEl(this.bodyId+"-statusmenu-ctrl").addListener("click",function(){getEl(_132b.element).alignTo(this,"bl");_132b.element.style.zIndex=self.dialog.lastZIndex+1;_132b.show();});var _1335=function(){_132b.hide();};this.dialog.header.addListener("click",_1335);for(var _1336 in jive.spank.chat.ChatWindow.currentWindow){jive.spank.chat.ChatWindow.currentWindow[_1336].dialog.header.addListener("click",_1335);}},_prepContextMenus:function(){if(!getEl("contact-conmenu")){this.addMenuDiv("contact-conmenu");}this.contactMenu=new YAHOO.widget.Menu("contact-conmenu",{lazyLoad:true});if(this.contactMenu.getItemGroups().length==0){this.contactMenu.addItems([{text:"Start Chat"},{text:"Rename Contact"},{text:"Remove Contact"}]);this.contactMenu.render(document.body);}var self=this;var _1338=function(type,args){self.contactMenu.clickedContact.group._roster.fireEvent("contactdblclicked",self.contactMenu.clickedContact.group._roster,self.contactMenu.clickedContact);};this.contactMenu.getItem(0).clickEvent.subscribe(_1338);this.contactMenu.getItem(1).clickEvent.subscribe(this.showRename.createDelegate(this,[self.contactMenu.clickedContact]),this);this.contactMenu.getItem(2).clickEvent.subscribe(this.showRemove.createDelegate(this,[self.contactMenu.clickedContact]),this);if(!getEl("group-conmenu")){this.addMenuDiv("group-conmenu");}this.groupMenu=new YAHOO.widget.Menu("group-conmenu",{lazyLoad:true});if(this.groupMenu.getItemGroups().length==0){this.groupMenu.addItems([{text:"Rename Group"},{text:"Remove Group"}]);}this.groupMenu.render(document.body);this.groupMenu.getItem(0).clickEvent.subscribe(this.showGroupRename.bind(this,this.fetchClickedGroup.bind(this)));this.groupMenu.getItem(1).clickEvent.subscribe(this.showGroupRemove.bind(this,this.fetchClickedGroup.bind(this)));},setUserInfo:function(user,_133c){var _133d;if(arguments.length>1){_133d=user;}else{_133d=user.name;_133c=(user.status?user.status:user.mode);}this.dialog.setTitle("Spark Web - "+_133d);this._prepUserStatusPanel(_133d,_133c);},addGroup:function(_133e,_133f){this.roster.addGroup(_133e,_133f);},addControl:function(_1340,_1341){this.controls[_1340]=jive.spank.chat.Control.add(this.tabs["Contacts"]+"-controls",_1340,_1341);this.controlCount++;if(!this.controlPanel.isVisible()){this.controlPanel.show();}return this.controls[_1340];},removeControl:function(_1342){if(this.controls[_1342]){this.controls[_1342].remove();delete this.controls[_1342];}this.controlCount--;},setRoster:function(_1343){if(_1343==null){_1343=this.fakeRosterStruct;}this.roster=new jive.spank.roster.Roster("jive-roster",true);this.groups=this.roster.groups;this.roster.setRoster(_1343);this.render();this.roster.addListener("offlinemoved",function(){if(!this.isUpdating){this.render(true);}else{this.needsUpdate=true;}},this,1);},getSelectedUser:function(){return this.roster.getSelectedUser();},getContactFromID:function(idStr){var parts=idStr.split("-");var cJid=parts.slice(2,parts.length-1).join("");return jive.spank.roster.Contact.find(this,cJid,parts[parts.length-1]);},render:function(_1347){var tabId=this.tabs["Contacts"];this.roster.render();this.needsUpdate=false;this.dialog.addListener("show",this.finishDisplay,this,true);if(_1347){this.finishDisplay();}},finishDisplay:function(){this.roster.sortGroups();this.roster.renderOffline();this.roster._enableBehaviors();this.enableContextMenus();},enableContextMenus:function(){getEls("ul#jive-roster ul.group-list li").mon("contextmenu",function(evt){evt.stopEvent();var _134a=evt.getTarget();if(_134a.tagName.toLowerCase()!="li"){_134a=_134a.parentNode;}this.contactMenu.clickedContact=this.getContactFromID(_134a.id);var _134b=_134a.id;getEls("ul.jive-roster ul.group-list li").removeClass("selected");document.getElementById(_134b).className+=" selected";getEl(this.contactMenu.element).moveTo(evt.getPageX(),evt.getPageY());this.contactMenu.element.style.zIndex=this.dialog.lastZIndex+1;this.contactMenu.show();},this,true);getEls("ul#jive-roster span.group-isonline em").mon("contextmenu",function(evt){evt.stopEvent();var _134d=evt.getTarget();this.groupMenu.clickedGroup=this.groups[_134d.innerHTML];getEl(this.groupMenu.element).moveTo(evt.getPageX(),evt.getPageY());this.groupMenu.element.style.zIndex=this.dialog.lastZIndex+1;this.groupMenu.show();},this,true);try{getEls("li#group-Offline_Group-jive-roster span.group-label em").mon("contextmenu",function(evt){evt.stopEvent();});}catch(error){}},addContact:function(_134f,_1350,group){this.roster.addContact(_134f,_1350,group);this.render(true);},removeContact:function(jid){this.roster.removeContact(jid);},changeUserStatus:function(_1353,_1354){var menu=getEl(this.bodyId+"-statusmenu-ctrl");var _1356={chat:"Free to Chat",available:"Available",onroad:"On Road",away:"Away",onphone:"On Phone",dnd:"Do Not Disturb"};menu.dom.className=menu.dom.className.replace(/roster-contact-([^ ]*)/,"roster-contact-"+_1353);menu.getChildrenByTagName("span")[0].dom.innerHTML=(_1354!=null?_1354:_1356[_1353]);},changeContactStatus:function(jid,_1358,_1359){this.roster.changeContactStatus(jid,_1358,_1359);},getContactStatus:function(jid){return this.roster.getContactStatus(jid);},showAddGroup:function(){var self=this;var addg=new jive.spank.chat.Dialog(self,jive.spank.chat.Template.add_group,{title:"Add Group",width:280,height:140,yOffset:125});addg.dialog.show();getEl(addg.id+"-creategroup").addListener("click",function(){self.fireEvent("addgroup",self,$F(addg.id+"-addgroupname"));addg.dialog.hide();});},showAddContact:function(){var self=this;var addc=new jive.spank.chat.Dialog(self,jive.spank.chat.Template.add_contact,{title:"Add Contact",width:280,height:155});addc.dialog.show();this._autocompGroups(addc,"-addcontact-group");$(addc.id+"-addusername").focus();getEl(addc.id+"-createcontact").addListener("click",function(){self.fireEvent("addcontact",self,$F(addc.id+"-addusername"),$F(addc.id+"-addnickname"),$F(addc.id+"-addcontact-group"));addc.dialog.hide();});},showSubscriptionRequest:function(_135f,_1360){var self=this;var subr=new jive.spank.chat.Dialog(self,jive.spank.chat.Template.sub_request,{title:"Allow "+(_1360!=""?_1360:_135f)+" to add you?",width:440,height:220,templateKeys:{jid:_135f,nick:_1360}});subr.dialog.show();this._autocompGroups(subr,"-subrequest-group");getEl(subr.id+"-add").addListener("click",function(){getEls("#"+subr.id+" label").toggleClass("disabled");getEl(subr.id+"-jid").toggleClass("disabled");getEl(subr.id+"-nick").dom.disabled=getEl(subr.id+"-subrequest-group").dom.disabled=!getEl(subr.id+"-add").dom.checked;});getEl(subr.id+"-acceptsubrequest").addListener("click",function(){self.fireEvent("acceptsubscription",self,$F(subr.id+"-add"),_135f,$F(subr.id+"-nick"),$F(subr.id+"-subrequest-group"));subr.dialog.hide();});getEl(subr.id+"-denysubrequest").addListener("click",function(){self.fireEvent("denysubscription",self,$F(subr.id+"-add"),_135f,$F(subr.id+"-nick"),$F(subr.id+"-subrequest-group"));subr.dialog.hide();});},showRename:function(_1363){if(_1363==null){_1363=this.contactMenu.clickedContact;}var _1364=new jive.spank.chat.Dialog(self,jive.spank.chat.Template.rename,{title:"Renaming '"+_1363.name+"'",width:250,height:115,templateKeys:{nick:_1363.name}});_1364.dialog.show();var self=this;var _1366=function(){var _1367=(typeof _1363.jid!="undefined")?"renamecontact":"renamegroup";self.fireEvent(_1367,self,_1363,$F(_1364.id+"-name"));getEl(_1364.id+"-rename").removeAllListeners();_1364.dialog.hide();};getEl(_1364.id+"-name").mon("keypress",_1366.createInterceptor(function(evt){return evt.getKey()==13;}));getEl(_1364.id+"-rename").addListener("click",_1366);},showRemove:function(_1369){this.fireEvent("removecontact",this,this.contactMenu.clickedContact.jid.toString());},showGroupRename:function(_136a){var _136b=_136a();this.showRename(_136b);},fetchClickedGroup:function(){return this.groupMenu.clickedGroup;},showGroupRemove:function(_136c){var _136d=_136c();var _136e=new jive.spank.chat.Dialog(this,jive.spank.chat.Template.remove_group,{title:"Removing '"+_136d.name+"'",width:250,height:100,templateKeys:{name:_136d.name}});_136e.dialog.show();var self=this;var _1370=function(){self.fireEvent("removegroup",self,_136d);getEl(_136e.id+"-remove").removeAllListeners();_136e.dialog.hide();};getEl(_136e.id+"-remove").addListener("click",_1370);},_autocompGroups:function(dlog,_1372){var _1373=dlog.id+_1372;var _1374=_1373+"-menu";var self=this;if(getEl(_1374)==null){var _1376=self.addMenuDiv(_1374);_1376.className="groups-ac";}var _1377=function(query){var _1379=[];for(var g in self.roster.groups){_1379.push(g);}return self._prepareAutocompArray(_1379,query);};var _137b=new jive.spank.FlatAutoComplete(_1373,_1374,new YAHOO.widget.DS_JSFunction(_1377),{typeAhead:true,minQueryLength:0});_137b.formatResult=function(_137c,_137d){return _137c;};_137b.dataReturnEvent.subscribe(function(type,args){if(args[2].length==0){_137b.setBody("<div class='empty'>(No matches, will create new)</div>");}var thelm=getEl(_1374);thelm.alignTo(getEl(_1373),"bl");thelm.dom.style.zIndex=dlog.dialog.lastZIndex+1;thelm.show();});getEl(_1373).addListener("blur",function(){getEl(_1374).hide();});getEls("#"+_1374+" li").mon("mousedown",function(evt){getEl(_1373).dom.value=evt.getTarget().innerHTML;});dlog.dialog.addListener("beforehide",function(){_137b.formatResult=Prototype.emptyFunction;_1377=Prototype.emptyFunction;getEl(_1374).removeAllListeners();getEl(_1373).removeAllListeners();_137b.dataReturnEvent.unsubscribeAll();getEls("#"+_1374+" li").removeAllListeners();getEl(_1374).remove();});return _137b;},contactsForAutocomp:function(query){var _1383=this.roster;var _1384=[];for(var g in _1383.groups){_1383.groups[g].contacts.each(function(ctact){_1384.push([ctact.name,ctact.jid,ctact.status]);});}return this._prepareAutocompArray(_1384,query);},_prepareAutocompArray:function(_1387,query){var _1389=typeof _1387[0]!="string";if(_1389&&_1387.length==0){return _1387;}_1387=_1387.sortBy(function(_138a){if(_1389){return _138a[0].toLowerCase();}else{return _138a.toLowerCase();}});if(_1387.length<2||!query||query==""){return _1387;}else{var _138b=_1387.partition(function(_138c){return (_1389?_138c[0].indexOf(query)==0:_138c.indexOf(query)==0);});return _138b[0].concat(_138b[1]);}},addMenuDiv:function(divId){var _138e=document.createElement("div");_138e.id=divId;_138e.style.visibility="hidden";document.body.appendChild(_138e);return _138e;},endUpdate:function(){if(this.needsUpdate){this.render(true);}jive.spank.roster.RosterWindow.superclass.endUpdate.call(this);},destroy:function(){jive.spank.roster.RosterWindow.superclass.destroy.call(this);}});jive.spank.chat.Dialog=function(_138f,_1390,_1391){this.parentWindow=_138f;var elm=document.createElement("div");this.id=elm.id=YAHOO.util.Dom.generateId();document.body.appendChild(elm);var _1393=!_1391.constrained;jive.spank.chat.Dialog.superclass.constructor.call(this,elm.id,{title:_1391.title,modal:_1391.modal,constraintoviewport:_1393,width:_1391.width,height:_1391.height,shadow:true,proxyDrag:true,resizable:false,draggable:true,x:_1391.x?_1391.x:(YAHOO.util.Dom.getViewportWidth()/2)-(_1391.width>0?(_1391.width/2):0),y:_1391.y?_1391.y:(YAHOO.util.Dom.getViewportHeight()/2)-(_1391.height>0?_1391.height/2:0),closable:true});this.dialog=this;if(_1391.templateKeys){var _1394=_1391.templateKeys;_1394.id=this.id;_1390.append(this.body.dom,_1394);}else{_1390.append(this.body.dom,{id:this.id});}getEls("#"+this.id+" .jive-closedialog").addListener("click",this.hide.bind(this));this.addListener("hide",this.destroy.bind(this));};YAHOO.extend(jive.spank.chat.Dialog,YAHOO.ext.BasicDialog,{destroy:function(){jive.spank.chat.Dialog.superclass.destroy(this,true);this.proxy.remove();this.shadow.remove();if(this.mask){this.mask.remove();}this.purgeListeners();}});jive.spank.dialog={};jive.spank.dialog.StartChat=function(_1395){var _1396=new jive.spank.chat.Dialog(this,jive.spank.chat.Template.start_chat,{title:"Start a chat",width:250,height:105});_1396.dialog.show();var _1397=function(){var _1398=$F(_1396.id+"-jid");if(_1398.replace(/^\s+|\s+$/g,"")!=""){_1395(this,{jid:_1398});getEl(_1396.id+"-startbtn").removeAllListeners();_1396.dialog.hide();}else{$(_1396.id).focus();}};$(_1396.id+"-jid").focus();getEl(_1396.id+"-startbtn").addListener("click",_1397);};jive.spank.dialog.CreateConference=function(_1399,_139a){if(!_139a){_139a={};}_139a=$H(_139a).merge(this._configuration);jive.spank.dialog.CreateConference.superclass.constructor.call(this,_1399,jive.spank.chat.Template.muccreation,_139a);this.events=$H(this.events).merge({"muccreated":true});this.addListener("hide",this.onHide.bind(this));getEl(this.id+"-private").addListener("click",this._privateCheckboxListener.bind(this));getEl(this.id+"-createroom").addListener("click",this._createRoomListener.bind(this));};YAHOO.extend(jive.spank.dialog.CreateConference,jive.spank.chat.Dialog,{_configuration:{title:"Create a Conference",width:285,height:285},_createRoomListener:function(){var _139b=getEl(this.id+"-private");var _139c=$F(this.id+"-roompw");var _139d=$F(this.id+"-roomconfirm");if(_139b.dom.checked&&_139c!=_139d){alert("Sorry, your password and confirmation don't match.");$(this.id+"-roompw").select();return false;}this.fireEvent("muccreated",this,this.getValues());},_privateCheckboxListener:function(){getEls("#"+this.id+" .fieldset label").toggleClass("disabled");getEl(this.id+"-roompw").dom.disabled=getEl(this.id+"-roomconfirm").dom.disabled=!getEl(this.id+"-private").dom.checked;},focus:function(){getEl(this.id+"-roomname").dom.focus();},getValues:function(){return {name:$F(this.id+"-roomname"),topic:$F(this.id+"-roomtopic"),isPermanent:$(this.id+"-permanent").checked,isPrivate:$(this.id+"-private").checked,password:$F(this.id+"-roompw"),confirmPassowrd:$F(this.id+"-roomconfirm")};},onHide:function(){getEl(this.id+"-private").removeAllListeners();getEl(this.id+"-createroom").removeAllListeners();}});jive.spank.dialog.UserSearch=function(_139e,_139f,_13a0){if(!_13a0){_13a0={};}_13a0.templateKeys={instructions:"Insert your instructions here."};_13a0=$H(_13a0).merge(this._configuration);var _13a1=this._createTemplate(_139f);jive.spank.dialog.UserSearch.superclass.constructor.call(this,_139e,_13a1,_13a0);this.events=$H(this.events).merge({"search":true});this.addListener("hide",this.onHide.bind(this));this.addListener("show",this.onShow.bind(this));this._buildSearchGrid([["test","test","test"],["test","test","test"]],this.id+"-search-grid");this.onShow();this.searchGrid.render();};YAHOO.extend(jive.spank.dialog.UserSearch,jive.spank.chat.Dialog,{_configuration:{title:"Person Search"},_template:["<div id=\"{id}-person-search\" class=\"dbody personsearch\">","<div class=\"jive-dbody-description\">","<h1>Person Search</h1>","<p>{instructions}</p>","</div>","<div class=\"\">","<fieldset>","<legend>Search Service</legend>","<p><label for=\"service\">Search Service</label>","<select name=\"selectservice\" tabindex=\"{firstTabIndex}\">","</select>","<a href=\"#\">Add Service</a>","</p>","</fieldset>","</div>","<div class=\"\">","<fieldset>","<legend>Person Search Form</legend>","{searchform}","<p class=\"buttons\"><input type=\"submit\" value=\"Search\" tabindex=\"{lastTabIndex}\"/></p>","</fieldset>","</div>","<div id=\"{id}-search-grid\" class=\"jive-grid\">","</div>","</div>"],_createTemplate:function(_13a2){_13a2=["<p><input name=\"Username\" type=\"checkbox\" value=\"Username\" checked","/>Username</p>","<p><label for=\"testdrop\">Test Dropdown</label>","<select id=\"testdrop\" name=\"testdrop\">","<option>test 1</option>","<option>test 2</option>","<option>test 3</option>","</select>","</p>"];var _13a3=this._template;var index=_13a3.indexOf("{searchform}");_13a3.splice(index,1,_13a2.join(""));return new YAHOO.ext.DomHelper.Template(_13a3.join(""));},onHide:function(){this.searchGrid.destroy();},onShow:function(){var _13a5=getEl(this.id+"-person-search");var width=Math.max(this.body.getWidth(),_13a5.getWidth());this.resizeTo(500,500);},_buildSearchGrid:function(_13a7,_13a8){var _13a9={fields:["name","muc#roominfo_subject","muc#roominfo_occupants"]};var _13aa=new YAHOO.ext.grid.DefaultDataModel(_13a7);var _13ab=[{header:"Username",width:240,sortable:true},{header:"Name",width:160,sortable:true},{header:"E-Mail",width:70,sortable:true}];var _13ac=new YAHOO.ext.grid.DefaultColumnModel(_13ab);this.searchGrid=new YAHOO.ext.grid.Grid(_13a8,{dataModel:_13aa,colModel:_13ac,selModel:new YAHOO.ext.grid.SingleSelectionModel(),monitorWindowResize:false,stripeRows:false});return this.searchGrid;}});jive.spank.dialog.CreateAccount=function(_13ad){this.dialog=new jive.spank.chat.Dialog(null,jive.spank.chat.Template.create_account,{title:"Creating an account",width:250,height:180,modal:true});var _13ae=this.dialog;this.nameField=getEl(_13ae.id+"-name");this.passwordField=getEl(_13ae.id+"-passwd");this.createButton=getEl(_13ae.id+"-submit");this.verifyCallback=_13ad;getEl(_13ae.id+"-confirm").mon("keypress",this._doSubmit.createInterceptor(function(evt){return evt.getKey()==13;}));getEl(_13ae.id+"-submit").addListener("click",this._doSubmit.bind(this));this.nameField.mon("keypress",function(){this.dom.style.backgroundColor="#fff";}.bind(this.nameField));this.passwordField.mon("keypress",function(){this.dom.style.backgroundColor="#fff";}.bind(this.passwordField));this.nameField.dom.focus();_13ae.dialog.show();};jive.spank.dialog.CreateAccount.prototype={_doSubmit:function(){var _13b0=this.dialog;var error=$(_13b0.id+"-error");$(_13b0.id+"-name").style.backgroundColor="#fff";$(_13b0.id+"-passwd").style.backgroundColor="#fff";if($F(_13b0.id+"-name")==""){$(_13b0.id+"-name").style.backgroundColor="#f00";$(_13b0.id+"-name").select();return false;}if($F(_13b0.id+"-passwd")==""){$(_13b0.id+"-passwd").style.backgroundColor="#f00";$(_13b0.id+"-passwd").select();return false;}if($F(_13b0.id+"-passwd")!=$F(_13b0.id+"-confirm")){$(_13b0.id+"-passwd").style.backgroundColor="#f00";$(_13b0.id+"-passwd").select();return false;}this.createButton.dom.disabled=true;this.createButton.hide();jive.spank.Spinner.show({x:this.createButton.getX()-10,y:this.createButton.getY()});this.verifyCallback({username:$F(_13b0.id+"-name"),password:$F(_13b0.id+"-passwd")});},verify:function(_13b2){var _13b3=this.dialog;if(verify){if(verify.name){$(_13b3.id+"-name").style.backgroundColor="#f00";$(_13b3.id+"-name").select();return;}if(verify.password){$(_13b3.id+"-passwd").style.backgroundColor="#f00";$(_13b3.id+"-passwd").select();return;}}getEl(_13b3.id+"-confirm").removeAllListeners();getEl(_13b3.id+"-submit").removeAllListeners();this.nameField.removeAllListeners();this.passwordField.removeAllListeners();this.dialog.hide();}};jive.spank.roster.Roster=function(id,_13b5){this.el=getEl(id);this.groups={};this.closedgroups=[];this.events={"contactdblclicked":true,"offlinemoved":true};if(_13b5){this.offlines="";this._wrappedClick=null;}};YAHOO.extend(jive.spank.roster.Roster,YAHOO.ext.util.Observable,{addGroup:function(_13b6,_13b7){if(this.groups[_13b6]){return this.groups[_13b6];}this.groups[_13b6]=new jive.spank.roster.RosterGroup(this,_13b6,_13b7);this.el.insertHtml("beforeEnd",this.groups[_13b6].render(false));this.groups[_13b6]._enableBehaviors();return this.groups[_13b6];},addContact:function(_13b8,_13b9,_13ba){var group=this.addGroup(_13b9,_13ba);group.addContact(_13b8);},removeContact:function(jid){var _13bd=this.findContact(jid);var grp=_13bd.group;_13bd.remove();if(grp.contacts.length==0){grp.remove();}},setRoster:function(_13bf){var _13c0;for(groupName in _13bf){_13c0=_13bf[groupName];this.groups[groupName]=new jive.spank.roster.RosterGroup(this,groupName,_13c0);}},render:function(){var _13c1="";var _13c2=typeof this.offlines!="undefined";this._logClosedGroups();for(var g in this.groups){_13c1+=this.groups[g].render(_13c2);}this.el.dom.innerHTML=_13c1;return this;},getSelectedUser:function(){var _13c4=$$("ul#"+this.id+" ul.group-list li.selected")[0];var _13c5=_13c4.id.split("-");var _13c6=_13c5[3];var _13c7=_13c5[2];return this.findContact(_13c7,_13c6);},findContact:function(jid,_13c9){if(_13c9){_13c9=_13c9.replace(/[^0-9A-Za-z]/,"_");}for(var _13ca in this.groups){if(_13c9&&_13ca.replace(/[^0-9A-Za-z]/,"_")!=_13c9){continue;}var _13cb=this.groups[_13ca].contacts.find(function(_13cc){return _13cc.jid==jid;});if(_13cb){return _13cb;}}return null;},changeContactStatus:function(jid,_13ce,_13cf){var _13d0=this.findContact(jid);if(_13d0){_13d0.changeStatus(_13ce,_13cf);}},getContactStatus:function(jid){var _13d2=this.findContact(jid);if(_13d2){return _13d2.status;}},renderOffline:function(){var _13d3=this.groups;var _13d4="";for(var _13d5 in _13d3){this.groups[_13d5].contacts.each(function(_13d6){if(_13d6.status=="unavailable"){_13d4+=_13d6.render();}});}if((_13d4==""||this.offlines!="")&&getEl("group-"+this.offlines)){getEl("group-"+this.offlines).remove();}else{this.offlines="Offline_Group-"+this.el.id;}if(_13d4!=""){this.el.insertHtml("beforeEnd",jive.spank.chat.Template.roster_group.applyTemplate({id:this.offlines,renderClosed:"open",online:"",groupName:"Offline Group",users:_13d4}));var _13d7=getEl("group-label-"+this.offlines);_13d7.unselectable();this._wrappedClick=_13d7.getChildrenByTagName("em")[0].mon("click",jive.spank.roster.RosterGroup.toggleGroupVisListener);jive.spank.roster.RosterGroup.sortContactHTML(this.offlines);}},sortGroups:function(){var prent=this.el;if(prent&&prent.dom!=null){var lines=prent.getChildrenByClassName("group");var _13da=lines.sortBy(function(line){return line.id.split("-")[1].toLowerCase();});_13da.each(function(line){line.appendTo(prent.dom);});}for(var g in this.groups){this.groups[g].sort();}},_logClosedGroups:function(){this.closedgroups=[];var _13de=this.el.getChildrenByClassName("closed");for(var i=0;i<_13de.length;i++){if(_13de[i].firstChild){this.closedgroups.push(_13de[i].firstChild.innerHTML);}}},_enableBehaviors:function(_13e0){for(var g in this.groups){this.groups[g]._enableBehaviors(_13e0);}}});jive.spank.roster.RosterGroup=function(_13e2,name,_13e4){this.name=name;this.cleanName=name.replace(/[^A-Za-z0-9]/,"_");this.contacts=[];if(_13e4){this._rebuildContacts(_13e4);}this._roster=_13e2;this.id=this.cleanName+"-"+this._roster.el.id;this._wrappedClick=null;};jive.spank.roster.RosterGroup.prototype={_rebuildContacts:function(json){for(var uname in json){this.contacts.push(new jive.spank.roster.Contact(json[uname],this));}},addContact:function(_13e7){var _13e8=new jive.spank.roster.Contact(_13e7,this);this.contacts.push(_13e8);var _13e9="group-list-"+this.id;if(typeof this._roster.offlines!="undefined"&&_13e8.status=="unavailable"){_13e9="group-list-"+this._roster.offlines;}jive.spank.chat.Template.contact.append(_13e9,{id:_13e8.id,status:_13e8.status,username:_13e8.name});this.contacts[this.contacts.length-1]._enableBehaviors();},removeContact:function(jid){var _13eb=this.getContactByJID(jid);if(_13eb){_13eb.remove();}},contactIndexByJid:function(jid){for(var u=this.contacts.length-1;u>=0;u--){if(this.contacts[u].jid==jid){return u;}}return -1;},getContactByJID:function(jid){var index=this.contactIndexByJid(jid);if(index>=0){return this.contacts[index];}else{return null;}},render:function(_13f0){var _13f1="open";var _13f2=this._roster.closedgroups.indexOf(this.name)!=-1;if(_13f2){_13f1="closed";}var body=this._getMembersHtml(_13f0);if(body==""&&_13f0){return "";}return jive.spank.chat.Template.roster_group.applyTemplate({id:this.id,renderClosed:_13f1,online:"group-isonline",groupName:this.name,users:body});},sort:function(){jive.spank.roster.RosterGroup.sortContactHTML(this.id);},remove:function(){var elm=getEl("group-"+this.id);YAHOO.ext.EventManager.removeListener(elm,"click",this._wrappedClick);this._wrappedClick=null;elm.remove();delete this._roster.groups[this.name];},_getMembersHtml:function(_13f5){var _13f6="";for(var u=0;u<this.contacts.length;u++){if(!_13f5||this.contacts[u].status!="unavailable"){_13f6+=this.contacts[u].render();}}return _13f6;},_enableBehaviors:function(_13f8){if(_13f8==null){_13f8=true;}var _13f9=getEl("group-label-"+this.id);if(_13f9&&_13f9.dom){_13f9.unselectable();var _13fa=_13f9.getChildrenByTagName("em")[0];_13fa.unselectable();if(_13f8){this._wrappedClick=_13fa.mon("click",jive.spank.roster.RosterGroup.toggleGroupVisListener);}}for(u=this.contacts.length-1;u>=0;u--){this.contacts[u]._enableBehaviors();}}};jive.spank.roster.RosterGroup.toggleGroupVisListener=function(evt){var elm=evt.getTarget().parentNode;var count=elm.parentNode.childNodes.length;var _13fe;for(var i=count-1;i>=0;i--){if(elm.parentNode.childNodes[i].nodeName=="UL"){_13fe=elm.parentNode.childNodes[i];break;}}if(_13fe!=null){var _1400=(_13fe.style.display=="none")?"block":"none";for(var j=_13fe.childNodes.length-1;i>=0;i--){if(_13fe.childNodes[j].nodeName=="LI"){_13fe.childNodes[j].style.display=_1400;}}_13fe.style.display=_1400;elm=getEl(elm);elm.removeClass(_1400=="block"?"closed":"open");elm.addClass(_1400=="block"?"open":"closed");}};jive.spank.roster.RosterGroup.sortContactHTML=function(id){var prent=getEl("group-list-"+id);if(prent&&prent.dom!=null){var lines=prent.getChildrenByTagName("li");var _1405=lines.sortBy(function(line){return line.dom.innerHTML;});_1405.each(function(line){line.appendTo(prent.dom);});}};jive.spank.roster.Contact=function(_1408,_1409){this.jid=(typeof _1408!="string"&&_1408.getJID)?_1408.getJID():"fake"+Math.random()+"@jivesoftware.com";this.name=(_1408.getName&&_1408.getName()?_1408.getName():this.jid);this.status=typeof _1408!="string"&&_1408.status?_1408.status:_1408.isSubscriptionPending&&_1408.isSubscriptionPending()?"pending":"unavailable";this.group=_1409;this.id="roster-contact-"+this.jid+"-"+this.group.cleanName;this.currentMessage="";this._wrappedClick=null;this._wrappedDblClick=null;this.events={"status":true,"offlinemoved":true};};YAHOO.extend(jive.spank.roster.Contact,YAHOO.ext.util.Observable,{remove:function(){var elm=getEl(this.id);YAHOO.ext.EventManager.removeListener(elm,"click",this._wrappedClick);this._wrappedClick=null;YAHOO.ext.EventManager.removeListener(elm,"dblclick",this._wrappedDblClick);this._wrappedDblClick=null;YAHOO.ext.EventManager.removeListener(elm,"mouseover",this._wrappedMouseOver);delete this._wrappedMouseOver;YAHOO.ext.EventManager.removeListener(elm,"mouseout",this._wrappedMouseOut);delete this._wrappedMouseOut;elm.remove();this.group.contacts.splice(this.group.contactIndexByJid(this.jid),1);delete this.group;},changeStatus:function(_140b,_140c){_140b=_140b.toLowerCase();getEl(this.id).replaceClass("roster-contact-"+this.status,"roster-contact-"+_140b);var _140d=(this.status?this.status:"unavailable");var _140e=this.status;this.status=_140b;if(_140e=="unavailable"||_140b=="unavailable"){this.group._roster.fireEvent("offlinemoved");}this.fireEvent("status",_140d,_140b);this._changeStatusMsg(_140c);return _140d;},render:function(){return jive.spank.chat.Template.contact.applyTemplate({id:this.id,username:this.name,status:this.status,message:this.currentMessage});},_changeStatusMsg:function(msg){this.currentMessage=(!msg||msg.strip()==""?"":"- "+msg);var _1410=getEl(this.id+"-msg");_1410.dom.innerHTML=this.currentMessage;},_enableBehaviors:function(){var elm=getEl(this.id);if(elm){elm.unselectable();this._wrappedClick=elm.mon("click",function(evt){var _1413=getEl(evt.getTarget());var _1414=_1413.dom.id;getEls("ul.jive-roster ul.group-list li").removeClass("selected");document.getElementById(_1414).className+=" selected";});var self=this;this._wrappedDblClick=elm.mon("dblclick",function(evt){evt.stopEvent();self.group._roster.fireEvent("contactdblclicked",self.group._roster,self);});this._wrappedMouseOver=elm.addManagedListener("mouseover",function(evt){var _1418=getEl(evt.getTarget());var _1419=_1418.dom.id;document.getElementById(_1419).className+=" hover";});this._wrappedMouseOut=elm.addManagedListener("mouseout",function(evt){elm.removeClass("hover");});}}});jive.spank.roster.Contact.find=function(_141b,jid,_141d){var _141e=_141b.groups;for(var _141f in _141e){if(_141d&&_141f.replace(/[^0-9A-Za-z]/,"_")!=_141d){continue;}var _1420=_141e[_141f].contacts.find(function(_1421){return _1421.jid==jid;});if(_1420){return _1420;}}return null;};jive.spank.chat.Control=function(_1422,title,elm){elm.id=elm.id||YAHOO.util.Dom.generateId();this.el=getEl(elm.id);this.el.appendTo(_1422);this.el.setDisplayed("inline").unselectable();this.events={"click":true,"dblclick":true,"mouseover":true,"mouseout":true,"mousedown":true,"mouseup":true,"mousemove":true};this._wrappedListeners={};var self=this;this._wrappedListeners["click"]=this.el.addManagedListener("click",function(evt){self.fireEvent("click",evt);});this._wrappedListeners["dblclick"]=this.el.addManagedListener("dblclick",function(evt){self.fireEvent("dblclick",evt);});this._wrappedListeners["mouseover"]=this.el.addManagedListener("mouseover",function(evt){self.fireEvent("mouseover",evt);});this._wrappedListeners["mouseout"]=this.el.addManagedListener("mouseout",function(evt){self.fireEvent("mouseout",evt);});this._wrappedListeners["mousedown"]=this.el.addManagedListener("mousedown",function(evt){self.fireEvent("mousedown",evt);});this._wrappedListeners["mouseup"]=this.el.addManagedListener("mouseup",function(evt){self.fireEvent("mouseup",evt);});this._wrappedListeners["mousemove"]=this.el.addManagedListener("mousemove",function(evt){self.fireEvent("mousemove",evt);});this.title=title;this.panel=_1422;};YAHOO.extend(jive.spank.chat.Control,YAHOO.ext.util.Observable,{fireEvent:function(){if(!this.el.hasClass("jive-disabled")){jive.spank.chat.Control.superclass.fireEvent.call(this,arguments[0],self,arguments[1]);}},remove:function(){this.purgeListeners();for(var _142d in this.events){YAHOO.ext.EventManager.removeListener(_142d,this.el,this._wrappedListeners[_142d]);}this._wrappedListeners=null;this.el.remove();},enable:function(){this.el.removeClass("jive-disabled");},disable:function(){this.el.addClass("jive-disabled");},toggleEnabled:function(){this.el.toggleClass("jive-disabled");}});jive.spank.chat.Control.add=function(_142e,_142f,_1430){var body=document.getElementsByTagName("body")[0];if(typeof _1430!="function"&&_1430.elmId!=null){var _1432=$(_1430.elmId);var elm=_1432.cloneNode(true);elm.id="jivectrl-"+_1432.id;elm.style.display="none";body.appendChild(elm);}else{if(typeof _1430!="function"&&_1430.imgSrc!=null){var elm=document.createElement("a");elm.appendChild(document.createElement("img"));var elmId=elm.id=YAHOO.util.Dom.generateId();elm.className="imgbtn";elm.firstChild.setAttribute("src",_1430.imgSrc);if(_1430.tooltip){elm.setAttribute("title",_1430.tooltip);}elm.setAttribute("href","#");body.appendChild(elm);}else{var _1436="autobtn";var elmId=YAHOO.util.Dom.generateId();if(typeof _1430!="function"&&_1430.className!=null){_1436=_1430.className;}jive.spank.chat.Template.control_btn.append(body,{id:elmId,cls:_1436,text:_142f});}}if(typeof _1430!="function"&&_1430.tooltip){elm.setAttribute("title",_1430.tooltip);}var _1438=new jive.spank.chat.Control(getEl(_142e),_142f,elm);if(typeof _1430=="function"){_1438.addListener("click",_1430);}else{for(var _1439 in _1430.events){_1438.addListener(_1439,_1430.events[_1439]);}}return _1438;};jive.spank.chat.CustomMessage=function(type,_143b){var _143c=new YAHOO.ext.DomHelper.Template(this.finishers[type].template.join(""));this.callback=this.finishers[type].callback;this.destroy=this.finishers[type].destroy;this.events=this.finishers[type].events;_143b.id=_143b.id||YAHOO.util.Dom.generateId();this.el=document.createElement("div");this.el.innerHTML=_143c.applyTemplate(_143b);this.el.id=_143b.id;this.config=_143b;};YAHOO.extend(jive.spank.chat.CustomMessage,YAHOO.ext.util.Observable,{finishers:{mucinvitation:{events:{"accepted":true,"declined":true},callback:function(_143d){var theId=this.el.id;var _143f=getEl(theId+"-room").dom.innerHTML;var _1440=getEl(theId+"-inviter").dom.innerHTML;getEl(theId+"-join").addListener("click",function(){this.fireEvent("accepted",_143d,this.config);getEl(theId+"-message").dom.innerHTML="You accepted "+_1440+"'s invitation to \""+_143f+"\".";this.destroy();}.bind(this));getEl(theId+"-decline").addListener("click",function(){this.fireEvent("declined",_143d,this.config);getEl(theId+"-message").dom.innerHTML="You declined "+_1440+"'s invitation to \""+_143f+"\".";this.destroy();}.bind(this));},destroy:function(){var theId=this.el.id;getEl(theId+"-join").removeAllListeners();getEl(theId+"-decline").removeAllListeners();getEl(theId+"-controls").remove();this.purgeListeners();delete this.config;},template:["<div class=\"jive-mucinvite\">","<p id=\"{id}-message\"><span id=\"{id}-inviter\">{name}</span> has invited you to","join the conference \"<span id=\"{id}-room\">{chatname}</span>\".</p>","<div id=\"{id}-controls\"><a id=\"{id}-join\" href=\"#\">Accept</a>","<a id=\"{id}-decline\" href=\"#\">Decline</a></div>","<span id=\"{id}-jid\" style=\"display: none;\">{jid}</span>","</div>"]}}});jive.spank.AutoComplete=function(_1442,_1443,_1444,_1445){jive.spank.AutoComplete.superclass.constructor.call(this,_1442,_1443,_1444,_1445);};YAHOO.extend(jive.spank.AutoComplete,YAHOO.widget.AutoComplete);jive.spank.AutoComplete.prototype._populateList=function(query,_1447,self){self.autoHighlight=(_1447[0][0].indexOf(query)==0);jive.spank.AutoComplete.superclass._populateList.call(this,query,_1447,self);};jive.spank.AutoComplete.prototype._onTextboxKeyDown=function(v,oSelf){var _144b=v.keyCode;switch(_144b){case 9:if(oSelf.delimChar&&(oSelf._nKeyCode!=_144b)){if(oSelf._bContainerOpen){YAHOO.util.Event.stopEvent(v);}}if(oSelf._oCurItem){oSelf._selectItem(oSelf._oCurItem);}else{oSelf._toggleContainer(false);}break;case 13:if(oSelf._nKeyCode!=_144b){if(oSelf._bContainerOpen){YAHOO.util.Event.stopEvent(v);}}oSelf._toggleContainer(false);break;case 27:oSelf._toggleContainer(false);return;case 39:oSelf._jumpSelection();break;case 38:YAHOO.util.Event.stopEvent(v);oSelf._moveSelection(_144b);break;case 40:YAHOO.util.Event.stopEvent(v);oSelf._moveSelection(_144b);break;default:break;}};jive.spank.FlatAutoComplete=function(_144c,_144d,_144e,_144f){jive.spank.FlatAutoComplete.superclass.constructor.call(this,_144c,_144d,_144e,_144f);};YAHOO.extend(jive.spank.FlatAutoComplete,YAHOO.widget.AutoComplete);jive.spank.FlatAutoComplete.prototype._populateList=function(query,_1451,self){self.autoHighlight=(_1451[0]&&_1451[0].indexOf(query)==0);jive.spank.AutoComplete.superclass._populateList.call(this,query,_1451,self);};jive.spank.FlatAutoComplete.prototype._updateValue=function(item){item._sResultKey=item._oResultData;jive.spank.AutoComplete.superclass._updateValue.call(this,item);};jive.spank.Spinner={show:function(_1454){if(_1454==null){_1454={};}if(!this.isShowing){var x=_1454.x||(YAHOO.util.Dom.getViewportWidth()/2)-60;var y=_1454.y||(YAHOO.util.Dom.getViewportHeight()/2)-20;var text=_1454.text||"Loading...";this.template.append(document.body,{text:text});var theEl=getEl("jive-spinner");if(_1454.el&&_1454.position){theEl.alignTo(_1454.el,_1454.position);}else{theEl.moveTo(x,y);}theEl.setStyle("z-index",20000);theEl.show();this.isShowing=true;}},isShowing:false,hide:function(){if(this.isShowing){getEl("jive-spinner").remove();this.isShowing=false;}},template:new YAHOO.ext.DomHelper.Template("<div style=\"visibility: hidden;\" id=\"jive-spinner\">"+"<img src=\"resources/images/progress.gif\" alt=\"\" />{text}</div>")};jive.spank.chat.Filter=function(name,_145a,_145b){this.filterPattern=_145a;this.filterReplacement=_145b;this.name=name;};jive.spank.chat.Filter.prototype.apply=function(_145c){return _145c.replace(this.filterPattern,this.filterReplacement);};jive.spank.chat.Filter.applyAll=function(_145d){jive.spank.chat.Filter.registeredFilters.each(function(_145e){_145d=_145e.apply(_145d);});return _145d;};jive.spank.chat.Filter.add=function(name,_1460,_1461){jive.spank.chat.Filter.registeredFilters.push(new jive.spank.chat.Filter(name,_1460,_1461));};jive.spank.chat.Filter.remove=function(_1462){jive.spank.chat.Filter.registeredFilters.each(function(ftr,i){if(ftr.name==_1462){delete jive.spank.chat.Filter.registeredFilters[i];throw $break;}});};jive.spank.chat.Filter.unregisterAll=function(){for(var t=jive.spank.chat.Filter.registeredFilters.length-1;t>=0;t--){delete jive.spank.chat.Filter.registeredFilters[t];}};jive.spank.chat.Filter.registeredFilters=[];jive.spank.notifier={};jive.spank.notifier.origTitle=null;jive.spank.notifier.titleMsg="";jive.spank.notifier.titleInterval=null;jive.spank.notifier.countNewMsgs=function(){var _1466;var _1467="";var _1468=0;for(var _1469 in jive.spank.chat.ChatWindow.currentWindow){_1466=jive.spank.chat.ChatWindow.currentWindow[_1469];for(var _146a in _1466.newMessages){_1468+=_1466.newMessages[_146a];}}return _1468;};jive.spank.notifier.doTitleNotify=function(_146b){var ct=jive.spank.notifier.countNewMsgs();if(jive.spank.notifier.titleInterval){window.clearTimeout(jive.spank.notifier.titleInterval);jive.spank.notifier.titleInterval=null;}if(ct<=0){if(jive.spank.notifier.origTitle!=null){document.title=jive.spank.notifier.origTitle;jive.spank.notifier.origTitle=null;}return null;}else{jive.spank.notifier.titleMsg="* "+ct+" new chat message"+(ct>1?"s":"");}if(jive.spank.notifier.origTitle==null){jive.spank.notifier.origTitle=document.title;}jive.spank.notifier.titleInterval=window.setTimeout(jive.spank.notifier.rotateTitle,2000);};jive.spank.notifier.rotateTitle=function(){document.title=(document.title==jive.spank.notifier.titleMsg)?jive.spank.notifier.origTitle:jive.spank.notifier.titleMsg;jive.spank.notifier.titleInterval=window.setTimeout(jive.spank.notifier.rotateTitle,2000);};jive.spank.chat.Template={add_contact:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody addcontact\">","<table width=\"100%\" cellpadding=\"2\" cellspacing=\"0\" border=\"0\">","<tr><td width=\"35%\">","<label for=\"{id}-addusername\">Username:</label>","</td><td width=\"65%\">","<input type=\"text\" id=\"{id}-addusername\" value=\"\" />","</td></tr>","<tr><td><label for=\"{id}-addnickname\">Nickname:</label>","</td><td><input type=\"text\" id=\"{id}-addnickname\" value=\"\" /></td></tr>","<tr><td><label for=\"{id}-addcontact-group\">Group:</label></td><td>","<input type=\"text\" id=\"{id}-addcontact-group\" value=\"\" />","</td></tr>","<tr><td colspan=\"2\" align=\"center\" class=\"masterctrl\">","<input type=\"button\" class=\"btn createcontact\" id=\"{id}-createcontact\" value=\"Add\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-closeaddcontact\" value=\"Cancel\" />","</td></tr></table>","</div>"].join("")),add_group:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\">","<table width=\"100%\" cellpadding=\"2\" cellspacing=\"0\" border=\"0\">","<tr><td width=\"25%\" rowspan=\"2\">","</td><td width=\"75%\">","Enter new group name:<br/>","<input type=\"text\" id=\"{id}-addgroupname\" value=\"\" />","</td></tr>","<tr><td>","<input type=\"button\" class=\"btn creategroup\" id=\"{id}-creategroup\" value=\"Add\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-closeaddgroup\" value=\"Cancel\" />","</td></tr></table>","</div>"].join("")),chat_toppane:new YAHOO.ext.DomHelper.Template("<div id=\"{bodyId}-topchat\" class=\"jive-chat-toppane\">"+"<p class=\"avatar\"><img id=\"{bodyId}-avatar\" src=\"../images/sparkweb-avatar.png\" height=\"48\" width=\"48\" alt=\"\" /></p>"+"<h4></h4>"+"<p id=\"{bodyId}-time\">Time: <span></span></p>"+"<div id=\"{bodyId}-controls\" class=\"jive-ctrlbar-topchat\"></div>"+"</div>"),contact:new YAHOO.ext.DomHelper.Template("<li id=\"{id}\" class=\"roster-contact-{status}\">{username} <span id=\"{id}-msg\" class=\"msg\">{message}</span></li>"),control_btn:new YAHOO.ext.DomHelper.Template("<a href=\"#\" class=\"jive-control-btn {cls}\" id=\"{id}\">{text}</a>"),control_panel:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-controls\" class=\"jive-ctrlbar\"></div>"),create_account:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\">","<table border=\"0\" cellpadding=\"0\" cellspacing=\"4\"><tr>","<td><div class=\"{id}-name-label\">Username:</div></td>","<td><input type=\"text\" id=\"{id}-name\" /></td></tr>","<td><div class=\"{id}-passwd-label\">Password:</div></td>","<td><input type=\"password\" id=\"{id}-passwd\" /></td></tr>","<td><div class=\"{id}-confirm-label\">Confirm Password:</div></td>","<td><input type=\"password\" id=\"{id}-confirm\" /></td></tr>","</table>","<p align=\"center\"><input type=\"button\" class=\"btn\" id=\"{id}-submit\" value=\"Submit\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-cancel\" value=\"Cancel\" /></p>","</div>"].join("")),dialog:new YAHOO.ext.DomHelper.Template("<div class=\"ydlg-hd\"><h1>{windowTitle}</h1></div>"+"<div id=\"{bodyId}\" class=\"ydlg-bd\">"+"<div id=\"{bodyId}-toppane\" class=\"ydlg-bd jive-toppane\"></div>"+"</div>"),message:new YAHOO.ext.DomHelper.Template("<div class=\"{type}-message {mentioned} {msgclass}\"><span class=\"meta\"><em>({time})</em>"+"&nbsp;{from}: </span><span class=\"message-content\">{message}</span></div>"),muc_chooser_top:new YAHOO.ext.DomHelper.Template("<div class=\"dhead chooseconf\">Create or join a conference room</div>"+"<div id=\"{tabId}-confcontrols\" class=\"dbody chooseconf\">"+"<div id=\"{tabId}-createconf\" class=\"jive-invite-control\">Create a Conference</div>"+"<div id=\"{tabId}-refresh\" class=\"jive-invite-control\">Refresh List</div>"+"</div>"),muc_controls:new YAHOO.ext.DomHelper.Template("<p>Subject: <span id=\"jive-tab-{jid}-subject\"></span></p>"+"<div class=\"muc-ctrl-frame\">"+"<div id=\"{jid}-changenick\" class=\"jive-invite-control\">Change nickname</div>"+"<div id=\"{jid}-control\" class=\"jive-invite-control\">Invite contact "+"<img align=\"absmiddle\" src=\"resources/images/menutri.gif\" height=\"4\" width=\"7\" alt=\"\" /></div>"+"</div>"),muc_subject:new YAHOO.ext.DomHelper.Template("<p>Subject: <span id=\"jive-tab-{jid}-subject\"></span></p>"),mucchooser:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-layout\" class=\"ylayout-inactive-content\">"+"<div id=\"{tabId}-toppane\" class=\"ydlg-bd jive-toppane\"></div>"+"<div id=\"{tabId}-roomgrid\"></div>"+"</div>"),muccreation:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\">","<table border=\"0\" cellpadding=\"0\" cellspacing=\"4\"><tr>","<td><label for=\"{id}-roomname\">Room Name:</label></td>","<td><input type=\"text\" id=\"{id}-roomname\" /></td></tr>","<tr><td><label for=\"{id}-roomtopic\">Room Topic:</label></td>","<td><input type=\"text\" id=\"{id}-roomtopic\" /></td></tr>","<tr><td colspan=\"2\"><input type=\"checkbox\" id=\"{id}-permanent\" />","<label for=\"{id}-permanent\"> Make permanent</label></td></tr></table>","<div class=\"fieldset\">","<p class=\"legend\"><span><input type=\"checkbox\" id=\"{id}-private\" />"," Make private</span></p>","<table border=\"0\" cellpadding=\"0\" cellspacing=\"4\"><tr>","<td><label for=\"{id}-roompw\" class=\"disabled\">Password:</label></td>","<td><input type=\"password\" id=\"{id}-roompw\" disabled=\"disabled\" /></td></tr>","<td><label for=\"{id}-roomconfirm\" class=\"disabled\">Confirm Password:</label></td>","<td><input type=\"password\" id=\"{id}-roomconfirm\" disabled=\"disabled\" /></td></tr>","</table></div>","<p align=\"center\"><input type=\"button\" class=\"btn\" id=\"{id}-createroom\" value=\"Create\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-cancel\" value=\"Cancel\" /></p>","</div>"].join("")),mucinvitemenu:new YAHOO.ext.DomHelper.Template("<div id=\"{jid}-container\" class=\"jive-invite-menu\">"+"<input id=\"{jid}-autocomp\" type=\"text\">"+"<div id=\"{jid}-autocomp-menu\"></div>"+"</div>"),mucpassword:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\">","<p align=\"center\">Enter password:</p>","<p align=\"center\"><input type=\"password\" class=\"btn\" id=\"{id}-passwd\" value=\"\" /></p>","<p align=\"center\"><input type=\"button\" class=\"btn\" id=\"{id}-sendsecret\" value=\"Join\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-cancel\" value=\"Cancel\" /></p>","</div>"].join("")),muctab:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-layout\" class=\"ylayout-inactive-content ydlg-tab\">"+"<div id=\"{tabId}-controls\" class=\"jive-muc-ctrl\"></div>"+"<div id=\"{tabId}-history\" class=\"jive-history\"></div>"+"<div id=\"{tabId}-sidebarlayout\" class=\"ylayout-inactive-content ydlg-tab\">"+"<div id=\"{tabId}-sidebar-header\" class=\"jive-muc-sidebar-header\"></div>"+"<div id=\"{tabId}-occupants\" class=\"jive-muc-occupants\"></div>"+"<div id=\"{tabId}-userstatus\" class=\"jive-muc-status\"></div>"+"</div>"+"<textarea id=\"{tabId}-text\" class=\"jive-tab-message\"></textarea>"+"</div>"),remove_group:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\">","<p align=\"center\">Are you sure you want to remove '{name}'?</p>","<p align=\"center\"><input type=\"button\" class=\"btn\" id=\"{id}-remove\" value=\"Yes\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-cancel\" value=\"No\" /></p>","</div>"].join("")),rename:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\">","<div style=\"text-align: center; padding: 8px;\">Rename to: ","<input type=\"text\" id=\"{id}-name\" value=\"\" /></div>","<div style=\"text-align: center;\">","<input type=\"button\" class=\"btn\" id=\"{id}-rename\" value=\"OK\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-close\" value=\"Cancel\" />","</div>","</div>"].join("")),roster:new YAHOO.ext.DomHelper.Template("<ul id=\"{rosterId}\" class=\"jive-roster\">{groups}</ul>"),roster_group:new YAHOO.ext.DomHelper.Template("<li id=\"group-{id}\" class=\"group\">"+"<span id=\"group-label-{id}\" class=\"group-label {online} {renderClosed}\"><em>{groupName}</em></span>"+"<ul id=\"group-list-{id}\" class=\"group-list\">{users}</ul>"+"</li>"),rostertab:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-layout\" class=\"ylayout-inactive-content\">"+"<div id=\"{tabId}-user\" class=\"jive-controlpanel\"></div>"+"<div id=\"{tabId}-resources\"></div>"+"</div>"),spinnertab:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-spinner\" class=\"ylayout-inactive-content ydlg-tab jive-spinnertab\">"+"<div id=\"jive-spinner\"><img src=\"resources/images/progress.gif\" alt=\"\" />{text}</div>"+"</div>"),start_chat:new YAHOO.ext.DomHelper.Template(["<div class=\"dbody\" style=\"text-align: center;\">","<p>Enter an address:</p>","<p><input type=\"text\" id=\"{id}-jid\" /></p>","<p style=\"margin-top: 4px;\"><input type=\"button\" class=\"btn\" id=\"{id}-startbtn\" value=\"Start Chat\" />","<input type=\"button\" class=\"btn jive-closedialog\" id=\"{id}-cancel\" value=\"Cancel\" /></p>","</div>"].join("")),statusMessage:new YAHOO.ext.DomHelper.Template("<div class=\"status-message\">{message}</div>"),status_panel:new YAHOO.ext.DomHelper.Template("<div class=\"jive-userstatus\">"+"<p class=\"avatar\"><img id=\"{bodyId}-avatar\" src=\"../images/sparkweb-avatar.png\" height=\"48\" width=\"48\" alt=\"\" /></p>"+"<h4>{username}</h4>"+"<p id=\"{bodyId}-status\" class=\"jive-mystatus\">"+"<a href=\"#\" id=\"{bodyId}-statusmenu-ctrl\" class=\"roster-contact-{statusName}\"><span>{status}</span></a></p>"+"</div>"),sub_request:new YAHOO.ext.DomHelper.Template(["<div class=\"dhead\">{nick} ({jid}) wants to add you as a contact.</div>","<div class=\"dbody fieldset\">","<p class=\"legend\"><span><input type=\"checkbox\" id=\"{id}-add\" checked=\"checked\" />"," Add user to your contacts too</span></p>","<table width=\"100%\" cellpadding=\"2\" cellspacing=\"0\" border=\"0\">","<tr><td width=\"35%\">","<label for=\"addusername\">Username:</label>","</td><td id=\"{id}-jid\" width=\"65%\">{jid}</td></tr>","<tr><td><label for=\"{id}-nick\">Nickname:</label>","</td><td><input type=\"text\" id=\"{id}-nick\" value=\"{nick}\" /></td></tr>","<tr><td><label for=\"{id}-subrequest-group\">Group:</label></td><td>","<input type=\"text\" id=\"{id}-subrequest-group\" value=\"\" />","</td></tr></table></div>","<p align=\"center\">","<input type=\"button\" class=\"btn subrequest\" id=\"{id}-acceptsubrequest\" value=\"Allow\" />","<input type=\"button\" class=\"btn subrequest\" id=\"{id}-denysubrequest\" value=\"Deny\" />","</p>"].join("")),tab:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-layout\" class=\"ylayout-inactive-content ydlg-tab\">"+"<div id=\"{tabId}-toppane\" class=\"ydlg-bd jive-toppane\"></div>"+"<div id=\"{tabId}-history\" class=\"jive-history\"></div>"+"<textarea id=\"{tabId}-text\" class=\"jive-tab-message\"></textarea>"+"</div>"),userpane:new YAHOO.ext.DomHelper.Template("<span id=\"{id}-message\">{message}</span>"),userpane_loggedin:new YAHOO.ext.DomHelper.Template("<input class=\"jive-muc-username\" type=\"text\" id=\"{id}-uname\" value=\"{uname}\"></input>"),userpane_changebtn:new YAHOO.ext.DomHelper.Template("<a id=\"{id}-changenickbtn\" href=\"javascript:void(0);\">Change Nickname</a>"),userstatus:new YAHOO.ext.DomHelper.Template("<div id=\"{tabId}-layout\" class=\"ylayout-inactive-content ydlg-tab\">"+"<div id=\"{tabId}-toppane\" class=\"ydlg-bd jive-toppane\"></div>"+"<div id=\"{tabId}-history\" class=\"jive-history\"></div>"+"<textarea id=\"{tabId}-text\" class=\"jive-tab-message\"></textarea>"+"</div>")};YAHOO.ext.grid.SpankJSONDataModel=function(_146d){YAHOO.ext.grid.SpankJSONDataModel.superclass.constructor.call(this,YAHOO.ext.grid.LoadableDataModel.JSON);this.schema=_146d;};YAHOO.extendX(YAHOO.ext.grid.SpankJSONDataModel,YAHOO.ext.grid.LoadableDataModel,{loadData:function(data,_146f,_1470){var _1471=this.schema.id;var _1472=this.schema.fields;try{if(this.schema.totalProperty){var v=parseInt(eval("data."+this.schema.totalProperty),10);if(!isNaN(v)){this.totalCount=v;}}var _1474=[];if(this.schema.root){var root=eval("data."+this.schema.root);}else{var root=data;}for(var i in root){var node=root[i];var _1479=[];_1479.node=node;_1479.id=(typeof node[_1471]!="undefined"&&node[_1471]!==""?node[_1471]:String(i));for(var j=0;j<_1472.length;j++){var val=node[_1472[j]];if(typeof val=="undefined"){val="";}if(this.preprocessors[j]){val=this.preprocessors[j](val);}_1479.push(val);}_1474.push(_1479);}if(_1470!==true){this.removeAll();}this.addRows(_1474);if(typeof _146f=="function"){_146f(this,true);}this.fireLoadEvent();}catch(e){this.fireLoadException(e,null);if(typeof _146f=="function"){_146f(this,false);}}},getRowId:function(_147c){return this.data[_147c].id;}});YAHOO.ext.Element.prototype.getParentByClass=function(_147d,_147e){if(_147e){_147e=_147e.toLowerCase();}function isMatch(el){if(!el){return false;}if(_147d&&!YAHOO.util.Dom.hasClass(el,_147d)){return false;}return !(_147e&&el.tagName.toLowerCase()!=_147e);}var t=this.dom;if(!t||isMatch(t)){return t;}var p=t.parentNode;var b=document.body;while(p&&p!=b){if(isMatch(p)){return p;}p=p.parentNode;}return null;};YAHOO.ext.Element.prototype.setSelectable=function(which){this.dom.unselectable=which?"off":"on";if(!which){this.applyStyles("-moz-user-select:none;-khtml-user-select:none;");}else{this.applyStyles("-moz-user-select:normal;-khtml-user-select:auto;");}return this;};org.jive.spank.control={doConnect:function(_1484,_1485,_1486){var _1487=getEl("connect");_1487.dom.disabled=true;_1487.hide();jive.spank.Spinner.show({x:_1487.getX()-10,y:_1487.getY()});window.connection=new XMPPConnection("/http-bind/",_1486,new org.jive.spank.control.ConnectionListener(_1484,_1485));connection.connect();},doLogout:function(){var _1488=new XMPP.Presence();_1488.setType("unavailable");connection.logout(_1488);},onUnload:function(event){if(typeof window.rosterWindow=="undefined"){return;}var _148a=confirm("Leaving this page will disconnect you from Sparkweb, are you sure?");if(_148a){org.jive.spank.control.doLogout();}else{event.stopEvent();}},doRegistration:function(){window.accountDialog=new jive.spank.dialog.CreateAccount(doRegistrationValidation);},doRegistrationValidation:function(_148b){},windows:{}};org.jive.spank.control.ConnectionListener=function(_148c,_148d){this.usernameField=_148c;this.passwordField=_148d;};org.jive.spank.control.ConnectionListener.prototype={connectionSuccessful:function(_148e){window.chatManager=new org.jive.spank.chat.Manager(_148e);window.chatSessionListener=new org.jive.spank.chat.ChatSessionListener(chatSessionCreated,chatSessionClosed);chatManager.addChatSessionListener(chatSessionListener);window.muc=new org.jive.spank.muc.Manager(_148e,chatManager);console.debug("Connection successfully established.");var _148f=$F(this.usernameField);var _1490=$F(this.passwordField);_148e.login(_148f,_1490,null);},connectionFailed:function(){this.authenticationFailed();},connectionClosed:function(_1491,error){destroyAllChatWindows();if(window.rosterWindow){window.rosterWindow.destroy();window.rosterWindow=undefined;}window.presenceManager=undefined;window.rosterManager=undefined;window.conferenceServers=undefined;window.mucControl=undefined;window.connection=undefined;window.chatManager=undefined;window.contactMonitor=undefined;window.mucManager=undefined;window.muc=undefined;$("jive-loginBox").style.visibility="";$("jive-webTop").style.display="";$("loginText").innerHTML="";var _1493=getEl("connect");_1493.dom.disabled=false;_1493.show();$(this.usernameField).value="";$(this.passwordField).value="";if(error){alert("Your connection to the server has closed.");}jive.spank.Spinner.hide();},authenticationSuccessful:function(_1494){$("loginText").innerHTML="Login successful!";window.contactMonitor=new org.jive.spank.control.ContactMonitor();window.presenceManager=new org.jive.spank.presence.Manager(_1494,null,"manual");window.presenceManager.addPresenceListener(contactMonitor.handlePresence.bind(contactMonitor));window.rosterManager=new org.jive.spank.roster.Manager(_1494,doRoster,presenceManager);window.mucManager=new org.jive.spank.control.MucManager(muc);window.conferenceServers=new Array();muc.getConferenceServers(function(_1495){window.mucControl.enable();conferenceServers.push(_1495);});org.jive.spank.x.chatstate.getManager(chatManager).addStateListener(contactMonitor.handleState.bind(contactMonitor));},authenticationFailed:function(_1496,error){$("loginText").innerHTML="Login failure. :(";var _1498=getEl("connect");_1498.dom.disabled=false;_1498.show();delete connection;jive.spank.Spinner.hide();},packetsReceived:function(){if(typeof window.rosterWindow!="undefined"){rosterWindow.beginUpdate();}},packetsProcessed:function(){if(typeof window.rosterWindow!="undefined"){rosterWindow.endUpdate();}}};org.jive.spank.control.ContactMonitor=function(){};org.jive.spank.control.ContactMonitor.prototype={handlePresence:function(_1499){var _149a;if(_1499.getType()=="subscribe"){this.handleSubscription(_1499.getFrom());return;}else{_149a=this.getMode(_1499);}var jid=_1499.getFrom().toBareJID();var _149c=rosterWindow.getContactStatus(jid);if(_149c&&_149c=="composing"){return;}rosterWindow.changeContactStatus(jid,_149a.mode,_149a.status);},handleState:function(jid,state,isMUC){var _14a0=chatManager.getSession(jid);var _14a1;if(_14a0){_14a1=_14a0.getJIDString();}else{if(isMUC){_14a1=jid.toString();}else{_14a1=jid.toBareJID();}}var _14a2=getContact(_14a1);if(!_14a2||!_14a2.changeStatus){return;}if(state=="composing"){_14a2.changeStatus(state);}else{var _14a3=this.getMode(getContactPresence(jid));_14a2.changeStatus(_14a3.mode,_14a3.status);}},handleAddContact:function(_14a4,jid,nick,group){rosterManager.addEntry(new XMPP.JID(jid),nick,new Array(group));},handleRemoveContact:function(_14a8,jid){rosterManager.removeEntry(new XMPP.JID(jid));},onAdded:function(_14aa){for(var i=0;i<_14aa.length;i++){var _14ac=_14aa[i];this.addContact(_14ac);}},addContact:function(_14ad){var _14ae=_14ad.getGroups();var jid=_14ad.getJID().toString();var _14b0=presenceManager.getPresence(_14ad.getJID());var _14b1;if(_14b0){_14b1=this.getMode(_14b0).mode;}else{_14b1="pending";}var _14b2={getJID:function(){return jid;},getName:function(){return (_14ad.getName()?_14ad.getName():_14ad.getJID().toString());},status:_14b1};rosterWindow.addContact(_14b2,(_14ae[0]?_14ae[0]:"Unfiled"));},onUpdated:function(_14b3){for(var i=0;i<_14b3.length;i++){var _14b5=_14b3[i];rosterWindow.removeContact(_14b5.getJID().toString());this.addContact(_14b5);}},onRemoved:function(_14b6){for(var i=0;i<_14b6.length;i++){var _14b8=_14b6[i];rosterWindow.removeContact(_14b8.getJID().toString());}},getMode:function(_14b9){var mode;var _14bb;if(!_14b9){return {mode:"unavailable",status:null};}switch(_14b9.getType()){case "available":mode=_14b9.getMode();if(!mode){mode="available";}_14bb=_14b9.getStatus();break;default:mode="unavailable";break;}return {mode:mode,status:_14bb};},handleSubscription:function(from){if(!rosterManager._users[from.toBareJID()]){rosterWindow.showSubscriptionRequest(from.toString(),from.getNode());}else{this.handleAcceptSubscription(null,false,from.toBareJID());}},handleAcceptSubscription:function(_14bd,_14be,jid,nick,group){var _14c2=new XMPP.Presence(new XMPP.JID(jid));_14c2.setType("subscribed");connection.sendPacket(_14c2);if(_14be){this.handleAddContact(_14bd,jid,nick,group);}},handleDenySubscription:function(_14c3,_14c4,jid,nick,group){var _14c8=new XMPP.Presence(new XMPP.JID(jid));_14c8.setType("unsubscribed");connection.sendPacket(_14c8);}};org.jive.spank.control.MucManager=function(muc){this.muc=muc;this.muc.addInvitationsListener(this.handleInvitation.bind(this));};org.jive.spank.control.MucManager.prototype={handleInvitation:function(_14ca){var jid=new XMPP.JID(_14ca["from"]);var _14cc=chatManager.getSession(jid);if(!_14cc){_14cc=chatManager.createSession(jid);}var _14cd=getContact(_14cc.getJIDString());var _14ce=new jive.spank.chat.CustomMessage("mucinvitation",{contactJID:jid,name:_14cd.name,chatname:_14ca["room"],jid:""});_14ce.addListener("accepted",this.handleInvitationAccept.bind(this));_14ce.addListener("declined",this.handleInvitationDecline.bind(this));addMessage(_14cd.jid,_14cd.name,_14ce);},handleInvitationAccept:function(_14cf,_14d0){joinMUC(_14cf,_14d0.chatname.toString(),new XMPP.JID(_14d0.chatname.toString()).getNode());},handleInvitationDecline:function(_14d1,_14d2){this.muc.declineInvitation(_14d2.contactJID,_14d2.chatname);},handleNameChange:function(_14d3,_14d4,_14d5){var room=this.muc.getRoom(new XMPP.JID(_14d4));room.changeNickname(_14d5);}};var rosterWindow;function doRoster(_14d7){rosterWindow=spank.loadComponent("roster");rosterWindow.addTab("Contacts");rosterWindow.setRoster(_14d7.getRoster());rosterWindow.roster.addListener("contactdblclicked",doOpenContact);rosterWindow.setUserInfo(connection.username,"Available");doEmoticons();rosterWindow.addControl("addcontact",{events:{click:function(){rosterWindow.showAddContact(rosterWindow);}},imgSrc:"resources/images/addcontact_16x16.png",tooltip:"Add Contact"});window.mucControl=rosterWindow.addControl("muc",{events:{click:handleMUCChooser},imgSrc:"resources/images/conference_16x16.png",tooltip:"Conferences"});window.mucControl.disable();rosterWindow.addControl("startchat",{events:{click:org.jive.spank.control.actions.StartChat},imgSrc:"resources/images/chat_16x16.gif",tooltip:"Start Chat"});rosterWindow.addListener("changestatus",function(_14d8,mode,_14da){var _14db=new XMPP.Presence();_14db.setMode(mode);_14db.setStatus(_14da);presenceManager.sendPresence(_14db);_14d8.changeUserStatus(mode,_14da);});rosterWindow.addListener("addcontact",contactMonitor.handleAddContact.bind(contactMonitor));rosterWindow.addListener("acceptsubscription",contactMonitor.handleAcceptSubscription.bind(contactMonitor));rosterWindow.addListener("denysubscription",contactMonitor.handleDenySubscription.bind(contactMonitor));rosterWindow.addListener("removecontact",contactMonitor.handleRemoveContact.bind(contactMonitor));rosterWindow.addListener("close",org.jive.spank.control.doLogout);rosterWindow.show();$("jive-loginBox").style.visibility="hidden";$("jive-webTop").style.display="block";rosterManager.addRosterListener(contactMonitor);jive.spank.Spinner.hide();}org.jive.spank.control.actions={StartChat:function(){jive.spank.dialog.StartChat(doOpenContact);},createConferenceWindow:function(_14dc){var _14dd=new jive.spank.dialog.CreateConference(_14dc);_14dd.show();_14dd.focus();_14dd.addListener("muccreated",org.jive.spank.control.actions.createConference.createCallback(_14dd));},createConference:function(_14de){var _14df=_14de.getValues();var _14e0={};if(_14df.isPrivate){_14e0["muc#roomconfig_passwordprotectedroom"]="true";_14e0["muc#roomconfig_roomsecret"]=_14df.password;}_14e0["muc#roomconfig_roomname"]=_14df.name;if(_14df.isPermanent){_14e0["muc#roomconfig_persistentroom"]="true";}if(_14df.topic&&_14df.topic!=""){_14e0["muc#roomconfig_roomdesc"]=_14df.topic;}var _14e1=new XMPP.JID(_14df.name+"@"+conferenceServers[0].toString());var name=_14df.name;var room=muc.createRoom(_14e1);var _14e4={onSuccess:function(){var tab=getChatWindow("chattest").addMUC({jid:_14e1,name:name},null,rosterWindow);var _14e6=room.getOccupants();for(var i=0;i<_14e6.length;i++){mucOccupantHandler(_14e6[i]);}tab.roster.addListener("contactdblclicked",doOpenContact);}};var nick=connection.username;room.create(nick,_14e0,_14e4,mucMessageHandler,mucOccupantHandler);_14de.hide();}};function getChatWindow(id){var _14ea;if(org.jive.spank.control.windows[id]){_14ea=jive.spank.chat.ChatWindow.getWindow(org.jive.spank.control.windows[id]);}if(!_14ea){_14ea=jive.spank.chat.ChatWindow.createWindow();org.jive.spank.control.windows[id]=_14ea.id;initializeChatWindow(_14ea);}if(!_14ea.isVisible()){_14ea.show();}return _14ea;}function destroyAllChatWindows(){for(var id in org.jive.spank.control.windows){jive.spank.chat.ChatWindow.destroyWindow(org.jive.spank.control.windows[id]);}delete org.jive.spank.control.windows;org.jive.spank.control.windows={};if(typeof inputMonitor!="undefined"){inputMonitor.destroy();delete inputMonitor;}}function initializeChatWindow(_14ec){_14ec.addListener("message",handleMessage);_14ec.addListener("mucdblclicked",joinMUC);_14ec.addListener("tabclosed",handleTabClosed);_14ec.addListener("mucinvitation",handleMUCInvite);_14ec.addListener("changenameinmuc",mucManager.handleNameChange.bind(mucManager));_14ec.addListener("createmuc",org.jive.spank.control.actions.createConferenceWindow);if(window.inputMonitor){window.inputMonitor.destroy();}window.inputMonitor=new org.jive.spank.control.InputMonitor();inputMonitor.init();_14ec.addListener("input",inputMonitor.handleUserInput.bind(inputMonitor));}function doOpenContact(_14ed,_14ee){var jid;if(!(_14ee.jid instanceof XMPP.JID)){jid=new XMPP.JID(_14ee.jid);}else{jid=_14ee.jid;}var _14f0=chatManager.getSession(jid);if(!_14f0){_14f0=chatManager.createSession(jid);}_14ee.jid=_14f0.getJIDString();var _14f1=getChatWindow("chattest");_14f1.getContactTab(_14ee,true);}function chatSessionCreated(_14f2,_14f3){console.debug("Chat session created.");_14f3.addListener(chatListener);var _14f4=getContact(_14f3.getJIDString());var _14f5=getChatWindow("chattest");_14f5.getContactTab(_14f4);org.jive.spank.x.chatstate.getManager(chatManager).setCurrentState("active",_14f3.getJID());}function getContact(jid){var bare=new XMPP.JID(jid).getBareJID();var _14f8;if(muc.getRoom(bare)){var _14f9=getChatWindow("chattest").tabs[bare].roster;_14f8=_14f9.findContact(jid);}else{_14f8=jive.spank.roster.Contact.find(rosterWindow.roster,jid);}if(!_14f8){jid=new XMPP.JID(jid);_14f8={jid:jid.toString(),name:jid.getNode(),status:"unavailable"};}return _14f8;}function getContactPresence(jid){var room=muc.getRoom(jid.getBareJID());var _14fc;if(room){_14fc=room.presenceManager;}else{_14fc=presenceManager;}return _14fc.getPresence(jid);}function handleMessage(jid,_14fe){jid=new XMPP.JID(jid);var type=getChatWindow("chattest").tabs[jid.toString()].type;var _1500;if(type=="chat"){var _1501=chatManager.getSession(jid);if(!_1501){_1501=chatManager.createSession(jid);}var _1502=org.jive.spank.x.chatstate.getManager(chatManager).setCurrentState("active",_1501.getJID());_1501.sendMessage(_14fe,_1502);_1500=connection.username;}else{if(type=="muc-room"){var room=muc.getRoom(jid);var _1504=org.jive.spank.x.chatstate.getManager(chatManager).setCurrentState("active",jid);room.sendMessage(_14fe,_1504);_1500=room.nickname;}}addMessage(jid,_1500,_14fe,true);}org.jive.spank.control.InputMonitor=function(){this.composingTimeout=3000;this.inputState={};};org.jive.spank.control.InputMonitor.prototype={init:function(){this.inputMonitor=new PeriodicalExecuter(this.monitorFunction.bind(this),2);},monitorFunction:function(){var time=new Date().getTime();for(var _1506 in this.inputState){var input=this.inputState[_1506];if(input.state=="composing"&&(time-input.lastInput)>=this.composingTimeout){delete this.inputState[_1506];this.updateState(_1506,"active");}}},handleUserInput:function(jid){if(this.inputState[jid]&&this.inputState[jid].state=="composing"){this.inputState[jid].lastInput=new Date().getTime();return;}if(!this.inputState[jid]){this.inputState[jid]={};}this.inputState[jid].state="composing";this.inputState[jid].lastInput=new Date().getTime();this.updateState(jid,"composing");},updateState:function(jid,_150a){console.debug("%s sent to %s",_150a,jid);jid=new XMPP.JID(jid);var _150b=chatManager.getSession(jid);var room;if(_150b){jid=_150b.getJID();}else{room=muc.getRoom(jid);}var _150d=org.jive.spank.x.chatstate.getManager(chatManager).setCurrentState(_150a,jid,null,room!=null);if(_150d){connection.sendPacket(_150d);}},destroy:function(){this.inputMonitor.stop();this.inputState={};}};function addMessage(jid,name,msg,_1511,time){getChatWindow("chattest").getContactTab({jid:jid,name:name});var _1513=msg;if(typeof msg=="string"){_1513={body:msg,isLocal:_1511,time:time};}getChatWindow("chattest").addMessage(jid,name,_1513);}function handleMUCChooser(){var _1514=muc;getChatWindow("chattest").preAddMUCChooser();_1514.retrieveRooms(conferenceServers[0],function(_1515){_1514.retrieveRoomsInfo(_1515,roomInfo);});}function roomInfo(_1516){getChatWindow("chattest").addChooseMUCTab(_1516);}function joinMUC(_1517,_1518,name,_151a,_151b,_151c){var _151d=new XMPP.JID(_1518);if(muc.getRoom(_151d)&&muc.getRoom(_151d).isJoined){getChatWindow("chattest").getTabByJID(_1518).activate();return;}if(!_151c){_1517.preAddMUC({name:name,jid:_1518},_151a);}var room=muc.createRoom(_151d);if(!name){name=_151d.getNode();}var _151f={onSuccess:function(){var tab=getChatWindow("chattest").addMUC({jid:_1518,name:name},_151a,rosterWindow);var _1521=room.getOccupants();for(var i=0;i<_1521.length;i++){mucOccupantHandler(_1521[i]);}tab.roster.addListener("contactdblclicked",doOpenContact);},onError:function(_1523){if(_1523.getError()=="401"){getChatWindow("chattest").showMUCPassword({jid:_1518,name:name},null,function(_1524){if(!_1524){getChatWindow("chattest").removeMUCSpinner(_1518);}else{joinMUC(_1517,_1518,name,_151a,_1524,true);}});return;}_1517.removeMUCSpinner(_1518);}};var nick=connection.username;room.join(nick,_151b,_151f,mucMessageHandler,mucOccupantHandler);}var mucMessageHandler={messageReceived:function(_1526){var from=_1526.getFrom();var room=from.toBareJID();var nick=from.getResource();var body=_1526.getBody();var _152b=connection.username==nick;var time=_1526.getExtension("x","jabber:x:delay");if((time||!_152b)&&body){if(time){time=new XMPP.DelayInformation(time).getDate().toLocaleTimeString();}if(nick){addMessage(room,nick,body.body,_152b,time);}else{getChatWindow("chattest").addStatusMessage(room,body.body);}}},invitationDeclined:function(_152d){var jid=_152d.from;var _152f=getContact(jid);var name=jid;if(_152f){name=_152f.name;}getChatWindow("chattest").addStatusMessage(_152d.room.toString(),name+" has declined the invitation to join the room.");},subjectUpdated:function(room,_1532,_1533){getChatWindow("chattest").setSubject(_1533,room.jid.toString());}};function mucOccupantHandler(_1534){var room=_1534.getRoom();var _1536=muc.getRoom(new XMPP.JID(room));if(!_1536||!_1536.isJoined){return;}var jid=_1534.presence.getFrom();var tab=getChatWindow("chattest").tabs[room];if(!tab){return;}var _1539=tab.participants;if(!_1539){return;}var _153a=_1539.getContactByJID(jid.toString());var mode;var _153c;switch(_1534.presence.getType()){case "available":mode=_1534.presence.getMode();if(!mode){mode="available";}_153c=_1534.presence.getStatus();break;default:mode="unavailable";break;}if(!_153a&&mode!="unavailable"){_153a=_1539.addContact({jid:jid,getJID:function(){return this.jid.toString();},status:mode,getName:function(){return _1534.getNick();}});getChatWindow("chattest").addStatusMessage(room,_1534.getNick()+" has joined the room.");}else{if(_153a&&mode=="unavailable"){_153a.changeStatus(mode);_1539.removeContact(jid.toString());getChatWindow("chattest").addStatusMessage(room,_1534.getNick()+" has left the room.");}else{if(_153a){_153a.changeStatus(mode);}}}}function handleTabClosed(_153d,tab){switch(tab.type){case "muc-room":muc.getRoom(_153d.jid).leave();break;case "chat":var _153f=chatManager.getSession(new XMPP.JID(_153d.jid.toString()));if(_153f){chatManager.closeChatSession(_153f);}break;}}function handleMUCInvite(_1540,_1541,_1542){muc.getRoom(_1542).invite(new XMPP.JID(_1541));var _1543=getContact(_1541);var _1544=_1543.name+" has been invited to join the room.";_1540.addStatusMessage(_1542,_1544);}function chatSessionClosed(_1545,_1546){console.debug("Chat session closed.");}var chatListener={messageRecieved:function(_1547,_1548){if(!_1548.getBody()||_1548.getBody().body==""){return;}var name=getChatWindow("chattest").tabs[_1547.getJIDString()].contact.name;addMessage(_1547.getJIDString(),name,_1548.getBody().body);}};function doEmoticons(){var _154a=[["angry",/&gt;:o|&gt;:-o|&gt;:O|&gt;:-O/g],["confused",/\?:\|/g],["cool",/B-\)|8-\)/g],["cry",/:\'\(/g],["devil",/\]:\)/g],["grin",/:-D|:D/g],["happy",/:-\)|:\)/g],["laugh",/:\^0/g],["love",/:x/g],["mischief",/;\\/g],["sad",/:-\(|:\(/g],["silly",/:-p|:-P|:P|:p/g],["wink",/;-\)|;\)/g]];_154a.each(function(_154b){jive.spank.chat.Filter.add(_154b[0],_154b[1],"<img src=\"resources/images/emoticons/"+_154b[0]+".gif\" alt=\"\" />");});jive.spank.chat.Filter.add("uri",/\b(\w+?:\/\/[^\s+\"\<\>]+)/ig,"<a href=\"$1\" target=\"_blank\">$1</a>");jive.spank.chat.Filter.add("webaddress",/(\s|^)(www\.[^\s+\"\<\>]+)/ig,"<a href=\"http://$2\" target=\"_blank\">$2</a>");}jive_groupchat_config_defaults={width:750,height:450,x:0,y:0,fitToParent:"true",constrained:"false",draggable:"false",resizable:"true",closable:"true",bottomPane:"false",mucServer:"conference.localhost",server:"localhost",connectionAddress:"localhost:7080",roomName:"test"};function jive_configureGroupChat(){if(!window.jive_groupchat_config){window.jive_groupchat_config={};}for(var key in jive_groupchat_config_defaults){if(!jive_groupchat_config[key]){jive_groupchat_config[key]=jive_groupchat_config_defaults[key];}}if(jive_groupchat_config["fitToParent"]){jive_groupchat_config["width"]=null;jive_groupchat_config["height"]=null;}}jive_configureGroupChat();MessageHandler={subjectUpdated:function(room,_154e,_154f){window.controller.chatWindow.setSubject(_154f,room.jid.toString());},messageReceived:function(_1550){var from=_1550.getFrom();var room=from.toBareJID();var nick=from.getResource();var _1554=_1550.getBody();var local=window.controller.nickname.toLowerCase()==nick;_1554.mentioned=(_1554.body.indexOf(window.controller.nickname.toLowerCase())>-1)?"mentioned":null;var t=_1550.getExtension("x","jabber:x:delay");if((t||!local)&&_1554){if(t){t=new XMPP.DelayInformation(t).getDate().toLocaleTimeString();}window.controller.chatWindow.addMessage(room,nick,_1554,local,t);}}};controller={chatWindow:null,conf:null,connection:null,connectionSuccessful:function(conn){this.connection=conn;conn.login();window.onbeforeunload=conn.disconnect;},connectionFailed:function(_1558,error){alert("Error: "+error);},authenticationSuccessful:function(conn){this.chatWindow=new jive.spank.chat.ChatWindow("groupchat",window.jive_groupchat_config);if(window.jive_groupchat_config["fitToParent"]=="true"){window.resizeHandler();}this.chatManager=new org.jive.spank.chat.Manager(conn,window.jive_groupchat_config["server"],false);this.mucManager=new org.jive.spank.muc.Manager(conn,this.chatManager);this.joinChat();},joinChat:function(){this.conf=this.mucManager.createRoom(new XMPP.JID(window.jive_groupchat_config["roomName"]+"@"+window.jive_groupchat_config["mucServer"]));this.nickname="User"+Math.floor(Math.random()*500);this.conf.join(this.nickname,"",this,MessageHandler,this.occupantListener);},authenticationFailed:function(_155b,error){alert("Authentication failed: "+error);},connectionClosed:function(_155d,error){},occupantListener:function(_155f){var room=_155f.getRoom();var _1561=window.controller.mucManager.getRoom(new XMPP.JID(room));if(!_1561||!_1561.isJoined){return;}var jid=_155f.presence.getFrom();var tab=window.controller.chatWindow.tabs[room];if(!tab){return;}var _1564=tab.participants;if(!_1564){return;}var _1565=_1564.getContactByJID(jid.toString());var mode;var _1567;switch(_155f.presence.getType()){case "available":mode=_155f.presence.getMode();if(!mode){mode="available";}_1567=_155f.presence.getStatus();break;default:mode="unavailable";break;}if(!_1565&&mode!="unavailable"){_1565=_1564.addContact({jid:jid,getJID:function(){return this.jid.toString();},status:mode,getName:function(){return _155f.getNick();}});window.controller.chatWindow.addStatusMessage(room,_155f.getNick()+" has joined the room.");}else{if(_1565&&mode=="unavailable"){_1565.changeStatus(mode);_1564.removeContact(jid.toString());window.controller.chatWindow.addStatusMessage(room,_155f.getNick()+" has left the room.");}else{if(_1565){_1565.changeStatus(mode);}}}},sendMessage:function(_1568,value){this.completionState={index:0,completed:null,original:null};var jid=new XMPP.JID(this.nickname);this.conf.sendMessage(value,org.jive.spank.x.chatstate.getManager(this.chatManager).setCurrentState("active",jid));this.chatWindow.addMessage(window.controller.conf.jid,this.nickname,{body:value,isLocal:true},true);},completionState:{index:0,completed:null,original:null},completeNick:function(jid,_156c,_156d){jid=new XMPP.JID(jid);var room=this.mucManager.getRoom(jid);var _156f=room.getOccupants();var nick;var state=this.completionState;var _1572=0;if(state.original==null||state.completed!=_156c){state.original=_156c;}for(var i=state.index;i<_156f.length&&_1572<_156f.length;i++){_1572++;state.index=i+1;nick=_156f[i].getNick();if(state.index>=_156f.length){state.index=0;i=0;}if(nick.indexOf(state.original)==0&&state.original.length<nick.length){state.completed=nick+":";_156d.dom.value=state.completed;_156d.dom.selectionStart=state.original.length;_156d.dom.selectionEnd=_156d.dom.value.length;return;}}},handleNameChange:function(_1574,_1575,_1576){this.nickname=_1576;this.conf.changeNickname(_1576);},sendTimeStamp:function(){this.chatWindow.addStatusMessage(this.conf.jid,new Date().toString());window.setTimeout(this.sendTimeStamp.bind(this),300000);},onSuccess:function(_1577){var _1578=window.controller.chatWindow;var room=window.controller.conf;_1578.addMUC({name:room.nickname,jid:room.jid});var _157a=room.getOccupants();for(var i=0;i<_157a.length;i++){window.controller.occupantListener(_157a[i]);}_1578.prepUserPane();_1578.show();_1578.finalizeUserPane(this.nickname);_1578.setSubject("");getEl(_1578.tabId+"-layout").dom.parentNode.style.position="absolute";_1578.addListener("message",this.sendMessage.bind(this));_1578.addListener("nickcomplete",this.completeNick.bind(this));_1578.addListener("changenameinmuc",this.handleNameChange.bind(this));_1578.dialog.addListener("beforeshow",this.joinChat,window.controller,true);_1578.dialog.addListener("beforehide",this.conf.leave.bind(this.conf));window.setTimeout(_1578.addStatusMessage.bind(_1578),2000,room.jid,"Welcome to "+room.jid+" you can change your name by clicking on it in the upper-right corner");window.setTimeout(window.controller.sendTimeStamp.bind(window.controller),1000);}};var resizeHandler=function(){var dlog=window.controller.chatWindow.dialog;dlog.beginUpdate();dlog.getEl().fitToParent();dlog.resizeTo(dlog.getEl().getWidth(),dlog.getEl().getHeight());var xy=YAHOO.util.Dom.getXY(dlog.getEl().dom.parentNode);dlog.moveTo(xy[0],xy[1]);dlog.endUpdate();};var toggleTheme=function(){getEl(document.body,true).toggleClass("jivetheme-muc");};YAHOO.ext.EventManager.onDocumentReady(function(){window.connection=new XMPPConnection("/http-bind/",window.jive_groupchat_config["connectionAddress"],controller);connection.connect();toggleTheme();});if(window.jive_groupchat_config["fitToParent"]=="true"){YAHOO.ext.EventManager.onWindowResize(resizeHandler,window,false);}